var dubplus = (function () {
  'use strict';
  /*!
     /#######            /##                
    | ##__  ##          | ##          /##   
    | ##  \ ## /##   /##| #######    | ##   
    | ##  | ##| ##  | ##| ##__  ## /########
    | ##  | ##| ##  | ##| ##  \ ##|__  ##__/
    | ##  | ##| ##  | ##| ##  | ##   | ##   
    | #######/|  ######/| #######/   |__/   
    |_______/  \______/ |_______/           
                                            
                                            
    https://github.com/DubPlus/DubPlus

    MIT License 

    Copyright (c) 2024 DubPlus

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.
*/ var e;
  const t = !1;
  var n = Array.isArray,
    o = Array.prototype.indexOf,
    i = Array.from,
    s = Object.defineProperty,
    r = Object.getOwnPropertyDescriptor,
    a = Object.getOwnPropertyDescriptors,
    l = Object.prototype,
    u = Array.prototype,
    c = Object.getPrototypeOf,
    d = Object.isExtensible;
  const p = () => {};
  function f(e) {
    return e();
  }
  function m(e) {
    for (var t = 0; t < e.length; t++) e[t]();
  }
  const v = 32,
    h = 64,
    b = 128,
    g = 256,
    w = 512,
    y = 1024,
    x = 2048,
    k = 4096,
    E = 8192,
    _ = 16384,
    S = 65536,
    O = 1 << 20,
    U = 1 << 21,
    C = Symbol('$state'),
    z = Symbol('');
  function L(e) {
    return e === this.v;
  }
  function Q(e, t) {
    return e != e
      ? t == t
      : e !== t ||
          (null !== e && 'object' == typeof e) ||
          'function' == typeof e;
  }
  function M(e) {
    return !Q(e, this.v);
  }
  let $ = !1;
  const I = Symbol(),
    N = 'http://www.w3.org/1999/xhtml';
  function T(e) {
    throw new Error('https://svelte.dev/e/lifecycle_outside_component');
  }
  let A = null;
  function D(e) {
    A = e;
  }
  function j(e, t = !1, n) {
    var o = (A = {
      p: A,
      c: null,
      d: !1,
      e: null,
      m: !1,
      s: e,
      x: null,
      l: null,
    });
    $ && !t && (A.l = { s: null, u: null, r1: [], r2: X(!1) }),
      ve(() => {
        o.d = !0;
      });
  }
  function q(e) {
    const t = A;
    if (null !== t) {
      const e = t.e;
      if (null !== e) {
        var n = Be,
          o = Fe;
        t.e = null;
        try {
          for (var i = 0; i < e.length; i++) {
            var s = e[i];
            Re(s.effect), Ve(s.reaction), be(s.fn);
          }
        } finally {
          Re(n), Ve(o);
        }
      }
      (A = t.p), (t.m = !0);
    }
    return {};
  }
  function F() {
    return !$ || (null !== A && null === A.l);
  }
  function P(e) {
    if ('object' != typeof e || null === e || C in e) return e;
    const t = c(e);
    if (t !== l && t !== u) return e;
    var o = new Map(),
      i = n(e),
      s = G(0),
      a = Fe,
      d = (e) => {
        var t = Fe;
        Ve(a);
        var n = e();
        return Ve(t), n;
      };
    return (
      i && o.set('length', G(e.length)),
      new Proxy(e, {
        defineProperty(e, t, n) {
          ('value' in n &&
            !1 !== n.configurable &&
            !1 !== n.enumerable &&
            !1 !== n.writable) ||
            (function () {
              throw new Error('https://svelte.dev/e/state_descriptors_fixed');
            })();
          var i = o.get(t);
          return (
            void 0 === i
              ? ((i = d(() => G(n.value))), o.set(t, i))
              : ee(
                  i,
                  d(() => P(n.value)),
                ),
            !0
          );
        },
        deleteProperty(e, t) {
          var n = o.get(t);
          if (void 0 === n)
            t in e &&
              (o.set(
                t,
                d(() => G(I)),
              ),
              V(s));
          else {
            if (i && 'string' == typeof t) {
              var r = o.get('length'),
                a = Number(t);
              Number.isInteger(a) && a < r.v && ee(r, a);
            }
            ee(n, I), V(s);
          }
          return !0;
        },
        get(t, n, i) {
          var s;
          if (n === C) return e;
          var a = o.get(n),
            l = n in t;
          if (
            (void 0 !== a ||
              (l && !(null == (s = r(t, n)) ? void 0 : s.writable)) ||
              ((a = d(() => G(P(l ? t[n] : I)))), o.set(n, a)),
            void 0 !== a)
          ) {
            var u = mt(a);
            return u === I ? void 0 : u;
          }
          return Reflect.get(t, n, i);
        },
        getOwnPropertyDescriptor(e, t) {
          var n = Reflect.getOwnPropertyDescriptor(e, t);
          if (n && 'value' in n) {
            var i = o.get(t);
            i && (n.value = mt(i));
          } else if (void 0 === n) {
            var s = o.get(t),
              r = null == s ? void 0 : s.v;
            if (void 0 !== s && r !== I)
              return {
                enumerable: !0,
                configurable: !0,
                value: r,
                writable: !0,
              };
          }
          return n;
        },
        has(e, t) {
          var n;
          if (t === C) return !0;
          var i = o.get(t),
            s = (void 0 !== i && i.v !== I) || Reflect.has(e, t);
          if (
            (void 0 !== i ||
              (null !== Be &&
                (!s || (null == (n = r(e, t)) ? void 0 : n.writable)))) &&
            (void 0 === i && ((i = d(() => G(s ? P(e[t]) : I))), o.set(t, i)),
            mt(i) === I)
          )
            return !1;
          return s;
        },
        set(e, t, n, a) {
          var l,
            u = o.get(t),
            c = t in e;
          if (i && 'length' === t)
            for (var p = n; p < u.v; p += 1) {
              var f = o.get(p + '');
              void 0 !== f
                ? ee(f, I)
                : p in e && ((f = d(() => G(I))), o.set(p + '', f));
            }
          void 0 === u
            ? (c && !(null == (l = r(e, t)) ? void 0 : l.writable)) ||
              (ee(
                (u = d(() => G(void 0))),
                d(() => P(n)),
              ),
              o.set(t, u))
            : ((c = u.v !== I),
              ee(
                u,
                d(() => P(n)),
              ));
          var m = Reflect.getOwnPropertyDescriptor(e, t);
          if (((null == m ? void 0 : m.set) && m.set.call(a, n), !c)) {
            if (i && 'string' == typeof t) {
              var v = o.get('length'),
                h = Number(t);
              Number.isInteger(h) && h >= v.v && ee(v, h + 1);
            }
            V(s);
          }
          return !0;
        },
        ownKeys(e) {
          mt(s);
          var t = Reflect.ownKeys(e).filter((e) => {
            var t = o.get(e);
            return void 0 === t || t.v !== I;
          });
          for (var [n, i] of o) i.v === I || n in e || t.push(n);
          return t;
        },
        setPrototypeOf() {
          !(function () {
            throw new Error('https://svelte.dev/e/state_prototype_fixed');
          })();
        },
      })
    );
  }
  function V(e, t = 1) {
    ee(e, e.v + t);
  }
  function B(e) {
    var t = 2050,
      n = null !== Fe && 2 & Fe.f ? Fe : null;
    null === Be || (null !== n && n.f & g) ? (t |= g) : (Be.f |= O);
    return {
      ctx: A,
      deps: null,
      effects: null,
      equals: L,
      f: t,
      fn: e,
      reactions: null,
      rv: 0,
      v: null,
      wv: 0,
      parent: n ?? Be,
    };
  }
  function R(e) {
    const t = B(e);
    return Ke(t), t;
  }
  function J(e) {
    const t = B(e);
    return (t.equals = M), t;
  }
  function K(e) {
    var t = e.effects;
    if (null !== t) {
      e.effects = null;
      for (var n = 0; n < t.length; n += 1) _e(t[n]);
    }
  }
  function W(e) {
    var t,
      n = Be;
    Re(
      (function (e) {
        for (var t = e.parent; null !== t; ) {
          if (!(2 & t.f)) return t;
          t = t.parent;
        }
        return null;
      })(e),
    );
    try {
      K(e), (t = st(e));
    } finally {
      Re(n);
    }
    return t;
  }
  function Y(e) {
    var t = W(e);
    bt(e, (Ze || e.f & g) && null !== e.deps ? k : y),
      e.equals(t) || ((e.v = t), (e.wv = et()));
  }
  const H = new Map();
  function X(e, t) {
    return { f: 0, v: e, reactions: null, equals: L, rv: 0, wv: 0 };
  }
  function G(e, t) {
    const n = X(e);
    return Ke(n), n;
  }
  function Z(e, t = !1) {
    var n;
    const o = X(e);
    return (
      t || (o.equals = M),
      $ && null !== A && null !== A.l && ((n = A.l).s ?? (n.s = [])).push(o),
      o
    );
  }
  function ee(e, t, n = !1) {
    return (
      null !== Fe &&
        !Pe &&
        F() &&
        18 & Fe.f &&
        !(null == Je ? void 0 : Je.includes(e)) &&
        (function () {
          throw new Error('https://svelte.dev/e/state_unsafe_mutation');
        })(),
      te(e, n ? P(t) : t)
    );
  }
  function te(e, t) {
    if (!e.equals(t)) {
      var n = e.v;
      De ? H.set(e, t) : H.set(e, n),
        (e.v = t),
        2 & e.f && (e.f & x && W(e), bt(e, e.f & g ? k : y)),
        (e.wv = et()),
        ne(e, x),
        F() &&
          null !== Be &&
          Be.f & y &&
          !(96 & Be.f) &&
          (null === He
            ? (function (e) {
                He = e;
              })([e])
            : He.push(e));
    }
    return t;
  }
  function ne(e, t) {
    var n = e.reactions;
    if (null !== n)
      for (var o = F(), i = n.length, s = 0; s < i; s++) {
        var r = n[s],
          a = r.f;
        a & x ||
          ((o || r !== Be) &&
            (bt(r, t), 1280 & a && (2 & a ? ne(r, k) : pt(r))));
      }
  }
  var oe, ie, se, re;
  function ae(e = '') {
    return document.createTextNode(e);
  }
  function le(e) {
    return se.call(e);
  }
  function ue(e) {
    return re.call(e);
  }
  function ce(e, t) {
    return le(e);
  }
  function de(e, t) {
    var n = le(e);
    return n instanceof Comment && '' === n.data ? ue(n) : n;
  }
  function pe(e, t = 1, n = !1) {
    let o = e;
    for (; t--; ) o = ue(o);
    return o;
  }
  function fe(e) {
    null === Be &&
      null === Fe &&
      (function () {
        throw new Error('https://svelte.dev/e/effect_orphan');
      })(),
      null !== Fe &&
        Fe.f & g &&
        null === Be &&
        (function () {
          throw new Error('https://svelte.dev/e/effect_in_unowned_derived');
        })(),
      De &&
        (function () {
          throw new Error('https://svelte.dev/e/effect_in_teardown');
        })();
  }
  function me(e, t, n, o = !0) {
    var i = Be,
      s = {
        ctx: A,
        deps: null,
        nodes_start: null,
        nodes_end: null,
        f: e | x,
        first: null,
        fn: t,
        last: null,
        next: null,
        parent: i,
        prev: null,
        teardown: null,
        transitions: null,
        wv: 0,
      };
    if (n)
      try {
        lt(s), (s.f |= 32768);
      } catch (e) {
        throw (_e(s), e);
      }
    else null !== t && pt(s);
    if (
      !(
        n &&
        null === s.deps &&
        null === s.first &&
        null === s.nodes_start &&
        null === s.teardown &&
        !(1048704 & s.f)
      ) &&
      o &&
      (null !== i &&
        (function (e, t) {
          var n = t.last;
          null === n
            ? (t.last = t.first = e)
            : ((n.next = e), (e.prev = n), (t.last = e));
        })(s, i),
      null !== Fe && 2 & Fe.f)
    ) {
      var r = Fe;
      (r.effects ?? (r.effects = [])).push(s);
    }
    return s;
  }
  function ve(e) {
    const t = me(8, null, !1);
    return bt(t, y), (t.teardown = e), t;
  }
  function he(e) {
    if ((fe(), !(null !== Be && !!(Be.f & v) && null !== A && !A.m)))
      return be(e);
    var t = A;
    (t.e ?? (t.e = [])).push({ fn: e, effect: Be, reaction: Fe });
  }
  function be(e) {
    return me(4, e, !1);
  }
  function ge(e) {
    return me(8, e, !0);
  }
  function we(e, t = [], n = B) {
    const o = t.map(n);
    return ye(() => e(...o.map(mt)));
  }
  function ye(e, t = 0) {
    return me(24 | t, e, !0);
  }
  function xe(e, t = !0) {
    return me(40, e, !0, t);
  }
  function ke(e) {
    var t = e.teardown;
    if (null !== t) {
      const e = De,
        n = Fe;
      je(!0), Ve(null);
      try {
        t.call(null);
      } finally {
        je(e), Ve(n);
      }
    }
  }
  function Ee(e, t = !1) {
    var n = e.first;
    for (e.first = e.last = null; null !== n; ) {
      var o = n.next;
      n.f & h ? (n.parent = null) : _e(n, t), (n = o);
    }
  }
  function _e(e, t = !0) {
    var n = !1;
    (t || 524288 & e.f) &&
      null !== e.nodes_start &&
      (!(function (e, t) {
        for (; null !== e; ) {
          var n = e === t ? null : ue(e);
          e.remove(), (e = n);
        }
      })(e.nodes_start, e.nodes_end),
      (n = !0)),
      Ee(e, t && !n),
      at(e, 0),
      bt(e, _);
    var o = e.transitions;
    if (null !== o) for (const e of o) e.stop();
    ke(e);
    var i = e.parent;
    null !== i && null !== i.first && Se(e),
      (e.next =
        e.prev =
        e.teardown =
        e.ctx =
        e.deps =
        e.fn =
        e.nodes_start =
        e.nodes_end =
          null);
  }
  function Se(e) {
    var t = e.parent,
      n = e.prev,
      o = e.next;
    null !== n && (n.next = o),
      null !== o && (o.prev = n),
      null !== t &&
        (t.first === e && (t.first = o), t.last === e && (t.last = n));
  }
  function Oe(e, t) {
    var n = [];
    Ce(e, n, !0),
      Ue(n, () => {
        _e(e), t && t();
      });
  }
  function Ue(e, t) {
    var n = e.length;
    if (n > 0) {
      var o = () => --n || t();
      for (var i of e) i.out(o);
    } else t();
  }
  function Ce(e, t, n) {
    if (!(e.f & E)) {
      if (((e.f ^= E), null !== e.transitions))
        for (const o of e.transitions) (o.is_global || n) && t.push(o);
      for (var o = e.first; null !== o; ) {
        var i = o.next;
        Ce(o, t, !!(!!(o.f & S) || !!(o.f & v)) && n), (o = i);
      }
    }
  }
  function ze(e) {
    Le(e, !0);
  }
  function Le(e, t) {
    if (e.f & E) {
      (e.f ^= E), e.f & y || (e.f ^= y), tt(e) && (bt(e, x), pt(e));
      for (var n = e.first; null !== n; ) {
        var o = n.next;
        Le(n, !!(!!(n.f & S) || !!(n.f & v)) && t), (n = o);
      }
      if (null !== e.transitions)
        for (const n of e.transitions) (n.is_global || t) && n.in();
    }
  }
  let Qe = [];
  function Me() {
    var e = Qe;
    (Qe = []), m(e);
  }
  function $e(e) {
    0 === Qe.length && queueMicrotask(Me), Qe.push(e);
  }
  let Ie = !1,
    Ne = !1,
    Te = null,
    Ae = !1,
    De = !1;
  function je(e) {
    De = e;
  }
  let qe = [],
    Fe = null,
    Pe = !1;
  function Ve(e) {
    Fe = e;
  }
  let Be = null;
  function Re(e) {
    Be = e;
  }
  let Je = null;
  function Ke(e) {
    null !== Fe && Fe.f & U && (null === Je ? (Je = [e]) : Je.push(e));
  }
  let We = null,
    Ye = 0,
    He = null;
  let Xe = 1,
    Ge = 0,
    Ze = !1;
  function et() {
    return ++Xe;
  }
  function tt(e) {
    var t,
      n = e.f;
    if (n & x) return !0;
    if (n & k) {
      var o = e.deps,
        i = !!(n & g);
      if (null !== o) {
        var s,
          r,
          a = !!(n & w),
          l = i && null !== Be && !Ze,
          u = o.length;
        if (a || l) {
          var c = e,
            d = c.parent;
          for (s = 0; s < u; s++)
            (r = o[s]),
              (!a &&
                (null == (t = null == r ? void 0 : r.reactions)
                  ? void 0
                  : t.includes(c))) ||
                (r.reactions ?? (r.reactions = [])).push(c);
          a && (c.f ^= w), !l || null === d || d.f & g || (c.f ^= g);
        }
        for (s = 0; s < u; s++)
          if ((tt((r = o[s])) && Y(r), r.wv > e.wv)) return !0;
      }
      (i && (null === Be || Ze)) || bt(e, y);
    }
    return !1;
  }
  function nt(e) {
    return !(e.f & _ || (null !== e.parent && e.parent.f & b));
  }
  function ot(e, t, n, o) {
    if (Ie) {
      if ((null === n && (Ie = !1), nt(t))) throw e;
    } else if (
      (null !== n && (Ie = !0),
      (function (e, t) {
        for (var n = t; null !== n; ) {
          if (n.f & b)
            try {
              return void n.fn(e);
            } catch {
              n.f ^= b;
            }
          n = n.parent;
        }
        throw ((Ie = !1), e);
      })(e, t),
      nt(t))
    )
      throw e;
  }
  function it(e, t, n = !0) {
    var o = e.reactions;
    if (null !== o)
      for (var i = 0; i < o.length; i++) {
        var s = o[i];
        (null == Je ? void 0 : Je.includes(e)) ||
          (2 & s.f
            ? it(s, t, !1)
            : t === s && (n ? bt(s, x) : s.f & y && bt(s, k), pt(s)));
      }
  }
  function st(e) {
    var t,
      n = We,
      o = Ye,
      i = He,
      s = Fe,
      r = Ze,
      a = Je,
      l = A,
      u = Pe,
      c = e.f;
    (We = null),
      (Ye = 0),
      (He = null),
      (Ze = !!(c & g) && (Pe || !Ae || null === Fe)),
      (Fe = 96 & c ? null : e),
      (Je = null),
      D(e.ctx),
      (Pe = !1),
      Ge++,
      (e.f |= U);
    try {
      var d = (0, e.fn)(),
        p = e.deps;
      if (null !== We) {
        var f;
        if ((at(e, Ye), null !== p && Ye > 0))
          for (p.length = Ye + We.length, f = 0; f < We.length; f++)
            p[Ye + f] = We[f];
        else e.deps = p = We;
        if (!Ze)
          for (f = Ye; f < p.length; f++)
            ((t = p[f]).reactions ?? (t.reactions = [])).push(e);
      } else null !== p && Ye < p.length && (at(e, Ye), (p.length = Ye));
      if (F() && null !== He && !Pe && null !== p && !(6146 & e.f))
        for (f = 0; f < He.length; f++) it(He[f], e);
      return (
        null !== s &&
          s !== e &&
          (Ge++, null !== He && (null === i ? (i = He) : i.push(...He))),
        d
      );
    } finally {
      (We = n),
        (Ye = o),
        (He = i),
        (Fe = s),
        (Ze = r),
        (Je = a),
        D(l),
        (Pe = u),
        (e.f ^= U);
    }
  }
  function rt(e, t) {
    let n = t.reactions;
    if (null !== n) {
      var i = o.call(n, e);
      if (-1 !== i) {
        var s = n.length - 1;
        0 === s ? (n = t.reactions = null) : ((n[i] = n[s]), n.pop());
      }
    }
    null === n &&
      2 & t.f &&
      (null === We || !We.includes(t)) &&
      (bt(t, k), 768 & t.f || (t.f ^= w), K(t), at(t, 0));
  }
  function at(e, t) {
    var n = e.deps;
    if (null !== n) for (var o = t; o < n.length; o++) rt(e, n[o]);
  }
  function lt(e) {
    var n = e.f;
    if (!(n & _)) {
      bt(e, y);
      var o = Be,
        i = A,
        s = Ae;
      (Be = e), (Ae = !0);
      try {
        16 & n
          ? (function (e) {
              for (var t = e.first; null !== t; ) {
                var n = t.next;
                t.f & v || _e(t), (t = n);
              }
            })(e)
          : Ee(e),
          ke(e);
        var r = st(e);
        (e.teardown = 'function' == typeof r ? r : null), (e.wv = Xe);
        e.deps;
        t;
      } catch (t) {
        ot(t, e, o, i || e.ctx);
      } finally {
        (Ae = s), (Be = o);
      }
    }
  }
  function ut() {
    try {
      !(function () {
        throw new Error('https://svelte.dev/e/effect_update_depth_exceeded');
      })();
    } catch (e) {
      if (null === Te) throw e;
      ot(e, Te, null);
    }
  }
  function ct() {
    var e = Ae;
    try {
      var t = 0;
      for (Ae = !0; qe.length > 0; ) {
        t++ > 1e3 && ut();
        var n = qe,
          o = n.length;
        qe = [];
        for (var i = 0; i < o; i++) {
          dt(ft(n[i]));
        }
        H.clear();
      }
    } finally {
      (Ne = !1), (Ae = e), (Te = null);
    }
  }
  function dt(e) {
    var t = e.length;
    if (0 !== t)
      for (var n = 0; n < t; n++) {
        var o = e[n];
        if (!(24576 & o.f))
          try {
            tt(o) &&
              (lt(o),
              null === o.deps &&
                null === o.first &&
                null === o.nodes_start &&
                (null === o.teardown ? Se(o) : (o.fn = null)));
          } catch (e) {
            ot(e, o, null, o.ctx);
          }
      }
  }
  function pt(e) {
    Ne || ((Ne = !0), queueMicrotask(ct));
    for (var t = (Te = e); null !== t.parent; ) {
      var n = (t = t.parent).f;
      if (96 & n) {
        if (!(n & y)) return;
        t.f ^= y;
      }
    }
    qe.push(t);
  }
  function ft(e) {
    for (var t = [], n = e; null !== n; ) {
      var o = n.f,
        i = !!(96 & o);
      if (!((i && !!(o & y)) || o & E)) {
        if (4 & o) t.push(n);
        else if (i) n.f ^= y;
        else {
          var s = Fe;
          try {
            (Fe = n), tt(n) && lt(n);
          } catch (e) {
            ot(e, n, null, n.ctx);
          } finally {
            Fe = s;
          }
        }
        var r = n.first;
        if (null !== r) {
          n = r;
          continue;
        }
      }
      var a = n.parent;
      for (n = n.next; null === n && null !== a; ) (n = a.next), (a = a.parent);
    }
    return t;
  }
  function mt(e) {
    var t = !!(2 & e.f);
    if (null === Fe || Pe) {
      if (t && null === e.deps && null === e.effects) {
        var n = e,
          o = n.parent;
        null === o || o.f & g || (n.f ^= g);
      }
    } else if (!(null == Je ? void 0 : Je.includes(e))) {
      var i = Fe.deps;
      e.rv < Ge &&
        ((e.rv = Ge),
        null === We && null !== i && i[Ye] === e
          ? Ye++
          : null === We
            ? (We = [e])
            : (Ze && We.includes(e)) || We.push(e));
    }
    return t && tt((n = e)) && Y(n), De && H.has(e) ? H.get(e) : e.v;
  }
  function vt(e) {
    var t = Pe;
    try {
      return (Pe = !0), e();
    } finally {
      Pe = t;
    }
  }
  const ht = -7169;
  function bt(e, t) {
    e.f = (e.f & ht) | t;
  }
  function gt(e) {
    if ('object' == typeof e && e && !(e instanceof EventTarget))
      if (C in e) wt(e);
      else if (!Array.isArray(e))
        for (let t in e) {
          const n = e[t];
          'object' == typeof n && n && C in n && wt(n);
        }
  }
  function wt(e, t = new Set()) {
    if (
      !(
        'object' != typeof e ||
        null === e ||
        e instanceof EventTarget ||
        t.has(e)
      )
    ) {
      t.add(e), e instanceof Date && e.getTime();
      for (let n in e)
        try {
          wt(e[n], t);
        } catch (e) {}
      const n = c(e);
      if (
        n !== Object.prototype &&
        n !== Array.prototype &&
        n !== Map.prototype &&
        n !== Set.prototype &&
        n !== Date.prototype
      ) {
        const t = a(n);
        for (let n in t) {
          const o = t[n].get;
          if (o)
            try {
              o.call(e);
            } catch (e) {}
        }
      }
    }
  }
  const yt = ['touchstart', 'touchmove'];
  function xt(e) {
    return yt.includes(e);
  }
  let kt = !1;
  function Et(e) {
    var t = Fe,
      n = Be;
    Ve(null), Re(null);
    try {
      return e();
    } finally {
      Ve(t), Re(n);
    }
  }
  function _t(e, t, n, o = n) {
    e.addEventListener(t, () => Et(n));
    const i = e.__on_r;
    (e.__on_r = i
      ? () => {
          i(), o(!0);
        }
      : () => o(!0)),
      kt ||
        ((kt = !0),
        document.addEventListener(
          'reset',
          (e) => {
            Promise.resolve().then(() => {
              var t;
              if (!e.defaultPrevented)
                for (const n of e.target.elements)
                  null == (t = n.__on_r) || t.call(n);
            });
          },
          { capture: !0 },
        ));
  }
  const St = new Set(),
    Ot = new Set();
  function Ut(e, t, n, o, i) {
    var s = { capture: o, passive: i },
      r = (function (e, t, n, o = {}) {
        function i(e) {
          if ((o.capture || zt.call(t, e), !e.cancelBubble))
            return Et(() => (null == n ? void 0 : n.call(this, e)));
        }
        return (
          e.startsWith('pointer') || e.startsWith('touch') || 'wheel' === e
            ? $e(() => {
                t.addEventListener(e, i, o);
              })
            : t.addEventListener(e, i, o),
          i
        );
      })(e, t, n, s);
    (t !== document.body && t !== window && t !== document) ||
      ve(() => {
        t.removeEventListener(e, r, s);
      });
  }
  function Ct(e) {
    for (var t = 0; t < e.length; t++) St.add(e[t]);
    for (var n of Ot) n(e);
  }
  function zt(e) {
    var t,
      o = this,
      i = o.ownerDocument,
      r = e.type,
      a = (null == (t = e.composedPath) ? void 0 : t.call(e)) || [],
      l = a[0] || e.target,
      u = 0,
      c = e.__root;
    if (c) {
      var d = a.indexOf(c);
      if (-1 !== d && (o === document || o === window))
        return void (e.__root = o);
      var p = a.indexOf(o);
      if (-1 === p) return;
      d <= p && (u = d);
    }
    if ((l = a[u] || e.target) !== o) {
      s(e, 'currentTarget', { configurable: !0, get: () => l || i });
      var f = Fe,
        m = Be;
      Ve(null), Re(null);
      try {
        for (var v, h = []; null !== l; ) {
          var b = l.assignedSlot || l.parentNode || l.host || null;
          try {
            var g = l['__' + r];
            if (null != g && (!l.disabled || e.target === l))
              if (n(g)) {
                var [w, ...y] = g;
                w.apply(l, [e, ...y]);
              } else g.call(l, e);
          } catch (e) {
            v ? h.push(e) : (v = e);
          }
          if (e.cancelBubble || b === o || null === b) break;
          l = b;
        }
        if (v) {
          for (let e of h)
            queueMicrotask(() => {
              throw e;
            });
          throw v;
        }
      } finally {
        (e.__root = o), delete e.currentTarget, Ve(f), Re(m);
      }
    }
  }
  function Lt(e) {
    var t = document.createElement('template');
    return (t.innerHTML = e), t.content;
  }
  function Qt(e, t) {
    var n = Be;
    null === n.nodes_start && ((n.nodes_start = e), (n.nodes_end = t));
  }
  function Mt(e, t) {
    var n,
      o = !!(1 & t),
      i = !!(2 & t),
      s = !e.startsWith('<!>');
    return () => {
      void 0 === n && ((n = Lt(s ? e : '<!>' + e)), o || (n = le(n)));
      var t = i || ie ? document.importNode(n, !0) : n.cloneNode(!0);
      o ? Qt(le(t), t.lastChild) : Qt(t, t);
      return t;
    };
  }
  function $t(e, t, n = 'svg') {
    var o,
      i = `<${n}>${!e.startsWith('<!>') ? e : '<!>' + e}</${n}>`;
    return () => {
      if (!o) {
        var e = Lt(i);
        o = le(le(e));
      }
      var t = o.cloneNode(!0);
      return Qt(t, t), t;
    };
  }
  function It(e = '') {
    var t = ae(e + '');
    return Qt(t, t), t;
  }
  function Nt() {
    var e = document.createDocumentFragment(),
      t = document.createComment(''),
      n = ae();
    return e.append(t, n), Qt(t, n), e;
  }
  function Tt(e, t) {
    null !== e && e.before(t);
  }
  function At(e, t) {
    var n = null == t ? '' : 'object' == typeof t ? t + '' : t;
    n !== (e.__t ?? (e.__t = e.nodeValue)) &&
      ((e.__t = n), (e.nodeValue = n + ''));
  }
  const Dt = new Map();
  let jt = new WeakMap();
  function qt(e, t, [n, o] = [0, 0]) {
    var i = e,
      s = null,
      r = null,
      a = I,
      l = !1;
    const u = (e, t = !0) => {
        (l = !0), c(t, e);
      },
      c = (e, t) => {
        a !== (a = e) &&
          (a
            ? (s ? ze(s) : t && (s = xe(() => t(i))),
              r &&
                Oe(r, () => {
                  r = null;
                }))
            : (r ? ze(r) : t && (r = xe(() => t(i, [n + 1, o]))),
              s &&
                Oe(s, () => {
                  s = null;
                })));
      };
    ye(
      () => {
        (l = !1), t(u), l || c(null, null);
      },
      n > 0 ? S : 0,
    );
  }
  function Ft(e, t, o, s, r, a = null) {
    var l = e,
      u = { flags: t, items: new Map(), first: null };
    !(4 & t) || (l = e.appendChild(ae()));
    var c = null,
      d = !1,
      p = J(() => {
        var e = o();
        return n(e) ? e : null == e ? [] : i(e);
      });
    ye(() => {
      var e = mt(p),
        n = e.length;
      (d && 0 === n) ||
        ((d = 0 === n),
        (function (e, t, n, o, s, r, a) {
          var l,
            u,
            c,
            d,
            p,
            f,
            m,
            v,
            h,
            b,
            g = !!(8 & s),
            w = !!(3 & s),
            y = e.length,
            x = t.items,
            k = t.first,
            _ = k,
            S = null,
            O = [],
            U = [];
          if (g)
            for (b = 0; b < y; b += 1)
              (v = r((m = e[b]), b)),
                void 0 !== (h = x.get(v)) &&
                  (null == (l = h.a) || l.measure(),
                  (f ?? (f = new Set())).add(h));
          for (b = 0; b < y; b += 1)
            if (((v = r((m = e[b]), b)), void 0 !== (h = x.get(v)))) {
              if (
                (w && Pt(h, m, b, s),
                h.e.f & E &&
                  (ze(h.e),
                  g &&
                    (null == (u = h.a) || u.unfix(),
                    (f ?? (f = new Set())).delete(h))),
                h !== _)
              ) {
                if (void 0 !== p && p.has(h)) {
                  if (O.length < U.length) {
                    var C,
                      z = U[0];
                    S = z.prev;
                    var L = O[0],
                      Q = O[O.length - 1];
                    for (C = 0; C < O.length; C += 1) Bt(O[C], z, n);
                    for (C = 0; C < U.length; C += 1) p.delete(U[C]);
                    Rt(t, L.prev, Q.next),
                      Rt(t, S, L),
                      Rt(t, Q, z),
                      (_ = z),
                      (S = Q),
                      (b -= 1),
                      (O = []),
                      (U = []);
                  } else
                    p.delete(h),
                      Bt(h, _, n),
                      Rt(t, h.prev, h.next),
                      Rt(t, h, null === S ? t.first : S.next),
                      Rt(t, S, h),
                      (S = h);
                  continue;
                }
                for (O = [], U = []; null !== _ && _.k !== v; )
                  _.e.f & E || (p ?? (p = new Set())).add(_),
                    U.push(_),
                    (_ = _.next);
                if (null === _) continue;
                h = _;
              }
              O.push(h), (S = h), (_ = h.next);
            } else {
              (S = Vt(
                _ ? _.e.nodes_start : n,
                t,
                S,
                null === S ? t.first : S.next,
                m,
                v,
                b,
                o,
                s,
                a,
              )),
                x.set(v, S),
                (O = []),
                (U = []),
                (_ = S.next);
            }
          if (null !== _ || void 0 !== p) {
            for (var M = void 0 === p ? [] : i(p); null !== _; )
              _.e.f & E || M.push(_), (_ = _.next);
            var $ = M.length;
            if ($ > 0) {
              var I = 4 & s && 0 === y ? n : null;
              if (g) {
                for (b = 0; b < $; b += 1) null == (c = M[b].a) || c.measure();
                for (b = 0; b < $; b += 1) null == (d = M[b].a) || d.fix();
              }
              !(function (e, t, n, o) {
                for (var i = [], s = t.length, r = 0; r < s; r++)
                  Ce(t[r].e, i, !0);
                var a = s > 0 && 0 === i.length && null !== n;
                if (a) {
                  var l = n.parentNode;
                  (l.textContent = ''),
                    l.append(n),
                    o.clear(),
                    Rt(e, t[0].prev, t[s - 1].next);
                }
                Ue(i, () => {
                  for (var n = 0; n < s; n++) {
                    var i = t[n];
                    a || (o.delete(i.k), Rt(e, i.prev, i.next)), _e(i.e, !a);
                  }
                });
              })(t, M, I, x);
            }
          }
          g &&
            $e(() => {
              var e;
              if (void 0 !== f) for (h of f) null == (e = h.a) || e.apply();
            });
          (Be.first = t.first && t.first.e), (Be.last = S && S.e);
        })(e, u, l, r, t, s, o),
        null !== a &&
          (0 === n
            ? c
              ? ze(c)
              : (c = xe(() => a(l)))
            : null !== c &&
              Oe(c, () => {
                c = null;
              })),
        mt(p));
    });
  }
  function Pt(e, t, n, o) {
    1 & o && te(e.v, t), 2 & o ? te(e.i, n) : (e.i = n);
  }
  function Vt(e, t, n, o, i, s, r, a, l, u) {
    var c = !!(1 & l) ? (!(16 & l) ? Z(i) : X(i)) : i,
      d = 2 & l ? X(r) : r,
      p = { i: d, v: c, k: s, a: null, e: null, prev: n, next: o };
    try {
      return (
        (p.e = xe(() => a(e, c, d, u), false)),
        (p.e.prev = n && n.e),
        (p.e.next = o && o.e),
        null === n ? (t.first = p) : ((n.next = p), (n.e.next = p.e)),
        null !== o && ((o.prev = p), (o.e.prev = p.e)),
        p
      );
    } finally {
    }
  }
  function Bt(e, t, n) {
    for (
      var o = e.next ? e.next.e.nodes_start : n,
        i = t ? t.e.nodes_start : n,
        s = e.e.nodes_start;
      s !== o;

    ) {
      var r = ue(s);
      i.before(s), (s = r);
    }
  }
  function Rt(e, t, n) {
    null === t ? (e.first = n) : ((t.next = n), (t.e.next = n && n.e)),
      null !== n && ((n.prev = t), (n.e.prev = t && t.e));
  }
  function Jt(e, t, n) {
    var o,
      i,
      s = e;
    ye(() => {
      o !== (o = t()) &&
        (i && (Oe(i), (i = null)), o && (i = xe(() => n(s, o))));
    }, S);
  }
  function Kt(e, t, n) {
    be(() => {
      var o = vt(() => t(e, null == n ? void 0 : n()) || {});
      if (n && (null == o ? void 0 : o.update)) {
        var i = !1,
          s = {};
        ge(() => {
          var e = n();
          gt(e), i && Q(s, e) && ((s = e), o.update(e));
        }),
          (i = !0);
      }
      if (null == o ? void 0 : o.destroy) return () => o.destroy();
    });
  }
  const Wt = [...' \t\n\r\fÂ \v\ufeff'];
  function Yt(e, t, n, o, i, s) {
    var r = e.__className;
    if (r !== n || void 0 === r) {
      var a = (function (e, t, n) {
        var o = null == e ? '' : '' + e;
        if ((t && (o = o ? o + ' ' + t : t), n))
          for (var i in n)
            if (n[i]) o = o ? o + ' ' + i : i;
            else if (o.length)
              for (var s = i.length, r = 0; (r = o.indexOf(i, r)) >= 0; ) {
                var a = r + s;
                (0 !== r && !Wt.includes(o[r - 1])) ||
                (a !== o.length && !Wt.includes(o[a]))
                  ? (r = a)
                  : (o =
                      (0 === r ? '' : o.substring(0, r)) + o.substring(a + 1));
              }
        return '' === o ? null : o;
      })(n, o, s);
      null == a ? e.removeAttribute('class') : (e.className = a),
        (e.__className = n);
    } else if (s && i !== s)
      for (var l in s) {
        var u = !!s[l];
        (null != i && u === !!i[l]) || e.classList.toggle(l, u);
      }
    return s;
  }
  function Ht(e, t, n, o) {
    if (e.__style !== t) {
      var i = (function (e) {
        return null == e ? null : String(e);
      })(t);
      null == i ? e.removeAttribute('style') : (e.style.cssText = i),
        (e.__style = t);
    }
    return o;
  }
  const Xt = Symbol('is custom element'),
    Gt = Symbol('is html');
  function Zt(e, t, n, o) {
    var i = (function (e) {
      return (
        e.__attributes ??
        (e.__attributes = {
          [Xt]: e.nodeName.includes('-'),
          [Gt]: e.namespaceURI === N,
        })
      );
    })(e);
    i[t] !== (i[t] = n) &&
      ('loading' === t && (e[z] = n),
      null == n
        ? e.removeAttribute(t)
        : 'string' != typeof n &&
            (function (e) {
              var t,
                n = en.get(e.nodeName);
              if (n) return n;
              en.set(e.nodeName, (n = []));
              var o = e,
                i = Element.prototype;
              for (; i !== o; ) {
                for (var s in (t = a(o))) t[s].set && n.push(s);
                o = c(o);
              }
              return n;
            })(e).includes(t)
          ? (e[t] = n)
          : e.setAttribute(t, n));
  }
  var en = new Map();
  function tn(e) {
    var t = e.type;
    return 'number' === t || 'range' === t;
  }
  function nn(e) {
    return '' === e ? null : +e;
  }
  function on(e = !1) {
    const t = A,
      n = t.l.u;
    if (!n) return;
    let o = () => gt(t.s);
    if (e) {
      let e = 0,
        n = {};
      const i = B(() => {
        let o = !1;
        const i = t.s;
        for (const e in i) i[e] !== n[e] && ((n[e] = i[e]), (o = !0));
        return o && e++, e;
      });
      o = () => mt(i);
    }
    var i;
    n.b.length &&
      ((i = () => {
        sn(t, o), m(n.b);
      }),
      fe(),
      ge(i)),
      he(() => {
        const e = vt(() => n.m.map(f));
        return () => {
          for (const t of e) 'function' == typeof t && t();
        };
      }),
      n.a.length &&
        he(() => {
          sn(t, o), m(n.a);
        });
  }
  function sn(e, t) {
    if (e.l.s) for (const t of e.l.s) mt(t);
    t();
  }
  function rn(e) {
    var t, n;
    null === A && T(),
      $ && null !== A.l
        ? ((t = A), (n = t.l), n.u ?? (n.u = { a: [], b: [], m: [] })).m.push(e)
        : he(() => {
            const t = vt(e);
            if ('function' == typeof t) return t;
          });
  }
  function an(e) {
    null === A && T(), rn(() => () => vt(e));
  }
  'undefined' != typeof window &&
    (
      (e = window.__svelte ?? (window.__svelte = {})).v ?? (e.v = new Set())
    ).add('5');
  const ln = 'Dub+';
  function un() {
    return new Date().toLocaleTimeString();
  }
  function cn(...e) {
    console.log(`[${un()}] ${ln}:`, ...e);
  }
  function dn(...e) {
    console.error(`[${un()}] ${ln}:`, ...e);
  }
  function pn(e, t = window) {
    const n = e.split('.');
    let o = t;
    for (let e = 0; e < n.length; e++) {
      if (void 0 === o[n[e]]) return !1;
      o = o[n[e]];
    }
    return !0;
  }
  function fn(e, t = {}) {
    const n = Object.assign({}, { interval: 500, seconds: 5 }, t);
    return new Promise((t, o) => {
      let i = 0;
      const s = (1e3 * n.seconds) / n.interval,
        r = () => {
          i++,
            !(function (e, t = window) {
              const n = t;
              for (let t = 0; t < e.length; t++)
                if (!pn(e[t], n)) return cn(e[t], 'is not found yet'), !1;
              return !0;
            })(e)
              ? i < s
                ? window.setTimeout(r, n.interval)
                : o()
              : t();
        };
      r();
    });
  }
  $ = !0;
  var mn = $t(
    '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="0 0 2078.496 2083.914" enable-background="new 0 0 2078.496 2083.914" xml:space="preserve"><rect x="769.659" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#660078" width="539.178" height="539.178"></rect><g><rect x="1308.837" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#EB008B" width="537.488" height="539.178"></rect><polygon fill="#EB008B" points="2045.015,1042.035 1845.324,1311.625 1845.324,772.446 \t"></polygon></g><g><rect x="232.172" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#EB008B" width="537.487" height="539.178"></rect><polygon fill="#EB008B" points="33.481,1042.034 233.172,772.445 233.172,1311.623 \t"></polygon></g><g><rect x="769.659" y="1311.624" fill-rule="evenodd" clip-rule="evenodd" fill="#6FCBDC" width="539.178" height="537.487"></rect><polygon fill="#6FCBDC" points="1039.248,2047.802 769.659,1848.111 1308.837,1848.111 \t"></polygon></g><g><rect x="769.659" y="234.958" fill-rule="evenodd" clip-rule="evenodd" fill="#6FCBDC" width="539.178" height="537.487"></rect><polygon fill="#6FCBDC" points="1039.249,35.268 1308.837,235.958 769.659,235.958 \t"></polygon></g></svg>',
  );
  function vn(e) {
    Tt(e, mn());
  }
  const hn = {
      en: {
        'Modal.confirm': 'OK',
        'Modal.cancel': 'Cancel',
        'Modal.close': 'Close',
        'Modal.defaultValue': 'Default Value',
        'Error.modal.title': 'Dub+ Error',
        'Error.modal.loggedout':
          "You're not logged in. Please login to use Dub+.",
        'Error.unknown':
          'Something went wrong starting Dub+. Please refresh and try again.',
        'Loading.text': 'Waiting for QueUp...',
        'Eta.tooltip.notInQueue': "You're not in the queue",
        'Eta.tootltip': 'ETA: {{minutes}} minutes',
        'Snooze.tooltip': 'Mute for current song',
        'Snooze.tooltip.undo': 'Cancel mute for current song',
        'SnoozeVideo.tooltip': 'Hide video for current song',
        'SnoozeVideo.tooltip.undo': 'Cancel hiding video for current song',
        'Notifcation.permission.title': 'Desktop Notification',
        'Notification.permission.denied':
          "You have dismissed, or chosen to deny, the request to allow desktop notifications. If you change your mind, you will need to reset this in your browser's site settings.",
        'Notification.permission.notSupported':
          'Sorry this browser does not support desktop notifications.  Please update your browser to the lastest version',
        'Menu.title': 'Dub+ Options',
        'general.title': 'General',
        'user-interface.title': 'User Interface',
        'settings.title': 'Settings',
        'customize.title': 'Customize',
        'contact.title': 'Contact',
        'contact.bugs': 'Report bugs on Discord',
        'Switch.on': 'On',
        'Switch.off': 'Off',
        'MenuItem.edit': 'Edit',
        'autovote.label': 'Autovote',
        'autovote.description': 'Toggles auto upvoting for every song',
        'afk.label': 'AFK Auto-respond',
        'afk.description':
          'Toggle Away from Keyboard and customize AFK message.',
        'afk.modal.title': 'Custom AFK Message',
        'afk.modal.content':
          'Enter a custom "Away From Keyboard" [AFK] message here. Message will be prefixed with \'[AFK]\'',
        'afk.modal.placeholder': 'Be right back!',
        'auto-afk.label': 'Auto AFK',
        'auto-afk.description':
          'Automatically set yourself to AFK after a certain amount of time of inactivity',
        'auto-afk.modal.title': 'Auto AFK Timer',
        'auto-afk.modal.content':
          'Enter the amount of time, in minutes, before you are set to AFK.',
        'auto-afk.modal.validation':
          'Please enter a whole number greater than 0',
        'emotes.label': 'Emotes',
        'emotes.description':
          'Adds Twitch, Bttv, and FrankerFacez emotes in chat.',
        'autocomplete.label': 'Autocomplete Emoji',
        'autocomplete.description':
          'Toggle autocompleting emojis and emotes. Shows a preview box in the chat',
        'autocomplete.preview.a11y':
          'press up and down to navigate, press enter or tab to select, press esc to close',
        'autocomplete.preview.navigate': 'navigate',
        'autocomplete.preview.select': 'select',
        'autocomplete.preview.close': 'close',
        'custom-mentions.label': 'Custom Mentions',
        'custom-mentions.description':
          'Toggle using custom mentions to trigger sounds in chat',
        'custom-mentions.modal.title': 'Custom Mentions',
        'custom-mentions.modal.content':
          'Add your custom mention triggers here (separate by comma)',
        'custom-mentions.modal.placeholder':
          'separate, custom mentions, by, comma, :heart:',
        'chat-cleaner.label': 'Chat Cleaner',
        'chat-cleaner.description':
          'Help keep CPU stress down by setting a limit of how many chat messages to keep in the chat box, deleting older messages.',
        'chat-cleaner.modal.title': 'Chat Cleaner',
        'chat-cleaner.modal.content':
          'Please specify the number of most recent chat items that will remain in your chat history',
        'chat-cleaner.modal.validation':
          'Please enter a whole number greater than, or equal to, 1',
        'chat-cleaner.modal.placeholder': '500',
        'collapsible-images.label': 'Collapsible Images',
        'collapsible-images.description': 'Make images in the chat collapsible',
        'mention-notifications.label': 'Notification on Mentions',
        'mention-notifications.description':
          'Enable desktop notifications when a user mentions you in chat',
        'pm-notifications.label': 'Notification on PM',
        'pm-notifications.description':
          'Enable desktop notifications when a user receives a private message',
        'pm-notifications.notification.title': 'You have a new PM',
        'dj-notification.label': 'DJ Notification',
        'dj-notification.description':
          'Get a notification when you are coming up to be the DJ',
        'dj-notification.modal.title': 'DJ Notification',
        'dj-notification.modal.content':
          'Please specify the position in queue you want to be notified at. Use "0" to be notified when you start playing.',
        'dj-notification.notification.title': 'DJ Alert!',
        'dj-notification.notification.content':
          'You will be DJing shortly! Make sure your song is set!',
        'dj-notification.modal.validation':
          'Please enter a whole number greater than, or equal to, 0',
        'dubs-hover.label': 'Show Dubs on Hover',
        'dubs-hover.description':
          'Show who dubs a song when hovering over the dubs count',
        'dubs-hover.no-votes': 'No {{dubType}}s have been casted yet!',
        'dubs-hover.no-grabs': 'No one has grabbed this song yet!',
        'downdubs-in-chat.label': 'Downdubs in Chat (mods only)',
        'downdubs-in-chat.description':
          'Toggle showing downdubs in the chat box (mods only)',
        'downdubs-in-chat.chat-message':
          '@{{username}} has downdubbed your song {{song_name}}',
        'updubs-in-chat.label': 'Updubs in Chat',
        'updubs-in-chat.description': 'Toggle showing updubs in the chat box',
        'updubs-in-chat.chat-message':
          '@{{username}} has updubbed your song {{song_name}}',
        'grabs-in-chat.label': 'Grabs in Chat',
        'grabs-in-chat.description': 'Toggle showing grabs in the chat box',
        'grabs-in-chat.chat-message':
          '@{{username}} has grabbed your song {{song_name}}',
        'snow.label': 'Snow',
        'snow.description': 'Make it snow!',
        'rain.label': 'Rain',
        'rain.description': 'Make it rain!',
        'fullscreen.label': 'Fullscreen',
        'fullscreen.description': 'Toggle fullscreen video mode',
        'split-chat.label': 'Split Chat',
        'split-chat.description': 'Toggle Split Chat UI enhancement',
        'hide-chat.label': 'Hide Chat',
        'hide-chat.description': 'Toggles hiding the chat box',
        'hide-video.label': 'Hide Video',
        'hide-video.description': 'Toggles hiding the video box',
        'hide-avatars.label': 'Hide Avatars',
        'hide-avatars.description':
          'Toggle hiding user avatars in the chat box',
        'hide-bg.label': 'Hide Background',
        'hide-bg.description': 'Toggle hiding background image',
        'show-timestamps.label': 'Show Timestamps',
        'show-timestamps.description':
          'Toggle always showing chat message timestamps',
        'flip-interface.label': 'Flip Interface',
        'flip-interface.description': 'Swap the video and chat positions',
        'spacebar-mute.label': 'Spacebar Mute',
        'spacebar-mute.description':
          'Turn on/off the ability to mute current song with the spacebar',
        'warn-redirect.label': 'Warn on Navigation',
        'warn-redirect.description':
          'Warns you when accidentally clicking on a link that takes you out of QueUp',
        'community-theme.label': 'Community Theme',
        'community-theme.description': 'Toggle Community CSS theme',
        'custom-css.label': 'Custom CSS',
        'custom-css.description': 'Add your own custom CSS.',
        'custom-css.modal.title': 'Custom CSS',
        'custom-css.modal.content': 'Enter a url location for your custom css',
        'custom-css.modal.placeholder': 'https://example.com/example.css',
        'custom-css.modal.validation': 'Invalid URL',
        'custom-bg.label': 'Custom Background',
        'custom-bg.description': 'Add your own custom background.',
        'custom-bg.modal.title': 'Custom Background Image',
        'custom-bg.modal.content':
          'Enter the full URL of an image. We recommend using a .jpg file. Leave blank to remove the current background image',
        'custom-bg.modal.placeholder': 'https://example.com/big-image.jpg',
        'custom-notification-sound.label': 'Custom Notification Sound',
        'custom-notification-sound.description':
          'Change the notification sound to a custom one.',
        'custom-notification-sound.modal.title': 'Custom Notification Sound',
        'custom-notification-sound.modal.content':
          "Enter the full URL of a sound file. We recommend using an .mp3 file. Leave blank to go back to QueUp's default sound",
        'custom-notification-sound.modal.placeholder':
          'https://example.com/sweet-sound.mp3',
        'custom-notification-sound.modal.validation':
          "Can't play sound from this URL. Please enter a valid URL to an MP3 file.",
        'grab-response.label': 'Grab Response',
        'grab-response.description':
          'Sends a chat message when you grab a song',
        'grab-response.modal.title': 'Grab Response',
        'grab-response.modal.content':
          'Enter a message to send when you grab a song',
        'grab-response.modal.placeholder': 'Thanks for the song!',
      },
    },
    bn = P({ current: 'en' });
  function gn(e, t = {}) {
    return (function (e, t, n) {
      let o = hn[e][t];
      return (
        o || 'en' === e || (o = hn.en[t]),
        o
          ? (Object.keys(n).forEach((e) => {
              const t = new RegExp(`{{${e}}}`, 'g');
              o = o.replace(t, n[e]);
            }),
            o)
          : (dn(`No translation found for ${e}.${t}`), t)
      );
    })(bn.current, e, t);
  }
  var wn = Mt(
    '<div class="dubplus-waiting svelte-16mmbc"><div style="width: 26px; margin-right:5px"><!></div> <span style="flex: 1;"> </span></div>',
  );
  const yn = P({
    id: '',
    open: !1,
    title: 'Dub+',
    content: '',
    value: '',
    placeholder: '',
    defaultValue: '',
    maxlength: 999,
    validation: () => !0,
    onConfirm: () => !0,
    onCancel: () => {},
  });
  function xn(e) {
    (yn.open = e.open ?? !1),
      (yn.title = e.title || 'Dub+'),
      (yn.content = e.content || ''),
      (yn.value = e.value || ''),
      (yn.placeholder = e.placeholder || ''),
      (yn.defaultValue = e.defaultValue),
      (yn.maxlength = e.maxlength || 999),
      (yn.onConfirm = e.onConfirm),
      (yn.onCancel = e.onCancel),
      (yn.validation = e.validation || (() => !0));
  }
  var kn = Mt(
      '<div class="default svelte-ascx4b"><span class="default-label svelte-ascx4b"> </span> <span class="default-value svelte-ascx4b"> </span></div>',
    ),
    En = Mt('<textarea class="svelte-ascx4b">\n      </textarea>'),
    _n = Mt('<p class="dp-modal--error svelte-ascx4b"> </p>'),
    Sn = Mt(
      '<button class="dp-modal--cancel cancel svelte-ascx4b"> </button> <button class="dp-modal--confirm confirm svelte-ascx4b"> </button>',
      1,
    ),
    On = Mt('<button class="dp-modal--cancel cancel svelte-ascx4b"> </button>'),
    Un = Mt(
      '<dialog id="dubplus-dialog" class="dp-modal svelte-ascx4b"><h1 class="svelte-ascx4b"> </h1> <div class="dp-modal--content content svelte-ascx4b"><p class="svelte-ascx4b"> </p> <!> <!> <!></div> <div class="dp-modal--buttons buttons svelte-ascx4b"><!></div></dialog>',
    );
  function Cn(e, t) {
    j(t, !0);
    let n,
      o = G('');
    rn(() => {
      (n = document.getElementById('dubplus-dialog')),
        n.addEventListener('close', () => {
          yn.open = !1;
        });
    }),
      he(() => {
        yn.open && n && !n.open && n.showModal();
      });
    var i = Un(),
      s = ce(i),
      r = ce(s),
      a = pe(s, 2),
      l = ce(a),
      u = ce(l),
      c = pe(l, 2),
      d = (e) => {
        var t = kn(),
          n = ce(t),
          o = ce(n),
          i = ce(pe(n, 2));
        we(
          (e) => {
            At(o, `${e ?? ''}:`), At(i, yn.defaultValue);
          },
          [() => gn('Modal.defaultValue')],
        ),
          Tt(e, t);
      };
    qt(c, (e) => {
      yn.defaultValue && e(d);
    });
    var p = pe(c, 2),
      f = (e) => {
        var t = En();
        we(() => {
          Zt(t, 'placeholder', yn.placeholder),
            Zt(t, 'maxlength', yn.maxlength < 999 ? yn.maxlength : 999);
        }),
          (function (e, t, n = t) {
            var o = F();
            _t(e, 'input', (i) => {
              var s = i ? e.defaultValue : e.value;
              if (((s = tn(e) ? nn(s) : s), n(s), o && s !== (s = t()))) {
                var r = e.selectionStart,
                  a = e.selectionEnd;
                (e.value = s ?? ''),
                  null !== a &&
                    ((e.selectionStart = r),
                    (e.selectionEnd = Math.min(a, e.value.length)));
              }
            }),
              null == vt(t) && e.value && n(tn(e) ? nn(e.value) : e.value),
              ge(() => {
                var n = t();
                (tn(e) && n === nn(e.value)) ||
                  (('date' !== e.type || n || e.value) &&
                    n !== e.value &&
                    (e.value = n ?? ''));
              });
          })(
            t,
            () => yn.value,
            (e) => (yn.value = e),
          ),
          Tt(e, t);
      };
    qt(p, (e) => {
      (yn.placeholder || yn.value) && e(f);
    });
    var m = pe(p, 2),
      v = (e) => {
        var t = _n(),
          n = ce(t);
        we(() => At(n, mt(o))), Tt(e, t);
      };
    qt(m, (e) => {
      mt(o) && e(v);
    });
    var h = ce(pe(a, 2)),
      b = (e) => {
        var t = Sn(),
          i = de(t);
        i.__click = () => {
          n.close(),
            (yn.open = !1),
            ee(o, ''),
            'function' == typeof yn.onCancel && yn.onCancel();
        };
        var s = ce(i),
          r = pe(i, 2);
        r.__click = () => {
          const e = yn.validation(yn.value);
          !0 === e
            ? (n.close(), (yn.open = !1), yn.onConfirm(yn.value), ee(o, ''))
            : ee(o, e, !0);
        };
        var a = ce(r);
        we(
          (e, t) => {
            At(s, e), At(a, t);
          },
          [() => gn('Modal.cancel'), () => gn('Modal.confirm')],
        ),
          Tt(e, t);
      },
      g = (e) => {
        var t = On();
        t.__click = () => {
          n.close(), (yn.open = !1), ee(o, '');
        };
        var i = ce(t);
        we((e) => At(i, e), [() => gn('Modal.close')]), Tt(e, t);
      };
    qt(h, (e) => {
      'function' == typeof yn.onConfirm ? e(b) : e(g, !1);
    }),
      we(() => {
        At(r, yn.title), At(u, yn.content);
      }),
      Tt(e, i),
      q();
  }
  Ct(['click']);
  const zn = (e, { to: t, position: n = 'append' }) => {
    he(() => {
      var o;
      e.id && (null == (o = document.getElementById(e.id)) || o.remove());
      const i = document.querySelector(t);
      if (!i) throw new Error(`teleport container not found: ${t}`);
      return (
        'append' === n ? i.appendChild(e) : i.prepend(e),
        () => {
          e.remove();
        }
      );
    });
  };
  function Ln() {
    return document.querySelector('#chat-txt-message');
  }
  function Qn(e = '') {
    return document.querySelectorAll(`ul.chat-main > li${e}`);
  }
  function Mn() {
    return document.querySelectorAll('.chat-main > li .autolink-image');
  }
  function $n() {
    return document.querySelector('.backstretch img');
  }
  function In() {
    return document.querySelector('.queue-position');
  }
  const Nn = '.player_sharing';
  var Tn = () => {
      document
        .querySelector('.dubplus-menu')
        .classList.toggle('dubplus-menu-open');
    },
    An = Mt(
      '<button id="dubplus-menu-icon" type="button" aria-label="Dub+ menu" class="dubplus-icon svelte-9z7rrn"><!></button>',
    );
  Ct(['click']);
  const Dn = {
      'dubplus-autovote': 'autovote',
      'dubplus-afk': 'afk',
      'dubplus-emotes': 'emotes',
      'dubplus-autocomplete': 'autocomplete',
      custom_mentions: 'custom-mentions',
      'chat-cleaner': 'chat-cleaner',
      mention_notifications: 'mention-notifications',
      dubplus_pm_notifications: 'pm-notifications',
      dj_notification: 'dj-notification',
      'dubplus-dubs-hover': 'dubs-hover',
      'dubplus-downdubs': 'downdubs-in-chat',
      'dubplus-updubs': 'updubs-in-chat',
      'dubplus-grabschat': 'grabs-in-chat',
      'dubplus-snow': 'snow',
      'dubplus-rain': 'rain',
      'dubplus-fullscreen': 'fullscreen',
      'dubplus-split-chat': 'split-chat',
      'dubplus-video-only': 'hide-chat',
      'dubplus-chat-only': 'hide-video',
      'dubplus-hide-avatars': 'hide-avatars',
      'dubplus-hide-bg': 'hide-bg',
      'dubplus-show-timestamp': 'show-timestamps',
      'dubplus-spacebar-mute': 'spacebar-mute',
      warn_redirect: 'warn-redirect',
      'dubplus-comm-theme': 'community-theme',
      'dubplus-custom-css': 'custom-css',
      'dubplus-custom-bg': 'custom-bg',
      'dubplus-custom-notification-sound': 'custom-notification-sound',
    },
    jn = {
      customAfkMessage: Dn['dubplus-afk'],
      custom_mentions: Dn.custom_mentions,
      chat_cleaner: Dn['chat-cleaner'],
      dj_notification: Dn.dj_notification,
      css: Dn['dubplus-custom-css'],
      bg: Dn['dubplus-custom-bg'],
      notificationSound: Dn['dubplus-custom-notification-sound'],
      'dubplus-custom-notification-sound':
        Dn['dubplus-custom-notification-sound'],
    };
  const qn = 'dubplusUserSettingsV2';
  let Fn = P(
    Object.assign(
      {},
      {
        options: {},
        menu: {
          general: 'open',
          'user-interface': 'open',
          settings: 'open',
          customize: 'open',
          contact: 'open',
        },
        custom: {},
      },
      (function () {
        try {
          const e = JSON.parse(localStorage.getItem(qn));
          if (e) return e;
        } catch (e) {
          cn('Error loading v2 settings, trying old settings. Error:', e);
        }
        try {
          const e = JSON.parse(localStorage.getItem('dubplusUserSettings'));
          if (e)
            return (function (e) {
              cn('Old Settings', e);
              const t = { options: {}, menu: { ...e.menu }, custom: {} };
              for (const [n, o] of Object.entries(e.options)) {
                const e = Dn[n];
                try {
                  t.options[e] = o;
                } catch (t) {
                  dn('Error converting options', t.message, n, e, o);
                }
              }
              for (const [n, o] of Object.entries(e.custom)) {
                const e = jn[n];
                try {
                  t.custom[e] = o;
                } catch (t) {
                  dn('Error converting custom', t.message, n, e, o);
                }
              }
              return t;
            })(e);
        } catch (e) {
          cn('Error loading old settings:', e);
        }
        return {};
      })(),
    ),
  );
  function Pn() {
    try {
      localStorage.setItem(qn, JSON.stringify(Fn));
    } catch (e) {
      dn('Error saving user settings:', e);
    }
  }
  function Vn(e, t, n) {
    if ('option' === e) return (Fn.options[t] = n), void Pn();
    if ('custom' === e) return (Fn.custom[t] = n), void Pn();
    if ('menu' === e) return (Fn.menu[t] = n), void Pn();
    throw new Error(`Invalid section: "${e}"`);
  }
  var Bn = Mt(
    '<button type="button" class="dubplus-menu-section-header svelte-31yg9a"><span></span> <p class="svelte-31yg9a"> </p></button>',
  );
  function Rn(e, t) {
    j(t, !0);
    let n = G('down'),
      o = G(!0);
    he(() => {
      'closed' === Fn.menu[t.settingsId]
        ? (ee(n, 'right'), ee(o, !1))
        : (ee(n, 'down'), ee(o, !0));
    });
    var i = Bn();
    i.__click = function () {
      (Fn.menu[t.settingsId] =
        'closed' === Fn.menu[t.settingsId] ? 'open' : 'closed'),
        Vn('menu', t.settingsId, Fn.menu[t.settingsId]);
    };
    var s = ce(i),
      r = ce(pe(s, 2));
    we(() => {
      Zt(i, 'id', `dubplus-menu-section-header-${t.settingsId}`),
        Zt(i, 'aria-expanded', mt(o)),
        Zt(i, 'aria-controls', `dubplus-menu-section-${t.settingsId}`),
        Yt(s, 0, `fa fa-angle-${mt(n) ?? ''}`, 'svelte-31yg9a'),
        At(r, t.name);
    }),
      Tt(e, i),
      q();
  }
  Ct(['click']);
  var Jn = Mt(
    '<ul class="dubplus-menu-section svelte-1pjvan3" role="region"><!></ul>',
  );
  function Kn(e, t) {
    var n = Jn();
    !(function (e, t, ...n) {
      var o,
        i = e,
        s = p;
      ye(() => {
        s !== (s = t()) &&
          (o && (_e(o), (o = null)), (o = xe(() => s(i, ...n))));
      }, S);
    })(ce(n), () => t.children),
      we(() => {
        Zt(n, 'id', `dubplus-menu-section-${t.settingsId}`),
          Zt(
            n,
            'aria-labelledby',
            `dubplus-menu-section-header-${t.settingsId}`,
          );
      }),
      Tt(e, n);
  }
  var Wn = Mt(
    '<li class="dubplus-menu-icon svelte-1oilhp7"><!> <a class="dubplus-menu-label svelte-1oilhp7" target="_blank"> </a></li>',
  );
  function Yn(e, t) {
    var n = Wn(),
      o = ce(n);
    Jt(
      o,
      () => t.icon,
      (e, t) => {
        t(e, {});
      },
    );
    var i = pe(o, 2),
      s = ce(i);
    we(() => {
      Zt(i, 'href', t.href), At(s, t.text);
    }),
      Tt(e, n);
  }
  var Hn = $t(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 0c53 0 96 43 96 96l0 3.6c0 15.7-12.7 28.4-28.4 28.4l-135.1 0c-15.7 0-28.4-12.7-28.4-28.4l0-3.6c0-53 43-96 96-96zM41.4 105.4c12.5-12.5 32.8-12.5 45.3 0l64 64c.7 .7 1.3 1.4 1.9 2.1c14.2-7.3 30.4-11.4 47.5-11.4l112 0c17.1 0 33.2 4.1 47.5 11.4c.6-.7 1.2-1.4 1.9-2.1l64-64c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-64 64c-.7 .7-1.4 1.3-2.1 1.9c6.2 12 10.1 25.3 11.1 39.5l64.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c0 24.6-5.5 47.8-15.4 68.6c2.2 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-63.1-63.1c-24.5 21.8-55.8 36.2-90.3 39.6L272 240c0-8.8-7.2-16-16-16s-16 7.2-16 16l0 239.2c-34.5-3.4-65.8-17.8-90.3-39.6L86.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l64-64c1.9-1.9 3.9-3.4 6-4.8C101.5 367.8 96 344.6 96 320l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64.3 0c1.1-14.1 5-27.5 11.1-39.5c-.7-.6-1.4-1.2-2.1-1.9l-64-64c-12.5-12.5-12.5-32.8 0-45.3z"></path></svg>',
  );
  function Xn(e) {
    Tt(e, Hn());
  }
  var Gn = $t(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32zM305.9 166.4c20.6 0 37.3-16.7 37.3-37.3s-16.7-37.3-37.3-37.3c-18 0-33.1 12.8-36.6 29.8c-30.2 3.2-53.8 28.8-53.8 59.9l0 .2c-32.8 1.4-62.8 10.7-86.6 25.5c-8.8-6.8-19.9-10.9-32-10.9c-28.9 0-52.3 23.4-52.3 52.3c0 21 12.3 39 30.1 47.4c1.7 60.7 67.9 109.6 149.3 109.6s147.6-48.9 149.3-109.7c17.7-8.4 29.9-26.4 29.9-47.3c0-28.9-23.4-52.3-52.3-52.3c-12 0-23 4-31.9 10.8c-24-14.9-54.3-24.2-87.5-25.4l0-.1c0-22.2 16.5-40.7 37.9-43.7l0 0c3.9 16.5 18.7 28.7 36.3 28.7zM155 248.1c14.6 0 25.8 15.4 25 34.4s-11.8 25.9-26.5 25.9s-27.5-7.7-26.6-26.7s13.5-33.5 28.1-33.5zm166.4 33.5c.9 19-12 26.7-26.6 26.7s-25.6-6.9-26.5-25.9c-.9-19 10.3-34.4 25-34.4s27.3 14.6 28.1 33.5zm-42.1 49.6c-9 21.5-30.3 36.7-55.1 36.7s-46.1-15.1-55.1-36.7c-1.1-2.6 .7-5.4 3.4-5.7c16.1-1.6 33.5-2.5 51.7-2.5s35.6 .9 51.7 2.5c2.7 .3 4.5 3.1 3.4 5.7z"></path></svg>',
  );
  function Zn(e) {
    Tt(e, Gn());
  }
  var eo = $t(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64h98.2V334.2H109.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H255V480H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"></path></svg>',
  );
  function to(e) {
    Tt(e, eo());
  }
  var no = $t(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM351.3 199.3v0c0 86.7-66 186.6-186.6 186.6c-37.2 0-71.7-10.8-100.7-29.4c5.3 .6 10.4 .8 15.8 .8c30.7 0 58.9-10.4 81.4-28c-28.8-.6-53-19.5-61.3-45.5c10.1 1.5 19.2 1.5 29.6-1.2c-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3c-9-6-16.4-14.1-21.5-23.6s-7.8-20.2-7.7-31c0-12.2 3.2-23.4 8.9-33.1c32.3 39.8 80.8 65.8 135.2 68.6c-9.3-44.5 24-80.6 64-80.6c18.9 0 35.9 7.9 47.9 20.7c14.8-2.8 29-8.3 41.6-15.8c-4.9 15.2-15.2 28-28.8 36.1c13.2-1.4 26-5.1 37.8-10.2c-8.9 13.1-20.1 24.7-32.9 34c.2 2.8 .2 5.7 .2 8.5z"></path></svg>',
  );
  function oo(e) {
    Tt(e, no());
  }
  var io = Mt('<!> <!> <!> <!>', 1),
    so = Mt('<!> <!>', 1);
  function ro(e, t, n) {
    t.disabled ||
      ('Enter' !== e.key && ' ' !== e.key) ||
      (e.preventDefault(), n());
  }
  function ao(e, t, n) {
    t.disabled || n();
  }
  var lo = Mt(
    '<div role="switch" tabindex="0" class="svelte-1mny4ma"><span class="dubplus-switch svelte-1mny4ma"><span class="svelte-1mny4ma"></span></span> <span class="dubplus-switch-label svelte-1mny4ma"> </span></div>',
  );
  Ct(['click', 'keydown']);
  var uo = $t(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"></path></svg>',
  );
  function co(e) {
    return (
      window.QueUp.helpers.isSiteAdmin(e) ||
      window.QueUp.room.users.getIfOwner(e) ||
      window.QueUp.room.users.getIfManager(e) ||
      window.QueUp.room.users.getIfMod(e)
    );
  }
  var po = Mt(
      '<button type="button" class="svelte-1dzj03i"><!> <span class="sr-only"> </span></button>',
    ),
    fo = Mt('<li><!> <!></li>');
  function mo(e, t) {
    function n() {
      xn({
        title: gn(t.customize.title),
        content: gn(t.customize.content),
        placeholder: gn(t.customize.placeholder),
        defaultValue: t.customize.defaultValue
          ? gn(t.customize.defaultValue)
          : '',
        maxlength: t.customize.maxlength,
        value: Fn.custom[t.id] || '',
        validation: t.customize.validation,
        onConfirm: (e) => {
          Vn('custom', t.id, e),
            '' !== e.trim() ||
              t.customize.defaultValue ||
              (Vn('option', t.id, !1), t.turnOff()),
            'function' == typeof t.customize.onConfirm &&
              t.customize.onConfirm(e);
        },
        onCancel: () => {
          t.customize.defaultValue ||
            (void 0 !== Fn.custom[t.id] && '' !== Fn.custom[t.id]) ||
            (Vn('option', t.id, !1), t.turnOff()),
            'function' == typeof t.customize.onCancel && t.customize.onCancel();
        },
      }),
        (yn.open = !0);
    }
    j(t, !0),
      rn(() => {
        if ((t.init && t.init(), Fn.options[t.id])) {
          (!t.modOnly || co(window.QueUp.session.id)) && t.turnOn(!0);
        }
      }),
      an(() => {
        Fn.options[t.id] && t.turnOff();
      });
    var o = fo();
    let i;
    var s = ce(o);
    const r = R(() => !!t.modOnly && !co(window.QueUp.session.id)),
      a = R(() => gn(t.label));
    !(function (e, t) {
      function n() {
        (Fn.options[t.optionId] = !Fn.options[t.optionId]),
          t.onToggle(Fn.options[t.optionId]);
      }
      j(t, !0);
      var o = lo();
      (o.__click = [ao, t, n]), (o.__keydown = [ro, t, n]);
      var i = pe(ce(o), 2),
        s = ce(i);
      we(() => {
        Zt(o, 'aria-disabled', t.disabled ? 'true' : 'false'),
          Zt(o, 'aria-checked', Fn.options[t.optionId] ? 'true' : 'false'),
          At(s, t.label);
      }),
        Tt(e, o),
        q();
    })(s, {
      get disabled() {
        return mt(r);
      },
      get label() {
        return mt(a);
      },
      onToggle: (e) => {
        !t.customize || !0 !== e || Fn.custom[t.id]
          ? (Vn('option', t.id, e), e ? t.turnOn() : t.turnOff())
          : n();
      },
      get optionId() {
        return t.id;
      },
    });
    var l = pe(s, 2),
      u = (e) => {
        var t = po();
        t.__click = n;
        var o = ce(t);
        !(function (e) {
          Tt(e, uo());
        })(o);
        var i = ce(pe(o, 2));
        we((e) => At(i, e), [() => gn('MenuItem.edit')]), Tt(e, t);
      };
    qt(l, (e) => {
      t.customize && e(u);
    }),
      we(
        (e, n) => {
          Zt(o, 'id', `dubplus-${t.id}`),
            Zt(o, 'title', e),
            (i = Yt(o, 0, 'svelte-1dzj03i', null, i, n));
        },
        [
          () => gn(t.description),
          () => ({ disabled: !!t.modOnly && !co(window.QueUp.session.id) }),
        ],
      ),
      Tt(e, o),
      q();
  }
  Ct(['click']);
  const vo = 'realtime:room_playlist-dub',
    ho = 'realtime:room_playlist-queue-update-grabs',
    bo = 'realtime:user-leave',
    go = 'realtime:room_playlist-update',
    wo = 'realtime:chat-message',
    yo = 'realtime:new-message';
  function xo() {
    var e, t, n;
    null ==
      (n =
        null == (t = null == (e = window.QueUp) ? void 0 : e.playerController)
          ? void 0
          : t.voteUp) || n.click();
  }
  const ko = {
    id: 'autovote',
    label: 'autovote.label',
    description: 'autovote.description',
    category: 'general',
    turnOff() {
      window.QueUp.Events.unbind(go, xo);
    },
    turnOn() {
      xo(), window.QueUp.Events.bind(go, xo);
    },
  };
  function Eo(e, t) {
    const n = document.createElement('li');
    n.className = `dubplus-chat-system ${e}`;
    const o = document.createElement('div');
    (o.className = 'chatDelete'),
      (o.onclick = function (e) {
        e.target.parentElement.remove();
      });
    const i = document.createElement('span');
    (i.className = 'icon-close'), o.appendChild(i), n.appendChild(o);
    const s = document.createElement('div');
    (s.className = 'text'),
      (s.textContent = t),
      n.appendChild(s),
      document.querySelector('ul.chat-main').appendChild(n);
  }
  function _o(e) {
    const t = Ln(),
      n = t.value;
    (t.value = e), window.QueUp.room.chat.sendMessage(), n && (t.value = n);
  }
  let So = !0;
  function Oo(e) {
    if (!So) return;
    const t = e.message,
      n = window.QueUp.session.get('username');
    if (
      t.includes(`@${n}`) &&
      window.QueUp.session.id !== e.user.userInfo.userid
    ) {
      let e = '';
      (e = Fn.custom.afk
        ? `[AFK] ${Fn.custom.afk}`
        : `[AFK] ${gn('afk.modal.placeholder')}`),
        _o(e),
        (So = !1),
        setTimeout(() => {
          So = !0;
        }, 3e4);
    }
  }
  const Uo = {
    id: 'afk',
    label: 'afk.label',
    description: 'afk.description',
    category: 'general',
    turnOn() {
      window.QueUp.Events.bind(wo, Oo);
    },
    turnOff() {
      window.QueUp.Events.unbind(wo, Oo);
    },
    custom: {
      title: 'afk.modal.title',
      content: 'afk.modal.content',
      placeholder: 'afk.modal.placeholder',
      defaultValue: 'afk.modal.placeholder',
      maxlength: 255,
    },
  };
  const Co = new (class {
    constructor() {
      this.db = null;
      const e = window.indexedDB.open('d2', 1),
        t = this;
      (e.onsuccess = function () {
        t.db = this.result;
      }),
        (e.onerror = function (e) {
          console.error('Dub+', 'indexedDB request error:', e);
        }),
        (e.onupgradeneeded = function () {
          (t.db = null),
            (this.result.createObjectStore('s', {
              keyPath: 'k',
            }).transaction.oncomplete = function () {
              t.db = this.db;
            });
        });
    }
    get(e) {
      return new Promise((t) => {
        this.db
          ? (this.db.transaction('s').objectStore('s').get(e).onsuccess =
              function () {
                var e;
                t((null == (e = this.result) ? void 0 : e.v) || null);
              })
          : setTimeout(() => {
              this.get(e).then(t);
            }, 100);
      });
    }
    set(e, t) {
      this.db
        .transaction('s', 'readwrite')
        .objectStore('s')
        .put({ k: e, v: t });
    }
  })();
  const zo = {
    emoji: {
      template: (e) => (
        (e = e.replace(/:/g, '')),
        `${window.emojify.defaultConfig.img_dir}/${encodeURI(e)}.png`
      ),
    },
    twitchJSONSLoaded: !1,
    bttvJSONSLoaded: !1,
    frankerfacezJSONLoaded: !1,
    twitch: {
      template: (e) => `//static-cdn.jtvnw.net/emoticons/v1/${e}/3.0`,
      emotesMap: new Map(),
    },
    bttv: {
      template: (e) => `//cdn.betterttv.net/emote/${e}/3x`,
      emotesMap: new Map(),
    },
    frankerFacez: {
      template: (e) => `//cdn.frankerfacez.com/emoticon/${e}/1`,
      emotesMap: new Map(),
    },
    shouldUpdateAPIs: (e) =>
      Co.get(`${e}_api`).then((t) => {
        if (t)
          try {
            if (void 0 !== JSON.parse(t).error) return !0;
          } catch {
            return !0;
          }
        const n = Date.now(),
          o = parseInt(localStorage.getItem(`${e}_api_timestamp`));
        return isNaN(o) || n - o > 432e6 || !t;
      }),
    loadTwitchEmotes() {
      return this.twitchJSONSLoaded
        ? Promise.resolve()
        : this.shouldUpdateAPIs('twitch').then((e) =>
            e
              ? (cn('twitch', 'loading from api'),
                fetch(
                  '//cdn.jsdelivr.net/gh/Jiiks/BetterDiscordApp/data/emotedata_twitch_global.json',
                )
                  .then((e) => e.json())
                  .then((e) => {
                    const t = {};
                    for (const n in e.emotes)
                      t[n] || (t[n] = e.emotes[n].image_id);
                    localStorage.setItem(
                      'twitch_api_timestamp',
                      Date.now().toString(),
                    ),
                      Co.set('twitch_api', JSON.stringify(t)),
                      zo.processTwitchEmotes(t);
                  })
                  .catch((e) => dn(e)))
              : Co.get('twitch_api').then((e) => {
                  cn('twitch', 'loading from IndexedDB');
                  const t = JSON.parse(e);
                  zo.processTwitchEmotes(t);
                }),
          );
    },
    loadBTTVEmotes() {
      return this.bttvJSONSLoaded
        ? Promise.resolve()
        : this.shouldUpdateAPIs('bttv').then((e) =>
            e
              ? (cn('bttv', 'loading from api'),
                fetch('//api.betterttv.net/3/cached/emotes/global')
                  .then((e) => e.json())
                  .then((e) => {
                    const t = {};
                    e.forEach((e) => {
                      t[e.code] || (t[e.code] = e.id);
                    }),
                      localStorage.setItem(
                        'bttv_api_timestamp',
                        Date.now().toString(),
                      ),
                      Co.set('bttv_api', JSON.stringify(t)),
                      zo.processBTTVEmotes(t);
                  })
                  .catch((e) => dn(e)))
              : Co.get('bttv_api').then((e) => {
                  cn('bttv', 'loading from IndexedDB');
                  const t = JSON.parse(e);
                  zo.processBTTVEmotes(t);
                }),
          );
    },
    loadFrankerFacez() {
      return this.frankerfacezJSONLoaded
        ? Promise.resolve()
        : this.shouldUpdateAPIs('frankerfacez').then((e) =>
            e
              ? (cn('frankerfacez', 'loading from api'),
                fetch(
                  '//api.frankerfacez.com/v1/emoticons?per_page=200&private=off&sort=count-desc',
                )
                  .then((e) => e.json())
                  .then((e) => {
                    const t = e;
                    localStorage.setItem(
                      'frankerfacez_api_timestamp',
                      Date.now().toString(),
                    ),
                      Co.set('frankerfacez_api', JSON.stringify(t)),
                      zo.processFrankerFacez(t);
                  })
                  .catch((e) => dn(e)))
              : Co.get('frankerfacez_api').then((e) => {
                  cn('frankerfacez', 'loading from IndexedDB');
                  const t = JSON.parse(e);
                  zo.processFrankerFacez(t);
                }),
          );
    },
    processTwitchEmotes(e) {
      for (const t in e)
        if (Object.hasOwn(e, t)) {
          const n = t.toLowerCase();
          window.emojify.emojiNames.includes(n)
            ? this.twitch.emotesMap.set(`${n}_twitch`, e[t])
            : this.twitch.emotesMap.set(n, e[t]);
        }
      this.twitchJSONSLoaded = !0;
    },
    processBTTVEmotes(e) {
      for (const t in e)
        if (Object.hasOwn(e, t)) {
          const n = t.toLowerCase();
          if (t.includes(':')) continue;
          window.emojify.emojiNames.includes(n) || this.twitch.emotesMap.has(n)
            ? this.bttv.emotesMap.set(`${n}_bttv`, e[t])
            : this.bttv.emotesMap.set(n, e[t]);
        }
      this.bttvJSONSLoaded = !0;
    },
    processFrankerFacez(e) {
      for (const t of e.emoticons) {
        const e = t.name,
          n = e.toLowerCase();
        e.includes(':') ||
          (window.emojify.emojiNames.includes(n) ||
          this.twitch.emotesMap.has(n) ||
          this.bttv.emotesMap.has(n)
            ? this.frankerFacez.emotesMap.set(`${n}_ffz`, t.id)
            : this.frankerFacez.emotesMap.set(n, t.id));
      }
      this.frankerfacezJSONLoaded = !0;
    },
    findMatchingEmotes(e, t = !1) {
      const n = [];
      return (
        window.emojify.emojiNames.forEach((t) => {
          t.includes(e) &&
            n.push({
              src: this.emoji.template(t),
              text: t,
              alt: t,
              platform: 'emojify',
            });
        }),
        t
          ? (Array.from(this.twitch.emotesMap.keys()).forEach((t) => {
              t.includes(e) &&
                n.push({
                  src: this.twitch.template(this.twitch.emotesMap.get(t)),
                  text: t,
                  alt: t,
                  platform: 'twitch',
                });
            }),
            Array.from(this.bttv.emotesMap.keys()).forEach((t) => {
              t.includes(e) &&
                n.push({
                  src: this.bttv.template(this.bttv.emotesMap.get(t)),
                  text: t,
                  alt: t,
                  platform: 'bttv',
                });
            }),
            Array.from(this.frankerFacez.emotesMap.keys()).forEach((t) => {
              t.includes(e) &&
                n.push({
                  src: this.frankerFacez.template(
                    this.frankerFacez.emotesMap.get(t),
                  ),
                  text: t,
                  alt: t,
                  platform: 'ffz',
                });
            }),
            n)
          : n
      );
    },
  };
  function Lo(e, t, n, o, i) {
    const s = document.createElement('img');
    return (
      (s.className = `emoji ${e}-emote`),
      (s.title = n),
      (s.alt = n),
      (s.src = t),
      s
    );
  }
  function Qo(e) {
    e.querySelectorAll('.text p').forEach((e) => {
      if (
        !e.hasAttribute('dubplus-emotes-processed') &&
        (null == e ? void 0 : e.textContent)
      ) {
        const t = (function (e) {
          const t = /(:[^: ]+:)/g,
            n = e.split(t),
            o = [];
          return (
            n.forEach((e) => {
              if (e.match(t)) {
                const t = e.toLowerCase().replace(/^:/, '').replace(/:$/, '');
                if (zo.twitchJSONSLoaded && zo.twitch.emotesMap.has(t)) {
                  const e = zo.twitch.emotesMap.get(t),
                    n = Lo('twitch', zo.twitch.template(e), t);
                  o.push(n);
                } else if (zo.bttvJSONSLoaded && zo.bttv.emotesMap.has(t)) {
                  const e = zo.bttv.emotesMap.get(t),
                    n = Lo('bttv', zo.bttv.template(e), t);
                  o.push(n);
                } else if (
                  zo.frankerfacezJSONLoaded &&
                  zo.frankerFacez.emotesMap.has(t)
                ) {
                  const e = zo.frankerFacez.emotesMap.get(t),
                    n = Lo('frankerFacez', zo.frankerFacez.template(e), t);
                  o.push(n);
                } else o.push(document.createTextNode(e));
              } else o.push(document.createTextNode(e));
            }),
            o
          );
        })(e.textContent);
        e.replaceChildren(...t),
          e.setAttribute('dubplus-emotes-processed', 'true');
      }
    });
  }
  function Mo(e) {
    if (null == e ? void 0 : e.chatid) {
      const t = document.querySelector(`.chat-id-${e.chatid}`);
      if (t) return void Qo(t);
    }
    const t = Qn();
    (null == t ? void 0 : t.length) && t.forEach(Qo);
  }
  const $o = {
      id: 'emotes',
      label: 'emotes.label',
      description: 'emotes.description',
      category: 'general',
      turnOn() {
        zo.loadTwitchEmotes()
          .then(() => zo.loadBTTVEmotes())
          .then(() => zo.loadFrankerFacez())
          .then(() => {
            Mo(), window.QueUp.Events.bind(wo, Mo);
          });
      },
      turnOff() {
        window.QueUp.Events.unbind(wo, Mo);
      },
    },
    Io = P({ selectedIndex: 0, emojiList: [] });
  function No() {
    (Io.selectedIndex = 0), (Io.emojiList = []);
  }
  function To(e) {
    return ' ' === e || '\n' === e;
  }
  const Ao = {
    up: 'ArrowUp',
    down: 'ArrowDown',
    enter: 'Enter',
    esc: 'Escape',
    tab: 'Tab',
  };
  let Do,
    jo = document.querySelector('#autocomplete-preview');
  function qo(e, t) {
    const n = Io.emojiList[t],
      [o, i] = (function (e, t) {
        let n = t > 0 ? t : 0;
        for (; n > 0 && ':' !== e[n]; ) n -= 1;
        let o = t;
        for (; !To(e[o]) && o < e.length; ) o += 1;
        return [n, o];
      })(e.value, e.selectionStart),
      s = e.value.substring(o, i);
    (e.value = e.value.replace(s, `:${n.text}:`)), No();
  }
  function Fo(e) {
    const t = e.target,
      n = t.value,
      o = t.selectionStart;
    let i = '',
      s = o - 1;
    for (; !To(n[s]) && s >= 0; ) (i = n[s] + i), s--;
    let r = o;
    for (; !To(n[r]) && r < n.length; ) (i += n[r]), r++;
    if (i.startsWith(':') && i.length >= 2 && !i.endsWith(':')) {
      const e = i.substring(1).trim();
      !(function (e, t) {
        const n = ['emojify', 'twitch', 'bttv', 'ffz'];
        Io.emojiList = e
          .filter(
            (e, t, n) =>
              t ===
              n.findIndex((t) => t.src === e.src && t.platform === e.platform),
          )
          .sort((e, o) => {
            const i = n.indexOf(e.platform),
              s = n.indexOf(o.platform);
            return i === s
              ? e.text.startsWith(t) && !o.text.startsWith(t)
                ? -1
                : !e.text.startsWith(t) && o.text.startsWith(t)
                  ? 1
                  : e.text.localeCompare(o.text)
              : i - s;
          });
      })(zo.findMatchingEmotes(e, Fn.options.emotes), e);
    } else No();
  }
  function Po(e) {
    jo = jo || document.querySelector('#autocomplete-preview');
    const t = jo.children.length > 0;
    if (!(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {
      if (e.key === Ao.up && t)
        return (
          e.preventDefault(),
          void (Io.selectedIndex > 0
            ? Io.selectedIndex--
            : (Io.selectedIndex = Io.emojiList.length - 1))
        );
      if (e.key === Ao.down && t)
        return (
          e.preventDefault(),
          void (Io.selectedIndex < Io.emojiList.length - 1
            ? Io.selectedIndex++
            : (Io.selectedIndex = 0))
        );
      if ((e.key !== Ao.enter && e.key !== Ao.tab) || !t)
        e.key !== Ao.enter || t || e.shiftKey
          ? e.key === Ao.esc && t
            ? No()
            : Fo(e)
          : setTimeout(() => {
              window.QueUp.room.chat.resizeTextarea();
            }, 10);
      else {
        e.preventDefault(), e.stopImmediatePropagation();
        qo(e.target, Io.selectedIndex);
      }
    }
  }
  function Vo(e) {
    jo = jo || document.querySelector('#autocomplete-preview');
    const t = 0 === jo.children.length,
      n = [Ao.tab, Ao.enter, Ao.up, Ao.down].includes(e.key),
      o = e.shiftKey || e.ctrlKey || e.altKey || e.metaKey;
    o || t || !n
      ? o || e.key !== Ao.enter
        ? o || window.QueUp.room.chat.ncKeyDown(e)
        : (window.QueUp.room.chat.sendMessage(),
          window.QueUp.room.chat.resizeTextarea())
      : e.preventDefault();
  }
  const Bo = {
      id: 'autocomplete',
      label: 'autocomplete.label',
      category: 'general',
      description: 'autocomplete.description',
      turnOn() {
        (jo = document.querySelector('#autocomplete-preview')),
          No(),
          (Do = window.QueUp.room.chat.events['keydown #chat-txt-message']);
        const e = { ...window.QueUp.room.chat.events };
        delete e['keydown #chat-txt-message'],
          window.QueUp.room.chat.delegateEvents(e);
        const t = Ln();
        t.addEventListener('keydown', Vo),
          t.addEventListener('keyup', Po),
          t.addEventListener('click', Fo);
      },
      turnOff() {
        No(),
          (window.QueUp.room.chat.events['keydown #chat-txt-message'] = Do),
          window.QueUp.room.chat.delegateEvents(window.QueUp.room.chat.events);
        const e = Ln();
        e.removeEventListener('keydown', Vo),
          e.removeEventListener('keyup', Po),
          e.removeEventListener('click', Fo);
      },
    },
    Ro = 'custom-mentions';
  function Jo(e) {
    const t = Fn.options[Ro],
      n = Fn.custom[Ro];
    if (t && window.QueUp.session.id !== e.user.userInfo.userid) {
      n.split(',').some(function (t) {
        return new RegExp(`\\b@?${t.trim()}\\b`, 'ig').test(e.message);
      }) && window.QueUp.room.chat.mentionChatSound.play();
    }
  }
  const Ko = {
      id: Ro,
      label: `${Ro}.label`,
      description: `${Ro}.description`,
      category: 'general',
      custom: {
        title: `${Ro}.modal.title`,
        content: `${Ro}.modal.content`,
        placeholder: `${Ro}.modal.placeholder`,
        maxlength: 255,
      },
      turnOn() {
        window.QueUp.Events.bind(wo, Jo);
      },
      turnOff() {
        window.QueUp.Events.unbind(wo, Jo);
      },
    },
    Wo = 'chat-cleaner';
  function Yo(e) {
    const t = Qn();
    if (!(!(null == t ? void 0 : t.length) || isNaN(e) || t.length < e))
      for (let n = 0; n < t.length - e; n++) t[n].remove();
  }
  function Ho() {
    const e = Fn.custom[Wo];
    if ('number' == typeof e) Yo(e);
    else if ('string' == typeof e && '' !== e.trim()) {
      Yo(parseInt(e, 10));
    }
  }
  const Xo = {
      id: Wo,
      label: `${Wo}.label`,
      description: `${Wo}.description`,
      category: 'general',
      custom: {
        title: `${Wo}.modal.title`,
        content: `${Wo}.modal.content`,
        placeholder: `${Wo}.modal.placeholder`,
        maxlength: 5,
        validation(e) {
          if ('' === e.trim()) return !0;
          const t = parseInt(e, 10);
          return (
            !(e.includes('.') || isNaN(t) || t < 1) ||
            gn(`${Wo}.modal.validation`)
          );
        },
        onConfirm: (e) => {
          Fn.options[Wo] && Yo(parseInt(e, 10));
        },
      },
      turnOn() {
        Yo(void 0), window.QueUp.Events.bind(wo, Ho);
      },
      turnOff() {
        window.QueUp.Events.unbind(wo, Ho);
      },
    },
    Go = P({ isActive: !0 }),
    Zo = [],
    ei = [];
  function ti(e) {
    Go.isActive && (['blur', 'pagehide'].includes(e.type) || document.hidden)
      ? ((Go.isActive = !1), Zo.forEach((e) => e()))
      : Go.isActive ||
        (!['focus', 'pageshow'].includes(e.type) && document.hidden) ||
        ((Go.isActive = !0), ei.forEach((e) => e()));
  }
  function ni() {
    xn({
      title: gn('Notifcation.permission.title'),
      content: gn('Notification.permission.denied'),
      open: !0,
    });
  }
  function oi() {
    return new Promise((e, t) =>
      'Notification' in window
        ? 'granted' !== Notification.permission
          ? 'denied' === Notification.permission
            ? (ni(), void t())
            : void Notification.requestPermission().then(function (n) {
                if ('denied' === n || 'default' === n) return ni(), void t();
                e();
              })
          : void e()
        : (xn({
            open: !0,
            title: gn('Notifcation.permission.title'),
            content: gn('Notification.permission.notSupported'),
          }),
          void t(!1)),
    );
  }
  function ii(e) {
    const t = Object.assign(
      {},
      { content: '', ignoreActiveTab: !1, callback: null, wait: 1e4 },
      e,
    );
    if (Go.isActive && !t.ignoreActiveTab) return;
    const n = {
        body: t.content,
        icon: 'https://cdn.jsdelivr.net/gh/DubPlus/DubPlus/images/dubplus.svg',
      },
      o = new Notification(t.title, n);
    (o.onclick = function () {
      window.focus(),
        'function' == typeof t.callback && t.callback(),
        o.close();
    }),
      setTimeout(o.close.bind(o), t.wait);
  }
  function si(e) {
    const t = e.message;
    let n = ['@' + window.QueUp.session.get('username').toLowerCase()];
    Fn.options['custom-mentions'] &&
      Fn.custom['custom-mentions'] &&
      ((n = n
        .concat(Fn.custom['custom-mentions'].split(','))
        .map((e) => e.trim())),
      (n = n.concat(n.map((e) => '@' + e))));
    new RegExp(`\\b(${n.join('|')})\\b`, 'ig').test(t) &&
      !Go.isActive &&
      window.QueUp.session.id !== e.user.userInfo.userid &&
      ii({ title: `Message from ${e.user.username}`, content: t });
  }
  document.addEventListener('visibilitychange', ti),
    (window.onpageshow = ti),
    (window.onpagehide = ti),
    (window.onfocus = ti),
    (window.onblur = ti),
    void 0 !== document.hidden &&
      ti({ type: document.hidden ? 'blur' : 'focus' });
  const ri = {
    id: 'mention-notifications',
    label: 'mention-notifications.label',
    description: 'mention-notifications.description',
    category: 'general',
    turnOn() {
      oi()
        .then(() => {
          window.QueUp.Events.bind(wo, si);
        })
        .catch(() => {
          Fn.options[this.id] = !1;
        });
    },
    turnOff() {
      window.QueUp.Events.unbind(wo, si);
    },
  };
  function ai(e) {
    window.QueUp.session.id !== e.userid &&
      ii({
        title: gn('pm-notifications.notification.title'),
        ignoreActiveTab: !0,
        callback: function () {
          const t = document.querySelector('.user-messages');
          null == t || t.click(),
            setTimeout(function () {
              const t =
                ((n = e.messageid),
                document.querySelector(`.message-item[data-messageid="${n}"]`));
              var n;
              null == t || t.click();
            }, 500);
        },
        wait: 1e4,
      });
  }
  const li = {
      id: 'pm-notifications',
      label: 'pm-notifications.label',
      description: 'pm-notifications.description',
      category: 'general',
      turnOn() {
        oi()
          .then(() => {
            window.QueUp.Events.bind(yo, ai);
          })
          .catch(() => {
            Fn.options[this.id] = !1;
          });
      },
      turnOff() {
        window.QueUp.Events.unbind(yo, ai);
      },
    },
    ui = 'dj-notification';
  function ci(e) {
    (e && e.startTime > 2) ||
      setTimeout(() => {
        var e, t, n, o;
        const i =
          null == (t = null == (e = In()) ? void 0 : e.textContent)
            ? void 0
            : t.trim();
        if (!i) return;
        const s = parseInt(i, 10);
        if (isNaN(s))
          return void dn(ui, 'Could not parse current position:', i);
        let r = parseInt(Fn.custom[ui], 10);
        isNaN(r) &&
          ((r = 2), cn(ui, 'Could not parse setting, defaulting to 2'));
        return ((null ==
        (o =
          null == (n = document.querySelector('.queue-total'))
            ? void 0
            : n.textContent)
          ? void 0
          : o.trim()) === i &&
          0 === r) ||
          s === r
          ? (ii({
              title: gn(`${ui}.notification.title`),
              content: gn(`${ui}.notification.content`),
              ignoreActiveTab: !0,
              wait: 1e4,
            }),
            void window.QueUp.room.chat.mentionChatSound.play())
          : void 0;
      }, 1e3);
  }
  const di = {
      id: ui,
      label: `${ui}.label`,
      description: `${ui}.description`,
      category: 'general',
      custom: {
        title: `${ui}.modal.title`,
        content: `${ui}.modal.content`,
        placeholder: '2',
        defaultValue: '2',
        maxlength: 3,
        validation(e) {
          if ('' === e.trim()) return !0;
          const t = parseInt(e, 10);
          return (
            !(e.includes('.') || isNaN(t) || t < 0) ||
            gn(`${ui}.modal.validation`)
          );
        },
        onConfirm: () => {
          Fn.options[ui] && ci();
        },
      },
      turnOn() {
        oi().then(() => {
          ci(), window.QueUp.Events.bind(go, ci);
        });
      },
      turnOff() {
        window.QueUp.Events.unbind(go, ci);
      },
    },
    pi = P({ upDubs: [], downDubs: [], grabs: [] });
  const fi = window.location.hostname.includes('staging')
    ? 'https://staging-api.queup.dev'
    : 'https://api.queup.net';
  function mi(e) {
    return new Promise((t, n) => {
      var o, i, s;
      const r =
        null ==
        (s =
          null ==
          (i =
            null ==
            (o = window.QueUp.room.users.collection.findWhere({ userid: e }))
              ? void 0
              : o.attributes)
            ? void 0
            : i._user)
          ? void 0
          : s.username;
      r
        ? t(r)
        : fetch(
            (function (e) {
              return `${fi}/user/${e}`;
            })(e),
          )
            .then((e) => e.json())
            .then((o) => {
              var i;
              if (
                null == (i = null == o ? void 0 : o.userinfo)
                  ? void 0
                  : i.username
              ) {
                const { username: e } = o.userinfo;
                t(e);
              } else n('Failed to get username from API for userid: ' + e);
            })
            .catch(n);
    });
  }
  function vi() {
    (pi.downDubs = []), (pi.upDubs = []), (pi.grabs = []);
    const e =
      ((t = window.QueUp.room.model.id),
      `${fi}/room/${t}/playlist/active/dubs`);
    var t;
    fetch(e)
      .then((e) => e.json())
      .then((e) => {
        var t, n;
        null == (t = e.data.upDubs) ||
          t.forEach((e) => {
            pi.upDubs.find((t) => t.userid === e.userid) ||
              mi(e.userid)
                .then((t) => {
                  pi.upDubs.push({ userid: e.userid, username: t });
                })
                .catch((e) => dn('Failed to get username for upDubs:', e));
          }),
          co(window.QueUp.session.id) &&
            (null == (n = e.data.downDubs) ||
              n.forEach((e) => {
                pi.downDubs.find((t) => t.userid === e.userid) ||
                  mi(e.userid)
                    .then((t) => {
                      pi.downDubs.push({ userid: e.userid, username: t });
                    })
                    .catch((e) => dn('Failed to get username for downDubs', e));
              }));
      })
      .catch((e) => dn('Failed to fetch dubs data from API.', e));
  }
  function hi(e) {
    'updub' === e.dubtype
      ? (pi.upDubs.find((t) => t.userid === e.user._id) ||
          pi.upDubs.push({ userid: e.user._id, username: e.user.username }),
        (pi.downDubs = pi.downDubs.filter((t) => t.userid !== e.user._id)))
      : 'downdub' === e.dubtype &&
        co(window.QueUp.session.id) &&
        (pi.downDubs.find((t) => t.userid === e.user._id) ||
          pi.downDubs.push({ userid: e.user._id, username: e.user.username }),
        (pi.upDubs = pi.upDubs.filter((t) => t.userid !== e.user._id)));
    Date.now() - window.QueUp.room.player.activeSong.attributes.song.played <
      1e3 ||
      ((pi.upDubs.length !==
        window.QueUp.room.player.activeSong.attributes.song.updubs ||
        (co(window.QueUp.session.id) &&
          pi.downDubs.length !==
            window.QueUp.room.player.activeSong.attributes.song.downdubs)) &&
        vi());
  }
  function bi(e) {
    pi.grabs.find((t) => t.userid === e.user._id) ||
      pi.grabs.push({ userid: e.user._id, username: e.user.username });
  }
  function gi(e) {
    (pi.upDubs = pi.upDubs.filter((t) => t.userid !== e.user._id)),
      (pi.downDubs = pi.downDubs.filter((t) => t.userid !== e.user._id)),
      (pi.grabs = pi.grabs.filter((t) => t.userid !== e.user._id));
  }
  const wi = {
    id: 'dubs-hover',
    label: 'dubs-hover.label',
    description: 'dubs-hover.description',
    category: 'general',
    turnOn() {
      vi(),
        window.QueUp.Events.bind(vo, hi),
        window.QueUp.Events.bind(ho, bi),
        window.QueUp.Events.bind(bo, gi),
        window.QueUp.Events.bind(go, vi);
    },
    turnOff() {
      window.QueUp.Events.unbind(vo, hi),
        window.QueUp.Events.unbind(ho, bi),
        window.QueUp.Events.unbind(bo, gi),
        window.QueUp.Events.unbind(go, vi);
    },
  };
  function yi(e) {
    window.QueUp.session.id ===
      window.QueUp.room.player.activeSong.attributes.song.userid &&
      'downdub' === e.dubtype &&
      Eo(
        'dubplus-chat-system-downdub',
        gn('downdubs-in-chat.chat-message', {
          username: e.user.username,
          song_name:
            window.QueUp.room.player.activeSong.attributes.songInfo.name,
        }),
      );
  }
  const xi = {
    id: 'downdubs-in-chat',
    label: 'downdubs-in-chat.label',
    description: 'downdubs-in-chat.description',
    category: 'general',
    modOnly: !0,
    turnOn() {
      co(window.QueUp.session.id) && window.QueUp.Events.bind(vo, yi);
    },
    turnOff() {
      window.QueUp.Events.unbind(vo, yi);
    },
  };
  function ki(e) {
    window.QueUp.session.id ===
      window.QueUp.room.player.activeSong.attributes.song.userid &&
      'updub' === e.dubtype &&
      Eo(
        'dubplus-chat-system-updub',
        gn('updubs-in-chat.chat-message', {
          username: e.user.username,
          song_name:
            window.QueUp.room.player.activeSong.attributes.songInfo.name,
        }),
      );
  }
  const Ei = {
    id: 'updubs-in-chat',
    label: 'updubs-in-chat.label',
    description: 'updubs-in-chat.description',
    category: 'general',
    turnOn() {
      window.QueUp.Events.bind(vo, ki);
    },
    turnOff() {
      window.QueUp.Events.unbind(vo, ki);
    },
  };
  function _i(e) {
    window.QueUp.session.id ===
      window.QueUp.room.player.activeSong.attributes.song.userid &&
      Eo(
        'dubplus-chat-system-grab',
        gn('grabs-in-chat.chat-message', {
          username: e.user.username,
          song_name:
            window.QueUp.room.player.activeSong.attributes.songInfo.name,
        }),
      );
  }
  const Si = {
      id: 'grabs-in-chat',
      label: 'grabs-in-chat.label',
      description: 'grabs-in-chat.description',
      category: 'general',
      turnOn() {
        window.QueUp.room.model.get('displayUserGrab') ||
          window.QueUp.Events.bind(
            'realtime:room_playlist-queue-update-grabs',
            _i,
          );
      },
      turnOff() {
        window.QueUp.room.model.get('displayUserGrab') ||
          window.QueUp.Events.unbind(
            'realtime:room_playlist-queue-update-grabs',
            _i,
          );
      },
    },
    Oi = {
      id: 'snow',
      label: 'snow.label',
      description: 'snow.description',
      category: 'general',
      turnOn() {},
      turnOff() {},
    };
  class Ui {
    constructor() {
      (this.particles = []),
        (this.drops = []),
        (this.numbase = 5),
        (this.numb = 2),
        (this.width = 0),
        (this.height = 0),
        (this.controls = {
          rain: 2,
          alpha: 1,
          color: 200,
          opacity: 1,
          saturation: 100,
          lightness: 50,
          back: 0,
          multi: !1,
          speed: 1,
        }),
        (this.requestAnimFrame = null),
        (this.canvas = null);
    }
    makeCanvas() {
      (this.canvas = document.createElement('canvas')),
        (this.canvas.id = 'dubPlusRainCanvas'),
        (this.canvas.style.position = 'fixed'),
        (this.canvas.style.top = '0px'),
        (this.canvas.style.left = '0px'),
        (this.canvas.style.zIndex = '100'),
        (this.canvas.style.pointerEvents = 'none'),
        document.body.prepend(this.canvas);
    }
    start() {
      this.makeCanvas(), this.startAnimation();
    }
    stop() {
      var e;
      this.stopAnimation(), null == (e = this.canvas) || e.remove();
    }
    onWindowResize() {
      (this.width = this.canvas.width = window.innerWidth),
        (this.height = this.canvas.height = window.innerHeight);
    }
    startAnimation() {
      const e = window.requestAnimationFrame;
      if (((this.requestAnimFrame = e ? e.bind(window) : null), !this.canvas))
        return;
      const t = this.canvas.getContext('2d');
      this.width,
        (this.height = 0),
        this.onWindowResize(),
        (window.onresize = this.onWindowResize.bind(this)),
        (this.particles = []),
        (this.drops = []),
        (this.numbase = 5),
        (this.numb = 2);
      let n = this;
      !(function e() {
        n.requestAnimFrame(e), n.update(), n.rendu(t);
      })();
    }
    buildRainParticle(e, t, n) {
      for (n || (n = this.numb); n--; )
        this.particles.push({
          speedX: 0.25 * Math.random(),
          speedY: 9 * Math.random() + 1,
          X: e,
          Y: t,
          alpha: 1,
          color:
            'hsla(' +
            this.controls.color +
            ',' +
            this.controls.saturation +
            '%, ' +
            this.controls.lightness +
            '%,' +
            this.controls.opacity +
            ')',
        });
    }
    explosion(e, t, n, o) {
      for (o || (o = this.numbase); o--; )
        this.drops.push({
          speedX: 4 * Math.random() - 2,
          speedY: -4 * Math.random(),
          X: e,
          Y: t,
          radius: 0.65 + Math.floor(1.6 * Math.random()),
          alpha: 1,
          color: n,
        });
    }
    rendu(e) {
      this.controls.multi && (this.controls.color = 360 * Math.random()),
        e.save(),
        e.clearRect(0, 0, this.width, this.height);
      const t = this.particles,
        n = this.drops,
        o = 2 * Math.PI;
      for (let n, o = 0; (n = t[o]); o++)
        (e.globalAlpha = n.alpha),
          (e.fillStyle = n.color),
          e.fillRect(n.X, n.Y, n.speedY / 4, n.speedY);
      for (let t, i = 0; (t = n[i]); i++)
        (e.globalAlpha = t.alpha),
          (e.fillStyle = t.color),
          e.beginPath(),
          e.arc(t.X, t.Y, t.radius, 0, o),
          e.fill();
      (e.strokeStyle = 'white'), (e.lineWidth = 2), e.restore();
    }
    update() {
      const e = this.particles,
        t = this.drops;
      for (let t, n = 0; (t = e[n]); n++)
        (t.X += t.speedX),
          (t.Y += t.speedY + 5),
          t.Y > this.height - 15 &&
            (e.splice(n--, 1), this.explosion(t.X, t.Y, t.color));
      for (let e, n = 0; (e = t[n]); n++)
        (e.X += e.speedX),
          (e.Y += e.speedY),
          (e.radius -= 0.075),
          e.alpha > 0 ? (e.alpha -= 0.005) : (e.alpha = 0),
          e.radius < 0 && t.splice(n--, 1);
      let n = this.controls.rain;
      for (; n--; )
        this.buildRainParticle(Math.floor(Math.random() * this.width), -15);
    }
    stopAnimation() {
      this.requestAnimFrame = function () {};
    }
  }
  const Ci = {
    id: 'rain',
    label: 'rain.label',
    description: 'rain.description',
    category: 'general',
    turnOn() {
      (this.rainEffect = new Ui()), this.rainEffect.start();
    },
    turnOff() {
      this.rainEffect.stop(), delete this.rainEffect;
    },
  };
  var zi = $t(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 344v112a23.9 23.9 0 0 1 -24 24H312c-21.4 0-32.1-25.9-17-41l36.2-36.2L224 295.6 116.8 402.9 153 439c15.1 15.1 4.4 41-17 41H24a23.9 23.9 0 0 1 -24-24V344c0-21.4 25.9-32.1 41-17l36.2 36.2L184.5 256 77.2 148.7 41 185c-15.1 15.1-41 4.4-41-17V56a23.9 23.9 0 0 1 24-24h112c21.4 0 32.1 25.9 17 41l-36.2 36.2L224 216.4l107.2-107.3L295 73c-15.1-15.1-4.4-41 17-41h112a23.9 23.9 0 0 1 24 24v112c0 21.4-25.9 32.1-41 17l-36.2-36.2L263.5 256l107.3 107.3L407 327.1c15.1-15.2 41-4.5 41 16.9z"></path></svg>',
  );
  const Li = {
      id: 'fullscreen',
      label: 'fullscreen.label',
      description: 'fullscreen.description',
      category: 'user-interface',
      altIcon: function (e) {
        Tt(e, zi());
      },
      onClick() {
        const e = document.querySelector('.player_container iframe');
        e
          ? e.requestFullscreen
            ? e.requestFullscreen()
            : e.msRequestFullscreen
              ? e.msRequestFullscreen()
              : e.mozRequestFullScreen
                ? e.mozRequestFullScreen()
                : e.webkitRequestFullscreen && e.webkitRequestFullscreen()
          : cn('Fullscreen: No video element found');
      },
    },
    Qi = {
      id: 'split-chat',
      label: 'split-chat.label',
      description: 'split-chat.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-split-chat');
      },
      turnOff() {
        document.body.classList.remove('dubplus-split-chat');
      },
    },
    Mi = {
      id: 'hide-chat',
      label: 'hide-chat.label',
      description: 'hide-chat.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-video-only');
      },
      turnOff() {
        document.body.classList.remove('dubplus-video-only');
      },
    },
    $i = {
      id: 'hide-video',
      label: 'hide-video.label',
      description: 'hide-video.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-chat-only');
      },
      turnOff() {
        document.body.classList.remove('dubplus-chat-only');
      },
    },
    Ii = {
      id: 'hide-avatars',
      label: 'hide-avatars.label',
      description: 'hide-avatars.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-hide-avatars');
      },
      turnOff() {
        document.body.classList.remove('dubplus-hide-avatars');
      },
    },
    Ni = {
      id: 'hide-bg',
      label: 'hide-bg.label',
      description: 'hide-bg.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-hide-bg');
      },
      turnOff() {
        document.body.classList.remove('dubplus-hide-bg');
      },
    },
    Ti = {
      id: 'show-timestamps',
      label: 'show-timestamps.label',
      description: 'show-timestamps.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-show-timestamp');
      },
      turnOff() {
        document.body.classList.remove('dubplus-show-timestamp');
      },
    };
  function Ai(e) {
    const t = e.target.tagName.toLowerCase();
    ' ' === e.key &&
      'input' !== t &&
      'textarea' !== t &&
      window.QueUp.room.player.mutePlayer();
  }
  const Di = {
    id: 'spacebar-mute',
    label: 'spacebar-mute.label',
    description: 'spacebar-mute.description',
    category: 'settings',
    turnOn() {
      document.addEventListener('keypress', Ai);
    },
    turnOff() {
      document.removeEventListener('keypress', Ai);
    },
  };
  function ji(e) {
    let t = 'You are leaving';
    return (e.returnValue = t), t;
  }
  const qi = {
    id: 'warn-redirect',
    label: 'warn-redirect.label',
    description: 'warn-redirect.description',
    category: 'settings',
    turnOn() {
      window.addEventListener('beforeunload', ji);
    },
    turnOff() {
      window.removeEventListener('beforeunload', ji);
    },
  };
  function Fi(e, t) {
    var n;
    return (
      null == (n = document.querySelector(`style#${t}`)) || n.remove(),
      fetch(e)
        .then((e) => e.text())
        .then((e) => {
          const n = document.createElement('style');
          (n.id = t), (n.textContent = e), document.head.appendChild(n);
        })
    );
  }
  const Pi = 'dubplus-community-css',
    Vi = {
      id: 'community-theme',
      label: 'community-theme.label',
      description: 'community-theme.description',
      category: 'customize',
      turnOn() {
        const e = window.QueUp.room.model.get('roomUrl');
        fetch(`https://api.queup.net/room/${e}`)
          .then((e) => e.json())
          .then((e) => {
            const t = e.data.description,
              n = new RegExp(
                /(@dub(x|plus|\+)=)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/,
                'i',
              );
            let o = null;
            if (
              (t.replace(n, function (e, t, n, i) {
                o = i;
              }),
              o)
            )
              return cn('loading community css theme from:', o), Fi(o, Pi);
            cn('No community CSS theme found');
          })
          .catch((e) => {
            dn('Community CSS: Failed to load room info', e);
          });
      },
      turnOff() {
        var e;
        null == (e = document.getElementById(Pi)) || e.remove();
      },
    },
    Bi = 'dubplus-user-custom-css',
    Ri = {
      id: 'custom-css',
      label: 'custom-css.label',
      description: 'custom-css.description',
      category: 'customize',
      custom: {
        title: 'custom-css.modal.title',
        content: 'custom-css.modal.content',
        placeholder: 'custom-css.modal.placeholder',
        maxlength: 500,
        validation: (e) =>
          '' === e.trim() ||
          !!/^http.+\.css$/.test(e) ||
          gn('custom-css.modal.validation'),
        onConfirm(e) {
          var t;
          if (!e)
            return (
              null == (t = document.getElementById(Bi)) || t.remove(),
              void (Fn.options[Ri.id] = !1)
            );
          Fi(e, Bi).catch((e) => {
            dn('Error loading custom css file:', e);
          });
        },
      },
      turnOn() {
        Fn.custom[this.id] &&
          Fi(Fn.custom[this.id], Bi).catch((e) => {
            dn('Error loading custom css file:', e);
          });
      },
      turnOff() {
        var e;
        null == (e = document.getElementById(Bi)) || e.remove();
      },
    };
  function Ji(e) {
    const t = $n();
    t && (t.setAttribute('data-original', t.src), (t.src = e));
  }
  function Ki() {
    const e = $n();
    e &&
      e.hasAttribute('data-original') &&
      ((e.src = e.getAttribute('data-original')), e.removeAttribute);
  }
  const Wi = {
    id: 'custom-bg',
    label: 'custom-bg.label',
    description: 'custom-bg.description',
    category: 'customize',
    custom: {
      title: 'custom-bg.modal.title',
      content: 'custom-bg.modal.content',
      placeholder: 'custom-bg.modal.placeholder',
      maxlength: 500,
      validation: (e) =>
        '' === e.trim() ||
        !!e.startsWith('http') ||
        gn('custom-bg.modal.validation'),
      onConfirm(e) {
        Ki(), e && Ji(e);
      },
    },
    turnOn() {
      Ki();
      const e = Fn.custom[this.id];
      e && Ji(e);
    },
    turnOff() {
      Ki();
    },
  };
  let Yi;
  const Hi = {
      id: 'custom-notification-sound',
      label: 'custom-notification-sound.label',
      description: 'custom-notification-sound.description',
      category: 'customize',
      custom: {
        title: 'custom-notification-sound.modal.title',
        content: 'custom-notification-sound.modal.content',
        placeholder: 'custom-notification-sound.modal.placeholder',
        maxlength: 500,
        validation: (e) =>
          '' === e.trim() ||
          !!window.soundManager.canPlayURL(e) ||
          gn('custom-notification-sound.modal.validation'),
        onConfirm(e) {
          e
            ? (window.QueUp.room.chat.mentionChatSound.url = e)
            : ((window.QueUp.room.chat.mentionChatSound.url = Yi),
              (Fn.options[Hi.id] = !1));
        },
      },
      turnOn() {
        (Yi = window.QueUp.room.chat.mentionChatSound.url),
          Fn.custom[this.id] &&
            (window.QueUp.room.chat.mentionChatSound.url = Fn.custom[this.id]);
      },
      turnOff() {
        window.QueUp.room.chat.mentionChatSound.url = Yi;
      },
    },
    Xi = {
      id: 'flip-interface',
      label: 'flip-interface.label',
      description: 'flip-interface.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-flip-interface');
      },
      turnOff() {
        document.body.classList.remove('dubplus-flip-interface');
      },
    };
  let Gi = null;
  function Zi() {
    if (Fn.options.afk)
      cn('auto-afk timer expired, but afk is already enabled');
    else {
      cn('auto-afk timer expired, enabling afk');
      const e = document.querySelector('#dubplus-afk [role=switch]');
      null == e || e.click();
    }
  }
  function es() {
    let e = parseInt(Fn.custom['auto-afk'], 10);
    isNaN(e) && (e = 30),
      cn('auto-afk onBlur: starting timer for ', e, 'minutes'),
      (Gi = setTimeout(Zi, 60 * e * 1e3));
  }
  function ts() {
    Gi
      ? (cn('auto-afk onFocus: clearing timer'), clearTimeout(Gi), (Gi = null))
      : cn('auto-afk onFocus: no timer to clear');
  }
  const ns = {
    id: 'auto-afk',
    label: 'auto-afk.label',
    description: 'auto-afk.description',
    category: 'general',
    turnOn() {
      var e, t;
      (t = es), (e = ts) && ei.push(e), t && Zo.push(t);
    },
    turnOff() {
      var e, t;
      (t = es),
        (e = ts) && ei.splice(ei.indexOf(e), 1),
        t && Zo.splice(Zo.indexOf(t), 1),
        ts();
    },
    custom: {
      title: 'auto-afk.modal.title',
      content: 'auto-afk.modal.content',
      placeholder: '30',
      defaultValue: '30',
      maxlength: 10,
      validation(e) {
        if ('' === e.trim()) return !0;
        const t = parseInt(e, 10);
        return (
          !(e.includes('.') || isNaN(t) || t < 1) ||
          gn('auto-afk.modal.validation')
        );
      },
    },
  };
  function os(e) {
    if (e.user._id === window.QueUp.session.id) {
      const e = Fn.custom['grab-response'];
      e && _o(e);
    }
  }
  const is = {
    id: 'grab-response',
    label: 'grab-response.label',
    description: 'grab-response.description',
    category: 'general',
    turnOn() {
      window.QueUp.Events.bind(ho, os);
    },
    turnOff() {
      window.QueUp.Events.unbind(ho, os);
    },
    custom: {
      title: 'grab-response.modal.title',
      content: 'grab-response.modal.content',
      placeholder: 'grab-response.modal.placeholder',
      maxlength: 255,
    },
  };
  function ss(e) {
    const t = e.target.parentElement,
      n = e.target.previousElementSibling;
    t.classList.contains('dubplus-collapsed')
      ? (t.classList.remove('dubplus-collapsed'),
        (e.target.title = 'collapse image'),
        n.setAttribute('aria-hidden', 'false'),
        e.target.setAttribute('aria-expanded', 'true'))
      : (t.classList.add('dubplus-collapsed'),
        (e.target.title = 'expand image'),
        n.setAttribute('aria-hidden', 'true'),
        e.target.setAttribute('aria-expanded', 'false'));
  }
  function rs(e) {
    if (e && !e.parentElement.classList.contains('dubplus-collapsible-image')) {
      e.parentElement.classList.add('dubplus-collapsible-image');
      const t = document.createElement('button');
      (t.type = 'button'),
        (t.title = 'collapse image'),
        t.classList.add('dubplus-collapser'),
        t.addEventListener('click', ss),
        e.parentElement.appendChild(t);
    }
  }
  function as(e) {
    if (null == e ? void 0 : e.chatid) {
      const t = document.querySelector(`.chat-id-${e.chatid}`);
      if (t) return void rs(t.querySelector('.autolink-image'));
    }
    Mn().forEach(rs);
  }
  const ls = [
      ko,
      Uo,
      ns,
      $o,
      Bo,
      Ko,
      Xo,
      {
        id: 'collapsible-images',
        label: 'collapsible-images.label',
        description: 'collapsible-images.description',
        category: 'general',
        turnOn(e) {
          window.QueUp.Events.bind(wo, as),
            e
              ? setTimeout(() => {
                  as();
                }, 1e3)
              : as();
        },
        turnOff() {
          window.QueUp.Events.unbind(wo, as),
            document
              .querySelectorAll('.dubplus-collapsible-image')
              .forEach((e) => {
                e.classList.remove('dubplus-collapsible-image'),
                  e.classList.remove('dubplus-collapsed');
              }),
            document.querySelectorAll('.dubplus-collapser').forEach((e) => {
              e.removeEventListener('click', ss), e.remove();
            }),
            Mn().forEach((e) => e.removeAttribute('aria-hidden'));
        },
      },
      ri,
      li,
      di,
      wi,
      xi,
      Ei,
      Si,
      is,
      Oi,
      Ci,
    ],
    us = [Li, Qi, Mi, $i, Ii, Ni, Ti, Xi],
    cs = [Di, qi],
    ds = [Vi, Ri, Wi, Hi];
  var ps = Mt('<!> <!>', 1);
  var fs = Mt(
    '<button id="dubplus-eta" type="button" class="icon-history eta_tooltip_t dubplus-btn-player"></button>',
  );
  function ms(e, t) {
    j(t, !0);
    let n = G('ETA');
    function o() {
      var e, t;
      const n = null == (e = In()) ? void 0 : e.textContent;
      if (!n) return gn('Eta.tooltip.notInQueue');
      const o = parseInt(
          null == (t = document.querySelector('div.currentTime span.min'))
            ? void 0
            : t.textContent,
        ),
        i = 4 * parseInt(n) - 4 + o;
      return i >= 0
        ? gn('Eta.tootltip', { minutes: i })
        : gn('Eta.tooltip.notInQueue');
    }
    var i = fs();
    Kt(
      i,
      (e, t) => (null == zn ? void 0 : zn(e, t)),
      () => ({ to: Nn }),
    ),
      we(() => {
        Zt(i, 'aria-label', mt(n)), Zt(i, 'data-dp-tooltip', mt(n));
      }),
      Ut('mouseenter', i, () => {
        ee(n, o(), !0);
      }),
      Tt(e, i),
      q();
  }
  var vs = Mt(
    '<button id="dubplus-snooze" type="button" class="icon-mute snooze_btn dubplus-btn-player svelte-1va87zs"><span class="svelte-1va87zs">1</span></button>',
  );
  Ct(['click']);
  var hs = Mt(
      '<li><div class="ac-image svelte-198qtio"><img class="svelte-198qtio"></div></li>',
    ),
    bs = Mt(
      '<div><div class="ac-header svelte-198qtio"><span class="sr-only"> </span> <div class="tip-container" aria-hidden="true"><span class="tip-navigate"><key class="icon-upvote"></key> &amp; <key class="icon-downvote"></key> </span> <span class="tip-complete"><key>TAB</key> or <key>ENTER</key> </span> <span class="tip-close"><key>ESC</key> </span></div></div> <ul id="autocomplete-preview" class="svelte-198qtio"></ul> <span class="ac-text-preview svelte-198qtio"> </span></div>',
    );
  function gs(e, t) {
    j(t, !0),
      he(() => {
        if (Io.emojiList.length > 0 && 'number' == typeof Io.selectedIndex) {
          const e = document.querySelector('.preview-item.selected');
          e &&
            e.scrollIntoView({
              block: 'nearest',
              inline: 'nearest',
              behavior: 'smooth',
            });
        }
      });
    var n = bs();
    let o;
    var i = ce(n),
      s = ce(i),
      r = ce(s),
      a = ce(pe(s, 2)),
      l = pe(ce(a), 3),
      u = pe(a, 2),
      c = pe(ce(u), 3),
      d = pe(u, 2),
      p = pe(ce(d)),
      f = pe(i, 2);
    Ft(
      f,
      23,
      () => Io.emojiList,
      ({ src: e, text: t, platform: n, alt: o }) => e + n,
      (e, t, n) => {
        let o = () => mt(t).alt;
        var i = hs();
        let s;
        i.__click = () =>
          (function (e) {
            const t = Ln();
            qo(t, e), t.focus();
          })(mt(n));
        var r = ce(i),
          a = ce(r);
        we(
          (e) => {
            (s = Yt(
              i,
              0,
              `preview-item ${mt(t).platform}-previews`,
              'svelte-198qtio',
              s,
              e,
            )),
              Zt(i, 'title', mt(t).text),
              Zt(a, 'src', mt(t).src),
              Zt(a, 'alt', o()),
              Zt(a, 'title', o());
          },
          [() => ({ selected: mt(n) === Io.selectedIndex })],
        ),
          Tt(e, i);
      },
    );
    var m = ce(pe(f, 2));
    Kt(
      n,
      (e, t) => (null == zn ? void 0 : zn(e, t)),
      () => ({ to: '.pusher-chat-widget-input', position: 'prepend' }),
    ),
      we(
        (e, t, i, s, a) => {
          var u;
          (o = Yt(n, 0, 'ac-preview-container svelte-198qtio', null, o, e)),
            At(r, t),
            At(l, ` (${i ?? ''})`),
            At(c, ` (${s ?? ''})`),
            At(p, ` (${a ?? ''})`),
            At(
              m,
              null == (u = Io.emojiList[Io.selectedIndex]) ? void 0 : u.text,
            );
        },
        [
          () => ({ 'ac-show': Io.emojiList.length > 0 }),
          () => gn('autocomplete.preview.a11y'),
          () => gn('autocomplete.preview.navigate'),
          () => gn('autocomplete.preview.select'),
          () => gn('autocomplete.preview.close'),
        ],
      ),
      Tt(e, n),
      q();
  }
  Ct(['click']);
  var ws = (e, t, n) => t(mt(n).username),
    ys = Mt(
      '<li class="preview-dubinfo-item users-previews svelte-ujv5bp"><div class="dubinfo-image svelte-ujv5bp"><img alt="User Avatar" class="svelte-ujv5bp"></div> <button type="button" class="dubinfo-text svelte-ujv5bp"> </button></li>',
    ),
    xs = Mt('<li><!></li>'),
    ks = Mt('<div role="none"><ul id="dubinfo-preview"><!></ul></div>');
  function Es(e, t) {
    j(t, !0);
    let n = R(() => {
        return 'updub' === (e = t.dubType)
          ? pi.upDubs
          : 'downdub' === e
            ? pi.downDubs
            : 'grab' === e
              ? pi.grabs
              : [];
        var e;
      }),
      o = G(0),
      i = G(0),
      s = G('none');
    function r() {
      var e, n;
      return 'updub' === t.dubType
        ? null == (e = document.querySelector('.dubup'))
          ? void 0
          : e.parentElement
        : 'downdub' === t.dubType
          ? null == (n = document.querySelector('.dubdown'))
            ? void 0
            : n.parentElement
          : 'grab' === t.dubType
            ? document.querySelector('.add-to-playlist')
            : null;
    }
    function a() {
      const e = r();
      if (e) {
        const t = e.getBoundingClientRect();
        ee(o, window.innerWidth - t.right), ee(i, t.height - 2), ee(s, 'block');
      } else dn(`Could not find hover target for ${t.dubType} in onHover`);
    }
    function l(e) {
      (e.relatedTarget && e.relatedTarget.closest('.dubplus-dubs-container')) ||
        ee(s, 'none');
    }
    function u(e) {
      const t = Ln();
      (t.value = `${t.value}@${e} `.trimStart()), t.focus();
    }
    rn(() => {
      const e = r();
      e
        ? (e.addEventListener('mouseenter', a),
          e.addEventListener('mouseleave', l))
        : dn(`Could not find hover target for ${t.dubType} in onMount`);
    }),
      an(() => {
        const e = r();
        e
          ? (e.removeEventListener('mouseenter', a),
            e.removeEventListener('mouseleave', l))
          : dn(`Could not find hover target for ${t.dubType} in onDestroy`);
      });
    var c = ks(),
      d = ce(c);
    let p;
    var f = ce(d),
      m = (e) => {
        var t = Nt();
        Ft(
          de(t),
          17,
          () => mt(n),
          (e) => e.userid,
          (e, t) => {
            var n = ys(),
              o = ce(n),
              i = ce(o),
              s = pe(o, 2);
            s.__click = [ws, u, t];
            var r = ce(s);
            we(
              (e) => {
                Zt(i, 'src', e), At(r, `@${mt(t).username ?? ''}`);
              },
              [
                () => {
                  return (e = mt(t).userid), `${fi}/user/${e}/image`;
                  var e;
                },
              ],
            ),
              Tt(e, n);
          },
        ),
          Tt(e, t);
      },
      v = (e) => {
        var n = xs(),
          o = ce(n),
          i = (e) => {
            var n = It();
            we(
              (e) => At(n, e),
              [() => gn('dubs-hover.no-votes', { dubType: t.dubType })],
            ),
              Tt(e, n);
          },
          s = (e) => {
            var n = It();
            we(
              (e) => At(n, e),
              [() => gn('dubs-hover.no-grabs', { dubType: t.dubType })],
            ),
              Tt(e, n);
          };
        qt(o, (e) => {
          'updub' === t.dubType || 'downdub' === t.dubType ? e(i) : e(s, !1);
        }),
          Tt(e, n);
      };
    qt(f, (e) => {
      mt(n).length > 0 ? e(m) : e(v, !1);
    }),
      Kt(
        c,
        (e, t) => (null == zn ? void 0 : zn(e, t)),
        () => ({ to: 'body' }),
      ),
      we(
        (e) => {
          Zt(c, 'id', `dubplus-${t.dubType}s-container`),
            Yt(
              c,
              0,
              `dubplus-dubs-container dubplus-${t.dubType}s-container`,
              'svelte-ujv5bp',
            ),
            Ht(c, `bottom: ${mt(i)}px; right: ${mt(o)}px; display: ${mt(s)};`),
            (p = Yt(d, 0, 'dubinfo-show svelte-ujv5bp', null, p, e));
        },
        [() => ({ 'dubplus-no-dubs': 0 === mt(n).length })],
      ),
      Ut('mouseleave', c, () => ee(s, 'none')),
      Tt(e, c),
      q();
  }
  Ct(['click']);
  let _s = 200;
  const Ss = 100;
  function Os() {
    return document.getElementById('snow-container');
  }
  function Us(e = '') {
    const t = (function () {
      let e = document.getElementById('psjs-css');
      return (
        e ||
        ((e = document.createElement('style')),
        (e.id = 'psjs-css'),
        document.head.appendChild(e),
        e)
      );
    })();
    (t.textContent = e), document.head.appendChild(t);
  }
  function Cs(e = 100) {
    return Math.floor(Math.random() * e) + 1;
  }
  function zs(e, t) {
    return (
      (e = Math.ceil(e)),
      (t = Math.floor(t)),
      Math.floor(Math.random() * (t - e + 1)) + e
    );
  }
  function Ls() {
    !(function () {
      var e;
      const t = Os();
      _s = Number(
        (null == (e = null == t ? void 0 : t.dataset) ? void 0 : e.count) || _s,
      );
    })(),
      (function (e = 200) {
        let t = '';
        for (let i = 1; i < e; i++) {
          let e = 100 * Math.random(),
            s = 10 * Math.random(),
            r = e + s,
            a = e + s / 2,
            l = ((n = 0.3), (o = 0.8), Math.random() * (o - n) + n),
            u = l * Ss,
            c = Math.random(),
            d = zs(10, 30),
            p = -1 * Cs(30);
          t += `\n      .snowflake:nth-child(${i}) {\n        opacity: ${Math.random()};\n        transform: translate(${e}vw, -10px) scale(${c});\n        animation: fall-${i} ${d}s ${p}s linear infinite;\n      }\n      @keyframes fall-${i} {\n        ${100 * l}% {\n          transform: translate(${r}vw, ${u}vh) scale(${c});\n        }\n        to {\n          transform: translate(${a}vw, 100vh) scale(${c});\n        }\n      }\n    `;
        }
        var n, o;
        Us(t);
      })(_s),
      (function (e = 200) {
        e -= 1;
        const t = Os();
        t.replaceChildren();
        for (let n = 0; n < e; n++) {
          let e = document.createElement('div');
          (e.className = 'snowflake'), t.appendChild(e);
        }
      })(_s);
  }
  var Qs = Mt('<div id="snow-container" class="svelte-qgqre1"></div>');
  var Ms = Mt(
    '<li class="svelte-psnl7x"><button type="button" class="svelte-psnl7x"><!> <span class="dubplus-menu-label svelte-psnl7x"> </span></button></li>',
  );
  Ct(['click']);
  var $s = Mt('<!> <!>', 1);
  function Is(e, t) {
    j(t, !1), on();
    var n = $s(),
      o = de(n);
    const i = J(() => gn('user-interface.title'));
    Rn(o, {
      settingsId: 'user-interface',
      get name() {
        return mt(i);
      },
    }),
      Kn(pe(o, 2), {
        settingsId: 'user-interface',
        children: (e, t) => {
          var n = Nt();
          Ft(
            de(n),
            1,
            () => us,
            (e) => e.id,
            (e, t) => {
              var n = Nt(),
                o = de(n),
                i = (e) => {
                  !(function (e, t) {
                    j(t, !0),
                      rn(() => {
                        t.init && t.init();
                      });
                    var n = Ms(),
                      o = ce(n);
                    o.__click = function (...e) {
                      var n;
                      null == (n = t.onClick) || n.apply(this, e);
                    };
                    var i = ce(o);
                    Jt(
                      i,
                      () => t.icon,
                      (e, t) => {
                        t(e, {});
                      },
                    );
                    var s = ce(pe(i, 2));
                    we(
                      (e, i, r) => {
                        Zt(n, 'id', t.id),
                          Zt(n, 'title', e),
                          Zt(o, 'aria-label', i),
                          At(s, r);
                      },
                      [
                        () => gn(t.description),
                        () => gn(t.description),
                        () => gn(t.label),
                      ],
                    ),
                      Tt(e, n),
                      q();
                  })(e, {
                    get id() {
                      return mt(t).id;
                    },
                    get label() {
                      return mt(t).label;
                    },
                    get description() {
                      return mt(t).description;
                    },
                    get icon() {
                      return mt(t).altIcon;
                    },
                    get onClick() {
                      return mt(t).onClick;
                    },
                    get init() {
                      return mt(t).init;
                    },
                  });
                },
                s = (e) => {
                  mo(e, {
                    get id() {
                      return mt(t).id;
                    },
                    get label() {
                      return mt(t).label;
                    },
                    get description() {
                      return mt(t).description;
                    },
                    get init() {
                      return mt(t).init;
                    },
                    get customize() {
                      return mt(t).custom;
                    },
                    get turnOn() {
                      return mt(t).turnOn;
                    },
                    get turnOff() {
                      return mt(t).turnOff;
                    },
                  });
                };
              qt(o, (e) => {
                mt(t).altIcon ? e(i) : e(s, !1);
              }),
                Tt(e, n);
            },
          ),
            Tt(e, n);
        },
      }),
      Tt(e, n),
      q();
  }
  var Ns,
    Ts,
    As =
      ((Ns = () => Fn),
      (Ts = X(0)),
      function () {
        return 1 === arguments.length
          ? (ee(Ts, mt(Ts) + 1), arguments[0])
          : (mt(Ts), Ns());
      }),
    Ds = Mt('<!> <!>', 1);
  var js = Mt('<!> <!>', 1);
  function qs(e, t, n, o, i, s) {
    document.body.classList.contains(t)
      ? s()
      : (ee(n, gn('SnoozeVideo.tooltip.undo'), !0),
        ee(o, 'icon-eye-unblocked'),
        document.body.classList.add(t),
        window.QueUp.Events.bind(go, i));
  }
  var Fs = Mt(
    '<button id="dubplus-snooze-video" type="button"><span class="svelte-1va87zs">1</span></button>',
  );
  Ct(['click']);
  const Ps = '4.0.3';
  var Vs = Mt('<!> <!> <!>', 1),
    Bs = Mt(
      '<!> <!> <!> <!> <!> <!> <!> <aside class="dubplus-menu svelte-yl0u1x"><p class="dubplus-menu-header svelte-yl0u1x"> <span class="version svelte-yl0u1x"> </span></p> <!> <!> <!> <!> <!></aside> <!>',
      1,
    );
  function Rs(e, t) {
    j(t, !1),
      rn(() => {
        document.querySelector('html').classList.add('dubplus');
      }),
      on();
    var n = Bs(),
      o = de(n);
    !(function (e, t) {
      j(t, !0);
      let n = G(P(gn('Snooze.tooltip')));
      const o = { currentVol: 50, snoozed: !1 };
      function i() {
        window.QueUp.room.player.setVolume(o.currentVol),
          window.QueUp.room.player.updateVolumeBar(),
          (o.snoozed = !1),
          ee(n, gn('Snooze.tooltip'), !0),
          window.QueUp.Events.unbind(go, s);
      }
      function s(e) {
        if (e.startTime < 2 && o.snoozed) return i(), !0;
      }
      var r = vs();
      (r.__click = function () {
        !o.snoozed &&
        !window.QueUp.room.player.muted_player &&
        window.QueUp.playerController.volume > 2
          ? (ee(n, gn('Snooze.tooltip.undo'), !0),
            (o.currentVol = window.QueUp.playerController.volume),
            window.QueUp.room.player.mutePlayer(),
            (o.snoozed = !0),
            window.QueUp.Events.bind(go, s))
          : o.snoozed && i();
      }),
        Kt(
          r,
          (e, t) => (null == zn ? void 0 : zn(e, t)),
          () => ({ to: Nn }),
        ),
        we(() => {
          Zt(r, 'aria-label', mt(n)), Zt(r, 'data-dp-tooltip', mt(n));
        }),
        Tt(e, r),
        q();
    })(o, {});
    var i = pe(o, 2);
    !(function (e, t) {
      j(t, !1), on();
      var n = An();
      (n.__click = [Tn]),
        vn(ce(n)),
        Kt(
          n,
          (e, t) => (null == zn ? void 0 : zn(e, t)),
          () => ({ to: '.header-right-navigation' }),
        ),
        Tt(e, n),
        q();
    })(i, {});
    var s = pe(i, 2);
    ms(s, {});
    var r = pe(s, 2);
    !(function (e, t) {
      j(t, !0);
      let n = G('icon-eye-blocked'),
        o = G(P(gn('SnoozeVideo.tooltip')));
      const i = 'dubplus-snooze-video';
      function s() {
        ee(o, gn('SnoozeVideo.tooltip'), !0),
          ee(n, 'icon-eye-blocked'),
          document.body.classList.remove(i),
          window.QueUp.Events.unbind(go, r);
      }
      function r(e) {
        if (e.startTime < 2) return s(), !0;
      }
      var a = Fs();
      (a.__click = [qs, i, o, n, r, s]),
        Kt(
          a,
          (e, t) => (null == zn ? void 0 : zn(e, t)),
          () => ({ to: Nn }),
        ),
        we(() => {
          Yt(
            a,
            0,
            `${mt(n)} snooze-video-btn dubplus-btn-player`,
            'svelte-1va87zs',
          ),
            Zt(a, 'aria-label', mt(o)),
            Zt(a, 'data-dp-tooltip', mt(o));
        }),
        Tt(e, a),
        q();
    })(r, {});
    var a = pe(r, 2),
      l = (e) => {
        gs(e, {});
      };
    qt(a, (e) => {
      Fn.options.autocomplete && e(l);
    });
    var u = pe(a, 2),
      c = (e) => {
        var t = Vs(),
          n = de(t);
        Es(n, { dubType: 'updub' });
        var o = pe(n, 2);
        Es(o, { dubType: 'downdub' }),
          Es(pe(o, 2), { dubType: 'grab' }),
          Tt(e, t);
      };
    qt(u, (e) => {
      Fn.options['dubs-hover'] && e(c);
    });
    var d = pe(u, 2),
      p = (e) => {
        !(function (e, t) {
          j(t, !1),
            rn(() => {
              Ls(), window.addEventListener('resize', Ls);
            }),
            an(() => {
              window.removeEventListener('resize', Ls);
            }),
            on();
          var n = Qs();
          Kt(
            n,
            (e, t) => (null == zn ? void 0 : zn(e, t)),
            () => ({ to: 'body' }),
          ),
            Tt(e, n),
            q();
        })(e, {});
      };
    qt(d, (e) => {
      Fn.options.snow && e(p);
    });
    var f = pe(d, 2),
      m = ce(f),
      v = ce(m),
      h = ce(pe(v)),
      b = pe(m, 2);
    !(function (e, t) {
      j(t, !1), on();
      var n = ps(),
        o = de(n);
      const i = J(() => gn('general.title'));
      Rn(o, {
        settingsId: 'general',
        get name() {
          return mt(i);
        },
      }),
        Kn(pe(o, 2), {
          settingsId: 'general',
          children: (e, t) => {
            var n = Nt();
            Ft(
              de(n),
              1,
              () => ls,
              (e) => e.id,
              (e, t) => {
                mo(e, {
                  get id() {
                    return mt(t).id;
                  },
                  get label() {
                    return mt(t).label;
                  },
                  get description() {
                    return mt(t).description;
                  },
                  get init() {
                    return mt(t).init;
                  },
                  get customize() {
                    return mt(t).custom;
                  },
                  get modOnly() {
                    return mt(t).modOnly;
                  },
                  get turnOn() {
                    return mt(t).turnOn;
                  },
                  get turnOff() {
                    return mt(t).turnOff;
                  },
                });
              },
            ),
              Tt(e, n);
          },
        }),
        Tt(e, n),
        q();
    })(b, {});
    var g = pe(b, 2);
    Is(g, {});
    var w = pe(g, 2);
    !(function (e, t) {
      j(t, !1),
        cs.forEach((e) => {
          As().options[e.id] || As((As().options[e.id] = !1));
        }),
        on();
      var n = Ds(),
        o = de(n);
      const i = J(() => gn('settings.title'));
      Rn(o, {
        settingsId: 'settings',
        get name() {
          return mt(i);
        },
      }),
        Kn(pe(o, 2), {
          settingsId: 'settings',
          children: (e, t) => {
            var n = Nt();
            Ft(
              de(n),
              1,
              () => cs,
              (e) => e.id,
              (e, t) => {
                mo(e, {
                  get id() {
                    return mt(t).id;
                  },
                  get label() {
                    return mt(t).label;
                  },
                  get description() {
                    return mt(t).description;
                  },
                  get init() {
                    return mt(t).init;
                  },
                  get customize() {
                    return mt(t).custom;
                  },
                  get turnOn() {
                    return mt(t).turnOn;
                  },
                  get turnOff() {
                    return mt(t).turnOff;
                  },
                });
              },
            ),
              Tt(e, n);
          },
        }),
        Tt(e, n),
        q();
    })(w, {});
    var y = pe(w, 2);
    !(function (e, t) {
      j(t, !1), on();
      var n = js(),
        o = de(n);
      const i = J(() => gn('customize.title'));
      Rn(o, {
        settingsId: 'customize',
        get name() {
          return mt(i);
        },
      }),
        Kn(pe(o, 2), {
          settingsId: 'customize',
          children: (e, t) => {
            var n = Nt();
            Ft(
              de(n),
              1,
              () => ds,
              (e) => e.id,
              (e, t) => {
                mo(e, {
                  get id() {
                    return mt(t).id;
                  },
                  get label() {
                    return mt(t).label;
                  },
                  get description() {
                    return mt(t).description;
                  },
                  get init() {
                    return mt(t).init;
                  },
                  get customize() {
                    return mt(t).custom;
                  },
                  get turnOn() {
                    return mt(t).turnOn;
                  },
                  get turnOff() {
                    return mt(t).turnOff;
                  },
                });
              },
            ),
              Tt(e, n);
          },
        }),
        Tt(e, n),
        q();
    })(y, {}),
      (function (e, t) {
        j(t, !1), on();
        var n = so(),
          o = de(n);
        const i = J(() => gn('contact.title'));
        Rn(o, {
          settingsId: 'contact',
          get name() {
            return mt(i);
          },
        }),
          Kn(pe(o, 2), {
            settingsId: 'contact',
            children: (e, t) => {
              var n = io(),
                o = de(n);
              const i = J(() => gn('contact.bugs'));
              Yn(o, {
                icon: Xn,
                href: 'https://discord.gg/XUkG3Qy',
                get text() {
                  return mt(i);
                },
              });
              var s = pe(o, 2);
              Yn(s, {
                icon: Zn,
                href: 'https://www.reddit.com/r/DubPlus/',
                text: 'Reddit',
              });
              var r = pe(s, 2);
              Yn(r, {
                icon: to,
                href: 'https://facebook.com/DubPlusScript',
                text: 'Facebook',
              }),
                Yn(pe(r, 2), {
                  icon: oo,
                  href: 'https://twitter.com/DubPlusScript',
                  text: 'Twitter',
                }),
                Tt(e, n);
            },
          }),
          Tt(e, n),
          q();
      })(pe(y, 2), {}),
      Cn(pe(f, 2), {}),
      we(
        (e) => {
          At(v, `${e ?? ''} `), At(h, `v${Ps}`);
        },
        [() => gn('Menu.title')],
        J,
      ),
      Tt(e, n),
      q();
  }
  var Js = {
    name: 'dubplus',
    version: '4.0.3',
    description: 'Dub+ - A simple script/extension for QueUp.net',
    author: 'DubPlus',
    license: 'MIT',
    homepage: 'https://dub.plus',
    'lint-staged': {
      '*.{css,md}': 'prettier --list-different --write',
      '*.{js,svelte}': ['prettier --list-different --write', 'eslint'],
    },
  };
  const Ks = 'dubplusExtensionLoaded' in window;
  var Ws, Ys;
  cn('Dub+: loaded as extension:', Ks),
    Ks ||
      ((Ws = '/dubplus.css'),
      (Ys = 'dubplus-css'),
      new Promise((e, t) => {
        var n;
        null == (n = document.querySelector(`link.${Ys}`)) || n.remove();
        const o = (function (e, t) {
          const n = document.createElement('link');
          return (
            (n.rel = 'stylesheet'),
            (n.type = 'text/css'),
            (n.className = e),
            (n.href = t),
            n
          );
        })(
          Ys,
          `//cdn.jsdelivr.net/gh/DubPlus/DubPlus@build-refactor${Ws}?1746130222525`,
        );
        (o.onload = () => e()), (o.onerror = t), document.head.appendChild(o);
      })).catch((e) => {
        dn('Failed to load dubplus.css', e);
      });
  let Hs = document.getElementById('dubplus-container');
  Hs
    ? Hs.children.length > 0 &&
      (!(function (e, t) {
        const n = jt.get(e);
        n ? (jt.delete(e), n(t)) : Promise.resolve();
      })(Hs),
      Hs.replaceChildren())
    : ((Hs = document.createElement('div')),
      (Hs.id = 'dubplus-container'),
      document.body.appendChild(Hs));
  const Xs = (function (
    e,
    {
      target: t,
      anchor: n,
      props: o = {},
      events: s,
      context: a,
      intro: l = !0,
    },
  ) {
    !(function () {
      if (void 0 === oe) {
        (oe = window), (ie = /Firefox/.test(navigator.userAgent));
        var e = Element.prototype,
          t = Node.prototype,
          n = Text.prototype;
        (se = r(t, 'firstChild').get),
          (re = r(t, 'nextSibling').get),
          d(e) &&
            ((e.__click = void 0),
            (e.__className = void 0),
            (e.__attributes = null),
            (e.__style = void 0),
            (e.__e = void 0)),
          d(n) && (n.__t = void 0);
      }
    })();
    var u = new Set(),
      c = (e) => {
        for (var n = 0; n < e.length; n++) {
          var o = e[n];
          if (!u.has(o)) {
            u.add(o);
            var i = xt(o);
            t.addEventListener(o, zt, { passive: i });
            var s = Dt.get(o);
            void 0 === s
              ? (document.addEventListener(o, zt, { passive: i }), Dt.set(o, 1))
              : Dt.set(o, s + 1);
          }
        }
      };
    c(i(St)), Ot.add(c);
    var p = void 0,
      f = (function (e) {
        const t = me(h, e, !0);
        return (e = {}) =>
          new Promise((n) => {
            e.outro
              ? Oe(t, () => {
                  _e(t), n(void 0);
                })
              : (_e(t), n(void 0));
          });
      })(() => {
        var i = n ?? t.appendChild(ae());
        return (
          xe(() => {
            a && (j({}), (A.c = a)),
              s && (o.$$events = s),
              (p = e(i, o) || {}),
              a && q();
          }),
          () => {
            var e;
            for (var o of u) {
              t.removeEventListener(o, zt);
              var s = Dt.get(o);
              0 == --s
                ? (document.removeEventListener(o, zt), Dt.delete(o))
                : Dt.set(o, s);
            }
            Ot.delete(c),
              i !== n && (null == (e = i.parentNode) || e.removeChild(i));
          }
        );
      });
    return jt.set(p, f), p;
  })(
    function (e, t) {
      j(t, !0), (window.dubplus = Object.assign(window.dubplus || {}, Js));
      let n = G('loading');
      function o(e) {
        (yn.title = gn('Error.modal.title')), (yn.content = e), (yn.open = !0);
      }
      fn([
        'QueUp.session.id',
        'QueUp.room.chat',
        'QueUp.Events',
        'QueUp.room.player',
        'QueUp.helpers.cookie',
        'QueUp.room.model',
        'QueUp.room.users',
      ])
        .then(() => {
          ee(n, 'ready');
        })
        .catch(() => {
          var e, t;
          (
            null == (t = null == (e = window.QueUp) ? void 0 : e.session)
              ? void 0
              : t.id
          )
            ? ee(n, 'error')
            : ee(n, 'loggedout');
        }),
        he(() => {
          'loggedout' === mt(n)
            ? o(gn('Error.modal.loggedout'))
            : 'error' === mt(n) && o(gn('Error.unknown'));
        });
      var i = Nt(),
        s = de(i),
        r = (e) => {
          !(function (e, t) {
            j(t, !1), on();
            var n = wn(),
              o = ce(n);
            vn(ce(o));
            var i = ce(pe(o, 2));
            we((e) => At(i, e), [() => gn('Loading.text')], J), Tt(e, n), q();
          })(e, {});
        },
        a = (e, t) => {
          var o = (e) => {
              Rs(e, {});
            },
            i = (e) => {
              Cn(e, {});
            };
          qt(
            e,
            (e) => {
              'ready' === mt(n) ? e(o) : e(i, !1);
            },
            t,
          );
        };
      qt(s, (e) => {
        'loading' === mt(n) ? e(r) : e(a, !1);
      }),
        Tt(e, i),
        q();
    },
    { target: Hs },
  );
  return Xs;
})();
