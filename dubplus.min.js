(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var _waitFor=_interopRequireDefault(require("./utils/waitFor.js")),_preload=_interopRequireDefault(require("./utils/preload.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var modal=require("./utils/modal.js"),init=require("./lib/init.js"),css=require("./utils/css.js");function errorModal(e){css.load("/css/dubplus.css"),modal.create({title:"Dub+ Error",content:e})}if(window.dubplus)QueUp.session.id?errorModal("Dub+ is already loaded"):errorModal("You're not logged in. Please login to use Dub+.");else{(0,_preload.default)();var checkList=["QueUp.session.id","QueUp.room.chat","QueUp.Events","QueUp.room.player","QueUp.helpers.cookie","QueUp.room.model","QueUp.room.users"],_dubplusWaiting=new _waitFor.default(checkList,{seconds:10});_dubplusWaiting.then(function(){init(),$(".dubplus-waiting").remove()}).fail(function(){QueUp.session.id?$(".dubplus-waiting span").text("Something happed, refresh and try again"):errorModal("You're not logged in. Please login to use Dub+.")})}

},{"./lib/init.js":4,"./utils/css.js":40,"./utils/modal.js":42,"./utils/preload.js":46,"./utils/waitFor.js":47}],2:[function(require,module,exports){
"use strict";function _createForOfIteratorHelper(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var GetJSON=require("../utils/getJSON.js"),settings=require("../lib/settings.js");!function(){var e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(e){var t,o={k:"",v:""},n=e.open("d2",1);n.onsuccess=function(e){t=this.result},n.onerror=function(e){console.error("indexedDB request error"),console.log(e)},n.onupgradeneeded=function(e){t=null,e.target.result.createObjectStore("s",{keyPath:"k"}).transaction.oncomplete=function(e){t=e.target.db}},window.ldb={get:function e(o,n){return t?void(t.transaction("s").objectStore("s").get(o).onsuccess=function(e){var t=e.target.result&&e.target.result.v||null;n(t)}):void setTimeout(function(){e(o,n)},100)},set:function(e,n){o.k=e,o.v=n,t.transaction("s","readwrite").objectStore("s").put(o)}}}else console.error("indexDB not supported")}();var prepEmoji={};prepEmoji.emoji={template:function(e){return emojify.defaultConfig.img_dir+"/"+encodeURI(e)+".png"}},prepEmoji.twitch={template:function(e){return"//static-cdn.jtvnw.net/emoticons/v1/"+e+"/3.0"},specialEmotes:[],emotes:{},chatRegex:new RegExp(":([-_a-z0-9]+):","ig")},prepEmoji.bttv={template:function(e){return"//cdn.betterttv.net/emote/"+e+"/3x"},emotes:{},chatRegex:new RegExp(":([&!()\\-_a-z0-9]+):","ig")},prepEmoji.tasty={template:function(e){return this.emotes[e].url},emotes:{}},prepEmoji.frankerFacez={template:function(e){return"//cdn.frankerfacez.com/emoticon/"+e+"/1"},emotes:{},chatRegex:new RegExp(":([-_a-z0-9]+):","ig")},prepEmoji.shouldUpdateAPIs=function(e,t){ldb.get(e+"_api",function(o){o&&(void 0!==JSON.parse(o).error&&t(!0));var n=Date.now(),r=parseInt(localStorage.getItem(e+"_api_timestamp"));t(isNaN(r)||n-r>432e6||!o)})},prepEmoji.loadTwitchEmotes=function(){var e;this.shouldUpdateAPIs("twitch",function(t){t?(console.log("dub+","twitch","loading from api"),new GetJSON("//cdn.jsdelivr.net/gh/Jiiks/BetterDiscordApp/data/emotedata_twitch_global.json","twitch:loaded").done(function(e){var t=JSON.parse(e),o={};for(var n in t.emotes)o[n]||(o[n]=t.emotes[n].image_id);localStorage.setItem("twitch_api_timestamp",Date.now().toString()),ldb.set("twitch_api",JSON.stringify(o)),prepEmoji.processTwitchEmotes(o)})):ldb.get("twitch_api",function(t){console.log("dub+","twitch","loading from IndexedDB"),e=JSON.parse(t),prepEmoji.processTwitchEmotes(e),e=null;var o=new Event("twitch:loaded");window.dispatchEvent(o)})})},prepEmoji.loadBTTVEmotes=function(){var e;this.shouldUpdateAPIs("bttv",function(t){t?(console.log("dub+","bttv","loading from api"),new GetJSON("//api.betterttv.net/3/cached/emotes/global","bttv:loaded").done(function(e){var t=JSON.parse(e),o={};t.forEach(function(e){o[e.code]||(o[e.code]=e.id)}),localStorage.setItem("bttv_api_timestamp",Date.now().toString()),ldb.set("bttv_api",JSON.stringify(o)),prepEmoji.processBTTVEmotes(o)})):ldb.get("bttv_api",function(t){console.log("dub+","bttv","loading from IndexedDB"),e=JSON.parse(t),prepEmoji.processBTTVEmotes(e),e=null;var o=new Event("bttv:loaded");window.dispatchEvent(o)})})},prepEmoji.loadTastyEmotes=function(){var e=this;console.log("dub+","tasty","loading from api"),new GetJSON(settings.srcRoot+"/emotes/tastyemotes.json","tasty:loaded").done(function(t){ldb.set("tasty_api",JSON.stringify(t)),e.processTastyEmotes(JSON.parse(t))})},prepEmoji.loadFrankerFacez=function(){var e;this.shouldUpdateAPIs("frankerfacez",function(t){t?(console.log("dub+","frankerfacez","loading from api"),new GetJSON("//api.frankerfacez.com/v1/emoticons?per_page=200&private=off&sort=count-desc","frankerfacez:loaded").done(function(e){var t=JSON.parse(e);localStorage.setItem("frankerfacez_api_timestamp",Date.now().toString()),ldb.set("frankerfacez_api",e),prepEmoji.processFrankerFacez(t)})):ldb.get("frankerfacez_api",function(t){console.log("dub+","frankerfacez","loading from IndexedDB"),e=JSON.parse(t),prepEmoji.processFrankerFacez(e),e=null;var o=new Event("frankerfacez:loaded");window.dispatchEvent(o)})})},prepEmoji.processTwitchEmotes=function(e){for(var t in e)if(e.hasOwnProperty(t)){var o=t.toLowerCase();if(t.indexOf("\\")>=0){this.twitch.specialEmotes.push([t,e[t]]);continue}if(emojify.emojiNames.indexOf(o)>=0)continue;this.twitch.emotes[o]||(this.twitch.emotes[o]=e[t])}this.twitchJSONSLoaded=!0,this.emojiEmotes=emojify.emojiNames.concat(Object.keys(this.twitch.emotes))},prepEmoji.processBTTVEmotes=function(e){for(var t in e)if(e.hasOwnProperty(t)){var o=t.toLowerCase();if(t.indexOf(":")>=0)continue;if(emojify.emojiNames.indexOf(o)>=0)continue;t.indexOf("(")>=0&&(o=o.replace(/([()])/g,"")),this.bttv.emotes[o]=e[t]}this.bttvJSONSLoaded=!0,this.emojiEmotes=this.emojiEmotes.concat(Object.keys(this.bttv.emotes))},prepEmoji.processTastyEmotes=function(e){this.tasty.emotes=e.emotes,this.tastyJSONLoaded=!0,this.emojiEmotes=this.emojiEmotes.concat(Object.keys(this.tasty.emotes))},prepEmoji.processFrankerFacez=function(e){var t,o=_createForOfIteratorHelper(e.emoticons);try{for(o.s();!(t=o.n()).done;){var n=t.value,r=n.name,i=r.toLowerCase().replace("~","-");r.indexOf(":")>=0||(emojify.emojiNames.indexOf(i)>=0||(r.indexOf("(")>=0&&(i=i.replace(/([()])/g,"")),this.frankerFacez.emotes[i]=n.id))}}catch(e){o.e(e)}finally{o.f()}this.frankerfacezJSONLoaded=!0,this.emojiEmotes=this.emojiEmotes.concat(Object.keys(this.frankerFacez.emotes))},module.exports=prepEmoji;

},{"../lib/settings.js":8,"../utils/getJSON.js":41}],3:[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeList=exports.PreviewListManager=void 0;var debugAC=!1;function log(){debugAC&&console.log.apply(console,arguments)}var makeList=function(e){function t(e,t){var n=document.createElement("img");n.src=e,t&&(n.title=t,n.alt=t);var r=document.createElement("div");return r.className="ac-image",r.appendChild(n),r}function n(e,n){var r,a,o,i,s,c=(r="preview-item "+e.cn+"-previews",(a=document.createElement("li")).className=r,a),l=(o=e.text,(i=document.createElement("span")).textContent=o,i.className="ac-text",i);return s=e.alt?t(e.src,e.alt):t(e.src),c.appendChild(s),c.appendChild(l),0===n&&(c.appendChild(function(){var e=document.createElement("span");return e.textContent="press enter to select",e.className="ac-list-press-enter",e}()),c.classList.add("selected")),c.tabIndex=-1,c}var r=document.getElementById("autocomplete-preview");r.innerHTML="";var a=document.createDocumentFragment();e.forEach(function(e,t){a.appendChild(n(e,t))}),r.appendChild(a),r.classList.add("ac-show")};function isElementInView(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return n.top>=r.top&&n.bottom<=r.bottom}exports.makeList=makeList;var PreviewListManager=function(){function e(t){_classCallCheck(this,e),this._data=t||{start:0,end:0,selected:""}}return _createClass(e,[{key:"data",get:function(){return this._data},set:function(e){e&&(this._data=e)}},{key:"selected",set:function(e){e&&(this._data.selected=e)}},{key:"repl",value:function(e,t,n,r){return e.substring(0,t-1)+r+e.substring(n)}},{key:"updateChatInput",value:function(){log("inUpdate",this._data);var e=$("#chat-txt-message").val(),t=this.repl(e,this._data.start,this._data.end,this._data.selected)+" ";$("#autocomplete-preview").empty().removeClass("ac-show"),$("#chat-txt-message").val(t).focus()}},{key:"doNavigate",value:function(e){var t=$(".preview-item.selected").index();t+=e;var n=$(".ac-show li");$(".ac-list-press-enter").remove(),t>=n.length&&(t=0),t<0&&(t=n.length-1);n.removeClass("selected").eq(t).addClass("selected").append('<span class="ac-list-press-enter">press enter or tab to select</span>');var r=document.querySelector(".preview-item.selected"),a=isElementInView(r,document.querySelector("#autocomplete-preview"));log("isInView",a);var o=1!==e;a||r.scrollIntoView(o)}},{key:"updater",value:function(e){log(e.target,e),this._data.selected=$(e.target).find(".ac-text").text(),this.updateChatInput()}},{key:"init",value:function(){var e=this,t=document.createElement("ul");t.id="autocomplete-preview",$(".pusher-chat-widget-input").prepend(t),$(document.body).on("click",".preview-item",function(t){return e.updater(t)})}},{key:"stop",value:function(){$("#autocomplete-preview").remove()}}]),e}();exports.PreviewListManager=PreviewListManager;

},{}],4:[function(require,module,exports){
(function (PKGINFO){(function (){
"use strict";var _loadModules=_interopRequireDefault(require("./loadModules.js")),_snooze=_interopRequireDefault(require("../modules/snooze.js")),_eta=_interopRequireDefault(require("../modules/eta.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var css=require("../utils/css.js"),menu=require("./menu.js");module.exports=function(){window.dubplus=JSON.parse(PKGINFO),css.load("/css/dubplus.css"),$("html").addClass("dubplus");var e=menu.beginMenu(),u=(0,_loadModules.default)();menu.finishMenu(u,e),(0,_snooze.default)(),(0,_eta.default)()};

}).call(this)}).call(this,'{"name":"DubPlus","version":"0.3.2","description":"Dub+ - A simple script/extension for Dubtrack.fm and QueUp.net","engines":{"node":">=12.0.0 <16.0.0"},"author":"DubPlus","license":"MIT","homepage":"https://dub.plus","browserslist":["> 1%","last 2 versions"],"dependencies":{"@babel/core":"^7.24.7","sass":"^1.77.6"}}')
},{"../modules/eta.js":22,"../modules/snooze.js":34,"../utils/css.js":40,"./loadModules.js":5,"./menu.js":7}],5:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var options=require("../utils/options.js"),dubPlus_modules=require("../modules/index.js"),settings=require("../lib/settings.js"),menu=require("../lib/menu.js"),menuObj={General:"","User Interface":"",Settings:"",Customize:""},loadAllModules=function(){return dubPlus_modules.forEach(function(e){window.dubplus[e.id]=e,window.dubplus[e.id].toggleAndSave=options.toggleAndSave,e.optionState=settings.options[e.id]||!1,"function"==typeof e.init&&e.init.call(e),e.optionState&&"function"==typeof e.turnOn&&e.turnOn.call(e);var t=null;"function"!=typeof e.extra||e.extraIcon||(t="pencil"),menuObj[e.category]+=menu.makeOptionMenu(e.moduleName,{id:e.id,desc:e.description,state:e.optionState,extraIcon:e.extraIcon||t,cssClass:e.menuCssClass||"",altIcon:e.altIcon||null})}),menuObj},_default=loadAllModules;exports.default=_default;

},{"../lib/menu.js":7,"../lib/settings.js":8,"../modules/index.js":29,"../utils/options.js":45}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var options=require("../utils/options.js"),toggleMenuSection=function(e){var t=e.nextElementSibling,n=e.children[0],l=e.textContent.trim().replace(" ","-").toLowerCase();$(t).toggleClass("dubplus-menu-section-closed").hasClass("dubplus-menu-section-closed")?($(n).removeClass("fa-angle-down"),$(n).addClass("fa-angle-right"),options.saveOption("menu",l,"closed")):($(n).removeClass("fa-angle-right"),$(n).addClass("fa-angle-down"),options.saveOption("menu",l,"open"))},traverseMenuDOM=function e(t){if(!t||$(t).hasClass("dubplus-menu"))return null;if($(t).hasClass("dubplus-menu-section-header"))return toggleMenuSection(t),null;var n=window.dubplus[t.id];return n||e(t.parentElement)},menuDelegator=function(e){var t=traverseMenuDOM(e.target);if(t)if($(e.target).hasClass("extra-icon")&&t.extra)t.extra.call(t);else{var n;if(t.turnOn&&t.turnOff)return t.optionState?(n=!1,t.turnOff.call(t)):(n=!0,t.turnOn.call(t)),t.optionState=n,void options.toggleAndSave(t.id,n);t.go&&t.go.call(t)}},_default=function(){var e=document.querySelector(".dubplus-menu");e.addEventListener("click",menuDelegator),document.querySelector(".dubplus-icon").addEventListener("click",function(){$(e).toggleClass("dubplus-menu-open")})};exports.default=_default;

},{"../utils/options.js":45}],7:[function(require,module,exports){
"use strict";var _menuEvents=_interopRequireDefault(require("./menu-events.js"));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}var settings=require("./settings.js"),css=require("../utils/css.js"),arrow="down",isClosedClass="";"closed"===settings.menu.contact&&(isClosedClass="dubplus-menu-section-closed",arrow="right");var contactSection='\n  <div id="dubplus-contact" class="dubplus-menu-section-header">\n      <span class="fa fa-angle-'.concat(arrow,'"></span>\n      <p>Contact</p>\n    </div>\n    <ul class="dubplus-menu-section ').concat(isClosedClass,'">\n      <li class="dubplus-menu-icon">\n        <span class="fa fa-bug"></span>\n        <a href="https://discord.gg/XUkG3Qy" class="dubplus-menu-label" target="_blank">Report bugs on Discord</a>\n      </li>\n      <li class="dubplus-menu-icon">\n        <span class="fa fa-reddit-alien"></span>\n        <a href="https://www.reddit.com/r/DubPlus/" class="dubplus-menu-label"  target="_blank">Reddit</a>\n      </li>\n      <li class="dubplus-menu-icon">\n        <span class="fa fa-facebook"></span>\n        <a href="https://facebook.com/DubPlusScript" class="dubplus-menu-label"  target="_blank">Facebook</a>\n      </li>\n      <li class="dubplus-menu-icon">\n        <span class="fa fa-twitter"></span>\n        <a href="https://twitter.com/DubPlusScript" class="dubplus-menu-label"  target="_blank">Twitter</a>\n      </li>\n    </ul>');module.exports={beginMenu:function(){css.loadExternal("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css");var s='<div class="dubplus-icon"><img src="'.concat(settings.srcRoot,'/images/dubplus.svg" alt=""></div>');document.querySelector(".header-right-navigation").insertAdjacentHTML("beforeend",s);return'\n      <section class="dubplus-menu">\n          <p class="dubplus-menu-header">Dub+ Options</p>'},finishMenu:function(s,n){for(var a in s){var e=a.replace(" ","-").toLowerCase(),t="down",c="";"closed"===settings.menu[e]&&(c="dubplus-menu-section-closed",t="right"),n+='\n        <div id="'.concat("dubplus-"+e,'" class="dubplus-menu-section-header">\n          <span class="fa fa-angle-').concat(t,'"></span>\n          <p>').concat(a,'</p>\n        </div>\n        <ul class="dubplus-menu-section ').concat(c,'">'),n+=s[a],n+="</ul>"}n+=contactSection,n+="</section>",document.body.insertAdjacentHTML("beforeend",n),(0,_menuEvents.default)()},makeOptionMenu:function(s,n){var a=Object.assign({},{id:"",desc:"",state:!1,extraIcon:null,cssClass:"",altIcon:null},n),e="",t=a.state?"dubplus-switch-on":"";a.extraIcon&&(e='<span class="fa fa-'.concat(a.extraIcon,' extra-icon"></span>'));var c="dubplus-switch",l='\n        <div class="dubplus-switch-bg">\n          <div class="dubplus-switcher"></div>\n        </div>';return a.altIcon&&(c="dubplus-menu-icon",l='<span class="fa fa-'.concat(a.altIcon,'"></span>')),'\n      <li id="'.concat(a.id,'" class="').concat(c," ").concat(t," ").concat(a.cssClass,' title="').concat(a.desc,'">\n        ').concat(e,"\n        ").concat(l,'\n        <span class="dubplus-menu-label">').concat(s,"</span>\n      </li>")}};

},{"../utils/css.js":40,"./menu-events.js":6,"./settings.js":8}],8:[function(require,module,exports){
(function (_RESOURCE_SRC_){(function (){
"use strict";var defaults={options:{},menu:{general:"open","user-interface":"open",settings:"open",customize:"open",contact:"open"},custom:{}},savedSettings={},_storageRaw=localStorage.getItem("dubplusUserSettings");_storageRaw&&(savedSettings=JSON.parse(_storageRaw));var exportSettings=$.extend({},defaults,savedSettings);exportSettings.srcRoot=_RESOURCE_SRC_,module.exports=exportSettings;

}).call(this)}).call(this,'https://cdn.jsdelivr.net/gh/DubPlus/DubPlus')
},{}],9:[function(require,module,exports){
"use strict";var modal=require("../utils/modal.js"),options=require("../utils/options.js"),settings=require("../lib/settings.js"),afk_module={id:"dubplus-afk",moduleName:"AFK Auto-respond",description:"Toggle Away from Keyboard and customize AFK message.",category:"General",canSend:!0},afk_chat_respond=function(e){if(afk_module.canSend){var s=e.message,a=QueUp.session.get("username");s.indexOf("@"+a)>-1&&QueUp.session.id!==e.user.userInfo.userid&&(settings.custom.customAfkMessage?$("#chat-txt-message").val("[AFK] "+settings.custom.customAfkMessage):$("#chat-txt-message").val("[AFK] I'm not here right now."),QueUp.room.chat.sendMessage(),afk_module.canSend=!1,setTimeout(function(){afk_module.canSend=!0},3e4))}};afk_module.turnOn=function(){QueUp.Events.bind("realtime:chat-message",afk_chat_respond)},afk_module.turnOff=function(){QueUp.Events.unbind("realtime:chat-message",afk_chat_respond)};var saveAFKmessage=function(){var e=$(".dp-modal textarea").val();""!==e&&options.saveOption("custom","customAfkMessage",e)};afk_module.extra=function(){modal.create({title:"Custom AFK Message",content:"Enter a custom Away From Keyboard [AFK] message here",value:settings.custom.customAfkMessage||"",placeholder:"Be right back!",maxlength:"255",confirmCallback:saveAFKmessage})},module.exports=afk_module;

},{"../lib/settings.js":8,"../utils/modal.js":42,"../utils/options.js":45}],10:[function(require,module,exports){
"use strict";var _previewList=require("../emojiUtils/previewList.js"),settings=require("../lib/settings.js"),prepEmjoji=require("../emojiUtils/prepEmoji.js"),debugAC=!1;function log(){debugAC&&console.log.apply(console,arguments)}var myModule={id:"dubplus-autocomplete",moduleName:"Autocomplete Emoji",description:"Toggle autocompleting emojis and emotes.  Shows a preview box in the chat",category:"General"},KEYS={up:38,down:40,left:37,right:39,enter:13,esc:27,tab:9,shiftKey:16,backspace:8,del:46,space:32,ctrl:17},keyCharMin=3,inputRegex=new RegExp("(:)([&!()\\+\\-_a-z0-9]+)($|\\s)","ig"),emojiUtils={createPreviewObj:function(e,t,i){return{src:prepEmjoji[e].template(t),text:":"+i+":",alt:i,cn:e}},addToPreviewList:function(e){var t,i=this,o=[];e.forEach(function(e){t=e.toLowerCase(),void 0!==prepEmjoji.twitch.emotes[t]&&o.push(i.createPreviewObj("twitch",prepEmjoji.twitch.emotes[t],e)),void 0!==prepEmjoji.bttv.emotes[t]&&o.push(i.createPreviewObj("bttv",prepEmjoji.bttv.emotes[t],e)),void 0!==prepEmjoji.tasty.emotes[t]&&o.push(i.createPreviewObj("tasty",t,e)),void 0!==prepEmjoji.frankerFacez.emotes[t]&&o.push(i.createPreviewObj("frankerFacez",prepEmjoji.frankerFacez.emotes[t],e)),emojify.emojiNames.indexOf(t)>=0&&o.push(i.createPreviewObj("emoji",e,e))}),(0,_previewList.makeList)(o)},filterEmoji:function(e){var t=e.replace(/([+()])/,"\\$1"),i=new RegExp("^"+t,"i"),o=emojify.emojiNames||[];return settings.options["dubplus-emotes"]&&(o=prepEmjoji.emojiEmotes||[]),o.filter(function(e){return i.test(e)})}},previewList=new _previewList.PreviewListManager,shouldClearPreview=function(e,t,i,o){var r=i.charAt(i.length-1);return(t.length<o||":"===r||" "===r||""===i)&&(t="",e.innerHTML="",e.className=""),t},handleMatch=function(e,t,i,o){var r=e[e.length-1].trim(),n=r.charAt(0);r=r.substring(1);var a=t.lastIndexOf(r),s=a+r.length;return log("cursorPos",i),i>=a&&i<=s&&r&&r.length>=o&&":"===n&&emojiUtils.addToPreviewList(emojiUtils.filterEmoji(r)),log("match",e,a,s),{start:a,end:s,currentMatch:r}},chatInputKeyupFunc=function(e){var t=document.querySelector("#autocomplete-preview"),i=t.children.length>0;if(e.keyCode!==KEYS.enter||i){if(e.keyCode===KEYS.up&&i)return e.preventDefault(),void previewList.doNavigate(-1);if(e.keyCode===KEYS.down&&i)return e.preventDefault(),void previewList.doNavigate(1);if((e.keyCode===KEYS.enter||e.keyCode===KEYS.tab)&&i)return e.preventDefault(),previewList.selected=$(".preview-item.selected").find(".ac-text").text(),previewList.updateChatInput(),!1;var o=this.value,r=$(this).get(0).selectionStart,n=o.match(inputRegex),a="";if(n&&n.length>0){var s=handleMatch(n,o,r,keyCharMin);a=s.currentMatch,previewList.data=s}log("inKeyup",previewList.data),shouldClearPreview(t,a,o,keyCharMin)}},chatInputKeydownFunc=function(e){var t=!document.querySelector("#autocomplete-preview > li"),i=_.includes([KEYS.tab,KEYS.enter,KEYS.up,KEYS.down,KEYS.left,KEYS.right],e.keyCode);!t&&i?i&&!t&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()):QueUp.room.chat.ncKeyDown(e)};myModule.turnOn=function(){previewList.init(),QueUp.room.chat.delegateEvents(_.omit(QueUp.room.chat.events,["keydown #chat-txt-message"])),$(document.body).on("keydown","#chat-txt-message",chatInputKeydownFunc),$(document.body).on("keyup","#chat-txt-message",chatInputKeyupFunc)},myModule.turnOff=function(){previewList.stop(),QueUp.room.chat.delegateEvents(QueUp.room.chat.events),$(document.body).off("keydown","#chat-txt-message",chatInputKeydownFunc),$(document.body).off("keyup","#chat-txt-message",chatInputKeyupFunc)},module.exports=myModule;

},{"../emojiUtils/prepEmoji.js":2,"../emojiUtils/previewList.js":3,"../lib/settings.js":8}],11:[function(require,module,exports){
"use strict";var autovote={id:"dubplus-autovote",moduleName:"Autovote",description:"Toggles auto upvoting for every song",category:"General"},advance_vote=function(){QueUp&&QueUp.playerController&&QueUp.playerController.voteUp&&(console.log("voting"),QueUp.playerController.voteUp.click())},voteCheck=function(e){e.startTime<2&&advance_vote()};autovote.turnOff=function(){QueUp.Events.unbind("realtime:room_playlist-update",voteCheck)},autovote.turnOn=function(){var e=QueUp.room.player.activeSong.get("song"),o=QueUp.helpers.cookie.get("dub-"+QueUp.room.model.get("_id")),t=QueUp.helpers.cookie.get("dub-song");QueUp.room&&e&&e.songid===t||(o=!1),$(".dubup, .dubdown").hasClass("voted")||o||advance_vote(),QueUp.Events.bind("realtime:room_playlist-update",voteCheck)},module.exports=autovote;

},{}],12:[function(require,module,exports){
"use strict";var settings=require("../lib/settings.js"),modal=require("../utils/modal.js"),options=require("../utils/options.js"),myModule={id:"chat-cleaner",moduleName:"Chat Cleaner",description:"Automatically only keep a designated chatItems of chat items while clearing older ones, keeping CPU stress down",category:"General",extraIcon:"pencil"},saveAmount=function(){var e=parseInt($(".dp-modal textarea").val());isNaN(e)?options.saveOption("custom","chat_cleaner",500):options.saveOption("custom","chat_cleaner",e)};myModule.chatCleanerCheck=function(e){var t=$("ul.chat-main > li").length;isNaN(t)||isNaN(settings.custom.chat_cleaner)||t<settings.custom.chat_cleaner||$("ul.chat-main > li:lt("+($("ul.chat-main > li").length-settings.custom.chat_cleaner)+")").remove()},myModule.turnOn=function(){QueUp.Events.bind("realtime:chat-message",this.chatCleanerCheck)},myModule.extra=function(){modal.create({title:"Chat Cleaner",content:"Please specify the number of most recent chat items that will remain in your chat history",value:settings.custom.chat_cleaner||"",placeholder:"500",maxlength:"5",confirmCallback:saveAmount})},myModule.turnOff=function(){QueUp.Events.unbind("realtime:chat-message",this.chatCleanerCheck)},module.exports=myModule;

},{"../lib/settings.js":8,"../utils/modal.js":42,"../utils/options.js":45}],13:[function(require,module,exports){
"use strict";var _notify=require("../utils/notify.js"),settings=require("../lib/settings.js"),myModule={id:"mention_notifications",moduleName:"Notification on Mentions",description:"Enable desktop notifications when a user mentions you in chat",category:"General",notifyOnMention:function(t){var n=t.message,e=["@"+QueUp.session.get("username").toLowerCase()];settings.options.custom_mentions&&settings.custom.custom_mentions&&(e=e.concat(settings.custom.custom_mentions.split(","))),e.some(function(t){return new RegExp("\\b"+t.trim()+"\\b","i").test(n)})&&!this.isActiveTab&&QueUp.session.id!==t.user.userInfo.userid&&(0,_notify.showNotification)({title:"Message from ".concat(t.user.username),content:n})},turnOn:function(){var t=this;(0,_notify.notifyCheckPermission)(function(n){!0===n?QueUp.Events.bind("realtime:chat-message",t.notifyOnMention):t.toggleAndSave(t.id,!1)})},turnOff:function(){QueUp.Events.unbind("realtime:chat-message",this.notifyOnMention)}};module.exports=myModule;

},{"../lib/settings.js":8,"../utils/notify.js":44}],14:[function(require,module,exports){
"use strict";var css=require("../utils/css.js"),myModule={id:"dubplus-comm-theme",moduleName:"Community Theme",description:"Toggle Community CSS theme.",category:"Customize",turnOn:function(){var e=QueUp.room.model.get("roomUrl");$.ajax({type:"GET",url:"https://api.queup.net/room/"+e}).done(function(e){var o=e.data.description,t=new RegExp(/(@dub(x|plus|\+)=)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/,"i"),u=null;o.replace(t,function(e,o,t,m){console.log("loading community css theme:",m),u=m}),u&&css.loadExternal(u,"dubplus-comm-theme")})},turnOff:function(){$(".dubplus-comm-theme").remove()}};module.exports=myModule;

},{"../utils/css.js":40}],15:[function(require,module,exports){
"use strict";var settings=require("../lib/settings.js"),modal=require("../utils/modal.js"),options=require("../utils/options.js"),myModule={id:"dubplus-custom-bg",moduleName:"Custom Background",description:"Add your own custom background.",category:"Customize",extraIcon:"pencil"},makeBGdiv=function(e){return'<div class="dubplus-custom-bg" style="background-image: url('.concat(e,');"></div>')},saveCustomBG=function(){var e=$(".dp-modal textarea").val();if(""===e||!e)return $(".dubplus-custom-bg").remove(),void options.saveOption("custom","bg","");$(".dubplus-custom-bg").length?$(".dubplus-custom-bg").css("background-image","url(".concat(e,")")):$("body").append(makeBGdiv(e)),options.saveOption("custom","bg",e)};myModule.extra=function(){modal.create({title:"Custom Background Image",content:"Enter the full URL of an image. We recommend using a .jpg file. Leave blank to remove the current background image",value:settings.custom.bg||"",placeholder:"https://example.com/big-image.jpg",maxlength:"500",confirmCallback:saveCustomBG})},myModule.turnOn=function(){settings.custom.bg&&""!==settings.custom.bg?$("body").append(makeBGdiv(settings.custom.bg)):this.extra()},myModule.turnOff=function(){$(".dubplus-custom-bg").remove()},module.exports=myModule;

},{"../lib/settings.js":8,"../utils/modal.js":42,"../utils/options.js":45}],16:[function(require,module,exports){
"use strict";var css=require("../utils/css.js"),settings=require("../lib/settings.js"),modal=require("../utils/modal.js"),options=require("../utils/options.js"),myModule={id:"dubplus-custom-css",moduleName:"Custom CSS",description:"Add your own custom CSS.",category:"Customize",extraIcon:"pencil"},css_import=function(){$(".dubplus-custom-css").remove();var s=$(".dp-modal textarea").val();options.saveOption("custom","css",s),s&&""!==s&&css.loadExternal(s,"dubplus-custom-css")};myModule.extra=function(){modal.create({title:"Custom CSS",content:"Enter a url location for your custom css",value:settings.custom.css||"",placeholder:"https://example.com/example.css",maxlength:"500",confirmCallback:css_import})},myModule.turnOn=function(){settings.custom.css&&""!==settings.custom.css?css.loadExternal(settings.custom.css,"dubplus-custom-css"):this.extra()},myModule.turnOff=function(){$(".dubplus-custom-css").remove()},module.exports=myModule;

},{"../lib/settings.js":8,"../utils/css.js":40,"../utils/modal.js":42,"../utils/options.js":45}],17:[function(require,module,exports){
"use strict";var settings=require("../lib/settings.js"),modal=require("../utils/modal.js"),options=require("../utils/options.js"),myModule={id:"custom_mentions",moduleName:"Custom Mentions",description:"Toggle using custom mentions to trigger sounds in chat",category:"General",extraIcon:"pencil"},saveCustomMentions=function(){var e=$(".dp-modal textarea").val();""!==e&&options.saveOption("custom","custom_mentions",e)};myModule.customMentionCheck=function(e){var t=e.message;if(settings.custom.custom_mentions){var s=settings.custom.custom_mentions.split(",").some(function(e){return new RegExp("\\b"+e.trim()+"\\b","i").test(t)});QueUp.session.id!==e.user.userInfo.userid&&s&&QueUp.room.chat.mentionChatSound.play()}},myModule.turnOn=function(){QueUp.Events.bind("realtime:chat-message",this.customMentionCheck)},myModule.extra=function(){modal.create({title:"Custom Mentions",content:"Add your custom mention triggers here (separate by comma)",value:settings.custom.custom_mentions||"",placeholder:"separate, custom triggers, by, comma, :heart:",maxlength:"255",confirmCallback:saveCustomMentions})},myModule.turnOff=function(){QueUp.Events.unbind("realtime:chat-message",this.customMentionCheck)},module.exports=myModule;

},{"../lib/settings.js":8,"../utils/modal.js":42,"../utils/options.js":45}],18:[function(require,module,exports){
"use strict";var settings=require("../lib/settings.js"),modal=require("../utils/modal.js"),options=require("../utils/options.js"),DubtrackDefaultSound="/assets/music/user_ping.mp3",myModule={id:"dubplus-custom-notification-sound",moduleName:"Custom Notification Sound",description:"Change the notification sound to a custom one.",category:"Customize",extraIcon:"pencil"},saveCustomNotificationSound=function(){var t=$(".dp-modal textarea").val();if(""===t||!t)return options.saveOption("custom","notificationSound",""),void(QueUp.room.chat.mentionChatSound.url=DubtrackDefaultSound);soundManager.canPlayURL(t)?QueUp.room.chat.mentionChatSound.url=t:setTimeout(function(){var t=myModule;modal.create({title:"Dub+ Error",content:"You've entered an invalid sound url! Please make sure you are entering the full, direct url to the file. IE: https://example.com/sweet-sound.mp3"}),QueUp.room.chat.mentionChatSound.url=DubtrackDefaultSound,t.optionState=!1,t.toggleAndSave(t.id,!1)},100),options.saveOption("custom","notificationSound",t)};myModule.extra=function(){modal.create({title:"Custom Notification Sound",content:"Enter the full URL of a sound file. We recommend using an .mp3 file. Leave blank to go back to Dubtrack's default sound",value:settings.custom.notificationSound||"",placeholder:"https://example.com/sweet-sound.mp3",maxlength:"500",confirmCallback:saveCustomNotificationSound})},myModule.init=function(){this.optionState&&settings.custom.notificationSound&&this.turnOn()},myModule.turnOn=function(){settings.custom.notificationSound&&""!==settings.custom.notificationSound?QueUp.room.chat.mentionChatSound.url=settings.custom.notificationSound:this.extra()},myModule.turnOff=function(){QueUp.room.chat.mentionChatSound.url=DubtrackDefaultSound},module.exports=myModule;

},{"../lib/settings.js":8,"../utils/modal.js":42,"../utils/options.js":45}],19:[function(require,module,exports){
"use strict";var _notify=require("../utils/notify.js"),settings=require("../lib/settings.js"),modal=require("../utils/modal.js"),options=require("../utils/options.js"),myModule={id:"dj-notification",moduleName:"DJ Notification",description:"Notification when you are coming up to be the DJ",category:"General",extraIcon:"pencil"},savePosition=function(){var t=parseInt($(".dp-modal textarea").val());isNaN(t)?options.saveOption("custom","dj_notification",2):options.saveOption("custom","dj_notification",t)};myModule.djNotificationCheck=function(t){if(!(t.startTime>2)){var i=parseInt($(".queue-position").text()),o=t.startTime<0&&!isNaN(i)?i-1:i;isNaN(i)||o!==settings.custom.dj_notification||((0,_notify.showNotification)({title:"DJ Alert!",content:"You will be DJing shortly! Make sure your song is set!",ignoreActiveTab:!0,wait:1e4}),QueUp.room.chat.mentionChatSound.play())}},myModule.turnOn=function(){QueUp.Events.bind("realtime:room_playlist-update",this.djNotificationCheck)},myModule.extra=function(){modal.create({title:"DJ Notification",content:"Please specify the position in queue you want to be notified at",value:settings.custom.dj_notification||"",placeholder:"2",maxlength:"2",confirmCallback:savePosition})},myModule.turnOff=function(){QueUp.Events.unbind("realtime:room_playlist-update",this.djNotificationCheck)},module.exports=myModule;

},{"../lib/settings.js":8,"../utils/modal.js":42,"../utils/notify.js":44,"../utils/options.js":45}],20:[function(require,module,exports){
"use strict";var _modcheck=_interopRequireDefault(require("../utils/modcheck.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var myModule={id:"dubplus-downdubs",moduleName:"Downdubs in Chat (mods only)",description:"Toggle showing downdubs in the chat box (mods only)",category:"General",downdubWatcher:function(e){if(QueUp.session.get("username")===QueUp.room.users.collection.findWhere({userid:QueUp.room.player.activeSong.attributes.song.userid}).attributes._user.username&&"downdub"===e.dubtype){var n='\n      <li class="dubplus-chat-system dubplus-chat-system-downdub">\n        <div class="chatDelete" onclick="dubplus.deleteChatMessageClientSide(this)">\n          <span class="icon-close"></span>\n        </div>\n        <div class="text">\n          @'.concat(e.user.username," has downdubbed your song ").concat(QueUp.room.player.activeSong.attributes.songInfo.name,"\n        </div>\n      </li>");$("ul.chat-main").append(n)}},turnOn:function(){(0,_modcheck.default)(QueUp.session.id)&&(QueUp.Events.bind("realtime:room_playlist-dub",this.downdubWatcher),"function"!=typeof window.dubplus.deleteChatMessageClientSide&&(window.dubplus.deleteChatMessageClientSide=function(e){$(e).parent("li")[0].remove()}))},turnOff:function(){QueUp.Events.unbind("realtime:room_playlist-dub",this.downdubWatcher)}};module.exports=myModule;

},{"../utils/modcheck.js":43}],21:[function(require,module,exports){
"use strict";var dubplus_emoji=require("../emojiUtils/prepEmoji.js"),emote_module={};function makeImage(e,t,m,o,u){return'<img class="emoji '+e+'-emote" '+(o?'width="'+o+'" ':"")+(u?'height="'+u+'" ':"")+'title="'+m+'" alt="'+m+'" src="'+t+'" />'}emote_module.id="dubplus-emotes",emote_module.moduleName="Emotes",emote_module.description="Adds twitch and bttv emotes in chat.",emote_module.category="General";var replaceTextWithEmote=function(){var e=dubplus_emoji.twitch.chatRegex;if(dubplus_emoji.twitchJSONSLoaded){var t=$(".chat-main .text").last();if(t.html()){dubplus_emoji.bttvJSONSLoaded&&(e=dubplus_emoji.bttv.chatRegex);var m=t.html().replace(e,function(e,t){var m,o=t.toLowerCase();return dubplus_emoji.twitch.emotes[o]?(m=dubplus_emoji.twitch.emotes[o],makeImage("twitch",dubplus_emoji.twitch.template(m),o)):dubplus_emoji.bttv.emotes[o]?(m=dubplus_emoji.bttv.emotes[o],makeImage("bttv",dubplus_emoji.bttv.template(m),o)):dubplus_emoji.tasty.emotes[o]?makeImage("tasty",dubplus_emoji.tasty.template(o),o,dubplus_emoji.tasty.emotes[o].width,dubplus_emoji.tasty.emotes[o].height):dubplus_emoji.frankerFacez.emotes[o]?(m=dubplus_emoji.frankerFacez.emotes[o],makeImage("frankerFacez",dubplus_emoji.frankerFacez.template(m),o)):e});t.html(m)}}};emote_module.turnOn=function(){window.addEventListener("twitch:loaded",dubplus_emoji.loadBTTVEmotes.bind(dubplus_emoji)),window.addEventListener("bttv:loaded",dubplus_emoji.loadFrankerFacez.bind(dubplus_emoji)),dubplus_emoji.twitchJSONSLoaded?replaceTextWithEmote():dubplus_emoji.loadTwitchEmotes(),QueUp.Events.bind("realtime:chat-message",replaceTextWithEmote)},emote_module.turnOff=function(){QueUp.Events.unbind("realtime:chat-message",replaceTextWithEmote)},module.exports=emote_module;

},{"../emojiUtils/prepEmoji.js":2}],22:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var eta=function(){var e=parseInt($("#player-controller div.left ul li.infoContainer.display-block div.currentTime span.min").text()),t=4*parseInt($(".queue-position").text())-4+e;t>=0?$(this).append('<div class="eta_tooltip" style="position: absolute;font: 1rem/1.5 proxima-nova,sans-serif;display: block;left: -33px;cursor: pointer;border-radius: 1.5rem;padding: 8px 16px;background: #fff;font-weight: 700;font-size: 13.6px;text-transform: uppercase;color: #000;opacity: .8;text-align: center;z-index: 9;">ETA: '+t+" minutes</div>"):$(this).append('<div class="eta_tooltip" style="position: absolute;font: 1rem/1.5 proxima-nova,sans-serif;display: block;left: -33px;cursor: pointer;border-radius: 1.5rem;padding: 8px 16px;background: #fff;font-weight: 700;font-size: 13.6px;text-transform: uppercase;color: #000;opacity: .8;text-align: center;z-index: 9;">You\'re not in the queue</div>')},hide_eta=function(){$(this).empty()};function _default(){$(".player_sharing").append('<span class="icon-history eta_tooltip_t"></span>'),$(".eta_tooltip_t").mouseover(eta).mouseout(hide_eta)}

},{}],23:[function(require,module,exports){
"use strict";var fs_module={id:"dubplus-fullscreen",moduleName:"Fullscreen Video",description:"Toggle fullscreen video mode",category:"User Interface",altIcon:"arrows-alt",go:function(){var e=document.querySelector(".playerElement iframe");e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}};module.exports=fs_module;

},{}],24:[function(require,module,exports){
"use strict";var myModule={id:"dubplus-grabschat",moduleName:"Grabs in Chat",description:"Toggle showing grabs in the chat box",category:"General",grabChatWatcher:function(e){if(QueUp.session.get("username")===QueUp.room.users.collection.findWhere({userid:QueUp.room.player.activeSong.attributes.song.userid}).attributes._user.username&&!QueUp.room.model.get("displayUserGrab")){var t='\n      <li class="dubplus-chat-system dubplus-chat-system-grab">\n        <div class="chatDelete" onclick="dubplus.deleteChatMessageClientSide(this)">\n          <span class="icon-close"></span>\n        </div>\n        <div class="text">\n          @'.concat(e.user.username," has grabbed your song ").concat(QueUp.room.player.activeSong.attributes.songInfo.name,"\n        </div>\n      </li>");$("ul.chat-main").append(t)}},turnOn:function(){QueUp.Events.bind("realtime:room_playlist-queue-update-grabs",this.grabChatWatcher),"function"!=typeof window.dubplus.deleteChatMessageClientSide&&(window.dubplus.deleteChatMessageClientSide=function(e){$(e).parent("li")[0].remove()})},turnOff:function(){QueUp.Events.unbind("realtime:room_playlist-queue-update-grabs",this.grabChatWatcher)}};module.exports=myModule;

},{}],25:[function(require,module,exports){
"use strict";var myModule={id:"dubplus-hide-avatars",moduleName:"Hide Avatars",description:"Toggle hiding user avatars in the chat box.",category:"User Interface",turnOn:function(){$("body").addClass("dubplus-hide-avatars")},turnOff:function(){$("body").removeClass("dubplus-hide-avatars")}};module.exports=myModule;

},{}],26:[function(require,module,exports){
"use strict";var myModule={id:"dubplus-hide-bg",moduleName:"Hide Background",description:"Toggle hiding background image.",category:"User Interface",turnOn:function(){$("body").addClass("dubplus-hide-bg")},turnOff:function(){$("body").removeClass("dubplus-hide-bg")}};module.exports=myModule;

},{}],27:[function(require,module,exports){
"use strict";var myModule={id:"dubplus-video-only",moduleName:"Hide Chat",description:"Toggles hiding the chat box",category:"User Interface",turnOn:function(){$("body").addClass("dubplus-video-only")},turnOff:function(){$("body").removeClass("dubplus-video-only")}};module.exports=myModule;

},{}],28:[function(require,module,exports){
"use strict";var myModule={id:"dubplus-chat-only",moduleName:"Hide Video",description:"Toggles hiding the video box",category:"User Interface",turnOn:function(){$("body").addClass("dubplus-chat-only")},turnOff:function(){$("body").removeClass("dubplus-chat-only")}};module.exports=myModule;

},{}],29:[function(require,module,exports){
"use strict";module.exports=[require("./autovote.js"),require("./afk.js"),require("./emotes.js"),require("./autocomplete.js"),require("./customMentions.js"),require("./chatCleaner.js"),require("./chatNotifications.js"),require("./pmNotifications.js"),require("./djNotification.js"),require("./showDubsOnHover.js"),require("./downDubInChat.js"),require("./upDubInChat.js"),require("./grabsInChat.js"),require("./snow.js"),require("./rain.js"),require("./fullscreen.js"),require("./splitchat.js"),require("./hideChat.js"),require("./hideVideo.js"),require("./hideAvatars.js"),require("./hideBackground.js"),require("./showTimestamps.js"),require("./spacebarMute.js"),require("./warnOnNavigation.js"),require("./communityTheme.js"),require("./customCSS.js"),require("./customBackground.js"),require("./customNotificationSound.js")];

},{"./afk.js":9,"./autocomplete.js":10,"./autovote.js":11,"./chatCleaner.js":12,"./chatNotifications.js":13,"./communityTheme.js":14,"./customBackground.js":15,"./customCSS.js":16,"./customMentions.js":17,"./customNotificationSound.js":18,"./djNotification.js":19,"./downDubInChat.js":20,"./emotes.js":21,"./fullscreen.js":23,"./grabsInChat.js":24,"./hideAvatars.js":25,"./hideBackground.js":26,"./hideChat.js":27,"./hideVideo.js":28,"./pmNotifications.js":30,"./rain.js":31,"./showDubsOnHover.js":32,"./showTimestamps.js":33,"./snow.js":35,"./spacebarMute.js":36,"./splitchat.js":37,"./upDubInChat.js":38,"./warnOnNavigation.js":39}],30:[function(require,module,exports){
"use strict";var _notify=require("../utils/notify.js"),myModule={id:"dubplus_pm_notifications",moduleName:"Notification on PM",description:"Enable desktop notifications when a user receives a private message",category:"General",pmNotify:function(e){QueUp.session.get("_id")!==e.userid&&(0,_notify.showNotification)({title:"You have a new PM",ignoreActiveTab:!0,callback:function(){$(".user-messages").click(),setTimeout(function(){$('.message-item[data-messageid="'.concat(e.messageid,'"]')).click()},500)},wait:1e4})},turnOn:function(){var e=this;(0,_notify.notifyCheckPermission)(function(i){!0===i?QueUp.Events.bind("realtime:new-message",e.pmNotify):e.toggleAndSave(e.id,!1)})},turnOff:function(){QueUp.Events.unbind("realtime:new-message",this.pmNotify)}};module.exports=myModule;

},{"../utils/notify.js":44}],31:[function(require,module,exports){
"use strict";var rain={id:"dubplus-rain",moduleName:"Rain",description:"Make it rain!",category:"General",particles:[],drops:[],numbase:5,numb:2};rain.width,rain.height=0,rain.controls={rain:2,alpha:1,color:200,opacity:1,saturation:100,lightness:50,back:0,multi:!1,speed:1},rain.turnOn=function(){$("body").prepend('<canvas id="dubPlusRainCanvas" style="position : fixed; top : 0px; left : 0px; z-index: 100; pointer-events:none;"></canvas>'),this.bindCanvas()},rain.turnOff=function(){$("#dubPlusRainCanvas").remove(),this.unbindCanvas()},rain.bindCanvas=function(){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;this.requestAnimFrame=i?i.bind(window):null;var n=document.getElementById("dubPlusRainCanvas");if(n){var t=n.getContext("2d");this.width,this.height=0,window.onresize=function(){this.width=n.width=window.innerWidth,this.height=n.height=window.innerHeight},window.onresize(),this.particles,this.drops=[],this.numbase=5,this.numb=2;var a=this;!function i(){a.requestAnimFrame(i),a.update(),a.rendu(t)}()}},rain.buildRainParticle=function(i,n,t){for(t||(t=this.numb);t--;)this.particles.push({speedX:.25*Math.random(),speedY:9*Math.random()+1,X:i,Y:n,alpha:1,color:"hsla("+this.controls.color+","+this.controls.saturation+"%, "+this.controls.lightness+"%,"+this.controls.opacity+")"})},rain.explosion=function(i,n,t,a){for(a||(a=this.numbase);a--;)this.drops.push({speedX:4*Math.random()-2,speedY:-4*Math.random(),X:i,Y:n,radius:.65+Math.floor(1.6*Math.random()),alpha:1,color:t})},rain.rendu=function(i){1==this.controls.multi&&(this.controls.color=360*Math.random()),i.save(),i.clearRect(0,0,width,height);for(var n,t=this.particles,a=this.drops,e=2*Math.PI,s=0;n=t[s];s++)i.globalAlpha=n.alpha,i.fillStyle=n.color,i.fillRect(n.X,n.Y,n.speedY/4,n.speedY);var o;for(s=0;o=a[s];s++)i.globalAlpha=o.alpha,i.fillStyle=o.color,i.beginPath(),i.arc(o.X,o.Y,o.radius,0,e),i.fill();i.strokeStyle="white",i.lineWidth=2,i.restore()},rain.update=function(){for(var i,n=this.particles,t=this.drops,a=0;i=n[a];a++)i.X+=i.speedX,i.Y+=i.speedY+5,i.Y>height-15&&(n.splice(a--,1),this.explosion(i.X,i.Y,i.color));var e;for(a=0;e=t[a];a++)e.X+=e.speedX,e.Y+=e.speedY,e.radius-=.075,e.alpha>0?e.alpha-=.005:e.alpha=0,e.radius<0&&t.splice(a--,1);for(a=this.controls.rain;a--;)this.buildRainParticle(Math.floor(Math.random()*width),-15)},rain.unbindCanvas=function(){this.requestAnimFrame=function(){}},module.exports=rain;

},{}],32:[function(require,module,exports){
"use strict";var _modcheck=_interopRequireDefault(require("../utils/modcheck.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var modal=require("../utils/modal.js"),dubshover={id:"dubplus-dubs-hover",moduleName:"Show Dub info on Hover",description:"Show Dub info on Hover.",category:"General",resetGrabs:function(){window.dubplus.dubs.grabs=[]},grabInfoWarning:function(){this.warned&&(this.warned=!0,modal.create({title:"Grab Vote Info",content:"Please note that this feature is currently still in development. We are waiting on the ability to pull grab vote information from Dubtrack on load. Until then the only grabs you will be able to see are those you are present in the room for."}))},showDubsOnHover:function(){var e=this;this.resetDubs(),QueUp.Events.bind("realtime:room_playlist-dub",this.dubWatcher.bind(this)),QueUp.Events.bind("realtime:room_playlist-queue-update-grabs",this.grabWatcher.bind(this)),QueUp.Events.bind("realtime:user-leave",this.dubUserLeaveWatcher.bind(this)),QueUp.Events.bind("realtime:room_playlist-update",this.resetDubs.bind(this)),QueUp.Events.bind("realtime:room_playlist-update",this.resetGrabs.bind(this));var u=$(".dubup").first().parent("li"),s=$(".dubdown").first().parent("li"),d=$(".add-to-playlist-button").first().parent("li");$(u).addClass("dubplus-updubs-hover"),$(s).addClass("dubplus-downdubs-hover"),$(d).addClass("dubplus-grabs-hover"),$(u).click(function(e){$("#dubplus-updubs-container").remove();var s=e.clientX,d=e.clientY;if(!s||!d||isNaN(s)||isNaN(d))return $("#dubplus-downdubs-container").remove();var n=document.elementFromPoint(s,d);($(n).hasClass("dubplus-updubs-hover")||$(n).parents(".dubplus-updubs-hover").length>0)&&setTimeout(function(){$(u).mouseenter()},250)}),$(s).click(function(e){$("#dubplus-downdubs-container").remove();var u=e.clientX,d=e.clientY;if(!u||!d||isNaN(u)||isNaN(d))return $("#dubplus-downdubs-container").remove();var n=document.elementFromPoint(u,d);($(n).hasClass("dubplus-downdubs-hover")||$(n).parents(".dubplus-downdubs-hover").length>0)&&setTimeout(function(){$(s).mouseenter()},250)}),$(d).click(function(e){$("#dubplus-grabs-container").remove();var u=e.clientX,s=e.clientY;if(!u||!s||isNaN(u)||isNaN(s))return $("#dubplus-grabs-container").remove();var n=document.elementFromPoint(u,s);($(n).hasClass("dubplus-grabs-hover")||$(n).parents(".dubplus-grabs-hover").length>0)&&setTimeout(function(){$(d).mouseenter()},250)}),$(u).mouseenter(function(d){var n=d.currentTarget;if(!($("#dubplus-updubs-container").length>0)){var i,t=$(u).innerWidth()+$(s).innerWidth(),r=$(".dubup").hasClass("voted")?$(".dubup").css("background-color"):$(".dubup").find(".icon-arrow-up").css("color");window.dubplus.dubs.upDubs.length>0?(i='<ul id="dubinfo-preview" class="dubinfo-show dubplus-updubs-hover" style="border-color: '+r+'">',window.dubplus.dubs.upDubs.forEach(function(e){i+='<li class="preview-dubinfo-item users-previews dubplus-updubs-hover"><div class="dubinfo-image"><img src="https://api.queup.net/user/'+e.userid+'/image"></div><span class="dubinfo-text">@'+e.username+"</span></li>"}),i+="</ul>"):i='<div id="dubinfo-preview" class="dubinfo-show dubplus-updubs-hover dubplus-no-dubs" style="border-color: '+r+'">No updubs have been casted yet!</div>';var o=document.createElement("div");o.id="dubplus-updubs-container",o.className="dubinfo-show dubplus-updubs-hover",o.innerHTML=i,o.style.visibility="hidden",document.body.appendChild(o);var b=n.getBoundingClientRect(),l=document.body.getBoundingClientRect();o.style.visibility="",o.style.width=t+"px",o.style.top=b.top-150+"px",l.right-b.left>=t?o.style.left=b.left+"px":o.style.right=0,document.body.appendChild(o),$(n).addClass("dubplus-updubs-hover"),$(document.body).on("click",".preview-dubinfo-item",function(u){var s=$(u.currentTarget).find(".dubinfo-text")[0].innerHTML+" ";e.updateChatInputWithString(s)}),$(".dubplus-updubs-hover").mouseleave(function(e){var u=e.clientX,s=e.clientY;if(!u||!s||isNaN(u)||isNaN(s))return $("#dubplus-downdubs-container").remove();var d=document.elementFromPoint(u,s);!$(d).hasClass("dubplus-updubs-hover")&&!$(d).hasClass("ps-scrollbar-y")&&$(d).parent(".dubplus-updubs-hover").length<=0&&$("#dubplus-updubs-container").remove()})}}),$(s).mouseenter(function(d){var n=d.currentTarget;if(!($("#dubplus-downdubs-container").length>0)){var i,t=$(u).innerWidth()+$(s).innerWidth(),r=$(".dubdown").hasClass("voted")?$(".dubdown").css("background-color"):$(".dubdown").find(".icon-arrow-down").css("color");(0,_modcheck.default)(QueUp.session.id)?window.dubplus.dubs.downDubs.length>0?(i='<ul id="dubinfo-preview" class="dubinfo-show dubplus-downdubs-hover" style="border-color: '+r+'">',window.dubplus.dubs.downDubs.forEach(function(e){i+='<li class="preview-dubinfo-item users-previews dubplus-downdubs-hover"><div class="dubinfo-image"><img src="https://api.queup.net/user/'+e.userid+'/image"></div><span class="dubinfo-text">@'+e.username+"</span></li>"}),i+="</ul>"):i='<div id="dubinfo-preview" class="dubinfo-show dubplus-downdubs-hover dubplus-no-dubs" style="border-color: '+r+'">No downdubs have been casted yet!</div>':i='<div id="dubinfo-preview" class="dubinfo-show dubplus-downdubs-hover dubplus-downdubs-unauthorized" style="border-color: '+r+'">You must be at least a mod to view downdubs!</div>';var o=document.createElement("div");o.id="dubplus-downdubs-container",o.className="dubinfo-show dubplus-downdubs-hover",o.innerHTML=i,o.style.visibility="hidden",document.body.appendChild(o);var b=n.getBoundingClientRect(),l=document.body.getBoundingClientRect();o.style.visibility="",o.style.width=t+"px",o.style.top=b.top-150+"px",l.right-b.left>=t?o.style.left=b.left+"px":o.style.right=0,document.body.appendChild(o),$(n).addClass("dubplus-downdubs-hover"),$(document.body).on("click",".preview-dubinfo-item",function(u){var s=$(u.currentTarget).find(".dubinfo-text")[0].innerHTML+" ";e.updateChatInputWithString(s)}),$(".dubplus-downdubs-hover").mouseleave(function(e){var u=e.clientX,s=e.clientY;if(!u||!s||isNaN(u)||isNaN(s))return $("#dubplus-downdubs-container").remove();var d=document.elementFromPoint(u,s);!$(d).hasClass("dubplus-downdubs-hover")&&!$(d).hasClass("ps-scrollbar-y")&&$(d).parent(".dubplus-downdubs-hover").length<=0&&$("#dubplus-downdubs-container").remove()})}}),$(d).mouseenter(function(s){var n=s.currentTarget;if(!($("#dubplus-grabs-container").length>0)){var i,t=$(u).innerWidth()+$(d).innerWidth(),r=$(".add-to-playlist-button").hasClass("grabbed")?$(".add-to-playlist-button").css("background-color"):$(".add-to-playlist-button").find(".icon-heart").css("color");window.dubplus.dubs.grabs.length>0?(i='<ul id="dubinfo-preview" class="dubinfo-show dubplus-grabs-hover" style="border-color: '+r+'">',window.dubplus.dubs.grabs.forEach(function(e){i+='<li class="preview-dubinfo-item users-previews dubplus-grabs-hover"><div class="dubinfo-image"><img src="https://api.queup.net/user/'+e.userid+'/image"></div><span class="dubinfo-text">@'+e.username+"</span></li>"}),i+="</ul>"):i='<div id="dubinfo-preview" class="dubinfo-show dubplus-grabs-hover dubplus-no-grabs" style="border-color: '+r+"\">This song hasn't been grabbed yet!</div>";var o=document.createElement("div");o.id="dubplus-grabs-container",o.className="dubinfo-show dubplus-grabs-hover",o.innerHTML=i,o.style.visibility="hidden",document.body.appendChild(o);var b=n.getBoundingClientRect(),l=document.body.getBoundingClientRect();o.style.visibility="",o.style.width=t+"px",o.style.top=b.top-150+"px",l.right-b.left>=t?o.style.left=b.left+"px":o.style.right=0,document.body.appendChild(o),$(n).addClass("dubplus-grabs-hover"),$(document.body).on("click",".preview-dubinfo-item",function(u){var s=$(u.currentTarget).find(".dubinfo-text")[0].innerHTML+" ";e.updateChatInputWithString(s)}),$(".dubplus-grabs-hover").mouseleave(function(e){var u=e.clientX,s=e.clientY;if(!u||!s||isNaN(u)||isNaN(s))return $("#dubplus-grabs-container").remove();var d=document.elementFromPoint(u,s);!$(d).hasClass("dubplus-grabs-hover")&&!$(d).hasClass("ps-scrollbar-y")&&$(d).parent(".dubplus-grabs-hover").length<=0&&$("#dubplus-grabs-container").remove()})}})},stopDubsOnHover:function(){QueUp.Events.unbind("realtime:room_playlist-dub",this.dubWatcher),QueUp.Events.unbind("realtime:room_playlist-queue-update-grabs",this.grabWatcher),QueUp.Events.unbind("realtime:user-leave",this.dubUserLeaveWatcher),QueUp.Events.unbind("realtime:room_playlist-update",this.resetDubs),QueUp.Events.unbind("realtime:room_playlist-update",this.resetGrabs)},dubUserLeaveWatcher:function(e){$.grep(window.dubplus.dubs.upDubs,function(u){return u.userid===e.user._id}).length>0&&$.each(window.dubplus.dubs.upDubs,function(u){if(window.dubplus.dubs.upDubs[u].userid===e.user._id)return window.dubplus.dubs.upDubs.splice(u,1),!1}),$.grep(window.dubplus.dubs.downDubs,function(u){return u.userid===e.user._id}).length>0&&$.each(window.dubplus.dubs.downDubs,function(u){if(window.dubplus.dubs.downDubs[u].userid===e.user._id)return window.dubplus.dubs.downDubs.splice(u,1),!1}),$.grep(window.dubplus.dubs.grabs,function(u){return u.userid===e.user._id}).length>0&&$.each(window.dubplus.dubs.grabs,function(u){if(window.dubplus.dubs.grabs[u].userid===e.user._id)return window.dubplus.dubs.grabs.splice(u,1),!1})},grabWatcher:function(e){$.grep(window.dubplus.dubs.grabs,function(u){return u.userid===e.user._id}).length<=0&&window.dubplus.dubs.grabs.push({userid:e.user._id,username:e.user.username})},updateChatInputWithString:function(e){$("#chat-txt-message").val(e).focus()},deleteChatMessageClientSide:function(e){$(e).parent("li")[0].remove()},dubWatcher:function(e){"updub"===e.dubtype?($.grep(window.dubplus.dubs.upDubs,function(u){return u.userid===e.user._id}).length<=0&&window.dubplus.dubs.upDubs.push({userid:e.user._id,username:e.user.username}),$.grep(window.dubplus.dubs.downDubs,function(u){return u.userid===e.user._id}).length>0&&$.each(window.dubplus.dubs.downDubs,function(u){if(window.dubplus.dubs.downDubs[u].userid===e.user._id)return window.dubplus.dubs.downDubs.splice(u,1),!1})):"downdub"===e.dubtype&&($.grep(window.dubplus.dubs.downDubs,function(u){return u.userid===e.user._id}).length<=0&&(0,_modcheck.default)(QueUp.session.id)&&window.dubplus.dubs.downDubs.push({userid:e.user._id,username:e.user.username}),$.grep(window.dubplus.dubs.upDubs,function(u){return u.userid===e.user._id}).length>0&&$.each(window.dubplus.dubs.upDubs,function(u){if(window.dubplus.dubs.upDubs[u].userid===e.user._id)return window.dubplus.dubs.upDubs.splice(u,1),!1})),new Date-new Date(QueUp.room.player.activeSong.attributes.song.played)<1e3||(window.dubplus.dubs.upDubs.length!==QueUp.room.player.activeSong.attributes.song.updubs?this.resetDubs():(0,_modcheck.default)(QueUp.session.id)&&window.dubplus.dubs.downDubs.length!==QueUp.room.player.activeSong.attributes.song.downdubs&&this.resetDubs())},resetDubs:function(){window.dubplus.dubs.upDubs=[],window.dubplus.dubs.downDubs=[];var e="https://api.queup.dev/room/"+QueUp.room.model.id+"/playlist/active/dubs";$.getJSON(e,function(e){e.data.upDubs.forEach(function(e){var u;$.grep(window.dubplus.dubs.upDubs,function(u){return u.userid===e.userid}).length>0||(QueUp.room.users.collection.findWhere({userid:e.userid})&&QueUp.room.users.collection.findWhere({userid:e.userid}).attributes?u=QueUp.room.users.collection.findWhere({userid:e.userid}).attributes._user.username:$.getJSON("https://api.queup.dev/user/"+e.userid,function(e){e&&e.userinfo&&(u=e.userinfo.username)}),u&&window.dubplus.dubs.upDubs.push({userid:e.userid,username:u}))}),(0,_modcheck.default)(QueUp.session.id)&&e.data.downDubs.forEach(function(e){$.grep(window.dubplus.dubs.downDubs,function(u){return u.userid===e.userid}).length>0||(QueUp.room.users.collection.findWhere({userid:e.userid})&&QueUp.room.users.collection.findWhere({userid:e.userid}).attributes?QueUp.room.users.collection.findWhere({userid:e.userid}).attributes._user.username:$.getJSON("https://api.queup.dev/user/"+e.userid,function(e){e.userinfo.username}),window.dubplus.dubs.downDubs.push({userid:e.userid,username:QueUp.room.users.collection.findWhere({userid:e.userid}).attributes._user.username}))})})},init:function(){window.dubplus.dubs={upDubs:[],downDubs:[],grabs:[]}},turnOn:function(){this.grabInfoWarning(),this.showDubsOnHover()},turnOff:function(){this.stopDubsOnHover()}};module.exports=dubshover;

},{"../utils/modal.js":42,"../utils/modcheck.js":43}],33:[function(require,module,exports){
"use strict";var myModule={id:"dubplus-show-timestamp",moduleName:"Show Timestamps",description:"Toggle always showing chat message timestamps.",category:"User Interface",turnOn:function(){$("body").addClass("dubplus-show-timestamp")},turnOff:function(){$("body").removeClass("dubplus-show-timestamp")}};module.exports=myModule;

},{}],34:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var snooze_tooltip=function(e){$(this).append('<div class="snooze_tooltip" style="position: absolute;font: 1rem/1.5 proxima-nova,sans-serif;display: block;left: -33px;cursor: pointer;border-radius: 1.5rem;padding: 8px 16px;background: #fff;font-weight: 700;font-size: 13.6px;text-transform: uppercase;color: #000;opacity: .8;text-align: center;z-index: 9;">Mute current song</div>')},hide_snooze_tooltip=function(){$(".snooze_tooltip").remove()},eventUtils={currentVol:50,snoozed:!1},eventSongAdvance=function(e){if(e.startTime<2)return eventUtils.snoozed&&(QueUp.room.player.setVolume(eventUtils.currentVol),eventUtils.snoozed=!1),!0},snooze=function(){!eventUtils.snoozed&&!QueUp.room.player.muted_player&&QueUp.playerController.volume>2?(eventUtils.currentVol=QueUp.playerController.volume,QueUp.room.player.mutePlayer(),eventUtils.snoozed=!0,QueUp.Events.bind("realtime:room_playlist-update",eventSongAdvance)):eventUtils.snoozed&&(QueUp.room.player.setVolume(eventUtils.currentVol),QueUp.room.player.updateVolumeBar(),eventUtils.snoozed=!1)};function _default(){$(".player_sharing").append('<span class="icon-mute snooze_btn"></span>'),$("body").on("mouseover",".snooze_btn",snooze_tooltip),$("body").on("mouseout",".snooze_btn",hide_snooze_tooltip),$("body").on("click",".snooze_btn",snooze)}

},{}],35:[function(require,module,exports){
"use strict";var options=require("../utils/options.js");module.exports={id:"dubplus-snow",moduleName:"Snow",description:"Make it snow!",category:"General",doSnow:function(){$(document).snowfall("clear"),$(document).snowfall({round:!0,shadow:!0,flakeCount:50,minSize:1,maxSize:5,minSpeed:5,maxSpeed:5})},turnOn:function(){var o=this;$.snowfall?this.doSnow():$.getScript("https://cdn.jsdelivr.net/gh/loktar00/JQuery-Snowfall/src/snowfall.jquery.js").done(function(){o.doSnow()}).fail(function(n,e,t){options.toggleAndSave(o.id,!1),console.error("Could not load snowfall jquery plugin",t)}),window.addEventListener("resize",this.doSnow,!0)},turnOff:function(){$.snowfall&&($(document).snowfall("clear"),window.removeEventListener("resize",this.doSnow,!0))}};

},{"../utils/options.js":45}],36:[function(require,module,exports){
"use strict";var myModule={id:"dubplus-spacebar-mute",moduleName:"Spacebar Mute",description:"Turn on/off the ability to mute current song with the spacebar.",category:"Settings",turnOn:function(){$(document).bind("keypress.key32",function(e){var t=e.target.tagName.toLowerCase();32===e.which&&"input"!==t&&"textarea"!==t&&QueUp.room.player.mutePlayer()})},turnOff:function(){$(document).unbind("keypress.key32")}};module.exports=myModule;

},{}],37:[function(require,module,exports){
"use strict";var myModule={id:"dubplus-split-chat",moduleName:"Split Chat",description:"Toggle Split Chat UI enhancement",category:"User Interface",turnOn:function(){$("body").addClass("dubplus-split-chat")},turnOff:function(){$("body").removeClass("dubplus-split-chat")}};module.exports=myModule;

},{}],38:[function(require,module,exports){
"use strict";var myModule={id:"dubplus-updubs",moduleName:"Updubs in Chat",description:"Toggle showing updubs in the chat box",category:"General",updubWatcher:function(e){if(QueUp.session.get("username")===QueUp.room.users.collection.findWhere({userid:QueUp.room.player.activeSong.attributes.song.userid}).attributes._user.username&&"updub"===e.dubtype){var u='\n      <li class="dubplus-chat-system dubplus-chat-system-updub">\n        <div class="chatDelete" onclick="dubplus.deleteChatMessageClientSide(this)">\n          <span class="icon-close"></span>\n        </div>\n        <div class="text">\n          @'.concat(e.user.username," has updubbed your song ").concat(QueUp.room.player.activeSong.attributes.songInfo.name,"\n        </div>\n      </li>");$("ul.chat-main").append(u)}},turnOn:function(){QueUp.Events.bind("realtime:room_playlist-dub",this.updubWatcher),"function"!=typeof window.dubplus.deleteChatMessageClientSide&&(window.dubplus.deleteChatMessageClientSide=function(e){$(e).parent("li")[0].remove()})},turnOff:function(){QueUp.Events.unbind("realtime:room_playlist-dub",this.updubWatcher)}};module.exports=myModule;

},{}],39:[function(require,module,exports){
"use strict";var myModule={};function unloader(e){return e.returnValue="",""}myModule.id="warn_redirect",myModule.moduleName="Warn On Navigation",myModule.description="Warns you when accidentally clicking on a link that takes you out of dubtrack.",myModule.category="Settings",myModule.turnOn=function(){window.addEventListener("beforeunload",unloader)},myModule.turnOff=function(){window.removeEventListener("beforeunload",unloader)},module.exports=myModule;

},{}],40:[function(require,module,exports){
(function (TIME_STAMP){(function (){
"use strict";var settings=require("../lib/settings.js"),makeLink=function(e,t){var n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.className=e||"",n.href=t,n},load=function(e,t){if(e){var n=makeLink(t,settings.srcRoot+e+"?"+TIME_STAMP);document.head.insertAdjacentElement("beforeend",n)}},loadExternal=function(e,t){if(e){var n=makeLink(t,e);document.head.insertAdjacentElement("beforeend",n)}};module.exports={load:load,loadExternal:loadExternal};

}).call(this)}).call(this,'1719891667733')
},{"../lib/settings.js":8}],41:[function(require,module,exports){
"use strict";var GetJSON=function(e,n,t){var o=n?new Event(n):null;function r(e,n){var r=new XMLHttpRequest;if(r.open("GET",e),t)for(var s in t)t.hasOwnProperty(s)&&r.setRequestHeader(s,t[s]);r.send(),r.onload=function(){var e=r.responseText;"function"==typeof n&&n(e),o&&window.dispatchEvent(o)}}return{done:function(n){new r(e,n)}}};module.exports=GetJSON;

},{}],42:[function(require,module,exports){
"use strict";function makeButtons(e){var o="";return e?(o+='<button id="dp-modal-cancel">cancel</button>',o+='<button id="dp-modal-confirm">okay</button>'):o+='<button id="dp-modal-cancel">close</button>',o}var create=function(e){var o=Object.assign({},{title:"Dub+",content:"",value:"",placeholder:null,maxlength:999,confirmCallback:null},e),a="";o.placeholder&&(a='<textarea placeholder="'+o.placeholder+'" maxlength="'+o.maxlength+'">',a+=o.value,a+="</textarea>");var n=['<div class="dp-modal">','<aside class="container">','<div class="title">',"<h1>"+o.title+"</h1>","</div>",'<div class="content">',"<p>"+o.content+"</p>",a,"</div>",'<div class="dp-modal-buttons">',makeButtons(o.confirmCallback),"</div>","</aside>","</div>"].join("");document.body.insertAdjacentHTML("beforeend",n),"function"==typeof o.confirmCallback&&$("#dp-modal-confirm").one("click",function(e){o.confirmCallback(),$(".dp-modal").remove()}),$("#dp-modal-cancel").one("click",function(){$(".dp-modal").remove()}),$(document).one("keyup",function(e){13===e.keyCode&&"function"==typeof o.confirmCallback&&(o.confirmCallback(),$(".dp-modal").remove()),27===e.keyCode&&$(".dp-modal").remove()})},close=function(){$(".dp-modal").remove()};module.exports={create:create,close:close};

},{}],43:[function(require,module,exports){
"use strict";function _default(e){return QueUp.helpers.isSiteAdmin(e)||QueUp.room.users.getIfOwner(e)||QueUp.room.users.getIfManager(e)||QueUp.room.users.getIfMod(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;

},{}],44:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notifyCheckPermission=notifyCheckPermission,exports.showNotification=showNotification;var modal=require("../utils/modal.js"),isActiveTab=!0;window.onfocus=function(){isActiveTab=!0},window.onblur=function(){isActiveTab=!1};var onDenyDismiss=function(){modal.create({title:"Desktop Notifications",content:"You have dismissed or chosen to deny the request to allow desktop notifications. Reset this choice by clearing your cache for the site."})};function notifyCheckPermission(i){var o="function"==typeof i?i:function(){};return"Notification"in window?"granted"===Notification.permission?o(!0):"denied"===Notification.permission?(onDenyDismiss(),o(!1)):void Notification.requestPermission().then(function(i){if("denied"===i||"default"===i)return onDenyDismiss(),void o(!1);o(!0)}):(modal.create({title:"Desktop Notifications",content:"Sorry this browser does not support desktop notifications.  Please use the latest version of Chrome or FireFox"}),o(!1))}function showNotification(i){var o=Object.assign({},{title:"New Message",content:"",ignoreActiveTab:!1,callback:null,wait:5e3},i);if(!0!==isActiveTab||o.ignoreActiveTab){var t={body:o.content,icon:"https://res.cloudinary.com/hhberclba/image/upload/c_lpad,h_100,w_100/v1400351432/dubtrack_new_logo_fvpxa6.png"},e=new Notification(o.title,t);e.onclick=function(){window.focus(),"function"==typeof o.callback&&o.callback(),e.close()},setTimeout(e.close.bind(e),o.wait)}}

},{"../utils/modal.js":42}],45:[function(require,module,exports){
"use strict";var settings=require("../lib/settings.js"),saveOption=function(t,e,s){settings[t][e]=s,localStorage.setItem("dubplusUserSettings",JSON.stringify(settings))},getAllOptions=function(){var t=localStorage.dubplusUserSettings;return t?JSON.parse(t):settings},toggle=function(t,e){var s=$(t);s.length&&(!0===e?s.addClass("dubplus-switch-on"):s.removeClass("dubplus-switch-on"))},toggleAndSave=function(t,e){return toggle("#"+t,e),saveOption("options",t,e)};module.exports={toggle:toggle,toggleAndSave:toggleAndSave,getAllOptions:getAllOptions,saveOption:saveOption};

},{"../lib/settings.js":8}],46:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=preload;var settings=require("../lib/settings.js");function preload(){var i=["font-family: 'Trebuchet MS', Helvetica, sans-serif","z-index: 2147483647","color: white","position: fixed","top: 69px","right: 13px","background: #222","padding: 10px","line-height: 1","-webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.75)","-moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.75)","box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.75)","border-radius: 5px","overflow: hidden","width: 230px"].join(";"),t=["float:left","width: 26px","margin-right:5px"].join(";"),e=["display: table-cell","width: 10000px","padding-top:5px"].join(";"),n='\n    <div class="dubplus-waiting" style="'.concat(i,'">\n      <div style="').concat(t,'">\n        <img src="').concat(settings.srcRoot,'/images/dubplus.svg" alt="DubPlus icon">\n      </div>\n      <span style="').concat(e,'">\n        Waiting for QueUp...\n      </span>\n    </div>\n  ');document.body.insertAdjacentHTML("afterbegin",n)}

},{"../lib/settings.js":8}],47:[function(require,module,exports){
"use strict";function deepCheck(e,t){for(var n=e.split("."),r=n.length,i=t||window,o=0;o<r;o++){if(void 0===i[n[o]])return!1;i=i[n[o]]}return!0}function arrayDeepCheck(e,t){for(var n=e.length,r=t||window,i=0;i<n;i++)if(!deepCheck(e[i],r))return console.log(e[i],"is not found yet"),!1;return!0}function WaitFor(e,t){if("string"==typeof e||Array.isArray(e)){var n=function(){},r=function(){},i=Array.isArray(e)?arrayDeepCheck:deepCheck,o=Object.assign({},{interval:500,seconds:5},t),a=0,u=1e3*o.seconds/o.interval,f=function t(){return a++,i(e)?n():a<u?void window.setTimeout(t,o.interval):r()};return{then:function(e){return"function"==typeof e&&(n=e),window.setTimeout(f,o.interval),this},fail:function(e){return"function"==typeof e&&(r=e),this}}}console.warn("WaitFor: invalid first argument")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=WaitFor;exports.default=_default;

},{}]},{},[1]);
