var dubplus = (function () {
  'use strict';
  /*!
     /#######            /##                
    | ##__  ##          | ##          /##   
    | ##  \ ## /##   /##| #######    | ##   
    | ##  | ##| ##  | ##| ##__  ## /########
    | ##  | ##| ##  | ##| ##  \ ##|__  ##__/
    | ##  | ##| ##  | ##| ##  | ##   | ##   
    | #######/|  ######/| #######/   |__/   
    |_______/  \______/ |_______/           
                                            
                                            
    https://github.com/DubPlus/DubPlus

    MIT License 

    Copyright (c) 2024 DubPlus

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.
*/ var e;
  const t = !1;
  var n = Array.isArray,
    o = Array.prototype.indexOf,
    i = Array.from,
    s = Object.defineProperty,
    r = Object.getOwnPropertyDescriptor,
    a = Object.getOwnPropertyDescriptors,
    l = Object.prototype,
    u = Array.prototype,
    c = Object.getPrototypeOf;
  const d = () => {};
  function p(e) {
    return e();
  }
  function f(e) {
    for (var t = 0; t < e.length; t++) e[t]();
  }
  const m = 32,
    v = 64,
    h = 128,
    b = 256,
    g = 512,
    w = 1024,
    y = 2048,
    x = 4096,
    k = 8192,
    E = 16384,
    _ = 65536,
    S = 1 << 20,
    O = Symbol('$state'),
    C = Symbol('');
  function U(e) {
    return e === this.v;
  }
  function L(e, t) {
    return e != e
      ? t == t
      : e !== t ||
          (null !== e && 'object' == typeof e) ||
          'function' == typeof e;
  }
  function z(e) {
    return !L(e, this.v);
  }
  let Q = !1;
  const M = Symbol(),
    $ = 'http://www.w3.org/1999/xhtml';
  function I(e) {
    throw new Error('https://svelte.dev/e/lifecycle_outside_component');
  }
  let N = null;
  function T(e) {
    N = e;
  }
  function A(e, t = !1, n) {
    var o = (N = {
      p: N,
      c: null,
      d: !1,
      e: null,
      m: !1,
      s: e,
      x: null,
      l: null,
    });
    Q && !t && (N.l = { s: null, u: null, r1: [], r2: F(!1) }),
      pe(() => {
        o.d = !0;
      });
  }
  function D(e) {
    const t = N;
    if (null !== t) {
      const e = t.e;
      if (null !== e) {
        var n = Fe,
          o = De;
        t.e = null;
        try {
          for (var i = 0; i < e.length; i++) {
            var s = e[i];
            Pe(s.effect), qe(s.reaction), me(s.fn);
          }
        } finally {
          Pe(n), qe(o);
        }
      }
      (N = t.p), (t.m = !0);
    }
    return {};
  }
  function j() {
    return !Q || (null !== N && null === N.l);
  }
  const q = new Map();
  function F(e, t) {
    return { f: 0, v: e, reactions: null, equals: U, rv: 0, wv: 0 };
  }
  function P(e) {
    return B(F(e));
  }
  function V(e, t = !1) {
    var n;
    const o = F(e);
    return (
      t || (o.equals = z),
      Q && null !== N && null !== N.l && ((n = N.l).s ?? (n.s = [])).push(o),
      o
    );
  }
  function B(e) {
    return (
      null !== De && !je && 2 & De.f && (null === Ve ? (Ve = [e]) : Ve.push(e)),
      e
    );
  }
  function R(e, t) {
    return (
      null !== De &&
        !je &&
        j() &&
        18 & De.f &&
        (null === Ve || !Ve.includes(e)) &&
        (function () {
          throw new Error('https://svelte.dev/e/state_unsafe_mutation');
        })(),
      J(e, t)
    );
  }
  function J(e, t) {
    if (!e.equals(t)) {
      var n = e.v;
      Ne ? q.set(e, t) : q.set(e, n),
        (e.v = t),
        (e.wv = He()),
        K(e, y),
        j() &&
          null !== Fe &&
          Fe.f & w &&
          !(96 & Fe.f) &&
          (null === Je
            ? (function (e) {
                Je = e;
              })([e])
            : Je.push(e));
    }
    return t;
  }
  function K(e, t) {
    var n = e.reactions;
    if (null !== n)
      for (var o = j(), i = n.length, s = 0; s < i; s++) {
        var r = n[s],
          a = r.f;
        a & y ||
          ((o || r !== Fe) &&
            (pt(r, t), 1280 & a && (2 & a ? K(r, x) : at(r))));
      }
  }
  function W(e, t = null, o) {
    if ('object' != typeof e || null === e || O in e) return e;
    const i = c(e);
    if (i !== l && i !== u) return e;
    var s,
      a = new Map(),
      d = n(e),
      p = F(0);
    return (
      d && a.set('length', F(e.length)),
      new Proxy(e, {
        defineProperty(e, t, n) {
          ('value' in n &&
            !1 !== n.configurable &&
            !1 !== n.enumerable &&
            !1 !== n.writable) ||
            (function () {
              throw new Error('https://svelte.dev/e/state_descriptors_fixed');
            })();
          var o = a.get(t);
          return (
            void 0 === o
              ? ((o = F(n.value)), a.set(t, o))
              : R(o, W(n.value, s)),
            !0
          );
        },
        deleteProperty(e, t) {
          var n = a.get(t);
          if (void 0 === n) t in e && a.set(t, F(M));
          else {
            if (d && 'string' == typeof t) {
              var o = a.get('length'),
                i = Number(t);
              Number.isInteger(i) && i < o.v && R(o, i);
            }
            R(n, M), Y(p);
          }
          return !0;
        },
        get(t, n, o) {
          var i;
          if (n === O) return e;
          var l = a.get(n),
            u = n in t;
          if (
            (void 0 !== l ||
              (u && !(null == (i = r(t, n)) ? void 0 : i.writable)) ||
              ((l = F(W(u ? t[n] : M, s))), a.set(n, l)),
            void 0 !== l)
          ) {
            var c = ut(l);
            return c === M ? void 0 : c;
          }
          return Reflect.get(t, n, o);
        },
        getOwnPropertyDescriptor(e, t) {
          var n = Reflect.getOwnPropertyDescriptor(e, t);
          if (n && 'value' in n) {
            var o = a.get(t);
            o && (n.value = ut(o));
          } else if (void 0 === n) {
            var i = a.get(t),
              s = null == i ? void 0 : i.v;
            if (void 0 !== i && s !== M)
              return {
                enumerable: !0,
                configurable: !0,
                value: s,
                writable: !0,
              };
          }
          return n;
        },
        has(e, t) {
          var n;
          if (t === O) return !0;
          var o = a.get(t),
            i = (void 0 !== o && o.v !== M) || Reflect.has(e, t);
          if (
            (void 0 !== o ||
              (null !== Fe &&
                (!i || (null == (n = r(e, t)) ? void 0 : n.writable)))) &&
            (void 0 === o && ((o = F(i ? W(e[t], s) : M)), a.set(t, o)),
            ut(o) === M)
          )
            return !1;
          return i;
        },
        set(e, t, n, o) {
          var i,
            l = a.get(t),
            u = t in e;
          if (d && 'length' === t)
            for (var c = n; c < l.v; c += 1) {
              var f = a.get(c + '');
              void 0 !== f ? R(f, M) : c in e && ((f = F(M)), a.set(c + '', f));
            }
          void 0 === l
            ? (u && !(null == (i = r(e, t)) ? void 0 : i.writable)) ||
              (R((l = F(void 0)), W(n, s)), a.set(t, l))
            : ((u = l.v !== M), R(l, W(n, s)));
          var m = Reflect.getOwnPropertyDescriptor(e, t);
          if (((null == m ? void 0 : m.set) && m.set.call(o, n), !u)) {
            if (d && 'string' == typeof t) {
              var v = a.get('length'),
                h = Number(t);
              Number.isInteger(h) && h >= v.v && R(v, h + 1);
            }
            Y(p);
          }
          return !0;
        },
        ownKeys(e) {
          ut(p);
          var t = Reflect.ownKeys(e).filter((e) => {
            var t = a.get(e);
            return void 0 === t || t.v !== M;
          });
          for (var [n, o] of a) o.v === M || n in e || t.push(n);
          return t;
        },
        setPrototypeOf() {
          !(function () {
            throw new Error('https://svelte.dev/e/state_prototype_fixed');
          })();
        },
      })
    );
  }
  function Y(e, t = 1) {
    R(e, e.v + t);
  }
  var H, X, G, Z;
  function ee(e = '') {
    return document.createTextNode(e);
  }
  function te(e) {
    return G.call(e);
  }
  function ne(e) {
    return Z.call(e);
  }
  function oe(e, t) {
    return te(e);
  }
  function ie(e, t) {
    var n = te(e);
    return n instanceof Comment && '' === n.data ? ne(n) : n;
  }
  function se(e, t = 1, n = !1) {
    let o = e;
    for (; t--; ) o = ne(o);
    return o;
  }
  function re(e) {
    var t = 2050,
      n = null !== De && 2 & De.f ? De : null;
    null === Fe || (null !== n && n.f & b) ? (t |= b) : (Fe.f |= S);
    return {
      ctx: N,
      deps: null,
      effects: null,
      equals: U,
      f: t,
      fn: e,
      reactions: null,
      rv: 0,
      v: null,
      wv: 0,
      parent: n ?? Fe,
    };
  }
  function ae(e) {
    const t = re(e);
    return (t.equals = z), t;
  }
  function le(e) {
    var t = e.effects;
    if (null !== t) {
      e.effects = null;
      for (var n = 0; n < t.length; n += 1) xe(t[n]);
    }
  }
  function ue(e) {
    var t = (function (e) {
      var t,
        n = Fe;
      Pe(
        (function (e) {
          for (var t = e.parent; null !== t; ) {
            if (!(2 & t.f)) return t;
            t = t.parent;
          }
          return null;
        })(e),
      );
      try {
        le(e), (t = et(e));
      } finally {
        Pe(n);
      }
      return t;
    })(e);
    pt(e, (Ye || e.f & b) && null !== e.deps ? x : w),
      e.equals(t) || ((e.v = t), (e.wv = He()));
  }
  function ce(e) {
    null === Fe &&
      null === De &&
      (function () {
        throw new Error('https://svelte.dev/e/effect_orphan');
      })(),
      null !== De &&
        De.f & b &&
        null === Fe &&
        (function () {
          throw new Error('https://svelte.dev/e/effect_in_unowned_derived');
        })(),
      Ne &&
        (function () {
          throw new Error('https://svelte.dev/e/effect_in_teardown');
        })();
  }
  function de(e, t, n, o = !0) {
    var i = Fe,
      s = {
        ctx: N,
        deps: null,
        nodes_start: null,
        nodes_end: null,
        f: e | y,
        first: null,
        fn: t,
        last: null,
        next: null,
        parent: i,
        prev: null,
        teardown: null,
        transitions: null,
        wv: 0,
      };
    if (n)
      try {
        ot(s), (s.f |= 32768);
      } catch (e) {
        throw (xe(s), e);
      }
    else null !== t && at(s);
    if (
      !(
        n &&
        null === s.deps &&
        null === s.first &&
        null === s.nodes_start &&
        null === s.teardown &&
        !(1048704 & s.f)
      ) &&
      o &&
      (null !== i &&
        (function (e, t) {
          var n = t.last;
          null === n
            ? (t.last = t.first = e)
            : ((n.next = e), (e.prev = n), (t.last = e));
        })(s, i),
      null !== De && 2 & De.f)
    ) {
      var r = De;
      (r.effects ?? (r.effects = [])).push(s);
    }
    return s;
  }
  function pe(e) {
    const t = de(8, null, !1);
    return pt(t, w), (t.teardown = e), t;
  }
  function fe(e) {
    if ((ce(), !(null !== Fe && !!(Fe.f & m) && null !== N && !N.m)))
      return me(e);
    var t = N;
    (t.e ?? (t.e = [])).push({ fn: e, effect: Fe, reaction: De });
  }
  function me(e) {
    return de(4, e, !1);
  }
  function ve(e) {
    return de(8, e, !0);
  }
  function he(e, t = [], n = re) {
    const o = t.map(n);
    return be(() => e(...o.map(ut)));
  }
  function be(e, t = 0) {
    return de(24 | t, e, !0);
  }
  function ge(e, t = !0) {
    return de(40, e, !0, t);
  }
  function we(e) {
    var t = e.teardown;
    if (null !== t) {
      const e = Ne,
        n = De;
      Te(!0), qe(null);
      try {
        t.call(null);
      } finally {
        Te(e), qe(n);
      }
    }
  }
  function ye(e, t = !1) {
    var n = e.first;
    for (e.first = e.last = null; null !== n; ) {
      var o = n.next;
      n.f & v ? (n.parent = null) : xe(n, t), (n = o);
    }
  }
  function xe(e, t = !0) {
    var n = !1;
    if ((t || 524288 & e.f) && null !== e.nodes_start) {
      for (var o = e.nodes_start, i = e.nodes_end; null !== o; ) {
        var s = o === i ? null : ne(o);
        o.remove(), (o = s);
      }
      n = !0;
    }
    ye(e, t && !n), nt(e, 0), pt(e, E);
    var r = e.transitions;
    if (null !== r) for (const e of r) e.stop();
    we(e);
    var a = e.parent;
    null !== a && null !== a.first && ke(e),
      (e.next =
        e.prev =
        e.teardown =
        e.ctx =
        e.deps =
        e.fn =
        e.nodes_start =
        e.nodes_end =
          null);
  }
  function ke(e) {
    var t = e.parent,
      n = e.prev,
      o = e.next;
    null !== n && (n.next = o),
      null !== o && (o.prev = n),
      null !== t &&
        (t.first === e && (t.first = o), t.last === e && (t.last = n));
  }
  function Ee(e, t) {
    var n = [];
    Se(e, n, !0),
      _e(n, () => {
        xe(e), t && t();
      });
  }
  function _e(e, t) {
    var n = e.length;
    if (n > 0) {
      var o = () => --n || t();
      for (var i of e) i.out(o);
    } else t();
  }
  function Se(e, t, n) {
    if (!(e.f & k)) {
      if (((e.f ^= k), null !== e.transitions))
        for (const o of e.transitions) (o.is_global || n) && t.push(o);
      for (var o = e.first; null !== o; ) {
        var i = o.next;
        Se(o, t, !!(!!(o.f & _) || !!(o.f & m)) && n), (o = i);
      }
    }
  }
  function Oe(e) {
    Ce(e, !0);
  }
  function Ce(e, t) {
    if (e.f & k) {
      (e.f ^= k), e.f & w || (e.f ^= w), Xe(e) && (pt(e, y), at(e));
      for (var n = e.first; null !== n; ) {
        var o = n.next;
        Ce(n, !!(!!(n.f & _) || !!(n.f & m)) && t), (n = o);
      }
      if (null !== e.transitions)
        for (const n of e.transitions) (n.is_global || t) && n.in();
    }
  }
  let Ue = [];
  function Le() {
    var e = Ue;
    (Ue = []), f(e);
  }
  function ze(e) {
    0 === Ue.length && queueMicrotask(Le), Ue.push(e);
  }
  let Qe = !1,
    Me = !1,
    $e = null,
    Ie = !1,
    Ne = !1;
  function Te(e) {
    Ne = e;
  }
  let Ae = [],
    De = null,
    je = !1;
  function qe(e) {
    De = e;
  }
  let Fe = null;
  function Pe(e) {
    Fe = e;
  }
  let Ve = null;
  let Be = null,
    Re = 0,
    Je = null;
  let Ke = 1,
    We = 0,
    Ye = !1;
  function He() {
    return ++Ke;
  }
  function Xe(e) {
    var t,
      n = e.f;
    if (n & y) return !0;
    if (n & x) {
      var o = e.deps,
        i = !!(n & b);
      if (null !== o) {
        var s,
          r,
          a = !!(n & g),
          l = i && null !== Fe && !Ye,
          u = o.length;
        if (a || l) {
          var c = e,
            d = c.parent;
          for (s = 0; s < u; s++)
            (r = o[s]),
              (!a &&
                (null == (t = null == r ? void 0 : r.reactions)
                  ? void 0
                  : t.includes(c))) ||
                (r.reactions ?? (r.reactions = [])).push(c);
          a && (c.f ^= g), !l || null === d || d.f & b || (c.f ^= b);
        }
        for (s = 0; s < u; s++)
          if ((Xe((r = o[s])) && ue(r), r.wv > e.wv)) return !0;
      }
      (i && (null === Fe || Ye)) || pt(e, w);
    }
    return !1;
  }
  function Ge(e, t, n, o) {
    if (Qe) {
      if (
        (null === n && (Qe = !1),
        (function (e) {
          return !(e.f & E || (null !== e.parent && e.parent.f & h));
        })(t))
      )
        throw e;
    } else
      null !== n && (Qe = !0),
        (function (e, t) {
          for (var n = t; null !== n; ) {
            if (n.f & h)
              try {
                return void n.fn(e);
              } catch {
                n.f ^= h;
              }
            n = n.parent;
          }
          throw ((Qe = !1), e);
        })(e, t);
  }
  function Ze(e, t, n = !0) {
    var o = e.reactions;
    if (null !== o)
      for (var i = 0; i < o.length; i++) {
        var s = o[i];
        2 & s.f
          ? Ze(s, t, !1)
          : t === s && (n ? pt(s, y) : s.f & w && pt(s, x), at(s));
      }
  }
  function et(e) {
    var t,
      n = Be,
      o = Re,
      i = Je,
      s = De,
      r = Ye,
      a = Ve,
      l = N,
      u = je,
      c = e.f;
    (Be = null),
      (Re = 0),
      (Je = null),
      (Ye = !!(c & b) && (je || !Ie || null === De)),
      (De = 96 & c ? null : e),
      (Ve = null),
      T(e.ctx),
      (je = !1),
      We++;
    try {
      var d = (0, e.fn)(),
        p = e.deps;
      if (null !== Be) {
        var f;
        if ((nt(e, Re), null !== p && Re > 0))
          for (p.length = Re + Be.length, f = 0; f < Be.length; f++)
            p[Re + f] = Be[f];
        else e.deps = p = Be;
        if (!Ye)
          for (f = Re; f < p.length; f++)
            ((t = p[f]).reactions ?? (t.reactions = [])).push(e);
      } else null !== p && Re < p.length && (nt(e, Re), (p.length = Re));
      if (j() && null !== Je && !je && null !== p && !(6146 & e.f))
        for (f = 0; f < Je.length; f++) Ze(Je[f], e);
      return null !== s && We++, d;
    } finally {
      (Be = n),
        (Re = o),
        (Je = i),
        (De = s),
        (Ye = r),
        (Ve = a),
        T(l),
        (je = u);
    }
  }
  function tt(e, t) {
    let n = t.reactions;
    if (null !== n) {
      var i = o.call(n, e);
      if (-1 !== i) {
        var s = n.length - 1;
        0 === s ? (n = t.reactions = null) : ((n[i] = n[s]), n.pop());
      }
    }
    null === n &&
      2 & t.f &&
      (null === Be || !Be.includes(t)) &&
      (pt(t, x), 768 & t.f || (t.f ^= g), le(t), nt(t, 0));
  }
  function nt(e, t) {
    var n = e.deps;
    if (null !== n) for (var o = t; o < n.length; o++) tt(e, n[o]);
  }
  function ot(e) {
    var n = e.f;
    if (!(n & E)) {
      pt(e, w);
      var o = Fe,
        i = N,
        s = Ie;
      (Fe = e), (Ie = !0);
      try {
        16 & n
          ? (function (e) {
              for (var t = e.first; null !== t; ) {
                var n = t.next;
                t.f & m || xe(t), (t = n);
              }
            })(e)
          : ye(e),
          we(e);
        var r = et(e);
        (e.teardown = 'function' == typeof r ? r : null), (e.wv = Ke);
        e.deps;
        t;
      } catch (t) {
        Ge(t, e, o, i || e.ctx);
      } finally {
        (Ie = s), (Fe = o);
      }
    }
  }
  function it() {
    try {
      !(function () {
        throw new Error('https://svelte.dev/e/effect_update_depth_exceeded');
      })();
    } catch (e) {
      if (null === $e) throw e;
      Ge(e, $e, null);
    }
  }
  function st() {
    var e = Ie;
    try {
      var t = 0;
      for (Ie = !0; Ae.length > 0; ) {
        t++ > 1e3 && it();
        var n = Ae,
          o = n.length;
        Ae = [];
        for (var i = 0; i < o; i++) {
          rt(lt(n[i]));
        }
      }
    } finally {
      (Me = !1), (Ie = e), ($e = null), q.clear();
    }
  }
  function rt(e) {
    var t = e.length;
    if (0 !== t)
      for (var n = 0; n < t; n++) {
        var o = e[n];
        if (!(24576 & o.f))
          try {
            Xe(o) &&
              (ot(o),
              null === o.deps &&
                null === o.first &&
                null === o.nodes_start &&
                (null === o.teardown ? ke(o) : (o.fn = null)));
          } catch (e) {
            Ge(e, o, null, o.ctx);
          }
      }
  }
  function at(e) {
    Me || ((Me = !0), queueMicrotask(st));
    for (var t = ($e = e); null !== t.parent; ) {
      var n = (t = t.parent).f;
      if (96 & n) {
        if (!(n & w)) return;
        t.f ^= w;
      }
    }
    Ae.push(t);
  }
  function lt(e) {
    for (var t = [], n = e; null !== n; ) {
      var o = n.f,
        i = !!(96 & o);
      if (!((i && !!(o & w)) || o & k)) {
        if (4 & o) t.push(n);
        else if (i) n.f ^= w;
        else {
          var s = De;
          try {
            (De = n), Xe(n) && ot(n);
          } catch (e) {
            Ge(e, n, null, n.ctx);
          } finally {
            De = s;
          }
        }
        var r = n.first;
        if (null !== r) {
          n = r;
          continue;
        }
      }
      var a = n.parent;
      for (n = n.next; null === n && null !== a; ) (n = a.next), (a = a.parent);
    }
    return t;
  }
  function ut(e) {
    var t = !!(2 & e.f);
    if (null === De || je) {
      if (t && null === e.deps && null === e.effects) {
        var n = e,
          o = n.parent;
        null === o || o.f & b || (n.f ^= b);
      }
    } else {
      null !== Ve &&
        Ve.includes(e) &&
        (function () {
          throw new Error('https://svelte.dev/e/state_unsafe_local_read');
        })();
      var i = De.deps;
      e.rv < We &&
        ((e.rv = We),
        null === Be && null !== i && i[Re] === e
          ? Re++
          : null === Be
            ? (Be = [e])
            : (Ye && Be.includes(e)) || Be.push(e));
    }
    return t && Xe((n = e)) && ue(n), Ne && q.has(e) ? q.get(e) : e.v;
  }
  function ct(e) {
    var t = je;
    try {
      return (je = !0), e();
    } finally {
      je = t;
    }
  }
  const dt = -7169;
  function pt(e, t) {
    e.f = (e.f & dt) | t;
  }
  function ft(e) {
    if ('object' == typeof e && e && !(e instanceof EventTarget))
      if (O in e) mt(e);
      else if (!Array.isArray(e))
        for (let t in e) {
          const n = e[t];
          'object' == typeof n && n && O in n && mt(n);
        }
  }
  function mt(e, t = new Set()) {
    if (
      !(
        'object' != typeof e ||
        null === e ||
        e instanceof EventTarget ||
        t.has(e)
      )
    ) {
      t.add(e), e instanceof Date && e.getTime();
      for (let n in e)
        try {
          mt(e[n], t);
        } catch (e) {}
      const n = c(e);
      if (
        n !== Object.prototype &&
        n !== Array.prototype &&
        n !== Map.prototype &&
        n !== Set.prototype &&
        n !== Date.prototype
      ) {
        const t = a(n);
        for (let n in t) {
          const o = t[n].get;
          if (o)
            try {
              o.call(e);
            } catch (e) {}
        }
      }
    }
  }
  const vt = ['touchstart', 'touchmove'];
  function ht(e) {
    return vt.includes(e);
  }
  let bt = !1;
  function gt(e) {
    var t = De,
      n = Fe;
    qe(null), Pe(null);
    try {
      return e();
    } finally {
      qe(t), Pe(n);
    }
  }
  function wt(e, t, n, o = n) {
    e.addEventListener(t, () => gt(n));
    const i = e.__on_r;
    (e.__on_r = i
      ? () => {
          i(), o(!0);
        }
      : () => o(!0)),
      bt ||
        ((bt = !0),
        document.addEventListener(
          'reset',
          (e) => {
            Promise.resolve().then(() => {
              var t;
              if (!e.defaultPrevented)
                for (const n of e.target.elements)
                  null == (t = n.__on_r) || t.call(n);
            });
          },
          { capture: !0 },
        ));
  }
  const yt = new Set(),
    xt = new Set();
  function kt(e, t, n, o, i) {
    var s = { capture: o, passive: i },
      r = (function (e, t, n, o = {}) {
        function i(e) {
          if ((o.capture || _t.call(t, e), !e.cancelBubble))
            return gt(() => (null == n ? void 0 : n.call(this, e)));
        }
        return (
          e.startsWith('pointer') || e.startsWith('touch') || 'wheel' === e
            ? ze(() => {
                t.addEventListener(e, i, o);
              })
            : t.addEventListener(e, i, o),
          i
        );
      })(e, t, n, s);
    (t !== document.body && t !== window && t !== document) ||
      pe(() => {
        t.removeEventListener(e, r, s);
      });
  }
  function Et(e) {
    for (var t = 0; t < e.length; t++) yt.add(e[t]);
    for (var n of xt) n(e);
  }
  function _t(e) {
    var t,
      o = this,
      i = o.ownerDocument,
      r = e.type,
      a = (null == (t = e.composedPath) ? void 0 : t.call(e)) || [],
      l = a[0] || e.target,
      u = 0,
      c = e.__root;
    if (c) {
      var d = a.indexOf(c);
      if (-1 !== d && (o === document || o === window))
        return void (e.__root = o);
      var p = a.indexOf(o);
      if (-1 === p) return;
      d <= p && (u = d);
    }
    if ((l = a[u] || e.target) !== o) {
      s(e, 'currentTarget', { configurable: !0, get: () => l || i });
      var f = De,
        m = Fe;
      qe(null), Pe(null);
      try {
        for (var v, h = []; null !== l; ) {
          var b = l.assignedSlot || l.parentNode || l.host || null;
          try {
            var g = l['__' + r];
            if (null != g && (!l.disabled || e.target === l))
              if (n(g)) {
                var [w, ...y] = g;
                w.apply(l, [e, ...y]);
              } else g.call(l, e);
          } catch (e) {
            v ? h.push(e) : (v = e);
          }
          if (e.cancelBubble || b === o || null === b) break;
          l = b;
        }
        if (v) {
          for (let e of h)
            queueMicrotask(() => {
              throw e;
            });
          throw v;
        }
      } finally {
        (e.__root = o), delete e.currentTarget, qe(f), Pe(m);
      }
    }
  }
  function St(e) {
    var t = document.createElement('template');
    return (t.innerHTML = e), t.content;
  }
  function Ot(e, t) {
    var n = Fe;
    null === n.nodes_start && ((n.nodes_start = e), (n.nodes_end = t));
  }
  function Ct(e, t) {
    var n,
      o = !!(1 & t),
      i = !!(2 & t),
      s = !e.startsWith('<!>');
    return () => {
      void 0 === n && ((n = St(s ? e : '<!>' + e)), o || (n = te(n)));
      var t = i || X ? document.importNode(n, !0) : n.cloneNode(!0);
      o ? Ot(te(t), t.lastChild) : Ot(t, t);
      return t;
    };
  }
  function Ut(e, t, n = 'svg') {
    var o,
      i = `<${n}>${!e.startsWith('<!>') ? e : '<!>' + e}</${n}>`;
    return () => {
      if (!o) {
        var e = St(i);
        o = te(te(e));
      }
      var t = o.cloneNode(!0);
      return Ot(t, t), t;
    };
  }
  function Lt(e = '') {
    var t = ee(e + '');
    return Ot(t, t), t;
  }
  function zt() {
    var e = document.createDocumentFragment(),
      t = document.createComment(''),
      n = ee();
    return e.append(t, n), Ot(t, n), e;
  }
  function Qt(e, t) {
    null !== e && e.before(t);
  }
  function Mt(e, t) {
    var n = null == t ? '' : 'object' == typeof t ? t + '' : t;
    n !== (e.__t ?? (e.__t = e.nodeValue)) &&
      ((e.__t = n), (e.nodeValue = n + ''));
  }
  const $t = new Map();
  let It = new WeakMap();
  function Nt(e, t, [n, o] = [0, 0]) {
    var i = e,
      s = null,
      r = null,
      a = M,
      l = !1;
    const u = (e, t = !0) => {
        (l = !0), c(t, e);
      },
      c = (e, t) => {
        a !== (a = e) &&
          (a
            ? (s ? Oe(s) : t && (s = ge(() => t(i))),
              r &&
                Ee(r, () => {
                  r = null;
                }))
            : (r ? Oe(r) : t && (r = ge(() => t(i, [n + 1, o]))),
              s &&
                Ee(s, () => {
                  s = null;
                })));
      };
    be(
      () => {
        (l = !1), t(u), l || c(null, null);
      },
      n > 0 ? _ : 0,
    );
  }
  function Tt(e, t, o, s, r, a = null) {
    var l = e,
      u = { flags: t, items: new Map(), first: null };
    !(4 & t) || (l = e.appendChild(ee()));
    var c = null,
      d = !1,
      p = ae(() => {
        var e = o();
        return n(e) ? e : null == e ? [] : i(e);
      });
    be(() => {
      var e = ut(p),
        n = e.length;
      (d && 0 === n) ||
        ((d = 0 === n),
        (function (e, t, n, o, s, r, a) {
          var l,
            u,
            c,
            d,
            p,
            f,
            m,
            v,
            h,
            b,
            g = !!(8 & s),
            w = !!(3 & s),
            y = e.length,
            x = t.items,
            E = t.first,
            _ = E,
            S = null,
            O = [],
            C = [];
          if (g)
            for (b = 0; b < y; b += 1)
              (v = r((m = e[b]), b)),
                void 0 !== (h = x.get(v)) &&
                  (null == (l = h.a) || l.measure(),
                  (f ?? (f = new Set())).add(h));
          for (b = 0; b < y; b += 1)
            if (((v = r((m = e[b]), b)), void 0 !== (h = x.get(v)))) {
              if (
                (w && At(h, m, b, s),
                h.e.f & k &&
                  (Oe(h.e),
                  g &&
                    (null == (u = h.a) || u.unfix(),
                    (f ?? (f = new Set())).delete(h))),
                h !== _)
              ) {
                if (void 0 !== p && p.has(h)) {
                  if (O.length < C.length) {
                    var U,
                      L = C[0];
                    S = L.prev;
                    var z = O[0],
                      Q = O[O.length - 1];
                    for (U = 0; U < O.length; U += 1) jt(O[U], L, n);
                    for (U = 0; U < C.length; U += 1) p.delete(C[U]);
                    qt(t, z.prev, Q.next),
                      qt(t, S, z),
                      qt(t, Q, L),
                      (_ = L),
                      (S = Q),
                      (b -= 1),
                      (O = []),
                      (C = []);
                  } else
                    p.delete(h),
                      jt(h, _, n),
                      qt(t, h.prev, h.next),
                      qt(t, h, null === S ? t.first : S.next),
                      qt(t, S, h),
                      (S = h);
                  continue;
                }
                for (O = [], C = []; null !== _ && _.k !== v; )
                  _.e.f & k || (p ?? (p = new Set())).add(_),
                    C.push(_),
                    (_ = _.next);
                if (null === _) continue;
                h = _;
              }
              O.push(h), (S = h), (_ = h.next);
            } else {
              (S = Dt(
                _ ? _.e.nodes_start : n,
                t,
                S,
                null === S ? t.first : S.next,
                m,
                v,
                b,
                o,
                s,
                a,
              )),
                x.set(v, S),
                (O = []),
                (C = []),
                (_ = S.next);
            }
          if (null !== _ || void 0 !== p) {
            for (var M = void 0 === p ? [] : i(p); null !== _; )
              _.e.f & k || M.push(_), (_ = _.next);
            var $ = M.length;
            if ($ > 0) {
              var I = 4 & s && 0 === y ? n : null;
              if (g) {
                for (b = 0; b < $; b += 1) null == (c = M[b].a) || c.measure();
                for (b = 0; b < $; b += 1) null == (d = M[b].a) || d.fix();
              }
              !(function (e, t, n, o) {
                for (var i = [], s = t.length, r = 0; r < s; r++)
                  Se(t[r].e, i, !0);
                var a = s > 0 && 0 === i.length && null !== n;
                if (a) {
                  var l = n.parentNode;
                  (l.textContent = ''),
                    l.append(n),
                    o.clear(),
                    qt(e, t[0].prev, t[s - 1].next);
                }
                _e(i, () => {
                  for (var n = 0; n < s; n++) {
                    var i = t[n];
                    a || (o.delete(i.k), qt(e, i.prev, i.next)), xe(i.e, !a);
                  }
                });
              })(t, M, I, x);
            }
          }
          g &&
            ze(() => {
              var e;
              if (void 0 !== f) for (h of f) null == (e = h.a) || e.apply();
            });
          (Fe.first = t.first && t.first.e), (Fe.last = S && S.e);
        })(e, u, l, r, t, s, o),
        null !== a &&
          (0 === n
            ? c
              ? Oe(c)
              : (c = ge(() => a(l)))
            : null !== c &&
              Ee(c, () => {
                c = null;
              })),
        ut(p));
    });
  }
  function At(e, t, n, o) {
    1 & o && J(e.v, t), 2 & o ? J(e.i, n) : (e.i = n);
  }
  function Dt(e, t, n, o, i, s, r, a, l, u) {
    var c = !!(1 & l) ? (!(16 & l) ? V(i) : F(i)) : i,
      d = 2 & l ? F(r) : r,
      p = { i: d, v: c, k: s, a: null, e: null, prev: n, next: o };
    try {
      return (
        (p.e = ge(() => a(e, c, d, u), false)),
        (p.e.prev = n && n.e),
        (p.e.next = o && o.e),
        null === n ? (t.first = p) : ((n.next = p), (n.e.next = p.e)),
        null !== o && ((o.prev = p), (o.e.prev = p.e)),
        p
      );
    } finally {
    }
  }
  function jt(e, t, n) {
    for (
      var o = e.next ? e.next.e.nodes_start : n,
        i = t ? t.e.nodes_start : n,
        s = e.e.nodes_start;
      s !== o;

    ) {
      var r = ne(s);
      i.before(s), (s = r);
    }
  }
  function qt(e, t, n) {
    null === t ? (e.first = n) : ((t.next = n), (t.e.next = n && n.e)),
      null !== n && ((n.prev = t), (n.e.prev = t && t.e));
  }
  function Ft(e, t, n) {
    var o,
      i,
      s = e;
    be(() => {
      o !== (o = t()) &&
        (i && (Ee(i), (i = null)), o && (i = ge(() => n(s, o))));
    }, _);
  }
  function Pt(e, t, n) {
    me(() => {
      var o = ct(() => t(e, null == n ? void 0 : n()) || {});
      if (n && (null == o ? void 0 : o.update)) {
        var i = !1,
          s = {};
        ve(() => {
          var e = n();
          ft(e), i && L(s, e) && ((s = e), o.update(e));
        }),
          (i = !0);
      }
      if (null == o ? void 0 : o.destroy) return () => o.destroy();
    });
  }
  const Vt = [...' \t\n\r\fÂ \v\ufeff'];
  function Bt(e, t, n, o, i, s) {
    if (e.__className !== n) {
      var r = (function (e, t, n) {
        var o = null == e ? '' : '' + e;
        if ((t && (o = o ? o + ' ' + t : t), n))
          for (var i in n)
            if (n[i]) o = o ? o + ' ' + i : i;
            else if (o.length)
              for (var s = i.length, r = 0; (r = o.indexOf(i, r)) >= 0; ) {
                var a = r + s;
                (0 !== r && !Vt.includes(o[r - 1])) ||
                (a !== o.length && !Vt.includes(o[a]))
                  ? (r = a)
                  : (o =
                      (0 === r ? '' : o.substring(0, r)) + o.substring(a + 1));
              }
        return '' === o ? null : o;
      })(n, o, s);
      null == r ? e.removeAttribute('class') : (e.className = r),
        (e.__className = n);
    } else if (s && i !== s)
      for (var a in s) {
        var l = !!s[a];
        (null != i && l === !!i[a]) || e.classList.toggle(a, l);
      }
    return s;
  }
  function Rt(e, t, n, o) {
    if (e.__style !== t) {
      var i = (function (e) {
        return null == e ? null : String(e);
      })(t);
      null == i ? e.removeAttribute('style') : (e.style.cssText = i),
        (e.__style = t);
    }
    return o;
  }
  const Jt = Symbol('is custom element'),
    Kt = Symbol('is html');
  function Wt(e, t, n, o) {
    var i = (function (e) {
      return (
        e.__attributes ??
        (e.__attributes = {
          [Jt]: e.nodeName.includes('-'),
          [Kt]: e.namespaceURI === $,
        })
      );
    })(e);
    i[t] !== (i[t] = n) &&
      ('loading' === t && (e[C] = n),
      null == n
        ? e.removeAttribute(t)
        : 'string' != typeof n &&
            (function (e) {
              var t,
                n = Yt.get(e.nodeName);
              if (n) return n;
              Yt.set(e.nodeName, (n = []));
              var o = e,
                i = Element.prototype;
              for (; i !== o; ) {
                for (var s in (t = a(o))) t[s].set && n.push(s);
                o = c(o);
              }
              return n;
            })(e).includes(t)
          ? (e[t] = n)
          : e.setAttribute(t, n));
  }
  var Yt = new Map();
  function Ht(e) {
    var t = e.type;
    return 'number' === t || 'range' === t;
  }
  function Xt(e) {
    return '' === e ? null : +e;
  }
  function Gt(e = !1) {
    const t = N,
      n = t.l.u;
    if (!n) return;
    let o = () => ft(t.s);
    if (e) {
      let e = 0,
        n = {};
      const i = re(() => {
        let o = !1;
        const i = t.s;
        for (const e in i) i[e] !== n[e] && ((n[e] = i[e]), (o = !0));
        return o && e++, e;
      });
      o = () => ut(i);
    }
    var i;
    n.b.length &&
      ((i = () => {
        Zt(t, o), f(n.b);
      }),
      ce(),
      ve(i)),
      fe(() => {
        const e = ct(() => n.m.map(p));
        return () => {
          for (const t of e) 'function' == typeof t && t();
        };
      }),
      n.a.length &&
        fe(() => {
          Zt(t, o), f(n.a);
        });
  }
  function Zt(e, t) {
    if (e.l.s) for (const t of e.l.s) ut(t);
    t();
  }
  function en(e) {
    var t, n;
    null === N && I(),
      Q && null !== N.l
        ? ((t = N), (n = t.l), n.u ?? (n.u = { a: [], b: [], m: [] })).m.push(e)
        : fe(() => {
            const t = ct(e);
            if ('function' == typeof t) return t;
          });
  }
  function tn(e) {
    null === N && I(), en(() => () => ct(e));
  }
  'undefined' != typeof window &&
    (
      (e = window.__svelte ?? (window.__svelte = {})).v ?? (e.v = new Set())
    ).add('5');
  const nn = 'Dub+';
  function on() {
    return new Date().toLocaleTimeString();
  }
  function sn(...e) {
    console.log(`[${on()}] ${nn}:`, ...e);
  }
  function rn(...e) {
    console.error(`[${on()}] ${nn}:`, ...e);
  }
  function an(e, t = window) {
    const n = e.split('.');
    let o = t;
    for (let e = 0; e < n.length; e++) {
      if (void 0 === o[n[e]]) return !1;
      o = o[n[e]];
    }
    return !0;
  }
  function ln(e, t = {}) {
    const n = Object.assign({}, { interval: 500, seconds: 5 }, t);
    return new Promise((t, o) => {
      let i = 0;
      const s = (1e3 * n.seconds) / n.interval,
        r = () => {
          i++,
            !(function (e, t = window) {
              const n = t;
              for (let t = 0; t < e.length; t++)
                if (!an(e[t], n)) return sn(e[t], 'is not found yet'), !1;
              return !0;
            })(e)
              ? i < s
                ? window.setTimeout(r, n.interval)
                : o()
              : t();
        };
      r();
    });
  }
  Q = !0;
  var un = Ut(
    '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="0 0 2078.496 2083.914" enable-background="new 0 0 2078.496 2083.914" xml:space="preserve"><rect x="769.659" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#660078" width="539.178" height="539.178"></rect><g><rect x="1308.837" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#EB008B" width="537.488" height="539.178"></rect><polygon fill="#EB008B" points="2045.015,1042.035 1845.324,1311.625 1845.324,772.446 \t"></polygon></g><g><rect x="232.172" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#EB008B" width="537.487" height="539.178"></rect><polygon fill="#EB008B" points="33.481,1042.034 233.172,772.445 233.172,1311.623 \t"></polygon></g><g><rect x="769.659" y="1311.624" fill-rule="evenodd" clip-rule="evenodd" fill="#6FCBDC" width="539.178" height="537.487"></rect><polygon fill="#6FCBDC" points="1039.248,2047.802 769.659,1848.111 1308.837,1848.111 \t"></polygon></g><g><rect x="769.659" y="234.958" fill-rule="evenodd" clip-rule="evenodd" fill="#6FCBDC" width="539.178" height="537.487"></rect><polygon fill="#6FCBDC" points="1039.249,35.268 1308.837,235.958 769.659,235.958 \t"></polygon></g></svg>',
  );
  function cn(e) {
    Qt(e, un());
  }
  const dn = {
      en: {
        'Modal.confirm': 'OK',
        'Modal.cancel': 'Cancel',
        'Modal.close': 'Close',
        'Modal.defaultValue': 'Default Value',
        'Error.modal.title': 'Dub+ Error',
        'Error.modal.loggedout':
          "You're not logged in. Please login to use Dub+.",
        'Error.unknown':
          'Something went wrong starting Dub+. Please refresh and try again.',
        'Loading.text': 'Waiting for QueUp...',
        'Eta.tooltip.notInQueue': "You're not in the queue",
        'Eta.tootltip': 'ETA: {{minutes}} minutes',
        'Snooze.tooltip': 'Mute for current song',
        'Snooze.tooltip.undo': 'Cancel mute for current song',
        'SnoozeVideo.tooltip': 'Hide video for current song',
        'SnoozeVideo.tooltip.undo': 'Cancel hiding video for current song',
        'Notifcation.permission.title': 'Desktop Notification',
        'Notification.permission.denied':
          "You have dismissed, or chosen to deny, the request to allow desktop notifications. If you change your mind, you will need to reset this in your browser's site settings.",
        'Notification.permission.notSupported':
          'Sorry this browser does not support desktop notifications.  Please update your browser to the lastest version',
        'Menu.title': 'Dub+ Options',
        'general.title': 'General',
        'user-interface.title': 'User Interface',
        'settings.title': 'Settings',
        'customize.title': 'Customize',
        'contact.title': 'Contact',
        'contact.bugs': 'Report bugs on Discord',
        'Switch.on': 'On',
        'Switch.off': 'Off',
        'MenuItem.edit': 'Edit',
        'autovote.label': 'Autovote',
        'autovote.description': 'Toggles auto upvoting for every song',
        'afk.label': 'AFK Auto-respond',
        'afk.description':
          'Toggle Away from Keyboard and customize AFK message.',
        'afk.modal.title': 'Custom AFK Message',
        'afk.modal.content':
          'Enter a custom "Away From Keyboard" [AFK] message here. Message will be prefixed with \'[AFK]\'',
        'afk.modal.placeholder': 'Be right back!',
        'auto-afk.label': 'Auto AFK',
        'auto-afk.description':
          'Automatically set yourself to AFK after a certain amount of time of inactivity',
        'auto-afk.modal.title': 'Auto AFK Timer',
        'auto-afk.modal.content':
          'Enter the amount of time, in minutes, before you are set to AFK.',
        'auto-afk.modal.validation':
          'Please enter a whole number greater than 0',
        'emotes.label': 'Emotes',
        'emotes.description':
          'Adds Twitch, Bttv, and FrankerFacez emotes in chat.',
        'autocomplete.label': 'Autocomplete Emoji',
        'autocomplete.description':
          'Toggle autocompleting emojis and emotes. Shows a preview box in the chat',
        'autocomplete.preview.a11y':
          'press up and down to navigate, press enter or tab to select, press esc to close',
        'autocomplete.preview.navigate': 'navigate',
        'autocomplete.preview.select': 'select',
        'autocomplete.preview.close': 'close',
        'custom-mentions.label': 'Custom Mentions',
        'custom-mentions.description':
          'Toggle using custom mentions to trigger sounds in chat',
        'custom-mentions.modal.title': 'Custom Mentions',
        'custom-mentions.modal.content':
          'Add your custom mention triggers here (separate by comma)',
        'custom-mentions.modal.placeholder':
          'separate, custom mentions, by, comma, :heart:',
        'chat-cleaner.label': 'Chat Cleaner',
        'chat-cleaner.description':
          'Help keep CPU stress down by setting a limit of how many chat messages to keep in the chat box, deleting older messages.',
        'chat-cleaner.modal.title': 'Chat Cleaner',
        'chat-cleaner.modal.content':
          'Please specify the number of most recent chat items that will remain in your chat history',
        'chat-cleaner.modal.validation':
          'Please enter a whole number greater than, or equal to, 1',
        'chat-cleaner.modal.placeholder': '500',
        'collapsible-images.label': 'Collapsible Images',
        'collapsible-images.description': 'Make images in the chat collapsible',
        'mention-notifications.label': 'Notification on Mentions',
        'mention-notifications.description':
          'Enable desktop notifications when a user mentions you in chat',
        'pm-notifications.label': 'Notification on PM',
        'pm-notifications.description':
          'Enable desktop notifications when a user receives a private message',
        'pm-notifications.notification.title': 'You have a new PM',
        'dj-notification.label': 'DJ Notification',
        'dj-notification.description':
          'Get a notification when you are coming up to be the DJ',
        'dj-notification.modal.title': 'DJ Notification',
        'dj-notification.modal.content':
          'Please specify the position in queue you want to be notified at. Use "0" to be notified when you start playing.',
        'dj-notification.notification.title': 'DJ Alert!',
        'dj-notification.notification.content':
          'You will be DJing shortly! Make sure your song is set!',
        'dj-notification.modal.validation':
          'Please enter a whole number greater than, or equal to, 0',
        'dubs-hover.label': 'Show Dubs on Hover',
        'dubs-hover.description':
          'Show who dubs a song when hovering over the dubs count',
        'dubs-hover.no-votes': 'No {{dubType}}s have been casted yet!',
        'dubs-hover.no-grabs': 'No one has grabbed this song yet!',
        'downdubs-in-chat.label': 'Downdubs in Chat (mods only)',
        'downdubs-in-chat.description':
          'Toggle showing downdubs in the chat box (mods only)',
        'downdubs-in-chat.chat-message':
          '@{{username}} has downdubbed your song {{song_name}}',
        'updubs-in-chat.label': 'Updubs in Chat',
        'updubs-in-chat.description': 'Toggle showing updubs in the chat box',
        'updubs-in-chat.chat-message':
          '@{{username}} has updubbed your song {{song_name}}',
        'grabs-in-chat.label': 'Grabs in Chat',
        'grabs-in-chat.description': 'Toggle showing grabs in the chat box',
        'grabs-in-chat.chat-message':
          '@{{username}} has grabbed your song {{song_name}}',
        'snow.label': 'Snow',
        'snow.description': 'Make it snow!',
        'rain.label': 'Rain',
        'rain.description': 'Make it rain!',
        'fullscreen.label': 'Fullscreen',
        'fullscreen.description': 'Toggle fullscreen video mode',
        'split-chat.label': 'Split Chat',
        'split-chat.description': 'Toggle Split Chat UI enhancement',
        'hide-chat.label': 'Hide Chat',
        'hide-chat.description': 'Toggles hiding the chat box',
        'hide-video.label': 'Hide Video',
        'hide-video.description': 'Toggles hiding the video box',
        'hide-avatars.label': 'Hide Avatars',
        'hide-avatars.description':
          'Toggle hiding user avatars in the chat box',
        'hide-bg.label': 'Hide Background',
        'hide-bg.description': 'Toggle hiding background image',
        'show-timestamps.label': 'Show Timestamps',
        'show-timestamps.description':
          'Toggle always showing chat message timestamps',
        'flip-interface.label': 'Flip Interface',
        'flip-interface.description': 'Swap the video and chat positions',
        'spacebar-mute.label': 'Spacebar Mute',
        'spacebar-mute.description':
          'Turn on/off the ability to mute current song with the spacebar',
        'warn-redirect.label': 'Warn on Navigation',
        'warn-redirect.description':
          'Warns you when accidentally clicking on a link that takes you out of QueUp',
        'community-theme.label': 'Community Theme',
        'community-theme.description': 'Toggle Community CSS theme',
        'custom-css.label': 'Custom CSS',
        'custom-css.description': 'Add your own custom CSS.',
        'custom-css.modal.title': 'Custom CSS',
        'custom-css.modal.content': 'Enter a url location for your custom css',
        'custom-css.modal.placeholder': 'https://example.com/example.css',
        'custom-css.modal.validation': 'Invalid URL',
        'custom-bg.label': 'Custom Background',
        'custom-bg.description': 'Add your own custom background.',
        'custom-bg.modal.title': 'Custom Background Image',
        'custom-bg.modal.content':
          'Enter the full URL of an image. We recommend using a .jpg file. Leave blank to remove the current background image',
        'custom-bg.modal.placeholder': 'https://example.com/big-image.jpg',
        'custom-notification-sound.label': 'Custom Notification Sound',
        'custom-notification-sound.description':
          'Change the notification sound to a custom one.',
        'custom-notification-sound.modal.title': 'Custom Notification Sound',
        'custom-notification-sound.modal.content':
          "Enter the full URL of a sound file. We recommend using an .mp3 file. Leave blank to go back to QueUp's default sound",
        'custom-notification-sound.modal.placeholder':
          'https://example.com/sweet-sound.mp3',
        'custom-notification-sound.modal.validation':
          "Can't play sound from this URL. Please enter a valid URL to an MP3 file.",
        'grab-response.label': 'Grab Response',
        'grab-response.description':
          'Sends a chat message when you grab a song',
        'grab-response.modal.title': 'Grab Response',
        'grab-response.modal.content':
          'Enter a message to send when you grab a song',
        'grab-response.modal.placeholder': 'Thanks for the song!',
      },
    },
    pn = W({ current: 'en' });
  function fn(e, t = {}) {
    return (function (e, t, n) {
      let o = dn[e][t];
      return (
        o || 'en' === e || (o = dn.en[t]),
        o
          ? (Object.keys(n).forEach((e) => {
              const t = new RegExp(`{{${e}}}`, 'g');
              o = o.replace(t, n[e]);
            }),
            o)
          : (rn(`No translation found for ${e}.${t}`), t)
      );
    })(pn.current, e, t);
  }
  var mn = Ct(
    '<div class="dubplus-waiting svelte-16mmbc"><div style="width: 26px; margin-right:5px"><!></div> <span style="flex: 1;"> </span></div>',
  );
  const vn = W({
    id: '',
    open: !1,
    title: 'Dub+',
    content: '',
    value: '',
    placeholder: '',
    defaultValue: '',
    maxlength: 999,
    validation: () => !0,
    onConfirm: () => !0,
    onCancel: () => {},
  });
  function hn(e) {
    (vn.open = e.open ?? !1),
      (vn.title = e.title || 'Dub+'),
      (vn.content = e.content || ''),
      (vn.value = e.value || ''),
      (vn.placeholder = e.placeholder || ''),
      (vn.defaultValue = e.defaultValue),
      (vn.maxlength = e.maxlength || 999),
      (vn.onConfirm = e.onConfirm),
      (vn.onCancel = e.onCancel),
      (vn.validation = e.validation || (() => !0));
  }
  var bn = Ct(
      '<div class="default svelte-ascx4b"><span class="default-label svelte-ascx4b"> </span> <span class="default-value svelte-ascx4b"> </span></div>',
    ),
    gn = Ct('<textarea class="svelte-ascx4b">\n      </textarea>'),
    wn = Ct('<p class="dp-modal--error svelte-ascx4b"> </p>'),
    yn = Ct(
      '<button class="dp-modal--cancel cancel svelte-ascx4b"> </button> <button class="dp-modal--confirm confirm svelte-ascx4b"> </button>',
      1,
    ),
    xn = Ct('<button class="dp-modal--cancel cancel svelte-ascx4b"> </button>'),
    kn = Ct(
      '<dialog id="dubplus-dialog" class="dp-modal svelte-ascx4b"><h1 class="svelte-ascx4b"> </h1> <div class="dp-modal--content content svelte-ascx4b"><p class="svelte-ascx4b"> </p> <!> <!> <!></div> <div class="dp-modal--buttons buttons svelte-ascx4b"><!></div></dialog>',
    );
  function En(e, t) {
    A(t, !0);
    let n,
      o = P('');
    en(() => {
      (n = document.getElementById('dubplus-dialog')),
        n.addEventListener('close', () => {
          vn.open = !1;
        });
    }),
      fe(() => {
        vn.open && n && !n.open && n.showModal();
      });
    var i = kn(),
      s = oe(i),
      r = oe(s),
      a = se(s, 2),
      l = oe(a),
      u = oe(l),
      c = se(l, 2),
      d = (e) => {
        var t = bn(),
          n = oe(t),
          o = oe(n),
          i = oe(se(n, 2));
        he(
          (e) => {
            Mt(o, `${e ?? ''}:`), Mt(i, vn.defaultValue);
          },
          [() => fn('Modal.defaultValue')],
        ),
          Qt(e, t);
      };
    Nt(c, (e) => {
      vn.defaultValue && e(d);
    });
    var p = se(c, 2),
      f = (e) => {
        var t = gn();
        he(() => {
          Wt(t, 'placeholder', vn.placeholder),
            Wt(t, 'maxlength', vn.maxlength < 999 ? vn.maxlength : 999);
        }),
          (function (e, t, n = t) {
            var o = j();
            wt(e, 'input', (i) => {
              var s = i ? e.defaultValue : e.value;
              if (((s = Ht(e) ? Xt(s) : s), n(s), o && s !== (s = t()))) {
                var r = e.selectionStart,
                  a = e.selectionEnd;
                (e.value = s ?? ''),
                  null !== a &&
                    ((e.selectionStart = r),
                    (e.selectionEnd = Math.min(a, e.value.length)));
              }
            }),
              null == ct(t) && e.value && n(Ht(e) ? Xt(e.value) : e.value),
              ve(() => {
                var n = t();
                (Ht(e) && n === Xt(e.value)) ||
                  (('date' !== e.type || n || e.value) &&
                    n !== e.value &&
                    (e.value = n ?? ''));
              });
          })(
            t,
            () => vn.value,
            (e) => (vn.value = e),
          ),
          Qt(e, t);
      };
    Nt(p, (e) => {
      (vn.placeholder || vn.value) && e(f);
    });
    var m = se(p, 2),
      v = (e) => {
        var t = wn(),
          n = oe(t);
        he(() => Mt(n, ut(o))), Qt(e, t);
      };
    Nt(m, (e) => {
      ut(o) && e(v);
    });
    var h = oe(se(a, 2)),
      b = (e) => {
        var t = yn(),
          i = ie(t);
        i.__click = () => {
          n.close(),
            (vn.open = !1),
            R(o, ''),
            'function' == typeof vn.onCancel && vn.onCancel();
        };
        var s = oe(i),
          r = se(i, 2);
        r.__click = () => {
          const e = vn.validation(vn.value);
          !0 === e
            ? (n.close(), (vn.open = !1), vn.onConfirm(vn.value), R(o, ''))
            : R(o, W(e));
        };
        var a = oe(r);
        he(
          (e, t) => {
            Mt(s, e), Mt(a, t);
          },
          [() => fn('Modal.cancel'), () => fn('Modal.confirm')],
        ),
          Qt(e, t);
      },
      g = (e) => {
        var t = xn();
        t.__click = () => {
          n.close(), (vn.open = !1), R(o, '');
        };
        var i = oe(t);
        he((e) => Mt(i, e), [() => fn('Modal.close')]), Qt(e, t);
      };
    Nt(h, (e) => {
      'function' == typeof vn.onConfirm ? e(b) : e(g, !1);
    }),
      he(() => {
        Mt(r, vn.title), Mt(u, vn.content);
      }),
      Qt(e, i),
      D();
  }
  Et(['click']);
  const _n = (e, { to: t, position: n = 'append' }) => {
    fe(() => {
      var o;
      e.id && (null == (o = document.getElementById(e.id)) || o.remove());
      const i = document.querySelector(t);
      if (!i) throw new Error(`teleport container not found: ${t}`);
      return (
        'append' === n ? i.appendChild(e) : i.prepend(e),
        () => {
          e.remove();
        }
      );
    });
  };
  function Sn() {
    return document.querySelector('#chat-txt-message');
  }
  function On(e = '') {
    return document.querySelectorAll(`ul.chat-main > li${e}`);
  }
  function Cn() {
    return document.querySelectorAll('.chat-main > li .autolink-image');
  }
  function Un() {
    return document.querySelector('.backstretch img');
  }
  function Ln() {
    return document.querySelector('.queue-position');
  }
  const zn = '.player_sharing';
  var Qn = () => {
      document
        .querySelector('.dubplus-menu')
        .classList.toggle('dubplus-menu-open');
    },
    Mn = Ct(
      '<button id="dubplus-menu-icon" type="button" aria-label="Dub+ menu" class="dubplus-icon svelte-9z7rrn"><!></button>',
    );
  Et(['click']);
  const $n = {
      'dubplus-autovote': 'autovote',
      'dubplus-afk': 'afk',
      'dubplus-emotes': 'emotes',
      'dubplus-autocomplete': 'autocomplete',
      custom_mentions: 'custom-mentions',
      'chat-cleaner': 'chat-cleaner',
      mention_notifications: 'mention-notifications',
      dubplus_pm_notifications: 'pm-notifications',
      dj_notification: 'dj-notification',
      'dubplus-dubs-hover': 'dubs-hover',
      'dubplus-downdubs': 'downdubs-in-chat',
      'dubplus-updubs': 'updubs-in-chat',
      'dubplus-grabschat': 'grabs-in-chat',
      'dubplus-snow': 'snow',
      'dubplus-rain': 'rain',
      'dubplus-fullscreen': 'fullscreen',
      'dubplus-split-chat': 'split-chat',
      'dubplus-video-only': 'hide-chat',
      'dubplus-chat-only': 'hide-video',
      'dubplus-hide-avatars': 'hide-avatars',
      'dubplus-hide-bg': 'hide-bg',
      'dubplus-show-timestamp': 'show-timestamps',
      'dubplus-spacebar-mute': 'spacebar-mute',
      warn_redirect: 'warn-redirect',
      'dubplus-comm-theme': 'community-theme',
      'dubplus-custom-css': 'custom-css',
      'dubplus-custom-bg': 'custom-bg',
      'dubplus-custom-notification-sound': 'custom-notification-sound',
    },
    In = {
      customAfkMessage: $n['dubplus-afk'],
      custom_mentions: $n.custom_mentions,
      chat_cleaner: $n['chat-cleaner'],
      dj_notification: $n.dj_notification,
      css: $n['dubplus-custom-css'],
      bg: $n['dubplus-custom-bg'],
      notificationSound: $n['dubplus-custom-notification-sound'],
      'dubplus-custom-notification-sound':
        $n['dubplus-custom-notification-sound'],
    };
  const Nn = 'dubplusUserSettingsV2';
  let Tn = W(
    Object.assign(
      {},
      {
        options: {},
        menu: {
          general: 'open',
          'user-interface': 'open',
          settings: 'open',
          customize: 'open',
          contact: 'open',
        },
        custom: {},
      },
      (function () {
        try {
          const e = JSON.parse(localStorage.getItem(Nn));
          if (e) return e;
        } catch (e) {
          sn('Error loading v2 settings, trying old settings. Error:', e);
        }
        try {
          const e = JSON.parse(localStorage.getItem('dubplusUserSettings'));
          if (e)
            return (function (e) {
              sn('Old Settings', e);
              const t = { options: {}, menu: { ...e.menu }, custom: {} };
              for (const [n, o] of Object.entries(e.options)) {
                const e = $n[n];
                try {
                  t.options[e] = o;
                } catch (t) {
                  rn('Error converting options', t.message, n, e, o);
                }
              }
              for (const [n, o] of Object.entries(e.custom)) {
                const e = In[n];
                try {
                  t.custom[e] = o;
                } catch (t) {
                  rn('Error converting custom', t.message, n, e, o);
                }
              }
              return t;
            })(e);
        } catch (e) {
          sn('Error loading old settings:', e);
        }
        return {};
      })(),
    ),
  );
  function An() {
    try {
      localStorage.setItem(Nn, JSON.stringify(Tn));
    } catch (e) {
      rn('Error saving user settings:', e);
    }
  }
  function Dn(e, t, n) {
    if ('option' === e) return (Tn.options[t] = n), void An();
    if ('custom' === e) return (Tn.custom[t] = n), void An();
    if ('menu' === e) return (Tn.menu[t] = n), void An();
    throw new Error(`Invalid section: "${e}"`);
  }
  var jn = Ct(
    '<button type="button" class="dubplus-menu-section-header svelte-31yg9a"><span></span> <p class="svelte-31yg9a"> </p></button>',
  );
  function qn(e, t) {
    A(t, !0);
    let n = P('down'),
      o = P(!0);
    fe(() => {
      'closed' === Tn.menu[t.settingsId]
        ? (R(n, 'right'), R(o, !1))
        : (R(n, 'down'), R(o, !0));
    });
    var i = jn();
    i.__click = function () {
      (Tn.menu[t.settingsId] =
        'closed' === Tn.menu[t.settingsId] ? 'open' : 'closed'),
        Dn('menu', t.settingsId, Tn.menu[t.settingsId]);
    };
    var s = oe(i),
      r = oe(se(s, 2));
    he(() => {
      Wt(i, 'id', `dubplus-menu-section-header-${t.settingsId}`),
        Wt(i, 'aria-expanded', ut(o)),
        Wt(i, 'aria-controls', `dubplus-menu-section-${t.settingsId}`),
        Bt(s, 0, `fa fa-angle-${ut(n) ?? ''}`, 'svelte-31yg9a'),
        Mt(r, t.name);
    }),
      Qt(e, i),
      D();
  }
  Et(['click']);
  var Fn = Ct(
    '<ul class="dubplus-menu-section svelte-19n0ph7" role="region"><!></ul>',
  );
  function Pn(e, t) {
    var n = Fn();
    !(function (e, t, ...n) {
      var o,
        i = e,
        s = d;
      be(() => {
        s !== (s = t()) &&
          (o && (xe(o), (o = null)), (o = ge(() => s(i, ...n))));
      }, _);
    })(oe(n), () => t.children),
      he(() => {
        Wt(n, 'id', `dubplus-menu-section-${t.settingsId}`),
          Wt(
            n,
            'aria-labelledby',
            `dubplus-menu-section-header-${t.settingsId}`,
          );
      }),
      Qt(e, n);
  }
  var Vn = Ct(
    '<li class="dubplus-menu-icon svelte-1oilhp7"><!> <a class="dubplus-menu-label svelte-1oilhp7" target="_blank"> </a></li>',
  );
  function Bn(e, t) {
    var n = Vn(),
      o = oe(n);
    Ft(
      o,
      () => t.icon,
      (e, t) => {
        t(e, {});
      },
    );
    var i = se(o, 2),
      s = oe(i);
    he(() => {
      Wt(i, 'href', t.href), Mt(s, t.text);
    }),
      Qt(e, n);
  }
  var Rn = Ut(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 0c53 0 96 43 96 96l0 3.6c0 15.7-12.7 28.4-28.4 28.4l-135.1 0c-15.7 0-28.4-12.7-28.4-28.4l0-3.6c0-53 43-96 96-96zM41.4 105.4c12.5-12.5 32.8-12.5 45.3 0l64 64c.7 .7 1.3 1.4 1.9 2.1c14.2-7.3 30.4-11.4 47.5-11.4l112 0c17.1 0 33.2 4.1 47.5 11.4c.6-.7 1.2-1.4 1.9-2.1l64-64c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-64 64c-.7 .7-1.4 1.3-2.1 1.9c6.2 12 10.1 25.3 11.1 39.5l64.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c0 24.6-5.5 47.8-15.4 68.6c2.2 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-63.1-63.1c-24.5 21.8-55.8 36.2-90.3 39.6L272 240c0-8.8-7.2-16-16-16s-16 7.2-16 16l0 239.2c-34.5-3.4-65.8-17.8-90.3-39.6L86.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l64-64c1.9-1.9 3.9-3.4 6-4.8C101.5 367.8 96 344.6 96 320l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64.3 0c1.1-14.1 5-27.5 11.1-39.5c-.7-.6-1.4-1.2-2.1-1.9l-64-64c-12.5-12.5-12.5-32.8 0-45.3z"></path></svg>',
  );
  function Jn(e) {
    Qt(e, Rn());
  }
  var Kn = Ut(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32zM305.9 166.4c20.6 0 37.3-16.7 37.3-37.3s-16.7-37.3-37.3-37.3c-18 0-33.1 12.8-36.6 29.8c-30.2 3.2-53.8 28.8-53.8 59.9l0 .2c-32.8 1.4-62.8 10.7-86.6 25.5c-8.8-6.8-19.9-10.9-32-10.9c-28.9 0-52.3 23.4-52.3 52.3c0 21 12.3 39 30.1 47.4c1.7 60.7 67.9 109.6 149.3 109.6s147.6-48.9 149.3-109.7c17.7-8.4 29.9-26.4 29.9-47.3c0-28.9-23.4-52.3-52.3-52.3c-12 0-23 4-31.9 10.8c-24-14.9-54.3-24.2-87.5-25.4l0-.1c0-22.2 16.5-40.7 37.9-43.7l0 0c3.9 16.5 18.7 28.7 36.3 28.7zM155 248.1c14.6 0 25.8 15.4 25 34.4s-11.8 25.9-26.5 25.9s-27.5-7.7-26.6-26.7s13.5-33.5 28.1-33.5zm166.4 33.5c.9 19-12 26.7-26.6 26.7s-25.6-6.9-26.5-25.9c-.9-19 10.3-34.4 25-34.4s27.3 14.6 28.1 33.5zm-42.1 49.6c-9 21.5-30.3 36.7-55.1 36.7s-46.1-15.1-55.1-36.7c-1.1-2.6 .7-5.4 3.4-5.7c16.1-1.6 33.5-2.5 51.7-2.5s35.6 .9 51.7 2.5c2.7 .3 4.5 3.1 3.4 5.7z"></path></svg>',
  );
  function Wn(e) {
    Qt(e, Kn());
  }
  var Yn = Ut(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64h98.2V334.2H109.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H255V480H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"></path></svg>',
  );
  function Hn(e) {
    Qt(e, Yn());
  }
  var Xn = Ut(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM351.3 199.3v0c0 86.7-66 186.6-186.6 186.6c-37.2 0-71.7-10.8-100.7-29.4c5.3 .6 10.4 .8 15.8 .8c30.7 0 58.9-10.4 81.4-28c-28.8-.6-53-19.5-61.3-45.5c10.1 1.5 19.2 1.5 29.6-1.2c-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3c-9-6-16.4-14.1-21.5-23.6s-7.8-20.2-7.7-31c0-12.2 3.2-23.4 8.9-33.1c32.3 39.8 80.8 65.8 135.2 68.6c-9.3-44.5 24-80.6 64-80.6c18.9 0 35.9 7.9 47.9 20.7c14.8-2.8 29-8.3 41.6-15.8c-4.9 15.2-15.2 28-28.8 36.1c13.2-1.4 26-5.1 37.8-10.2c-8.9 13.1-20.1 24.7-32.9 34c.2 2.8 .2 5.7 .2 8.5z"></path></svg>',
  );
  function Gn(e) {
    Qt(e, Xn());
  }
  var Zn = Ct('<!> <!> <!> <!>', 1),
    eo = Ct('<!> <!>', 1);
  function to(e, t, n) {
    t.disabled ||
      ('Enter' !== e.key && ' ' !== e.key) ||
      (e.preventDefault(), n());
  }
  function no(e, t, n) {
    t.disabled || n();
  }
  var oo = Ct(
    '<div role="switch" tabindex="0" class="svelte-1mny4ma"><span class="dubplus-switch svelte-1mny4ma"><span class="svelte-1mny4ma"></span></span> <span class="dubplus-switch-label svelte-1mny4ma"> </span></div>',
  );
  Et(['click', 'keydown']);
  var io = Ut(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"></path></svg>',
  );
  function so(e) {
    return (
      window.QueUp.helpers.isSiteAdmin(e) ||
      window.QueUp.room.users.getIfOwner(e) ||
      window.QueUp.room.users.getIfManager(e) ||
      window.QueUp.room.users.getIfMod(e)
    );
  }
  var ro = Ct(
      '<button type="button" class="svelte-1dzj03i"><!> <span class="sr-only"> </span></button>',
    ),
    ao = Ct('<li><!> <!></li>');
  function lo(e, t) {
    function n() {
      hn({
        title: fn(t.customize.title),
        content: fn(t.customize.content),
        placeholder: fn(t.customize.placeholder),
        defaultValue: t.customize.defaultValue
          ? fn(t.customize.defaultValue)
          : '',
        maxlength: t.customize.maxlength,
        value: Tn.custom[t.id] || '',
        validation: t.customize.validation,
        onConfirm: (e) => {
          Dn('custom', t.id, e),
            '' !== e.trim() ||
              t.customize.defaultValue ||
              (Dn('option', t.id, !1), t.turnOff()),
            'function' == typeof t.customize.onConfirm &&
              t.customize.onConfirm(e);
        },
        onCancel: () => {
          t.customize.defaultValue ||
            (void 0 !== Tn.custom[t.id] && '' !== Tn.custom[t.id]) ||
            (Dn('option', t.id, !1), t.turnOff()),
            'function' == typeof t.customize.onCancel && t.customize.onCancel();
        },
      }),
        (vn.open = !0);
    }
    A(t, !0),
      en(() => {
        if ((t.init && t.init(), Tn.options[t.id])) {
          (!t.modOnly || so(window.QueUp.session.id)) && t.turnOn(!0);
        }
      }),
      tn(() => {
        Tn.options[t.id] && t.turnOff();
      });
    var o = ao();
    let i;
    var s = oe(o);
    const r = re(() => !!t.modOnly && !so(window.QueUp.session.id)),
      a = re(() => fn(t.label));
    !(function (e, t) {
      function n() {
        (Tn.options[t.optionId] = !Tn.options[t.optionId]),
          t.onToggle(Tn.options[t.optionId]);
      }
      A(t, !0);
      var o = oo();
      (o.__click = [no, t, n]), (o.__keydown = [to, t, n]);
      var i = se(oe(o), 2),
        s = oe(i);
      he(() => {
        Wt(o, 'aria-disabled', t.disabled ? 'true' : 'false'),
          Wt(o, 'aria-checked', Tn.options[t.optionId] ? 'true' : 'false'),
          Mt(s, t.label);
      }),
        Qt(e, o),
        D();
    })(s, {
      get disabled() {
        return ut(r);
      },
      get label() {
        return ut(a);
      },
      onToggle: (e) => {
        !t.customize || !0 !== e || Tn.custom[t.id]
          ? (Dn('option', t.id, e), e ? t.turnOn() : t.turnOff())
          : n();
      },
      get optionId() {
        return t.id;
      },
    });
    var l = se(s, 2),
      u = (e) => {
        var t = ro();
        t.__click = n;
        var o = oe(t);
        !(function (e) {
          Qt(e, io());
        })(o);
        var i = oe(se(o, 2));
        he((e) => Mt(i, e), [() => fn('MenuItem.edit')]), Qt(e, t);
      };
    Nt(l, (e) => {
      t.customize && e(u);
    }),
      he(
        (e, n) => {
          Wt(o, 'id', `dubplus-${t.id}`),
            Wt(o, 'title', e),
            (i = Bt(o, 0, 'svelte-1dzj03i', null, i, n));
        },
        [
          () => fn(t.description),
          () => ({ disabled: !!t.modOnly && !so(window.QueUp.session.id) }),
        ],
      ),
      Qt(e, o),
      D();
  }
  Et(['click']);
  const uo = 'realtime:room_playlist-dub',
    co = 'realtime:room_playlist-queue-update-grabs',
    po = 'realtime:user-leave',
    fo = 'realtime:room_playlist-update',
    mo = 'realtime:chat-message',
    vo = 'realtime:new-message';
  function ho() {
    var e, t, n;
    null ==
      (n =
        null == (t = null == (e = window.QueUp) ? void 0 : e.playerController)
          ? void 0
          : t.voteUp) || n.click();
  }
  const bo = {
    id: 'autovote',
    label: 'autovote.label',
    description: 'autovote.description',
    category: 'general',
    turnOff() {
      window.QueUp.Events.unbind(fo, ho);
    },
    turnOn() {
      ho(), window.QueUp.Events.bind(fo, ho);
    },
  };
  function go(e, t) {
    const n = document.createElement('li');
    n.className = `dubplus-chat-system ${e}`;
    const o = document.createElement('div');
    (o.className = 'chatDelete'),
      (o.onclick = function (e) {
        e.target.parentElement.remove();
      });
    const i = document.createElement('span');
    (i.className = 'icon-close'), o.appendChild(i), n.appendChild(o);
    const s = document.createElement('div');
    (s.className = 'text'),
      (s.textContent = t),
      n.appendChild(s),
      document.querySelector('ul.chat-main').appendChild(n);
  }
  function wo(e) {
    const t = Sn(),
      n = t.value;
    (t.value = e), window.QueUp.room.chat.sendMessage(), n && (t.value = n);
  }
  let yo = !0;
  function xo(e) {
    if (!yo) return;
    const t = e.message,
      n = window.QueUp.session.get('username');
    if (
      t.includes(`@${n}`) &&
      window.QueUp.session.id !== e.user.userInfo.userid
    ) {
      let e = '';
      (e = Tn.custom.afk
        ? `[AFK] ${Tn.custom.afk}`
        : `[AFK] ${fn('afk.modal.placeholder')}`),
        wo(e),
        (yo = !1),
        setTimeout(() => {
          yo = !0;
        }, 3e4);
    }
  }
  const ko = {
    id: 'afk',
    label: 'afk.label',
    description: 'afk.description',
    category: 'general',
    turnOn() {
      window.QueUp.Events.bind(mo, xo);
    },
    turnOff() {
      window.QueUp.Events.unbind(mo, xo);
    },
    custom: {
      title: 'afk.modal.title',
      content: 'afk.modal.content',
      placeholder: 'afk.modal.placeholder',
      defaultValue: 'afk.modal.placeholder',
      maxlength: 255,
    },
  };
  const Eo = new (class {
    constructor() {
      this.db = null;
      const e = window.indexedDB.open('d2', 1),
        t = this;
      (e.onsuccess = function () {
        t.db = this.result;
      }),
        (e.onerror = function (e) {
          console.error('Dub+', 'indexedDB request error:', e);
        }),
        (e.onupgradeneeded = function () {
          (t.db = null),
            (this.result.createObjectStore('s', {
              keyPath: 'k',
            }).transaction.oncomplete = function () {
              t.db = this.db;
            });
        });
    }
    get(e) {
      return new Promise((t) => {
        this.db
          ? (this.db.transaction('s').objectStore('s').get(e).onsuccess =
              function () {
                var e;
                t((null == (e = this.result) ? void 0 : e.v) || null);
              })
          : setTimeout(() => {
              this.get(e).then(t);
            }, 100);
      });
    }
    set(e, t) {
      this.db
        .transaction('s', 'readwrite')
        .objectStore('s')
        .put({ k: e, v: t });
    }
  })();
  const _o = {
    emoji: {
      template: (e) => (
        (e = e.replace(/:/g, '')),
        `${window.emojify.defaultConfig.img_dir}/${encodeURI(e)}.png`
      ),
    },
    twitchJSONSLoaded: !1,
    bttvJSONSLoaded: !1,
    frankerfacezJSONLoaded: !1,
    twitch: {
      template: (e) => `//static-cdn.jtvnw.net/emoticons/v1/${e}/3.0`,
      emotesMap: new Map(),
    },
    bttv: {
      template: (e) => `//cdn.betterttv.net/emote/${e}/3x`,
      emotesMap: new Map(),
    },
    frankerFacez: {
      template: (e) => `//cdn.frankerfacez.com/emoticon/${e}/1`,
      emotesMap: new Map(),
    },
    shouldUpdateAPIs: (e) =>
      Eo.get(`${e}_api`).then((t) => {
        if (t)
          try {
            if (void 0 !== JSON.parse(t).error) return !0;
          } catch {
            return !0;
          }
        const n = Date.now(),
          o = parseInt(localStorage.getItem(`${e}_api_timestamp`));
        return isNaN(o) || n - o > 432e6 || !t;
      }),
    loadTwitchEmotes() {
      return this.twitchJSONSLoaded
        ? Promise.resolve()
        : this.shouldUpdateAPIs('twitch').then((e) =>
            e
              ? (sn('twitch', 'loading from api'),
                fetch(
                  '//cdn.jsdelivr.net/gh/Jiiks/BetterDiscordApp/data/emotedata_twitch_global.json',
                )
                  .then((e) => e.json())
                  .then((e) => {
                    const t = {};
                    for (const n in e.emotes)
                      t[n] || (t[n] = e.emotes[n].image_id);
                    localStorage.setItem(
                      'twitch_api_timestamp',
                      Date.now().toString(),
                    ),
                      Eo.set('twitch_api', JSON.stringify(t)),
                      _o.processTwitchEmotes(t);
                  })
                  .catch((e) => rn(e)))
              : Eo.get('twitch_api').then((e) => {
                  sn('twitch', 'loading from IndexedDB');
                  const t = JSON.parse(e);
                  _o.processTwitchEmotes(t);
                }),
          );
    },
    loadBTTVEmotes() {
      return this.bttvJSONSLoaded
        ? Promise.resolve()
        : this.shouldUpdateAPIs('bttv').then((e) =>
            e
              ? (sn('bttv', 'loading from api'),
                fetch('//api.betterttv.net/3/cached/emotes/global')
                  .then((e) => e.json())
                  .then((e) => {
                    const t = {};
                    e.forEach((e) => {
                      t[e.code] || (t[e.code] = e.id);
                    }),
                      localStorage.setItem(
                        'bttv_api_timestamp',
                        Date.now().toString(),
                      ),
                      Eo.set('bttv_api', JSON.stringify(t)),
                      _o.processBTTVEmotes(t);
                  })
                  .catch((e) => rn(e)))
              : Eo.get('bttv_api').then((e) => {
                  sn('bttv', 'loading from IndexedDB');
                  const t = JSON.parse(e);
                  _o.processBTTVEmotes(t);
                }),
          );
    },
    loadFrankerFacez() {
      return this.frankerfacezJSONLoaded
        ? Promise.resolve()
        : this.shouldUpdateAPIs('frankerfacez').then((e) =>
            e
              ? (sn('frankerfacez', 'loading from api'),
                fetch(
                  '//api.frankerfacez.com/v1/emoticons?per_page=200&private=off&sort=count-desc',
                )
                  .then((e) => e.json())
                  .then((e) => {
                    const t = e;
                    localStorage.setItem(
                      'frankerfacez_api_timestamp',
                      Date.now().toString(),
                    ),
                      Eo.set('frankerfacez_api', JSON.stringify(t)),
                      _o.processFrankerFacez(t);
                  })
                  .catch((e) => rn(e)))
              : Eo.get('frankerfacez_api').then((e) => {
                  sn('frankerfacez', 'loading from IndexedDB');
                  const t = JSON.parse(e);
                  _o.processFrankerFacez(t);
                }),
          );
    },
    processTwitchEmotes(e) {
      for (const t in e)
        if (Object.hasOwn(e, t)) {
          const n = t.toLowerCase();
          window.emojify.emojiNames.includes(n)
            ? this.twitch.emotesMap.set(`${n}_twitch`, e[t])
            : this.twitch.emotesMap.set(n, e[t]);
        }
      this.twitchJSONSLoaded = !0;
    },
    processBTTVEmotes(e) {
      for (const t in e)
        if (Object.hasOwn(e, t)) {
          const n = t.toLowerCase();
          if (t.includes(':')) continue;
          window.emojify.emojiNames.includes(n) || this.twitch.emotesMap.has(n)
            ? this.bttv.emotesMap.set(`${n}_bttv`, e[t])
            : this.bttv.emotesMap.set(n, e[t]);
        }
      this.bttvJSONSLoaded = !0;
    },
    processFrankerFacez(e) {
      for (const t of e.emoticons) {
        const e = t.name,
          n = e.toLowerCase();
        e.includes(':') ||
          (window.emojify.emojiNames.includes(n) ||
          this.twitch.emotesMap.has(n) ||
          this.bttv.emotesMap.has(n)
            ? this.frankerFacez.emotesMap.set(`${n}_ffz`, t.id)
            : this.frankerFacez.emotesMap.set(n, t.id));
      }
      this.frankerfacezJSONLoaded = !0;
    },
    findMatchingEmotes(e, t = !1) {
      const n = [];
      return (
        window.emojify.emojiNames.forEach((t) => {
          t.includes(e) &&
            n.push({
              src: this.emoji.template(t),
              text: t,
              alt: t,
              platform: 'emojify',
            });
        }),
        t
          ? (Array.from(this.twitch.emotesMap.keys()).forEach((t) => {
              t.includes(e) &&
                n.push({
                  src: this.twitch.template(this.twitch.emotesMap.get(t)),
                  text: t,
                  alt: t,
                  platform: 'twitch',
                });
            }),
            Array.from(this.bttv.emotesMap.keys()).forEach((t) => {
              t.includes(e) &&
                n.push({
                  src: this.bttv.template(this.bttv.emotesMap.get(t)),
                  text: t,
                  alt: t,
                  platform: 'bttv',
                });
            }),
            Array.from(this.frankerFacez.emotesMap.keys()).forEach((t) => {
              t.includes(e) &&
                n.push({
                  src: this.frankerFacez.template(
                    this.frankerFacez.emotesMap.get(t),
                  ),
                  text: t,
                  alt: t,
                  platform: 'ffz',
                });
            }),
            n)
          : n
      );
    },
  };
  function So(e, t, n, o, i) {
    const s = document.createElement('img');
    return (
      (s.className = `emoji ${e}-emote`),
      (s.title = n),
      (s.alt = n),
      (s.src = t),
      s
    );
  }
  function Oo(e) {
    e.querySelectorAll('.text p').forEach((e) => {
      if (
        !e.hasAttribute('dubplus-emotes-processed') &&
        (null == e ? void 0 : e.textContent)
      ) {
        const t = (function (e) {
          const t = /(:[^: ]+:)/g,
            n = e.split(t),
            o = [];
          return (
            n.forEach((e) => {
              if (e.match(t)) {
                const t = e.toLowerCase().replace(/^:/, '').replace(/:$/, '');
                if (_o.twitchJSONSLoaded && _o.twitch.emotesMap.has(t)) {
                  const e = _o.twitch.emotesMap.get(t),
                    n = So('twitch', _o.twitch.template(e), t);
                  o.push(n);
                } else if (_o.bttvJSONSLoaded && _o.bttv.emotesMap.has(t)) {
                  const e = _o.bttv.emotesMap.get(t),
                    n = So('bttv', _o.bttv.template(e), t);
                  o.push(n);
                } else if (
                  _o.frankerfacezJSONLoaded &&
                  _o.frankerFacez.emotesMap.has(t)
                ) {
                  const e = _o.frankerFacez.emotesMap.get(t),
                    n = So('frankerFacez', _o.frankerFacez.template(e), t);
                  o.push(n);
                } else o.push(document.createTextNode(e));
              } else o.push(document.createTextNode(e));
            }),
            o
          );
        })(e.textContent);
        e.replaceChildren(...t),
          e.setAttribute('dubplus-emotes-processed', 'true');
      }
    });
  }
  function Co(e) {
    if (null == e ? void 0 : e.chatid) {
      const t = document.querySelector(`.chat-id-${e.chatid}`);
      if (t) return void Oo(t);
    }
    const t = On();
    (null == t ? void 0 : t.length) && t.forEach(Oo);
  }
  const Uo = {
      id: 'emotes',
      label: 'emotes.label',
      description: 'emotes.description',
      category: 'general',
      turnOn() {
        _o.loadTwitchEmotes()
          .then(() => _o.loadBTTVEmotes())
          .then(() => _o.loadFrankerFacez())
          .then(() => {
            Co(), window.QueUp.Events.bind(mo, Co);
          });
      },
      turnOff() {
        window.QueUp.Events.unbind(mo, Co);
      },
    },
    Lo = W({ selectedIndex: 0, emojiList: [] });
  function zo() {
    (Lo.selectedIndex = 0), (Lo.emojiList = []);
  }
  function Qo(e) {
    return ' ' === e || '\n' === e;
  }
  const Mo = {
    up: 'ArrowUp',
    down: 'ArrowDown',
    enter: 'Enter',
    esc: 'Escape',
    tab: 'Tab',
  };
  let $o,
    Io = document.querySelector('#autocomplete-preview');
  function No(e, t) {
    const n = Lo.emojiList[t],
      [o, i] = (function (e, t) {
        let n = t > 0 ? t : 0;
        for (; n > 0 && ':' !== e[n]; ) n -= 1;
        let o = t;
        for (; !Qo(e[o]) && o < e.length; ) o += 1;
        return [n, o];
      })(e.value, e.selectionStart),
      s = e.value.substring(o, i);
    (e.value = e.value.replace(s, `:${n.text}:`)), zo();
  }
  function To(e) {
    const t = e.target,
      n = t.value,
      o = t.selectionStart;
    let i = '',
      s = o - 1;
    for (; !Qo(n[s]) && s >= 0; ) (i = n[s] + i), s--;
    let r = o;
    for (; !Qo(n[r]) && r < n.length; ) (i += n[r]), r++;
    if (i.startsWith(':') && i.length >= 2 && !i.endsWith(':')) {
      const e = i.substring(1).trim();
      !(function (e, t) {
        const n = ['emojify', 'twitch', 'bttv', 'ffz'];
        Lo.emojiList = e
          .filter(
            (e, t, n) =>
              t ===
              n.findIndex((t) => t.src === e.src && t.platform === e.platform),
          )
          .sort((e, o) => {
            const i = n.indexOf(e.platform),
              s = n.indexOf(o.platform);
            return i === s
              ? e.text.startsWith(t) && !o.text.startsWith(t)
                ? -1
                : !e.text.startsWith(t) && o.text.startsWith(t)
                  ? 1
                  : e.text.localeCompare(o.text)
              : i - s;
          });
      })(_o.findMatchingEmotes(e, Tn.options.emotes), e);
    } else zo();
  }
  function Ao(e) {
    Io = Io || document.querySelector('#autocomplete-preview');
    const t = Io.children.length > 0;
    if (!(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {
      if (e.key === Mo.up && t)
        return (
          e.preventDefault(),
          void (Lo.selectedIndex > 0
            ? Lo.selectedIndex--
            : (Lo.selectedIndex = Lo.emojiList.length - 1))
        );
      if (e.key === Mo.down && t)
        return (
          e.preventDefault(),
          void (Lo.selectedIndex < Lo.emojiList.length - 1
            ? Lo.selectedIndex++
            : (Lo.selectedIndex = 0))
        );
      if ((e.key !== Mo.enter && e.key !== Mo.tab) || !t)
        e.key !== Mo.enter || t || e.shiftKey
          ? e.key === Mo.esc && t
            ? zo()
            : To(e)
          : setTimeout(() => {
              window.QueUp.room.chat.resizeTextarea();
            }, 10);
      else {
        e.preventDefault(), e.stopImmediatePropagation();
        No(e.target, Lo.selectedIndex);
      }
    }
  }
  function Do(e) {
    Io = Io || document.querySelector('#autocomplete-preview');
    const t = 0 === Io.children.length,
      n = [Mo.tab, Mo.enter, Mo.up, Mo.down].includes(e.key),
      o = e.shiftKey || e.ctrlKey || e.altKey || e.metaKey;
    o || t || !n
      ? o || e.key !== Mo.enter
        ? o || window.QueUp.room.chat.ncKeyDown(e)
        : (window.QueUp.room.chat.sendMessage(),
          window.QueUp.room.chat.resizeTextarea())
      : e.preventDefault();
  }
  const jo = {
      id: 'autocomplete',
      label: 'autocomplete.label',
      category: 'general',
      description: 'autocomplete.description',
      turnOn() {
        (Io = document.querySelector('#autocomplete-preview')),
          zo(),
          ($o = window.QueUp.room.chat.events['keydown #chat-txt-message']);
        const e = { ...window.QueUp.room.chat.events };
        delete e['keydown #chat-txt-message'],
          window.QueUp.room.chat.delegateEvents(e);
        const t = Sn();
        t.addEventListener('keydown', Do),
          t.addEventListener('keyup', Ao),
          t.addEventListener('click', To);
      },
      turnOff() {
        zo(),
          (window.QueUp.room.chat.events['keydown #chat-txt-message'] = $o),
          window.QueUp.room.chat.delegateEvents(window.QueUp.room.chat.events);
        const e = Sn();
        e.removeEventListener('keydown', Do),
          e.removeEventListener('keyup', Ao),
          e.removeEventListener('click', To);
      },
    },
    qo = 'custom-mentions';
  function Fo(e) {
    const t = Tn.options[qo],
      n = Tn.custom[qo];
    if (t && window.QueUp.session.id !== e.user.userInfo.userid) {
      n.split(',').some(function (t) {
        return new RegExp(`\\b@?${t.trim()}\\b`, 'ig').test(e.message);
      }) && window.QueUp.room.chat.mentionChatSound.play();
    }
  }
  const Po = {
      id: qo,
      label: `${qo}.label`,
      description: `${qo}.description`,
      category: 'general',
      custom: {
        title: `${qo}.modal.title`,
        content: `${qo}.modal.content`,
        placeholder: `${qo}.modal.placeholder`,
        maxlength: 255,
      },
      turnOn() {
        window.QueUp.Events.bind(mo, Fo);
      },
      turnOff() {
        window.QueUp.Events.unbind(mo, Fo);
      },
    },
    Vo = 'chat-cleaner';
  function Bo(e) {
    const t = On();
    if (!(!(null == t ? void 0 : t.length) || isNaN(e) || t.length < e))
      for (let n = 0; n < t.length - e; n++) t[n].remove();
  }
  function Ro() {
    const e = Tn.custom[Vo];
    if ('number' == typeof e) Bo(e);
    else if ('string' == typeof e && '' !== e.trim()) {
      Bo(parseInt(e, 10));
    }
  }
  const Jo = {
      id: Vo,
      label: `${Vo}.label`,
      description: `${Vo}.description`,
      category: 'general',
      custom: {
        title: `${Vo}.modal.title`,
        content: `${Vo}.modal.content`,
        placeholder: `${Vo}.modal.placeholder`,
        maxlength: 5,
        validation(e) {
          if ('' === e.trim()) return !0;
          const t = parseInt(e, 10);
          return (
            !(e.includes('.') || isNaN(t) || t < 1) ||
            fn(`${Vo}.modal.validation`)
          );
        },
        onConfirm: (e) => {
          Tn.options[Vo] && Bo(parseInt(e, 10));
        },
      },
      turnOn() {
        Bo(void 0), window.QueUp.Events.bind(mo, Ro);
      },
      turnOff() {
        window.QueUp.Events.unbind(mo, Ro);
      },
    },
    Ko = W({ isActive: !0 }),
    Wo = [],
    Yo = [];
  function Ho(e) {
    Ko.isActive && (['blur', 'pagehide'].includes(e.type) || document.hidden)
      ? ((Ko.isActive = !1), Wo.forEach((e) => e()))
      : Ko.isActive ||
        (!['focus', 'pageshow'].includes(e.type) && document.hidden) ||
        ((Ko.isActive = !0), Yo.forEach((e) => e()));
  }
  function Xo() {
    hn({
      title: fn('Notifcation.permission.title'),
      content: fn('Notification.permission.denied'),
      open: !0,
    });
  }
  function Go() {
    return new Promise((e, t) =>
      'Notification' in window
        ? 'granted' !== Notification.permission
          ? 'denied' === Notification.permission
            ? (Xo(), void t())
            : void Notification.requestPermission().then(function (n) {
                if ('denied' === n || 'default' === n) return Xo(), void t();
                e();
              })
          : void e()
        : (hn({
            open: !0,
            title: fn('Notifcation.permission.title'),
            content: fn('Notification.permission.notSupported'),
          }),
          void t(!1)),
    );
  }
  function Zo(e) {
    const t = Object.assign(
      {},
      { content: '', ignoreActiveTab: !1, callback: null, wait: 1e4 },
      e,
    );
    if (Ko.isActive && !t.ignoreActiveTab) return;
    const n = {
        body: t.content,
        icon: 'https://cdn.jsdelivr.net/gh/DubPlus/DubPlus/images/dubplus.svg',
      },
      o = new Notification(t.title, n);
    (o.onclick = function () {
      window.focus(),
        'function' == typeof t.callback && t.callback(),
        o.close();
    }),
      setTimeout(o.close.bind(o), t.wait);
  }
  function ei(e) {
    const t = e.message;
    let n = ['@' + window.QueUp.session.get('username').toLowerCase()];
    Tn.options['custom-mentions'] &&
      Tn.custom['custom-mentions'] &&
      ((n = n
        .concat(Tn.custom['custom-mentions'].split(','))
        .map((e) => e.trim())),
      (n = n.concat(n.map((e) => '@' + e))));
    new RegExp(`\\b(${n.join('|')})\\b`, 'ig').test(t) &&
      !Ko.isActive &&
      window.QueUp.session.id !== e.user.userInfo.userid &&
      Zo({ title: `Message from ${e.user.username}`, content: t });
  }
  document.addEventListener('visibilitychange', Ho),
    (window.onpageshow = Ho),
    (window.onpagehide = Ho),
    (window.onfocus = Ho),
    (window.onblur = Ho),
    void 0 !== document.hidden &&
      Ho({ type: document.hidden ? 'blur' : 'focus' });
  const ti = {
    id: 'mention-notifications',
    label: 'mention-notifications.label',
    description: 'mention-notifications.description',
    category: 'general',
    turnOn() {
      Go()
        .then(() => {
          window.QueUp.Events.bind(mo, ei);
        })
        .catch(() => {
          Tn.options[this.id] = !1;
        });
    },
    turnOff() {
      window.QueUp.Events.unbind(mo, ei);
    },
  };
  function ni(e) {
    window.QueUp.session.id !== e.userid &&
      Zo({
        title: fn('pm-notifications.notification.title'),
        ignoreActiveTab: !0,
        callback: function () {
          const t = document.querySelector('.user-messages');
          null == t || t.click(),
            setTimeout(function () {
              const t =
                ((n = e.messageid),
                document.querySelector(`.message-item[data-messageid="${n}"]`));
              var n;
              null == t || t.click();
            }, 500);
        },
        wait: 1e4,
      });
  }
  const oi = {
      id: 'pm-notifications',
      label: 'pm-notifications.label',
      description: 'pm-notifications.description',
      category: 'general',
      turnOn() {
        Go()
          .then(() => {
            window.QueUp.Events.bind(vo, ni);
          })
          .catch(() => {
            Tn.options[this.id] = !1;
          });
      },
      turnOff() {
        window.QueUp.Events.unbind(vo, ni);
      },
    },
    ii = 'dj-notification';
  function si(e) {
    (e && e.startTime > 2) ||
      setTimeout(() => {
        var e, t, n, o;
        const i =
          null == (t = null == (e = Ln()) ? void 0 : e.textContent)
            ? void 0
            : t.trim();
        if (!i) return;
        const s = parseInt(i, 10);
        if (isNaN(s))
          return void rn(ii, 'Could not parse current position:', i);
        let r = parseInt(Tn.custom[ii], 10);
        isNaN(r) &&
          ((r = 2), sn(ii, 'Could not parse setting, defaulting to 2'));
        return ((null ==
        (o =
          null == (n = document.querySelector('.queue-total'))
            ? void 0
            : n.textContent)
          ? void 0
          : o.trim()) === i &&
          0 === r) ||
          s === r
          ? (Zo({
              title: fn(`${ii}.notification.title`),
              content: fn(`${ii}.notification.content`),
              ignoreActiveTab: !0,
              wait: 1e4,
            }),
            void window.QueUp.room.chat.mentionChatSound.play())
          : void 0;
      }, 1e3);
  }
  const ri = {
      id: ii,
      label: `${ii}.label`,
      description: `${ii}.description`,
      category: 'general',
      custom: {
        title: `${ii}.modal.title`,
        content: `${ii}.modal.content`,
        placeholder: '2',
        defaultValue: '2',
        maxlength: 3,
        validation(e) {
          if ('' === e.trim()) return !0;
          const t = parseInt(e, 10);
          return (
            !(e.includes('.') || isNaN(t) || t < 0) ||
            fn(`${ii}.modal.validation`)
          );
        },
        onConfirm: () => {
          Tn.options[ii] && si();
        },
      },
      turnOn() {
        Go().then(() => {
          si(), window.QueUp.Events.bind(fo, si);
        });
      },
      turnOff() {
        window.QueUp.Events.unbind(fo, si);
      },
    },
    ai = W({ upDubs: [], downDubs: [], grabs: [] });
  const li = window.location.hostname.includes('staging')
    ? 'https://staging-api.queup.dev'
    : 'https://api.queup.net';
  function ui(e) {
    return new Promise((t, n) => {
      var o, i, s;
      const r =
        null ==
        (s =
          null ==
          (i =
            null ==
            (o = window.QueUp.room.users.collection.findWhere({ userid: e }))
              ? void 0
              : o.attributes)
            ? void 0
            : i._user)
          ? void 0
          : s.username;
      r
        ? t(r)
        : fetch(
            (function (e) {
              return `${li}/user/${e}`;
            })(e),
          )
            .then((e) => e.json())
            .then((o) => {
              var i;
              if (
                null == (i = null == o ? void 0 : o.userinfo)
                  ? void 0
                  : i.username
              ) {
                const { username: e } = o.userinfo;
                t(e);
              } else n('Failed to get username from API for userid: ' + e);
            })
            .catch(n);
    });
  }
  function ci() {
    (ai.downDubs = []), (ai.upDubs = []), (ai.grabs = []);
    const e =
      ((t = window.QueUp.room.model.id),
      `${li}/room/${t}/playlist/active/dubs`);
    var t;
    fetch(e)
      .then((e) => e.json())
      .then((e) => {
        e.data.upDubs.forEach((e) => {
          ai.upDubs.find((t) => t.userid === e.userid) ||
            ui(e.userid)
              .then((t) => {
                ai.upDubs.push({ userid: e.userid, username: t });
              })
              .catch((e) => rn('Failed to get username for upDubs:', e));
        }),
          so(window.QueUp.session.id) &&
            e.data.downDubs.forEach((e) => {
              ai.downDubs.find((t) => t.userid === e.userid) ||
                ui(e.userid)
                  .then((t) => {
                    ai.downDubs.push({ userid: e.userid, username: t });
                  })
                  .catch((e) => rn('Failed to get username for downDubs', e));
            });
      })
      .catch((e) => rn('Failed to fetch dubs data from API.', e));
  }
  function di(e) {
    'updub' === e.dubtype
      ? (ai.upDubs.find((t) => t.userid === e.user._id) ||
          ai.upDubs.push({ userid: e.user._id, username: e.user.username }),
        (ai.downDubs = ai.downDubs.filter((t) => t.userid !== e.user._id)))
      : 'downdub' === e.dubtype &&
        so(window.QueUp.session.id) &&
        (ai.downDubs.find((t) => t.userid === e.user._id) ||
          ai.downDubs.push({ userid: e.user._id, username: e.user.username }),
        (ai.upDubs = ai.upDubs.filter((t) => t.userid !== e.user._id)));
    Date.now() - window.QueUp.room.player.activeSong.attributes.song.played <
      1e3 ||
      ((ai.upDubs.length !==
        window.QueUp.room.player.activeSong.attributes.song.updubs ||
        (so(window.QueUp.session.id) &&
          ai.downDubs.length !==
            window.QueUp.room.player.activeSong.attributes.song.downdubs)) &&
        ci());
  }
  function pi(e) {
    ai.grabs.find((t) => t.userid === e.user._id) ||
      ai.grabs.push({ userid: e.user._id, username: e.user.username });
  }
  function fi(e) {
    (ai.upDubs = ai.upDubs.filter((t) => t.userid !== e.user._id)),
      (ai.downDubs = ai.downDubs.filter((t) => t.userid !== e.user._id)),
      (ai.grabs = ai.grabs.filter((t) => t.userid !== e.user._id));
  }
  const mi = {
    id: 'dubs-hover',
    label: 'dubs-hover.label',
    description: 'dubs-hover.description',
    category: 'general',
    turnOn() {
      ci(),
        window.QueUp.Events.bind(uo, di),
        window.QueUp.Events.bind(co, pi),
        window.QueUp.Events.bind(po, fi),
        window.QueUp.Events.bind(fo, ci);
    },
    turnOff() {
      window.QueUp.Events.unbind(uo, di),
        window.QueUp.Events.unbind(co, pi),
        window.QueUp.Events.unbind(po, fi),
        window.QueUp.Events.unbind(fo, ci);
    },
  };
  function vi(e) {
    window.QueUp.session.id ===
      window.QueUp.room.player.activeSong.attributes.song.userid &&
      'downdub' === e.dubtype &&
      go(
        'dubplus-chat-system-downdub',
        fn('downdubs-in-chat.chat-message', {
          username: e.user.username,
          song_name:
            window.QueUp.room.player.activeSong.attributes.songInfo.name,
        }),
      );
  }
  const hi = {
    id: 'downdubs-in-chat',
    label: 'downdubs-in-chat.label',
    description: 'downdubs-in-chat.description',
    category: 'general',
    modOnly: !0,
    turnOn() {
      so(window.QueUp.session.id) && window.QueUp.Events.bind(uo, vi);
    },
    turnOff() {
      window.QueUp.Events.unbind(uo, vi);
    },
  };
  function bi(e) {
    window.QueUp.session.id ===
      window.QueUp.room.player.activeSong.attributes.song.userid &&
      'updub' === e.dubtype &&
      go(
        'dubplus-chat-system-updub',
        fn('updubs-in-chat.chat-message', {
          username: e.user.username,
          song_name:
            window.QueUp.room.player.activeSong.attributes.songInfo.name,
        }),
      );
  }
  const gi = {
    id: 'updubs-in-chat',
    label: 'updubs-in-chat.label',
    description: 'updubs-in-chat.description',
    category: 'general',
    turnOn() {
      window.QueUp.Events.bind(uo, bi);
    },
    turnOff() {
      window.QueUp.Events.unbind(uo, bi);
    },
  };
  function wi(e) {
    window.QueUp.session.id ===
      window.QueUp.room.player.activeSong.attributes.song.userid &&
      go(
        'dubplus-chat-system-grab',
        fn('grabs-in-chat.chat-message', {
          username: e.user.username,
          song_name:
            window.QueUp.room.player.activeSong.attributes.songInfo.name,
        }),
      );
  }
  const yi = {
      id: 'grabs-in-chat',
      label: 'grabs-in-chat.label',
      description: 'grabs-in-chat.description',
      category: 'general',
      turnOn() {
        window.QueUp.room.model.get('displayUserGrab') ||
          window.QueUp.Events.bind(
            'realtime:room_playlist-queue-update-grabs',
            wi,
          );
      },
      turnOff() {
        window.QueUp.room.model.get('displayUserGrab') ||
          window.QueUp.Events.unbind(
            'realtime:room_playlist-queue-update-grabs',
            wi,
          );
      },
    },
    xi = {
      id: 'snow',
      label: 'snow.label',
      description: 'snow.description',
      category: 'general',
      turnOn() {},
      turnOff() {},
    };
  class ki {
    constructor() {
      (this.particles = []),
        (this.drops = []),
        (this.numbase = 5),
        (this.numb = 2),
        (this.width = 0),
        (this.height = 0),
        (this.controls = {
          rain: 2,
          alpha: 1,
          color: 200,
          opacity: 1,
          saturation: 100,
          lightness: 50,
          back: 0,
          multi: !1,
          speed: 1,
        }),
        (this.requestAnimFrame = null),
        (this.canvas = null);
    }
    makeCanvas() {
      (this.canvas = document.createElement('canvas')),
        (this.canvas.id = 'dubPlusRainCanvas'),
        (this.canvas.style.position = 'fixed'),
        (this.canvas.style.top = '0px'),
        (this.canvas.style.left = '0px'),
        (this.canvas.style.zIndex = '100'),
        (this.canvas.style.pointerEvents = 'none'),
        document.body.prepend(this.canvas);
    }
    start() {
      this.makeCanvas(), this.startAnimation();
    }
    stop() {
      var e;
      this.stopAnimation(), null == (e = this.canvas) || e.remove();
    }
    onWindowResize() {
      (this.width = this.canvas.width = window.innerWidth),
        (this.height = this.canvas.height = window.innerHeight);
    }
    startAnimation() {
      const e = window.requestAnimationFrame;
      if (((this.requestAnimFrame = e ? e.bind(window) : null), !this.canvas))
        return;
      const t = this.canvas.getContext('2d');
      this.width,
        (this.height = 0),
        this.onWindowResize(),
        (window.onresize = this.onWindowResize.bind(this)),
        (this.particles = []),
        (this.drops = []),
        (this.numbase = 5),
        (this.numb = 2);
      let n = this;
      !(function e() {
        n.requestAnimFrame(e), n.update(), n.rendu(t);
      })();
    }
    buildRainParticle(e, t, n) {
      for (n || (n = this.numb); n--; )
        this.particles.push({
          speedX: 0.25 * Math.random(),
          speedY: 9 * Math.random() + 1,
          X: e,
          Y: t,
          alpha: 1,
          color:
            'hsla(' +
            this.controls.color +
            ',' +
            this.controls.saturation +
            '%, ' +
            this.controls.lightness +
            '%,' +
            this.controls.opacity +
            ')',
        });
    }
    explosion(e, t, n, o) {
      for (o || (o = this.numbase); o--; )
        this.drops.push({
          speedX: 4 * Math.random() - 2,
          speedY: -4 * Math.random(),
          X: e,
          Y: t,
          radius: 0.65 + Math.floor(1.6 * Math.random()),
          alpha: 1,
          color: n,
        });
    }
    rendu(e) {
      this.controls.multi && (this.controls.color = 360 * Math.random()),
        e.save(),
        e.clearRect(0, 0, this.width, this.height);
      const t = this.particles,
        n = this.drops,
        o = 2 * Math.PI;
      for (let n, o = 0; (n = t[o]); o++)
        (e.globalAlpha = n.alpha),
          (e.fillStyle = n.color),
          e.fillRect(n.X, n.Y, n.speedY / 4, n.speedY);
      for (let t, i = 0; (t = n[i]); i++)
        (e.globalAlpha = t.alpha),
          (e.fillStyle = t.color),
          e.beginPath(),
          e.arc(t.X, t.Y, t.radius, 0, o),
          e.fill();
      (e.strokeStyle = 'white'), (e.lineWidth = 2), e.restore();
    }
    update() {
      const e = this.particles,
        t = this.drops;
      for (let t, n = 0; (t = e[n]); n++)
        (t.X += t.speedX),
          (t.Y += t.speedY + 5),
          t.Y > this.height - 15 &&
            (e.splice(n--, 1), this.explosion(t.X, t.Y, t.color));
      for (let e, n = 0; (e = t[n]); n++)
        (e.X += e.speedX),
          (e.Y += e.speedY),
          (e.radius -= 0.075),
          e.alpha > 0 ? (e.alpha -= 0.005) : (e.alpha = 0),
          e.radius < 0 && t.splice(n--, 1);
      let n = this.controls.rain;
      for (; n--; )
        this.buildRainParticle(Math.floor(Math.random() * this.width), -15);
    }
    stopAnimation() {
      this.requestAnimFrame = function () {};
    }
  }
  const Ei = {
    id: 'rain',
    label: 'rain.label',
    description: 'rain.description',
    category: 'general',
    turnOn() {
      (this.rainEffect = new ki()), this.rainEffect.start();
    },
    turnOff() {
      this.rainEffect.stop(), delete this.rainEffect;
    },
  };
  var _i = Ut(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 344v112a23.9 23.9 0 0 1 -24 24H312c-21.4 0-32.1-25.9-17-41l36.2-36.2L224 295.6 116.8 402.9 153 439c15.1 15.1 4.4 41-17 41H24a23.9 23.9 0 0 1 -24-24V344c0-21.4 25.9-32.1 41-17l36.2 36.2L184.5 256 77.2 148.7 41 185c-15.1 15.1-41 4.4-41-17V56a23.9 23.9 0 0 1 24-24h112c21.4 0 32.1 25.9 17 41l-36.2 36.2L224 216.4l107.2-107.3L295 73c-15.1-15.1-4.4-41 17-41h112a23.9 23.9 0 0 1 24 24v112c0 21.4-25.9 32.1-41 17l-36.2-36.2L263.5 256l107.3 107.3L407 327.1c15.1-15.2 41-4.5 41 16.9z"></path></svg>',
  );
  const Si = {
      id: 'fullscreen',
      label: 'fullscreen.label',
      description: 'fullscreen.description',
      category: 'user-interface',
      altIcon: function (e) {
        Qt(e, _i());
      },
      onClick() {
        const e = document.querySelector('.player_container iframe');
        e
          ? e.requestFullscreen
            ? e.requestFullscreen()
            : e.msRequestFullscreen
              ? e.msRequestFullscreen()
              : e.mozRequestFullScreen
                ? e.mozRequestFullScreen()
                : e.webkitRequestFullscreen && e.webkitRequestFullscreen()
          : sn('Fullscreen: No video element found');
      },
    },
    Oi = {
      id: 'split-chat',
      label: 'split-chat.label',
      description: 'split-chat.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-split-chat');
      },
      turnOff() {
        document.body.classList.remove('dubplus-split-chat');
      },
    },
    Ci = {
      id: 'hide-chat',
      label: 'hide-chat.label',
      description: 'hide-chat.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-video-only');
      },
      turnOff() {
        document.body.classList.remove('dubplus-video-only');
      },
    },
    Ui = {
      id: 'hide-video',
      label: 'hide-video.label',
      description: 'hide-video.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-chat-only');
      },
      turnOff() {
        document.body.classList.remove('dubplus-chat-only');
      },
    },
    Li = {
      id: 'hide-avatars',
      label: 'hide-avatars.label',
      description: 'hide-avatars.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-hide-avatars');
      },
      turnOff() {
        document.body.classList.remove('dubplus-hide-avatars');
      },
    },
    zi = {
      id: 'hide-bg',
      label: 'hide-bg.label',
      description: 'hide-bg.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-hide-bg');
      },
      turnOff() {
        document.body.classList.remove('dubplus-hide-bg');
      },
    },
    Qi = {
      id: 'show-timestamps',
      label: 'show-timestamps.label',
      description: 'show-timestamps.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-show-timestamp');
      },
      turnOff() {
        document.body.classList.remove('dubplus-show-timestamp');
      },
    };
  function Mi(e) {
    const t = e.target.tagName.toLowerCase();
    ' ' === e.key &&
      'input' !== t &&
      'textarea' !== t &&
      window.QueUp.room.player.mutePlayer();
  }
  const $i = {
    id: 'spacebar-mute',
    label: 'spacebar-mute.label',
    description: 'spacebar-mute.description',
    category: 'settings',
    turnOn() {
      document.addEventListener('keypress', Mi);
    },
    turnOff() {
      document.removeEventListener('keypress', Mi);
    },
  };
  function Ii(e) {
    let t = 'You are leaving';
    return (e.returnValue = t), t;
  }
  const Ni = {
    id: 'warn-redirect',
    label: 'warn-redirect.label',
    description: 'warn-redirect.description',
    category: 'settings',
    turnOn() {
      window.addEventListener('beforeunload', Ii);
    },
    turnOff() {
      window.removeEventListener('beforeunload', Ii);
    },
  };
  function Ti(e, t) {
    var n;
    return (
      null == (n = document.querySelector(`style#${t}`)) || n.remove(),
      fetch(e)
        .then((e) => e.text())
        .then((e) => {
          const n = document.createElement('style');
          (n.id = t), (n.textContent = e), document.head.appendChild(n);
        })
    );
  }
  const Ai = 'dubplus-community-css',
    Di = {
      id: 'community-theme',
      label: 'community-theme.label',
      description: 'community-theme.description',
      category: 'customize',
      turnOn() {
        const e = window.QueUp.room.model.get('roomUrl');
        fetch(`https://api.queup.net/room/${e}`)
          .then((e) => e.json())
          .then((e) => {
            const t = e.data.description,
              n = new RegExp(
                /(@dub(x|plus|\+)=)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/,
                'i',
              );
            let o = null;
            if (
              (t.replace(n, function (e, t, n, i) {
                o = i;
              }),
              o)
            )
              return sn('loading community css theme from:', o), Ti(o, Ai);
            sn('No community CSS theme found');
          })
          .catch((e) => {
            rn('Community CSS: Failed to load room info', e);
          });
      },
      turnOff() {
        var e;
        null == (e = document.getElementById(Ai)) || e.remove();
      },
    },
    ji = 'dubplus-user-custom-css',
    qi = {
      id: 'custom-css',
      label: 'custom-css.label',
      description: 'custom-css.description',
      category: 'customize',
      custom: {
        title: 'custom-css.modal.title',
        content: 'custom-css.modal.content',
        placeholder: 'custom-css.modal.placeholder',
        maxlength: 500,
        validation: (e) =>
          '' === e.trim() ||
          !!/^http.+\.css$/.test(e) ||
          fn('custom-css.modal.validation'),
        onConfirm(e) {
          var t;
          if (!e)
            return (
              null == (t = document.getElementById(ji)) || t.remove(),
              void (Tn.options[qi.id] = !1)
            );
          Ti(e, ji).catch((e) => {
            rn('Error loading custom css file:', e);
          });
        },
      },
      turnOn() {
        Tn.custom[this.id] &&
          Ti(Tn.custom[this.id], ji).catch((e) => {
            rn('Error loading custom css file:', e);
          });
      },
      turnOff() {
        var e;
        null == (e = document.getElementById(ji)) || e.remove();
      },
    };
  function Fi(e) {
    const t = Un();
    t && (t.setAttribute('data-original', t.src), (t.src = e));
  }
  function Pi() {
    const e = Un();
    e &&
      e.hasAttribute('data-original') &&
      ((e.src = e.getAttribute('data-original')), e.removeAttribute);
  }
  const Vi = {
    id: 'custom-bg',
    label: 'custom-bg.label',
    description: 'custom-bg.description',
    category: 'customize',
    custom: {
      title: 'custom-bg.modal.title',
      content: 'custom-bg.modal.content',
      placeholder: 'custom-bg.modal.placeholder',
      maxlength: 500,
      validation: (e) =>
        '' === e.trim() ||
        !!e.startsWith('http') ||
        fn('custom-bg.modal.validation'),
      onConfirm(e) {
        Pi(), e && Fi(e);
      },
    },
    turnOn() {
      Pi();
      const e = Tn.custom[this.id];
      e && Fi(e);
    },
    turnOff() {
      Pi();
    },
  };
  let Bi;
  const Ri = {
      id: 'custom-notification-sound',
      label: 'custom-notification-sound.label',
      description: 'custom-notification-sound.description',
      category: 'customize',
      custom: {
        title: 'custom-notification-sound.modal.title',
        content: 'custom-notification-sound.modal.content',
        placeholder: 'custom-notification-sound.modal.placeholder',
        maxlength: 500,
        validation: (e) =>
          '' === e.trim() ||
          !!window.soundManager.canPlayURL(e) ||
          fn('custom-notification-sound.modal.validation'),
        onConfirm(e) {
          e
            ? (window.QueUp.room.chat.mentionChatSound.url = e)
            : ((window.QueUp.room.chat.mentionChatSound.url = Bi),
              (Tn.options[Ri.id] = !1));
        },
      },
      turnOn() {
        (Bi = window.QueUp.room.chat.mentionChatSound.url),
          Tn.custom[this.id] &&
            (window.QueUp.room.chat.mentionChatSound.url = Tn.custom[this.id]);
      },
      turnOff() {
        window.QueUp.room.chat.mentionChatSound.url = Bi;
      },
    },
    Ji = {
      id: 'flip-interface',
      label: 'flip-interface.label',
      description: 'flip-interface.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-flip-interface');
      },
      turnOff() {
        document.body.classList.remove('dubplus-flip-interface');
      },
    };
  let Ki = null;
  function Wi() {
    if (Tn.options.afk)
      sn('auto-afk timer expired, but afk is already enabled');
    else {
      sn('auto-afk timer expired, enabling afk');
      const e = document.querySelector('#dubplus-afk [role=switch]');
      null == e || e.click();
    }
  }
  function Yi() {
    let e = parseInt(Tn.custom['auto-afk'], 10);
    isNaN(e) && (e = 30),
      sn('auto-afk onBlur: starting timer for ', e, 'minutes'),
      (Ki = setTimeout(Wi, 60 * e * 1e3));
  }
  function Hi() {
    Ki
      ? (sn('auto-afk onFocus: clearing timer'), clearTimeout(Ki), (Ki = null))
      : sn('auto-afk onFocus: no timer to clear');
  }
  const Xi = {
    id: 'auto-afk',
    label: 'auto-afk.label',
    description: 'auto-afk.description',
    category: 'general',
    turnOn() {
      var e, t;
      (t = Yi), (e = Hi) && Yo.push(e), t && Wo.push(t);
    },
    turnOff() {
      var e, t;
      (t = Yi),
        (e = Hi) && Yo.splice(Yo.indexOf(e), 1),
        t && Wo.splice(Wo.indexOf(t), 1),
        Hi();
    },
    custom: {
      title: 'auto-afk.modal.title',
      content: 'auto-afk.modal.content',
      placeholder: '30',
      defaultValue: '30',
      maxlength: 10,
      validation(e) {
        if ('' === e.trim()) return !0;
        const t = parseInt(e, 10);
        return (
          !(e.includes('.') || isNaN(t) || t < 1) ||
          fn('auto-afk.modal.validation')
        );
      },
    },
  };
  function Gi(e) {
    if (e.user._id === window.QueUp.session.id) {
      const e = Tn.custom['grab-response'];
      e && wo(e);
    }
  }
  const Zi = {
    id: 'grab-response',
    label: 'grab-response.label',
    description: 'grab-response.description',
    category: 'general',
    turnOn() {
      window.QueUp.Events.bind(co, Gi);
    },
    turnOff() {
      window.QueUp.Events.unbind(co, Gi);
    },
    custom: {
      title: 'grab-response.modal.title',
      content: 'grab-response.modal.content',
      placeholder: 'grab-response.modal.placeholder',
      maxlength: 255,
    },
  };
  function es(e) {
    const t = e.target.parentElement,
      n = e.target.previousElementSibling;
    t.classList.contains('dubplus-collapsed')
      ? (t.classList.remove('dubplus-collapsed'),
        (e.target.title = 'collapse image'),
        n.setAttribute('aria-hidden', 'false'),
        e.target.setAttribute('aria-expanded', 'true'))
      : (t.classList.add('dubplus-collapsed'),
        (e.target.title = 'expand image'),
        n.setAttribute('aria-hidden', 'true'),
        e.target.setAttribute('aria-expanded', 'false'));
  }
  function ts(e) {
    if (e && !e.parentElement.classList.contains('dubplus-collapsible-image')) {
      e.parentElement.classList.add('dubplus-collapsible-image');
      const t = document.createElement('button');
      (t.type = 'button'),
        (t.title = 'collapse image'),
        t.classList.add('dubplus-collapser'),
        t.addEventListener('click', es),
        e.parentElement.appendChild(t);
      const n = document.createElement('p');
      n.classList.add('dubplus-collapser-message'),
        (n.textContent = 'image collapsed'),
        e.parentElement.appendChild(n);
    }
  }
  function ns(e) {
    if (null == e ? void 0 : e.chatid) {
      const t = document.querySelector(`.chat-id-${e.chatid}`);
      if (t) return void ts(t.querySelector('.autolink-image'));
    }
    Cn().forEach(ts);
  }
  const os = [
      bo,
      ko,
      Xi,
      Uo,
      jo,
      Po,
      Jo,
      {
        id: 'collapsible-images',
        label: 'collapsible-images.label',
        description: 'collapsible-images.description',
        category: 'general',
        turnOn(e) {
          e || ns(),
            window.QueUp.Events.bind(mo, ns),
            setTimeout(() => {
              ns();
            }, 1e3);
        },
        turnOff() {
          window.QueUp.Events.unbind(mo, ns),
            document
              .querySelectorAll('.dubplus-collapsible-image')
              .forEach((e) => {
                e.classList.remove('dubplus-collapsible-image'),
                  e.classList.remove('dubplus-collapsed');
              }),
            document.querySelectorAll('.dubplus-collapser').forEach((e) => {
              e.removeEventListener('click', es), e.remove();
            }),
            Cn().forEach((e) => e.removeAttribute('aria-hidden')),
            document
              .querySelectorAll('.dubplus-collapser-message')
              .forEach((e) => e.remove());
        },
      },
      ti,
      oi,
      ri,
      mi,
      hi,
      gi,
      yi,
      Zi,
      xi,
      Ei,
    ],
    is = [Si, Oi, Ci, Ui, Li, zi, Qi, Ji],
    ss = [$i, Ni],
    rs = [Di, qi, Vi, Ri];
  var as = Ct('<!> <!>', 1);
  var ls = Ct(
    '<button id="dubplus-eta" type="button" class="icon-history eta_tooltip_t dubplus-btn-player"></button>',
  );
  function us(e, t) {
    A(t, !0);
    let n = P('ETA');
    function o() {
      var e, t;
      const n = null == (e = Ln()) ? void 0 : e.textContent;
      if (!n) return fn('Eta.tooltip.notInQueue');
      const o = parseInt(
          null == (t = document.querySelector('div.currentTime span.min'))
            ? void 0
            : t.textContent,
        ),
        i = 4 * parseInt(n) - 4 + o;
      return i >= 0
        ? fn('Eta.tootltip', { minutes: i })
        : fn('Eta.tooltip.notInQueue');
    }
    var i = ls();
    Pt(
      i,
      (e, t) => (null == _n ? void 0 : _n(e, t)),
      () => ({ to: zn }),
    ),
      he(() => {
        Wt(i, 'aria-label', ut(n)), Wt(i, 'data-dp-tooltip', ut(n));
      }),
      kt('mouseenter', i, () => {
        R(n, W(o()));
      }),
      Qt(e, i),
      D();
  }
  var cs = Ct(
    '<button id="dubplus-snooze" type="button" class="icon-mute snooze_btn dubplus-btn-player svelte-1va87zs"><span class="svelte-1va87zs">1</span></button>',
  );
  Et(['click']);
  var ds = Ct(
      '<li><div class="ac-image svelte-198qtio"><img class="svelte-198qtio"></div></li>',
    ),
    ps = Ct(
      '<div><div class="ac-header svelte-198qtio"><span class="sr-only"> </span> <div class="tip-container" aria-hidden="true"><span class="tip-navigate"><key class="icon-upvote"></key> &amp; <key class="icon-downvote"></key> </span> <span class="tip-complete"><key>TAB</key> or <key>ENTER</key> </span> <span class="tip-close"><key>ESC</key> </span></div></div> <ul id="autocomplete-preview" class="svelte-198qtio"></ul> <span class="ac-text-preview svelte-198qtio"> </span></div>',
    );
  function fs(e, t) {
    A(t, !0),
      fe(() => {
        if (Lo.emojiList.length > 0 && 'number' == typeof Lo.selectedIndex) {
          const e = document.querySelector('.preview-item.selected');
          e &&
            e.scrollIntoView({
              block: 'nearest',
              inline: 'nearest',
              behavior: 'smooth',
            });
        }
      });
    var n = ps();
    let o;
    var i = oe(n),
      s = oe(i),
      r = oe(s),
      a = oe(se(s, 2)),
      l = se(oe(a), 3),
      u = se(a, 2),
      c = se(oe(u), 3),
      d = se(u, 2),
      p = se(oe(d)),
      f = se(i, 2);
    Tt(
      f,
      23,
      () => Lo.emojiList,
      ({ src: e, text: t, platform: n, alt: o }) => e + n,
      (e, t, n) => {
        let o = () => ut(t).alt;
        var i = ds();
        let s;
        i.__click = () =>
          (function (e) {
            const t = Sn();
            No(t, e), t.focus();
          })(ut(n));
        var r = oe(i),
          a = oe(r);
        he(
          (e) => {
            (s = Bt(
              i,
              0,
              `preview-item ${ut(t).platform}-previews`,
              'svelte-198qtio',
              s,
              e,
            )),
              Wt(i, 'title', ut(t).text),
              Wt(a, 'src', ut(t).src),
              Wt(a, 'alt', o()),
              Wt(a, 'title', o());
          },
          [() => ({ selected: ut(n) === Lo.selectedIndex })],
        ),
          Qt(e, i);
      },
    );
    var m = oe(se(f, 2));
    Pt(
      n,
      (e, t) => (null == _n ? void 0 : _n(e, t)),
      () => ({ to: '.pusher-chat-widget-input', position: 'prepend' }),
    ),
      he(
        (e, t, i, s, a) => {
          var u;
          (o = Bt(n, 0, 'ac-preview-container svelte-198qtio', null, o, e)),
            Mt(r, t),
            Mt(l, ` (${i ?? ''})`),
            Mt(c, ` (${s ?? ''})`),
            Mt(p, ` (${a ?? ''})`),
            Mt(
              m,
              null == (u = Lo.emojiList[Lo.selectedIndex]) ? void 0 : u.text,
            );
        },
        [
          () => ({ 'ac-show': Lo.emojiList.length > 0 }),
          () => fn('autocomplete.preview.a11y'),
          () => fn('autocomplete.preview.navigate'),
          () => fn('autocomplete.preview.select'),
          () => fn('autocomplete.preview.close'),
        ],
      ),
      Qt(e, n),
      D();
  }
  Et(['click']);
  var ms = (e, t, n) => t(ut(n).username),
    vs = Ct(
      '<li class="preview-dubinfo-item users-previews svelte-ujv5bp"><div class="dubinfo-image svelte-ujv5bp"><img alt="User Avatar" class="svelte-ujv5bp"></div> <button type="button" class="dubinfo-text svelte-ujv5bp"> </button></li>',
    ),
    hs = Ct('<li><!></li>'),
    bs = Ct('<div role="none"><ul id="dubinfo-preview"><!></ul></div>');
  function gs(e, t) {
    A(t, !0);
    let n = re(() => {
        return 'updub' === (e = t.dubType)
          ? ai.upDubs
          : 'downdub' === e
            ? ai.downDubs
            : 'grab' === e
              ? ai.grabs
              : [];
        var e;
      }),
      o = P(0),
      i = P(0),
      s = P('none');
    function r() {
      var e, n;
      return 'updub' === t.dubType
        ? null == (e = document.querySelector('.dubup'))
          ? void 0
          : e.parentElement
        : 'downdub' === t.dubType
          ? null == (n = document.querySelector('.dubdown'))
            ? void 0
            : n.parentElement
          : 'grab' === t.dubType
            ? document.querySelector('.add-to-playlist')
            : null;
    }
    function a() {
      const e = r();
      if (e) {
        const t = e.getBoundingClientRect();
        R(o, window.innerWidth - t.right), R(i, t.height - 2), R(s, 'block');
      } else rn(`Could not find hover target for ${t.dubType} in onHover`);
    }
    function l(e) {
      (e.relatedTarget && e.relatedTarget.closest('.dubplus-dubs-container')) ||
        R(s, 'none');
    }
    function u(e) {
      const t = Sn();
      (t.value = `${t.value}@${e} `.trimStart()), t.focus();
    }
    en(() => {
      const e = r();
      e
        ? (e.addEventListener('mouseenter', a),
          e.addEventListener('mouseleave', l))
        : rn(`Could not find hover target for ${t.dubType} in onMount`);
    }),
      tn(() => {
        const e = r();
        e
          ? (e.removeEventListener('mouseenter', a),
            e.removeEventListener('mouseleave', l))
          : rn(`Could not find hover target for ${t.dubType} in onDestroy`);
      });
    var c = bs(),
      d = oe(c);
    let p;
    var f = oe(d),
      m = (e) => {
        var t = zt();
        Tt(
          ie(t),
          17,
          () => ut(n),
          (e) => e.userid,
          (e, t) => {
            var n = vs(),
              o = oe(n),
              i = oe(o),
              s = se(o, 2);
            s.__click = [ms, u, t];
            var r = oe(s);
            he(
              (e) => {
                Wt(i, 'src', e), Mt(r, `@${ut(t).username ?? ''}`);
              },
              [
                () => {
                  return (e = ut(t).userid), `${li}/user/${e}/image`;
                  var e;
                },
              ],
            ),
              Qt(e, n);
          },
        ),
          Qt(e, t);
      },
      v = (e) => {
        var n = hs(),
          o = oe(n),
          i = (e) => {
            var n = Lt();
            he(
              (e) => Mt(n, e),
              [() => fn('dubs-hover.no-votes', { dubType: t.dubType })],
            ),
              Qt(e, n);
          },
          s = (e) => {
            var n = Lt();
            he(
              (e) => Mt(n, e),
              [() => fn('dubs-hover.no-grabs', { dubType: t.dubType })],
            ),
              Qt(e, n);
          };
        Nt(o, (e) => {
          'updub' === t.dubType || 'downdub' === t.dubType ? e(i) : e(s, !1);
        }),
          Qt(e, n);
      };
    Nt(f, (e) => {
      ut(n).length > 0 ? e(m) : e(v, !1);
    }),
      Pt(
        c,
        (e, t) => (null == _n ? void 0 : _n(e, t)),
        () => ({ to: 'body' }),
      ),
      he(
        (e) => {
          Wt(c, 'id', `dubplus-${t.dubType}s-container`),
            Bt(
              c,
              0,
              `dubplus-dubs-container dubplus-${t.dubType}s-container`,
              'svelte-ujv5bp',
            ),
            Rt(c, `bottom: ${ut(i)}px; right: ${ut(o)}px; display: ${ut(s)};`),
            (p = Bt(d, 0, 'dubinfo-show svelte-ujv5bp', null, p, e));
        },
        [() => ({ 'dubplus-no-dubs': 0 === ut(n).length })],
      ),
      kt('mouseleave', c, () => R(s, 'none')),
      Qt(e, c),
      D();
  }
  Et(['click']);
  let ws = 200;
  const ys = 100;
  function xs() {
    return document.getElementById('snow-container');
  }
  function ks(e = '') {
    const t = (function () {
      let e = document.getElementById('psjs-css');
      return (
        e ||
        ((e = document.createElement('style')),
        (e.id = 'psjs-css'),
        document.head.appendChild(e),
        e)
      );
    })();
    (t.textContent = e), document.head.appendChild(t);
  }
  function Es(e = 100) {
    return Math.floor(Math.random() * e) + 1;
  }
  function _s(e, t) {
    return (
      (e = Math.ceil(e)),
      (t = Math.floor(t)),
      Math.floor(Math.random() * (t - e + 1)) + e
    );
  }
  function Ss() {
    !(function () {
      var e;
      const t = xs();
      ws = Number(
        (null == (e = null == t ? void 0 : t.dataset) ? void 0 : e.count) || ws,
      );
    })(),
      (function (e = 200) {
        let t = '';
        for (let i = 1; i < e; i++) {
          let e = 100 * Math.random(),
            s = 10 * Math.random(),
            r = e + s,
            a = e + s / 2,
            l = ((n = 0.3), (o = 0.8), Math.random() * (o - n) + n),
            u = l * ys,
            c = Math.random(),
            d = _s(10, 30),
            p = -1 * Es(30);
          t += `\n      .snowflake:nth-child(${i}) {\n        opacity: ${Math.random()};\n        transform: translate(${e}vw, -10px) scale(${c});\n        animation: fall-${i} ${d}s ${p}s linear infinite;\n      }\n      @keyframes fall-${i} {\n        ${100 * l}% {\n          transform: translate(${r}vw, ${u}vh) scale(${c});\n        }\n        to {\n          transform: translate(${a}vw, 100vh) scale(${c});\n        }\n      }\n    `;
        }
        var n, o;
        ks(t);
      })(ws),
      (function (e = 200) {
        e -= 1;
        const t = xs();
        t.replaceChildren();
        for (let n = 0; n < e; n++) {
          let e = document.createElement('div');
          (e.className = 'snowflake'), t.appendChild(e);
        }
      })(ws);
  }
  var Os = Ct('<div id="snow-container" class="svelte-qgqre1"></div>');
  var Cs = Ct(
    '<li class="svelte-psnl7x"><button type="button" class="svelte-psnl7x"><!> <span class="dubplus-menu-label svelte-psnl7x"> </span></button></li>',
  );
  Et(['click']);
  var Us = Ct('<!> <!>', 1);
  function Ls(e, t) {
    A(t, !1), Gt();
    var n = Us(),
      o = ie(n);
    const i = ae(() => fn('user-interface.title'));
    qn(o, {
      settingsId: 'user-interface',
      get name() {
        return ut(i);
      },
    }),
      Pn(se(o, 2), {
        settingsId: 'user-interface',
        children: (e, t) => {
          var n = zt();
          Tt(
            ie(n),
            1,
            () => is,
            (e) => e.id,
            (e, t) => {
              var n = zt(),
                o = ie(n),
                i = (e) => {
                  !(function (e, t) {
                    A(t, !0),
                      en(() => {
                        t.init && t.init();
                      });
                    var n = Cs(),
                      o = oe(n);
                    o.__click = function (...e) {
                      var n;
                      null == (n = t.onClick) || n.apply(this, e);
                    };
                    var i = oe(o);
                    Ft(
                      i,
                      () => t.icon,
                      (e, t) => {
                        t(e, {});
                      },
                    );
                    var s = oe(se(i, 2));
                    he(
                      (e, i, r) => {
                        Wt(n, 'id', t.id),
                          Wt(n, 'title', e),
                          Wt(o, 'aria-label', i),
                          Mt(s, r);
                      },
                      [
                        () => fn(t.description),
                        () => fn(t.description),
                        () => fn(t.label),
                      ],
                    ),
                      Qt(e, n),
                      D();
                  })(e, {
                    get id() {
                      return ut(t).id;
                    },
                    get label() {
                      return ut(t).label;
                    },
                    get description() {
                      return ut(t).description;
                    },
                    get icon() {
                      return ut(t).altIcon;
                    },
                    get onClick() {
                      return ut(t).onClick;
                    },
                    get init() {
                      return ut(t).init;
                    },
                  });
                },
                s = (e) => {
                  lo(e, {
                    get id() {
                      return ut(t).id;
                    },
                    get label() {
                      return ut(t).label;
                    },
                    get description() {
                      return ut(t).description;
                    },
                    get init() {
                      return ut(t).init;
                    },
                    get customize() {
                      return ut(t).custom;
                    },
                    get turnOn() {
                      return ut(t).turnOn;
                    },
                    get turnOff() {
                      return ut(t).turnOff;
                    },
                  });
                };
              Nt(o, (e) => {
                ut(t).altIcon ? e(i) : e(s, !1);
              }),
                Qt(e, n);
            },
          ),
            Qt(e, n);
        },
      }),
      Qt(e, n),
      D();
  }
  var zs,
    Qs,
    Ms =
      ((zs = () => Tn),
      (Qs = F(0)),
      function () {
        return 1 === arguments.length
          ? (R(Qs, ut(Qs) + 1), arguments[0])
          : (ut(Qs), zs());
      }),
    $s = Ct('<!> <!>', 1);
  var Is = Ct('<!> <!>', 1);
  function Ns(e, t, n, o, i, s) {
    document.body.classList.contains(t)
      ? s()
      : (R(n, W(fn('SnoozeVideo.tooltip.undo'))),
        R(o, 'icon-eye-unblocked'),
        document.body.classList.add(t),
        window.QueUp.Events.bind(fo, i));
  }
  var Ts = Ct(
    '<button id="dubplus-snooze-video" type="button"><span class="svelte-1va87zs">1</span></button>',
  );
  Et(['click']);
  const As = '4.0.0';
  var Ds = Ct('<!> <!> <!>', 1),
    js = Ct(
      '<!> <!> <!> <!> <!> <!> <!> <aside class="dubplus-menu svelte-yl0u1x"><p class="dubplus-menu-header svelte-yl0u1x"> <span class="version svelte-yl0u1x"> </span></p> <!> <!> <!> <!> <!></aside> <!>',
      1,
    );
  function qs(e, t) {
    A(t, !1),
      en(() => {
        document.querySelector('html').classList.add('dubplus');
      }),
      Gt();
    var n = js(),
      o = ie(n);
    !(function (e, t) {
      A(t, !0);
      let n = P(W(fn('Snooze.tooltip')));
      const o = { currentVol: 50, snoozed: !1 };
      function i() {
        window.QueUp.room.player.setVolume(o.currentVol),
          window.QueUp.room.player.updateVolumeBar(),
          (o.snoozed = !1),
          R(n, W(fn('Snooze.tooltip'))),
          window.QueUp.Events.unbind(fo, s);
      }
      function s(e) {
        if (e.startTime < 2 && o.snoozed) return i(), !0;
      }
      var r = cs();
      (r.__click = function () {
        !o.snoozed &&
        !window.QueUp.room.player.muted_player &&
        window.QueUp.playerController.volume > 2
          ? (R(n, W(fn('Snooze.tooltip.undo'))),
            (o.currentVol = window.QueUp.playerController.volume),
            window.QueUp.room.player.mutePlayer(),
            (o.snoozed = !0),
            window.QueUp.Events.bind(fo, s))
          : o.snoozed && i();
      }),
        Pt(
          r,
          (e, t) => (null == _n ? void 0 : _n(e, t)),
          () => ({ to: zn }),
        ),
        he(() => {
          Wt(r, 'aria-label', ut(n)), Wt(r, 'data-dp-tooltip', ut(n));
        }),
        Qt(e, r),
        D();
    })(o, {});
    var i = se(o, 2);
    !(function (e, t) {
      A(t, !1), Gt();
      var n = Mn();
      (n.__click = [Qn]),
        cn(oe(n)),
        Pt(
          n,
          (e, t) => (null == _n ? void 0 : _n(e, t)),
          () => ({ to: '.header-right-navigation' }),
        ),
        Qt(e, n),
        D();
    })(i, {});
    var s = se(i, 2);
    us(s, {});
    var r = se(s, 2);
    !(function (e, t) {
      A(t, !0);
      let n = P('icon-eye-blocked'),
        o = P(W(fn('SnoozeVideo.tooltip')));
      const i = 'dubplus-snooze-video';
      function s() {
        R(o, W(fn('SnoozeVideo.tooltip'))),
          R(n, 'icon-eye-blocked'),
          document.body.classList.remove(i),
          window.QueUp.Events.unbind(fo, r);
      }
      function r(e) {
        if (e.startTime < 2) return s(), !0;
      }
      var a = Ts();
      (a.__click = [Ns, i, o, n, r, s]),
        Pt(
          a,
          (e, t) => (null == _n ? void 0 : _n(e, t)),
          () => ({ to: zn }),
        ),
        he(() => {
          Bt(
            a,
            0,
            `${ut(n)} snooze-video-btn dubplus-btn-player`,
            'svelte-1va87zs',
          ),
            Wt(a, 'aria-label', ut(o)),
            Wt(a, 'data-dp-tooltip', ut(o));
        }),
        Qt(e, a),
        D();
    })(r, {});
    var a = se(r, 2),
      l = (e) => {
        fs(e, {});
      };
    Nt(a, (e) => {
      Tn.options.autocomplete && e(l);
    });
    var u = se(a, 2),
      c = (e) => {
        var t = Ds(),
          n = ie(t);
        gs(n, { dubType: 'updub' });
        var o = se(n, 2);
        gs(o, { dubType: 'downdub' }),
          gs(se(o, 2), { dubType: 'grab' }),
          Qt(e, t);
      };
    Nt(u, (e) => {
      Tn.options['dubs-hover'] && e(c);
    });
    var d = se(u, 2),
      p = (e) => {
        !(function (e, t) {
          A(t, !1),
            en(() => {
              Ss(), window.addEventListener('resize', Ss);
            }),
            tn(() => {
              window.removeEventListener('resize', Ss);
            }),
            Gt();
          var n = Os();
          Pt(
            n,
            (e, t) => (null == _n ? void 0 : _n(e, t)),
            () => ({ to: 'body' }),
          ),
            Qt(e, n),
            D();
        })(e, {});
      };
    Nt(d, (e) => {
      Tn.options.snow && e(p);
    });
    var f = se(d, 2),
      m = oe(f),
      v = oe(m),
      h = oe(se(v)),
      b = se(m, 2);
    !(function (e, t) {
      A(t, !1), Gt();
      var n = as(),
        o = ie(n);
      const i = ae(() => fn('general.title'));
      qn(o, {
        settingsId: 'general',
        get name() {
          return ut(i);
        },
      }),
        Pn(se(o, 2), {
          settingsId: 'general',
          children: (e, t) => {
            var n = zt();
            Tt(
              ie(n),
              1,
              () => os,
              (e) => e.id,
              (e, t) => {
                lo(e, {
                  get id() {
                    return ut(t).id;
                  },
                  get label() {
                    return ut(t).label;
                  },
                  get description() {
                    return ut(t).description;
                  },
                  get init() {
                    return ut(t).init;
                  },
                  get customize() {
                    return ut(t).custom;
                  },
                  get modOnly() {
                    return ut(t).modOnly;
                  },
                  get turnOn() {
                    return ut(t).turnOn;
                  },
                  get turnOff() {
                    return ut(t).turnOff;
                  },
                });
              },
            ),
              Qt(e, n);
          },
        }),
        Qt(e, n),
        D();
    })(b, {});
    var g = se(b, 2);
    Ls(g, {});
    var w = se(g, 2);
    !(function (e, t) {
      A(t, !1),
        ss.forEach((e) => {
          Ms().options[e.id] || Ms((Ms().options[e.id] = !1));
        }),
        Gt();
      var n = $s(),
        o = ie(n);
      const i = ae(() => fn('settings.title'));
      qn(o, {
        settingsId: 'settings',
        get name() {
          return ut(i);
        },
      }),
        Pn(se(o, 2), {
          settingsId: 'settings',
          children: (e, t) => {
            var n = zt();
            Tt(
              ie(n),
              1,
              () => ss,
              (e) => e.id,
              (e, t) => {
                lo(e, {
                  get id() {
                    return ut(t).id;
                  },
                  get label() {
                    return ut(t).label;
                  },
                  get description() {
                    return ut(t).description;
                  },
                  get init() {
                    return ut(t).init;
                  },
                  get customize() {
                    return ut(t).custom;
                  },
                  get turnOn() {
                    return ut(t).turnOn;
                  },
                  get turnOff() {
                    return ut(t).turnOff;
                  },
                });
              },
            ),
              Qt(e, n);
          },
        }),
        Qt(e, n),
        D();
    })(w, {});
    var y = se(w, 2);
    !(function (e, t) {
      A(t, !1), Gt();
      var n = Is(),
        o = ie(n);
      const i = ae(() => fn('customize.title'));
      qn(o, {
        settingsId: 'customize',
        get name() {
          return ut(i);
        },
      }),
        Pn(se(o, 2), {
          settingsId: 'customize',
          children: (e, t) => {
            var n = zt();
            Tt(
              ie(n),
              1,
              () => rs,
              (e) => e.id,
              (e, t) => {
                lo(e, {
                  get id() {
                    return ut(t).id;
                  },
                  get label() {
                    return ut(t).label;
                  },
                  get description() {
                    return ut(t).description;
                  },
                  get init() {
                    return ut(t).init;
                  },
                  get customize() {
                    return ut(t).custom;
                  },
                  get turnOn() {
                    return ut(t).turnOn;
                  },
                  get turnOff() {
                    return ut(t).turnOff;
                  },
                });
              },
            ),
              Qt(e, n);
          },
        }),
        Qt(e, n),
        D();
    })(y, {}),
      (function (e, t) {
        A(t, !1), Gt();
        var n = eo(),
          o = ie(n);
        const i = ae(() => fn('contact.title'));
        qn(o, {
          settingsId: 'contact',
          get name() {
            return ut(i);
          },
        }),
          Pn(se(o, 2), {
            settingsId: 'contact',
            children: (e, t) => {
              var n = Zn(),
                o = ie(n);
              const i = ae(() => fn('contact.bugs'));
              Bn(o, {
                icon: Jn,
                href: 'https://discord.gg/XUkG3Qy',
                get text() {
                  return ut(i);
                },
              });
              var s = se(o, 2);
              Bn(s, {
                icon: Wn,
                href: 'https://www.reddit.com/r/DubPlus/',
                text: 'Reddit',
              });
              var r = se(s, 2);
              Bn(r, {
                icon: Hn,
                href: 'https://facebook.com/DubPlusScript',
                text: 'Facebook',
              }),
                Bn(se(r, 2), {
                  icon: Gn,
                  href: 'https://twitter.com/DubPlusScript',
                  text: 'Twitter',
                }),
                Qt(e, n);
            },
          }),
          Qt(e, n),
          D();
      })(se(y, 2), {}),
      En(se(f, 2), {}),
      he(
        (e) => {
          Mt(v, `${e ?? ''} `), Mt(h, `v${As}`);
        },
        [() => fn('Menu.title')],
        ae,
      ),
      Qt(e, n),
      D();
  }
  var Fs = {
    name: 'dubplus',
    version: '4.0.0',
    description: 'Dub+ - A simple script/extension for QueUp.net',
    author: 'DubPlus',
    license: 'MIT',
    homepage: 'https://dub.plus',
    'lint-staged': {
      '*.{css,md}': 'prettier --list-different --write',
      '*.{js,svelte}': ['prettier --list-different --write', 'eslint'],
    },
  };
  const Ps = 'dubplusExtensionLoaded' in window;
  var Vs, Bs;
  sn('Dub+: loaded as extension:', Ps),
    Ps ||
      ((Vs = '/dubplus.css'),
      (Bs = 'dubplus-css'),
      new Promise((e, t) => {
        var n;
        null == (n = document.querySelector(`link.${Bs}`)) || n.remove();
        const o = (function (e, t) {
          const n = document.createElement('link');
          return (
            (n.rel = 'stylesheet'),
            (n.type = 'text/css'),
            (n.className = e),
            (n.href = t),
            n
          );
        })(Bs, `//cdn.jsdelivr.net/gh/DubPlus/DubPlus${Vs}?1742849581308`);
        (o.onload = () => e()), (o.onerror = t), document.head.appendChild(o);
      })).catch((e) => {
        rn('Failed to load dubplus.css', e);
      });
  let Rs = document.getElementById('dubplus-container');
  Rs
    ? Rs.children.length > 0 &&
      (!(function (e, t) {
        const n = It.get(e);
        n ? (It.delete(e), n(t)) : Promise.resolve();
      })(Rs),
      Rs.replaceChildren())
    : ((Rs = document.createElement('div')),
      (Rs.id = 'dubplus-container'),
      document.body.appendChild(Rs));
  const Js = (function (
    e,
    {
      target: t,
      anchor: n,
      props: o = {},
      events: s,
      context: a,
      intro: l = !0,
    },
  ) {
    !(function () {
      if (void 0 === H) {
        (H = window), (X = /Firefox/.test(navigator.userAgent));
        var e = Element.prototype,
          t = Node.prototype;
        (G = r(t, 'firstChild').get),
          (Z = r(t, 'nextSibling').get),
          (e.__click = void 0),
          (e.__className = void 0),
          (e.__attributes = null),
          (e.__style = void 0),
          (e.__e = void 0),
          (Text.prototype.__t = void 0);
      }
    })();
    var u = new Set(),
      c = (e) => {
        for (var n = 0; n < e.length; n++) {
          var o = e[n];
          if (!u.has(o)) {
            u.add(o);
            var i = ht(o);
            t.addEventListener(o, _t, { passive: i });
            var s = $t.get(o);
            void 0 === s
              ? (document.addEventListener(o, _t, { passive: i }), $t.set(o, 1))
              : $t.set(o, s + 1);
          }
        }
      };
    c(i(yt)), xt.add(c);
    var d = void 0,
      p = (function (e) {
        const t = de(v, e, !0);
        return (e = {}) =>
          new Promise((n) => {
            e.outro
              ? Ee(t, () => {
                  xe(t), n(void 0);
                })
              : (xe(t), n(void 0));
          });
      })(() => {
        var i = n ?? t.appendChild(ee());
        return (
          ge(() => {
            a && (A({}), (N.c = a)),
              s && (o.$$events = s),
              (d = e(i, o) || {}),
              a && D();
          }),
          () => {
            var e;
            for (var o of u) {
              t.removeEventListener(o, _t);
              var s = $t.get(o);
              0 == --s
                ? (document.removeEventListener(o, _t), $t.delete(o))
                : $t.set(o, s);
            }
            xt.delete(c),
              i !== n && (null == (e = i.parentNode) || e.removeChild(i));
          }
        );
      });
    return It.set(d, p), d;
  })(
    function (e, t) {
      A(t, !0), (window.dubplus = Object.assign(window.dubplus || {}, Fs));
      let n = P('loading');
      function o(e) {
        (vn.title = fn('Error.modal.title')), (vn.content = e), (vn.open = !0);
      }
      ln([
        'QueUp.session.id',
        'QueUp.room.chat',
        'QueUp.Events',
        'QueUp.room.player',
        'QueUp.helpers.cookie',
        'QueUp.room.model',
        'QueUp.room.users',
      ])
        .then(() => {
          R(n, 'ready');
        })
        .catch(() => {
          var e, t;
          (
            null == (t = null == (e = window.QueUp) ? void 0 : e.session)
              ? void 0
              : t.id
          )
            ? R(n, 'error')
            : R(n, 'loggedout');
        }),
        fe(() => {
          'loggedout' === ut(n)
            ? o(fn('Error.modal.loggedout'))
            : 'error' === ut(n) && o(fn('Error.unknown'));
        });
      var i = zt(),
        s = ie(i),
        r = (e) => {
          !(function (e, t) {
            A(t, !1), Gt();
            var n = mn(),
              o = oe(n);
            cn(oe(o));
            var i = oe(se(o, 2));
            he((e) => Mt(i, e), [() => fn('Loading.text')], ae), Qt(e, n), D();
          })(e, {});
        },
        a = (e, t) => {
          var o = (e) => {
              qs(e, {});
            },
            i = (e) => {
              En(e, {});
            };
          Nt(
            e,
            (e) => {
              'ready' === ut(n) ? e(o) : e(i, !1);
            },
            t,
          );
        };
      Nt(s, (e) => {
        'loading' === ut(n) ? e(r) : e(a, !1);
      }),
        Qt(e, i),
        D();
    },
    { target: Rs },
  );
  return Js;
})();
