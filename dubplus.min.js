var dubplus = (function () {
  'use strict';
  var e,
    t,
    n,
    o,
    i,
    s,
    r,
    a,
    l,
    u,
    c,
    d,
    p,
    f,
    m = Object.defineProperty,
    v = (e) => {
      throw TypeError(e);
    },
    h = (e, t, n) =>
      ((e, t, n) =>
        t in e
          ? m(e, t, {
              enumerable: !0,
              configurable: !0,
              writable: !0,
              value: n,
            })
          : (e[t] = n))(e, 'symbol' != typeof t ? t + '' : t, n),
    b = (e, t, n) => t.has(e) || v('Cannot ' + n),
    g = (e, t, n) => (
      b(e, t, 'read from private field'),
      n ? n.call(e) : t.get(e)
    ),
    w = (e, t, n) =>
      t.has(e)
        ? v('Cannot add the same private member more than once')
        : t instanceof WeakSet
          ? t.add(e)
          : t.set(e, n),
    y = (e, t, n, o) => (
      b(e, t, 'write to private field'),
      o ? o.call(e, n) : t.set(e, n),
      n
    ),
    k = (e, t, n) => (b(e, t, 'access private method'), n);
  const x = !1;
  var E = Array.isArray,
    _ = Array.prototype.indexOf,
    S = Array.from,
    O = Object.defineProperty,
    C = Object.getOwnPropertyDescriptor,
    U = Object.getOwnPropertyDescriptors,
    M = Object.prototype,
    L = Array.prototype,
    z = Object.getPrototypeOf,
    Q = Object.isExtensible;
  const $ = () => {};
  function A(e) {
    return e();
  }
  function I(e) {
    for (var t = 0; t < e.length; t++) e[t]();
  }
  const T = 32,
    N = 64,
    j = 256,
    D = 512,
    q = 1024,
    P = 2048,
    F = 4096,
    B = 8192,
    V = 16384,
    R = 32768,
    W = 65536,
    J = 1 << 17,
    K = 1 << 19,
    Y = 1 << 20,
    H = 1 << 21,
    X = 1 << 22,
    G = 1 << 23,
    Z = Symbol('$state'),
    ee = Symbol(''),
    te = new (class extends Error {
      constructor() {
        (super(...arguments),
          h(this, 'name', 'StaleReactionError'),
          h(
            this,
            'message',
            'The reaction that called `getAbortSignal()` was re-run or destroyed',
          ));
      }
    })();
  function ne(e) {
    throw new Error('https://svelte.dev/e/lifecycle_outside_component');
  }
  const oe = Symbol(),
    ie = 'http://www.w3.org/1999/xhtml';
  function se(e) {
    return e === this.v;
  }
  function re(e, t) {
    return e != e
      ? t == t
      : e !== t ||
          (null !== e && 'object' == typeof e) ||
          'function' == typeof e;
  }
  function ae(e) {
    return !re(e, this.v);
  }
  let le = !1;
  let ue = null;
  function ce(e) {
    ue = e;
  }
  function de(e, t = !1, n) {
    ue = {
      p: ue,
      c: null,
      e: null,
      s: e,
      x: null,
      l: le && !t ? { s: null, u: null, $: [] } : null,
    };
  }
  function pe(e) {
    var t = ue,
      n = t.e;
    if (null !== n) for (var o of ((t.e = null), n)) dt(o);
    return ((ue = t.p), {});
  }
  function fe() {
    return !le || (null !== ue && null === ue.l);
  }
  const me = new WeakMap();
  function ve(e, t) {
    for (; null !== t; ) {
      if (128 & t.f)
        try {
          return void t.b.error(e);
        } catch (t) {
          e = t;
        }
      t = t.parent;
    }
    throw (e instanceof Error && he(e), e);
  }
  function he(e) {
    const t = me.get(e);
    t &&
      (O(e, 'message', { value: t.message }),
      O(e, 'stack', { value: t.stack }));
  }
  let be = [];
  function ge() {
    var e = be;
    ((be = []), I(e));
  }
  function we(e) {
    (0 === be.length && queueMicrotask(ge), be.push(e));
  }
  function ye() {
    for (var e = Qt.b; null !== e && !e.has_pending_snippet(); ) e = e.parent;
    return (
      null === e &&
        (function () {
          throw new Error('https://svelte.dev/e/await_outside_boundary');
        })(),
      e
    );
  }
  function ke(e) {
    var t = 2050,
      n = null !== Mt && 2 & Mt.f ? Mt : null;
    null === Qt || (null !== n && 0 !== (n.f & j)) ? (t |= j) : (Qt.f |= K);
    return {
      ctx: ue,
      deps: null,
      effects: null,
      equals: se,
      f: t,
      fn: e,
      reactions: null,
      rv: 0,
      v: oe,
      wv: 0,
      parent: n ?? Qt,
      ac: null,
    };
  }
  function xe(e, t) {
    let n = Qt;
    null === n &&
      (function () {
        throw new Error('https://svelte.dev/e/async_derived_orphan');
      })();
    var o = n.b,
      i = void 0,
      s = Ve(oe),
      r = null,
      a = !Mt;
    return (
      (function (e) {
        ut(4718592, e, !0);
      })(() => {
        try {
          var t = e();
        } catch (e) {
          t = Promise.reject(e);
        }
        var n = () => t;
        ((i = (null == r ? void 0 : r.then(n, n)) ?? Promise.resolve(t)),
          (r = i));
        var l = ze,
          u = o.pending;
        a && (o.update_pending_count(1), u || l.increment());
        const c = (e, t = void 0) => {
          ((r = null),
            u || l.activate(),
            t
              ? t !== te && ((s.f |= G), Ke(s, t))
              : (0 !== (s.f & G) && (s.f ^= G), Ke(s, e)),
            a && (o.update_pending_count(-1), u || l.decrement()),
            Me());
        };
        if ((i.then(c, (e) => c(null, e || 'unknown')), l))
          return () => {
            queueMicrotask(() => l.neuter());
          };
      }),
      new Promise((e) => {
        !(function t(n) {
          function o() {
            n === i ? e(s) : t(i);
          }
          n.then(o, o);
        })(i);
      })
    );
  }
  function Ee(e) {
    const t = ke(e);
    return (It(t), t);
  }
  function _e(e) {
    const t = ke(e);
    return ((t.equals = ae), t);
  }
  function Se(e) {
    var t = e.effects;
    if (null !== t) {
      e.effects = null;
      for (var n = 0; n < t.length; n += 1) gt(t[n]);
    }
  }
  function Oe(e) {
    var t,
      n = Qt;
    $t(
      (function (e) {
        for (var t = e.parent; null !== t; ) {
          if (!(2 & t.f)) return t;
          t = t.parent;
        }
        return null;
      })(e),
    );
    try {
      (Se(e), (t = Jt(e)));
    } finally {
      $t(n);
    }
    return t;
  }
  function Ce(e) {
    var t = Oe(e);
    (e.equals(t) || ((e.v = t), (e.wv = Vt())), Ct) ||
      (null !== Qe
        ? Qe.set(e, e.v)
        : tn(e, (!Bt && 0 === (e.f & j)) || null === e.deps ? q : F));
  }
  function Ue(e, t, n) {
    const o = fe() ? ke : _e;
    if (0 !== t.length) {
      var i,
        s,
        r,
        a = ze,
        l = Qt,
        u =
          ((i = Qt),
          (s = Mt),
          (r = ue),
          function () {
            ($t(i), zt(s), ce(r));
          }),
        c = ye();
      Promise.all(t.map((e) => xe(e)))
        .then((t) => {
          (null == a || a.activate(), u());
          try {
            n([...e.map(o), ...t]);
          } catch (e) {
            0 === (l.f & V) && ve(e, l);
          }
          (null == a || a.deactivate(), Me());
        })
        .catch((e) => {
          c.error(e);
        });
    } else n(e.map(o));
  }
  function Me() {
    ($t(null), zt(null), ce(null));
  }
  const Le = new Set();
  let ze = null,
    Qe = null,
    $e = new Set(),
    Ae = [];
  function Ie() {
    const e = Ae.shift();
    (Ae.length > 0 && queueMicrotask(Ie), e());
  }
  let Te = [],
    Ne = null,
    je = !1;
  ((e = new WeakMap()),
    (t = new WeakMap()),
    (n = new WeakMap()),
    (o = new WeakMap()),
    (i = new WeakMap()),
    (s = new WeakMap()),
    (r = new WeakMap()),
    (a = new WeakMap()),
    (l = new WeakMap()),
    (u = new WeakMap()),
    (c = new WeakSet()),
    (d = function (e) {
      var t;
      e.f ^= q;
      for (var n = e.first; null !== n; ) {
        var o = n.f,
          i = !!(96 & o);
        if (
          !(
            (i && 0 !== (o & q)) ||
            0 !== (o & B) ||
            this.skipped_effects.has(n)
          ) &&
          null !== n.fn
        ) {
          if (i) n.f ^= q;
          else if (4 & o) g(this, l).push(n);
          else if (Rt(n)) {
            if (0 !== (o & X))
              ((null == (t = n.b) ? void 0 : t.pending)
                ? g(this, r)
                : g(this, s)
              ).push(n);
            else (16 & n.f && g(this, u).push(n), Ht(n));
          }
          var a = n.first;
          if (null !== a) {
            n = a;
            continue;
          }
        }
        var c = n.parent;
        for (n = n.next; null === n && null !== c; )
          ((n = c.next), (c = c.parent));
      }
    }),
    (p = function () {
      if (!g(this, i)) for (const e of g(this, t)) e();
      g(this, t).clear();
    }));
  let De = class f {
    constructor() {
      (w(this, c),
        h(this, 'current', new Map()),
        w(this, e, new Map()),
        w(this, t, new Set()),
        w(this, n, 0),
        w(this, o, null),
        w(this, i, !1),
        w(this, s, []),
        w(this, r, []),
        w(this, a, []),
        w(this, l, []),
        w(this, u, []),
        h(this, 'skipped_effects', new Set()));
    }
    process(t) {
      var i;
      Te = [];
      var f = null;
      if (Le.size > 1) {
        ((f = new Map()), (Qe = new Map()));
        for (const [e, t] of this.current)
          (f.set(e, { v: e.v, wv: e.wv }), (e.v = t));
        for (const t of Le)
          if (t !== this)
            for (const [n, o] of g(t, e))
              f.has(n) || (f.set(n, { v: n.v, wv: n.wv }), (n.v = o));
      }
      for (const e of t) k(this, c, d).call(this, e);
      if (0 === g(this, s).length && 0 === g(this, n)) {
        k(this, c, p).call(this);
        var m = g(this, a),
          v = g(this, l);
        (y(this, a, []),
          y(this, l, []),
          y(this, u, []),
          (ze = null),
          Pe(m),
          Pe(v),
          null === ze ? (ze = this) : Le.delete(this),
          null == (i = g(this, o)) || i.resolve());
      } else {
        for (const e of g(this, a)) tn(e, q);
        for (const e of g(this, l)) tn(e, q);
        for (const e of g(this, u)) tn(e, q);
      }
      if (f) {
        for (const [e, { v: t, wv: n }] of f) e.wv <= n && (e.v = t);
        Qe = null;
      }
      for (const e of g(this, s)) Ht(e);
      for (const e of g(this, r)) Ht(e);
      (y(this, s, []), y(this, r, []));
    }
    capture(t, n) {
      (g(this, e).has(t) || g(this, e).set(t, n), this.current.set(t, t.v));
    }
    activate() {
      ze = this;
    }
    deactivate() {
      ze = null;
      for (const e of $e) if (($e.delete(e), e(), null !== ze)) break;
    }
    neuter() {
      y(this, i, !0);
    }
    flush() {
      (Te.length > 0
        ? (function () {
            var e = St;
            je = !0;
            try {
              var t = 0;
              for (Ot(!0); Te.length > 0; ) {
                var n = De.ensure();
                if (t++ > 1e3) (x, qe());
                (n.process(Te), Be.clear());
              }
            } finally {
              ((je = !1), Ot(e), (Ne = null));
            }
          })()
        : k(this, c, p).call(this),
        ze === this &&
          (0 === g(this, n) && Le.delete(this), this.deactivate()));
    }
    increment() {
      y(this, n, g(this, n) + 1);
    }
    decrement() {
      if ((y(this, n, g(this, n) - 1), 0 === g(this, n))) {
        for (const e of this.current.keys()) He(e, P, !1);
        (y(this, a, []), y(this, l, []), this.flush());
      } else this.deactivate();
    }
    add_callback(e) {
      g(this, t).add(e);
    }
    settled() {
      return (
        g(this, o) ??
        y(this, o, {
          promise: new Promise((n, o) => {
            ((e = n), (t = o));
          }),
          resolve: e,
          reject: t,
        })
      ).promise;
      var e, t;
    }
    static ensure() {
      if (null === ze) {
        const e = (ze = new f());
        (Le.add(ze),
          f.enqueue(() => {
            ze === e && e.flush();
          }));
      }
      return ze;
    }
    static enqueue(e) {
      (0 === Ae.length && queueMicrotask(Ie), Ae.unshift(e));
    }
  };
  function qe() {
    try {
      !(function () {
        throw new Error('https://svelte.dev/e/effect_update_depth_exceeded');
      })();
    } catch (e) {
      ve(e, Ne);
    }
  }
  function Pe(e) {
    var t = e.length;
    if (0 !== t) {
      for (var n = 0; n < t; ) {
        var o = e[n++];
        if (!(24576 & o.f) && Rt(o)) {
          var i = ze ? ze.current.size : 0;
          if (
            (Ht(o),
            null === o.deps &&
              null === o.first &&
              null === o.nodes_start &&
              (null === o.teardown && null === o.ac ? wt(o) : (o.fn = null)),
            null !== ze && ze.current.size > i && 0 !== (o.f & Y))
          )
            break;
        }
      }
      for (; n < t; ) Fe(e[n++]);
    }
  }
  function Fe(e) {
    for (var t = (Ne = e); null !== t.parent; ) {
      var n = (t = t.parent).f;
      if (je && t === Qt && 16 & n) return;
      if (96 & n) {
        if (0 === (n & q)) return;
        t.f ^= q;
      }
    }
    Te.push(t);
  }
  const Be = new Map();
  function Ve(e, t) {
    return { f: 0, v: e, reactions: null, equals: se, rv: 0, wv: 0 };
  }
  function Re(e, t) {
    const n = Ve(e);
    return (It(n), n);
  }
  function We(e, t = !1, n = !0) {
    var o;
    const i = Ve(e);
    return (
      t || (i.equals = ae),
      le &&
        n &&
        null !== ue &&
        null !== ue.l &&
        ((o = ue.l).s ?? (o.s = [])).push(i),
      i
    );
  }
  function Je(e, t, n = !1) {
    return (
      null !== Mt &&
        (!Lt || 0 !== (Mt.f & J)) &&
        fe() &&
        4325394 & Mt.f &&
        !(null == At ? void 0 : At.includes(e)) &&
        (function () {
          throw new Error('https://svelte.dev/e/state_unsafe_mutation');
        })(),
      Ke(e, n ? Xe(t) : t)
    );
  }
  function Ke(e, t) {
    if (!e.equals(t)) {
      var n = e.v;
      (Ct ? Be.set(e, t) : Be.set(e, n),
        (e.v = t),
        De.ensure().capture(e, n),
        2 & e.f && (0 !== (e.f & P) && Oe(e), tn(e, 0 === (e.f & j) ? q : F)),
        (e.wv = Vt()),
        He(e, P),
        !fe() ||
          null === Qt ||
          0 === (Qt.f & q) ||
          96 & Qt.f ||
          (null === jt
            ? (function (e) {
                jt = e;
              })([e])
            : jt.push(e)));
    }
    return t;
  }
  function Ye(e) {
    Je(e, e.v + 1);
  }
  function He(e, t, n = !0) {
    var o = e.reactions;
    if (null !== o)
      for (var i = fe(), s = o.length, r = 0; r < s; r++) {
        var a = o[r],
          l = a.f;
        if (i || a !== Qt) {
          var u = 0 === (l & P) && (n || 0 === (l & X));
          (u && tn(a, t), 2 & l ? He(a, F) : u && Fe(a));
        }
      }
  }
  function Xe(e) {
    if ('object' != typeof e || null === e || Z in e) return e;
    const t = z(e);
    if (t !== M && t !== L) return e;
    var n = new Map(),
      o = E(e),
      i = Re(0),
      s = Pt,
      r = (e) => {
        if (Pt === s) return e();
        var t = Mt,
          n = Pt;
        (zt(null), Ft(s));
        var o = e();
        return (zt(t), Ft(n), o);
      };
    return (
      o && n.set('length', Re(e.length)),
      new Proxy(e, {
        defineProperty(e, t, o) {
          ('value' in o &&
            !1 !== o.configurable &&
            !1 !== o.enumerable &&
            !1 !== o.writable) ||
            (function () {
              throw new Error('https://svelte.dev/e/state_descriptors_fixed');
            })();
          var i = n.get(t);
          return (
            void 0 === i
              ? (i = r(() => {
                  var e = Re(o.value);
                  return (n.set(t, e), e);
                }))
              : Je(i, o.value, !0),
            !0
          );
        },
        deleteProperty(e, t) {
          var o = n.get(t);
          if (void 0 === o) {
            if (t in e) {
              const e = r(() => Re(oe));
              (n.set(t, e), Ye(i));
            }
          } else (Je(o, oe), Ye(i));
          return !0;
        },
        get(t, o, i) {
          var s;
          if (o === Z) return e;
          var a = n.get(o),
            l = o in t;
          if (
            (void 0 !== a ||
              (l && !(null == (s = C(t, o)) ? void 0 : s.writable)) ||
              ((a = r(() => Re(Xe(l ? t[o] : oe)))), n.set(o, a)),
            void 0 !== a)
          ) {
            var u = Xt(a);
            return u === oe ? void 0 : u;
          }
          return Reflect.get(t, o, i);
        },
        getOwnPropertyDescriptor(e, t) {
          var o = Reflect.getOwnPropertyDescriptor(e, t);
          if (o && 'value' in o) {
            var i = n.get(t);
            i && (o.value = Xt(i));
          } else if (void 0 === o) {
            var s = n.get(t),
              r = null == s ? void 0 : s.v;
            if (void 0 !== s && r !== oe)
              return {
                enumerable: !0,
                configurable: !0,
                value: r,
                writable: !0,
              };
          }
          return o;
        },
        has(e, t) {
          var o;
          if (t === Z) return !0;
          var i = n.get(t),
            s = (void 0 !== i && i.v !== oe) || Reflect.has(e, t);
          if (
            (void 0 !== i ||
              (null !== Qt &&
                (!s || (null == (o = C(e, t)) ? void 0 : o.writable)))) &&
            (void 0 === i &&
              ((i = r(() => Re(s ? Xe(e[t]) : oe))), n.set(t, i)),
            Xt(i) === oe)
          )
            return !1;
          return s;
        },
        set(e, t, s, a) {
          var l,
            u = n.get(t),
            c = t in e;
          if (o && 'length' === t)
            for (var d = s; d < u.v; d += 1) {
              var p = n.get(d + '');
              void 0 !== p
                ? Je(p, oe)
                : d in e && ((p = r(() => Re(oe))), n.set(d + '', p));
            }
          void 0 === u
            ? (c && !(null == (l = C(e, t)) ? void 0 : l.writable)) ||
              (Je((u = r(() => Re(void 0))), Xe(s)), n.set(t, u))
            : ((c = u.v !== oe),
              Je(
                u,
                r(() => Xe(s)),
              ));
          var f = Reflect.getOwnPropertyDescriptor(e, t);
          if (((null == f ? void 0 : f.set) && f.set.call(a, s), !c)) {
            if (o && 'string' == typeof t) {
              var m = n.get('length'),
                v = Number(t);
              Number.isInteger(v) && v >= m.v && Je(m, v + 1);
            }
            Ye(i);
          }
          return !0;
        },
        ownKeys(e) {
          Xt(i);
          var t = Reflect.ownKeys(e).filter((e) => {
            var t = n.get(e);
            return void 0 === t || t.v !== oe;
          });
          for (var [o, s] of n) s.v === oe || o in e || t.push(o);
          return t;
        },
        setPrototypeOf() {
          !(function () {
            throw new Error('https://svelte.dev/e/state_prototype_fixed');
          })();
        },
      })
    );
  }
  var Ge, Ze, et, tt;
  function nt(e = '') {
    return document.createTextNode(e);
  }
  function ot(e) {
    return et.call(e);
  }
  function it(e) {
    return tt.call(e);
  }
  function st(e, t) {
    return ot(e);
  }
  function rt(e, t) {
    var n = ot(e);
    return n instanceof Comment && '' === n.data ? it(n) : n;
  }
  function at(e, t = 1, n = !1) {
    let o = e;
    for (; t--; ) o = it(o);
    return o;
  }
  function lt(e) {
    (null === Qt &&
      null === Mt &&
      (function () {
        throw new Error('https://svelte.dev/e/effect_orphan');
      })(),
      null !== Mt &&
        0 !== (Mt.f & j) &&
        null === Qt &&
        (function () {
          throw new Error('https://svelte.dev/e/effect_in_unowned_derived');
        })(),
      Ct &&
        (function () {
          throw new Error('https://svelte.dev/e/effect_in_teardown');
        })());
  }
  function ut(e, t, n, o = !0) {
    var i = Qt;
    null !== i && 0 !== (i.f & B) && (e |= B);
    var s = {
      ctx: ue,
      deps: null,
      nodes_start: null,
      nodes_end: null,
      f: e | P,
      first: null,
      fn: t,
      last: null,
      next: null,
      parent: i,
      b: i && i.b,
      prev: null,
      teardown: null,
      transitions: null,
      wv: 0,
      ac: null,
    };
    if (n)
      try {
        (Ht(s), (s.f |= R));
      } catch (e) {
        throw (gt(s), e);
      }
    else null !== t && Fe(s);
    if (
      !(
        n &&
        null === s.deps &&
        null === s.first &&
        null === s.nodes_start &&
        null === s.teardown &&
        0 === (s.f & K)
      ) &&
      o &&
      (null !== i &&
        (function (e, t) {
          var n = t.last;
          null === n
            ? (t.last = t.first = e)
            : ((n.next = e), (e.prev = n), (t.last = e));
        })(s, i),
      null !== Mt && 2 & Mt.f)
    ) {
      var r = Mt;
      (r.effects ?? (r.effects = [])).push(s);
    }
    return s;
  }
  function ct(e) {
    lt();
    var t = Qt.f;
    if (!(!Mt && 0 !== (t & T) && 0 === (t & R))) return dt(e);
    var n = ue;
    (n.e ?? (n.e = [])).push(e);
  }
  function dt(e) {
    return ut(1048580, e, !1);
  }
  function pt(e, t = 0) {
    return ut(8 | t, e, !0);
  }
  function ft(e, t = [], n = []) {
    Ue(t, n, (t) => {
      ut(8, () => e(...t.map(Xt)), !0);
    });
  }
  function mt(e, t = 0) {
    return ut(16 | t, e, !0);
  }
  function vt(e, t = !0) {
    return ut(T, e, !0, t);
  }
  function ht(e) {
    var t = e.teardown;
    if (null !== t) {
      const e = Ct,
        n = Mt;
      (Ut(!0), zt(null));
      try {
        t.call(null);
      } finally {
        (Ut(e), zt(n));
      }
    }
  }
  function bt(e, t = !1) {
    var n,
      o = e.first;
    for (e.first = e.last = null; null !== o; ) {
      null == (n = o.ac) || n.abort(te);
      var i = o.next;
      (0 !== (o.f & N) ? (o.parent = null) : gt(o, t), (o = i));
    }
  }
  function gt(e, t = !0) {
    var n = !1;
    ((t || 262144 & e.f) &&
      null !== e.nodes_start &&
      null !== e.nodes_end &&
      (!(function (e, t) {
        for (; null !== e; ) {
          var n = e === t ? null : it(e);
          (e.remove(), (e = n));
        }
      })(e.nodes_start, e.nodes_end),
      (n = !0)),
      bt(e, t && !n),
      Yt(e, 0),
      tn(e, V));
    var o = e.transitions;
    if (null !== o) for (const e of o) e.stop();
    ht(e);
    var i = e.parent;
    (null !== i && null !== i.first && wt(e),
      (e.next =
        e.prev =
        e.teardown =
        e.ctx =
        e.deps =
        e.fn =
        e.nodes_start =
        e.nodes_end =
        e.ac =
          null));
  }
  function wt(e) {
    var t = e.parent,
      n = e.prev,
      o = e.next;
    (null !== n && (n.next = o),
      null !== o && (o.prev = n),
      null !== t &&
        (t.first === e && (t.first = o), t.last === e && (t.last = n)));
  }
  function yt(e, t) {
    var n = [];
    (xt(e, n, !0),
      kt(n, () => {
        (gt(e), t && t());
      }));
  }
  function kt(e, t) {
    var n = e.length;
    if (n > 0) {
      var o = () => --n || t();
      for (var i of e) i.out(o);
    } else t();
  }
  function xt(e, t, n) {
    if (0 === (e.f & B)) {
      if (((e.f ^= B), null !== e.transitions))
        for (const o of e.transitions) (o.is_global || n) && t.push(o);
      for (var o = e.first; null !== o; ) {
        var i = o.next;
        (xt(o, t, !!(0 !== (o.f & W) || 0 !== (o.f & T)) && n), (o = i));
      }
    }
  }
  function Et(e) {
    _t(e, !0);
  }
  function _t(e, t) {
    if (0 !== (e.f & B)) {
      ((e.f ^= B), 0 === (e.f & q) && (tn(e, P), Fe(e)));
      for (var n = e.first; null !== n; ) {
        var o = n.next;
        (_t(n, !!(0 !== (n.f & W) || 0 !== (n.f & T)) && t), (n = o));
      }
      if (null !== e.transitions)
        for (const n of e.transitions) (n.is_global || t) && n.in();
    }
  }
  let St = !1;
  function Ot(e) {
    St = e;
  }
  let Ct = !1;
  function Ut(e) {
    Ct = e;
  }
  let Mt = null,
    Lt = !1;
  function zt(e) {
    Mt = e;
  }
  let Qt = null;
  function $t(e) {
    Qt = e;
  }
  let At = null;
  function It(e) {
    null !== Mt && (null === At ? (At = [e]) : At.push(e));
  }
  let Tt = null,
    Nt = 0,
    jt = null;
  let Dt = 1,
    qt = 0,
    Pt = qt;
  function Ft(e) {
    Pt = e;
  }
  let Bt = !1;
  function Vt() {
    return ++Dt;
  }
  function Rt(e) {
    var t,
      n = e.f;
    if (0 !== (n & P)) return !0;
    if (0 !== (n & F)) {
      var o = e.deps,
        i = 0 !== (n & j);
      if (null !== o) {
        var s,
          r,
          a = 0 !== (n & D),
          l = i && null !== Qt && !Bt,
          u = o.length;
        if ((a || l) && (null === Qt || 0 === (Qt.f & V))) {
          var c = e,
            d = c.parent;
          for (s = 0; s < u; s++)
            ((r = o[s]),
              (!a &&
                (null == (t = null == r ? void 0 : r.reactions)
                  ? void 0
                  : t.includes(c))) ||
                (r.reactions ?? (r.reactions = [])).push(c));
          (a && (c.f ^= D), l && null !== d && 0 === (d.f & j) && (c.f ^= j));
        }
        for (s = 0; s < u; s++)
          if ((Rt((r = o[s])) && Ce(r), r.wv > e.wv)) return !0;
      }
      (i && (null === Qt || Bt)) || tn(e, q);
    }
    return !1;
  }
  function Wt(e, t, n = !0) {
    var o = e.reactions;
    if (null !== o && !(null == At ? void 0 : At.includes(e)))
      for (var i = 0; i < o.length; i++) {
        var s = o[i];
        2 & s.f
          ? Wt(s, t, !1)
          : t === s && (n ? tn(s, P) : 0 !== (s.f & q) && tn(s, F), Fe(s));
      }
  }
  function Jt(e) {
    var t,
      n = Tt,
      o = Nt,
      i = jt,
      s = Mt,
      r = Bt,
      a = At,
      l = ue,
      u = Lt,
      c = Pt,
      d = e.f;
    ((Tt = null),
      (Nt = 0),
      (jt = null),
      (Bt = 0 !== (d & j) && (Lt || !St || null === Mt)),
      (Mt = 96 & d ? null : e),
      (At = null),
      ce(e.ctx),
      (Lt = !1),
      (Pt = ++qt),
      null !== e.ac && (e.ac.abort(te), (e.ac = null)));
    try {
      e.f |= H;
      var p = (0, e.fn)(),
        f = e.deps;
      if (null !== Tt) {
        var m;
        if ((Yt(e, Nt), null !== f && Nt > 0))
          for (f.length = Nt + Tt.length, m = 0; m < Tt.length; m++)
            f[Nt + m] = Tt[m];
        else e.deps = f = Tt;
        if (!Bt || (2 & d && null !== e.reactions))
          for (m = Nt; m < f.length; m++)
            ((t = f[m]).reactions ?? (t.reactions = [])).push(e);
      } else null !== f && Nt < f.length && (Yt(e, Nt), (f.length = Nt));
      if (fe() && null !== jt && !Lt && null !== f && !(6146 & e.f))
        for (m = 0; m < jt.length; m++) Wt(jt[m], e);
      return (
        null !== s &&
          s !== e &&
          (qt++, null !== jt && (null === i ? (i = jt) : i.push(...jt))),
        0 !== (e.f & G) && (e.f ^= G),
        p
      );
    } catch (e) {
      return (function (e) {
        var t = Qt;
        if (null === t) return ((Mt.f |= G), e);
        if (0 === (t.f & R)) {
          if (!(128 & t.f)) throw (!t.parent && e instanceof Error && he(e), e);
          t.b.error(e);
        } else ve(e, t);
      })(e);
    } finally {
      ((e.f ^= H),
        (Tt = n),
        (Nt = o),
        (jt = i),
        (Mt = s),
        (Bt = r),
        (At = a),
        ce(l),
        (Lt = u),
        (Pt = c));
    }
  }
  function Kt(e, t) {
    let n = t.reactions;
    if (null !== n) {
      var o = _.call(n, e);
      if (-1 !== o) {
        var i = n.length - 1;
        0 === i ? (n = t.reactions = null) : ((n[o] = n[i]), n.pop());
      }
    }
    null === n &&
      2 & t.f &&
      (null === Tt || !Tt.includes(t)) &&
      (tn(t, F), 768 & t.f || (t.f ^= D), Se(t), Yt(t, 0));
  }
  function Yt(e, t) {
    var n = e.deps;
    if (null !== n) for (var o = t; o < n.length; o++) Kt(e, n[o]);
  }
  function Ht(e) {
    var t = e.f;
    if (0 === (t & V)) {
      tn(e, q);
      var n = Qt,
        o = St;
      ((Qt = e), (St = !0));
      try {
        (16 & t
          ? (function (e) {
              for (var t = e.first; null !== t; ) {
                var n = t.next;
                (0 === (t.f & T) && gt(t), (t = n));
              }
            })(e)
          : bt(e),
          ht(e));
        var i = Jt(e);
        ((e.teardown = 'function' == typeof i ? i : null), (e.wv = Dt));
      } finally {
        ((St = o), (Qt = n));
      }
    }
  }
  function Xt(e) {
    var t = !!(2 & e.f);
    if (null === Mt || Lt) {
      if (t && null === e.deps && null === e.effects) {
        var n = e,
          o = n.parent;
        null !== o && 0 === (o.f & j) && (n.f ^= j);
      }
    } else if (
      !(null !== Qt && 0 !== (Qt.f & V)) &&
      !(null == At ? void 0 : At.includes(e))
    ) {
      var i = Mt.deps;
      if (0 !== (Mt.f & H))
        e.rv < qt &&
          ((e.rv = qt),
          null === Tt && null !== i && i[Nt] === e
            ? Nt++
            : null === Tt
              ? (Tt = [e])
              : (Bt && Tt.includes(e)) || Tt.push(e));
      else {
        (Mt.deps ?? (Mt.deps = [])).push(e);
        var s = e.reactions;
        null === s ? (e.reactions = [Mt]) : s.includes(Mt) || s.push(Mt);
      }
    }
    if (Ct) {
      if (Be.has(e)) return Be.get(e);
      if (t) {
        var r = (n = e).v;
        return (
          ((0 === (n.f & q) && null !== n.reactions) || Gt(n)) && (r = Oe(n)),
          Be.set(n, r),
          r
        );
      }
    } else if (t) {
      if (((n = e), null == Qe ? void 0 : Qe.has(n))) return Qe.get(n);
      Rt(n) && Ce(n);
    }
    if (0 !== (e.f & G)) throw e.v;
    return e.v;
  }
  function Gt(e) {
    if (e.v === oe) return !0;
    if (null === e.deps) return !1;
    for (const t of e.deps) {
      if (Be.has(t)) return !0;
      if (2 & t.f && Gt(t)) return !0;
    }
    return !1;
  }
  function Zt(e) {
    var t = Lt;
    try {
      return ((Lt = !0), e());
    } finally {
      Lt = t;
    }
  }
  const en = -7169;
  function tn(e, t) {
    e.f = (e.f & en) | t;
  }
  function nn(e) {
    if ('object' == typeof e && e && !(e instanceof EventTarget))
      if (Z in e) on(e);
      else if (!Array.isArray(e))
        for (let t in e) {
          const n = e[t];
          'object' == typeof n && n && Z in n && on(n);
        }
  }
  function on(e, t = new Set()) {
    if (
      !(
        'object' != typeof e ||
        null === e ||
        e instanceof EventTarget ||
        t.has(e)
      )
    ) {
      (t.add(e), e instanceof Date && e.getTime());
      for (let n in e)
        try {
          on(e[n], t);
        } catch (e) {}
      const n = z(e);
      if (
        n !== Object.prototype &&
        n !== Array.prototype &&
        n !== Map.prototype &&
        n !== Set.prototype &&
        n !== Date.prototype
      ) {
        const t = U(n);
        for (let n in t) {
          const o = t[n].get;
          if (o)
            try {
              o.call(e);
            } catch (e) {}
        }
      }
    }
  }
  const sn = ['touchstart', 'touchmove'];
  function rn(e) {
    return sn.includes(e);
  }
  let an = !1;
  function ln(e) {
    var t = Mt,
      n = Qt;
    (zt(null), $t(null));
    try {
      return e();
    } finally {
      (zt(t), $t(n));
    }
  }
  function un(e, t, n, o = n) {
    e.addEventListener(t, () => ln(n));
    const i = e.__on_r;
    ((e.__on_r = i
      ? () => {
          (i(), o(!0));
        }
      : () => o(!0)),
      an ||
        ((an = !0),
        document.addEventListener(
          'reset',
          (e) => {
            Promise.resolve().then(() => {
              var t;
              if (!e.defaultPrevented)
                for (const n of e.target.elements)
                  null == (t = n.__on_r) || t.call(n);
            });
          },
          { capture: !0 },
        )));
  }
  const cn = new Set(),
    dn = new Set();
  function pn(e, t, n, o, i) {
    var s = { capture: o, passive: i },
      r = (function (e, t, n, o = {}) {
        function i(e) {
          if ((o.capture || mn.call(t, e), !e.cancelBubble))
            return ln(() => (null == n ? void 0 : n.call(this, e)));
        }
        return (
          e.startsWith('pointer') || e.startsWith('touch') || 'wheel' === e
            ? we(() => {
                t.addEventListener(e, i, o);
              })
            : t.addEventListener(e, i, o),
          i
        );
      })(e, t, n, s);
    (t === document.body ||
      t === window ||
      t === document ||
      t instanceof HTMLMediaElement) &&
      (function (e) {
        const t = ut(8, null, !1);
        (tn(t, q), (t.teardown = e));
      })(() => {
        t.removeEventListener(e, r, s);
      });
  }
  function fn(e) {
    for (var t = 0; t < e.length; t++) cn.add(e[t]);
    for (var n of dn) n(e);
  }
  function mn(e) {
    var t,
      n = this,
      o = n.ownerDocument,
      i = e.type,
      s = (null == (t = e.composedPath) ? void 0 : t.call(e)) || [],
      r = s[0] || e.target,
      a = 0,
      l = e.__root;
    if (l) {
      var u = s.indexOf(l);
      if (-1 !== u && (n === document || n === window))
        return void (e.__root = n);
      var c = s.indexOf(n);
      if (-1 === c) return;
      u <= c && (a = u);
    }
    if ((r = s[a] || e.target) !== n) {
      O(e, 'currentTarget', { configurable: !0, get: () => r || o });
      var d = Mt,
        p = Qt;
      (zt(null), $t(null));
      try {
        for (var f, m = []; null !== r; ) {
          var v = r.assignedSlot || r.parentNode || r.host || null;
          try {
            var h = r['__' + i];
            if (null != h && (!r.disabled || e.target === r))
              if (E(h)) {
                var [b, ...g] = h;
                b.apply(r, [e, ...g]);
              } else h.call(r, e);
          } catch (e) {
            f ? m.push(e) : (f = e);
          }
          if (e.cancelBubble || v === n || null === v) break;
          r = v;
        }
        if (f) {
          for (let e of m)
            queueMicrotask(() => {
              throw e;
            });
          throw f;
        }
      } finally {
        ((e.__root = n), delete e.currentTarget, zt(d), $t(p));
      }
    }
  }
  function vn(e) {
    var t = document.createElement('template');
    return ((t.innerHTML = e.replaceAll('<!>', '\x3c!----\x3e')), t.content);
  }
  function hn(e, t) {
    var n = Qt;
    null === n.nodes_start && ((n.nodes_start = e), (n.nodes_end = t));
  }
  function bn(e, t) {
    var n,
      o = !!(1 & t),
      i = !!(2 & t),
      s = !e.startsWith('<!>');
    return () => {
      void 0 === n && ((n = vn(s ? e : '<!>' + e)), o || (n = ot(n)));
      var t = i || Ze ? document.importNode(n, !0) : n.cloneNode(!0);
      o ? hn(ot(t), t.lastChild) : hn(t, t);
      return t;
    };
  }
  function gn(e, t, n = 'svg') {
    var o,
      i = `<${n}>${!e.startsWith('<!>') ? e : '<!>' + e}</${n}>`;
    return () => {
      if (!o) {
        var e = vn(i);
        o = ot(ot(e));
      }
      var t = o.cloneNode(!0);
      return (hn(t, t), t);
    };
  }
  function wn(e, t) {
    return gn(e, 0, 'svg');
  }
  function yn(e = '') {
    var t = nt(e + '');
    return (hn(t, t), t);
  }
  function kn() {
    var e = document.createDocumentFragment(),
      t = document.createComment(''),
      n = nt();
    return (e.append(t, n), hn(t, n), e);
  }
  function xn(e, t) {
    null !== e && e.before(t);
  }
  function En(e, t) {
    var n = null == t ? '' : 'object' == typeof t ? t + '' : t;
    n !== (e.__t ?? (e.__t = e.nodeValue)) &&
      ((e.__t = n), (e.nodeValue = n + ''));
  }
  const _n = new Map();
  let Sn = new WeakMap();
  function On(e, t, n = !1) {
    var o = e,
      i = null,
      s = null,
      r = oe,
      a = !1;
    const l = (e, t = !0) => {
      ((a = !0), d(t, e));
    };
    var u = null;
    function c() {
      null !== u && (u.lastChild.remove(), o.before(u), (u = null));
      var e = r ? i : s,
        t = r ? s : i;
      (e && Et(e),
        t &&
          yt(t, () => {
            r ? (s = null) : (i = null);
          }));
    }
    const d = (e, t) => {
      if (r !== (r = e)) {
        var n = !1,
          a = o;
        (n,
          r
            ? (i ?? (i = t && vt(() => t(a))))
            : (s ?? (s = t && vt(() => t(a)))),
          c());
      }
    };
    mt(
      () => {
        ((a = !1), t(l), a || d(null, null));
      },
      n ? W : 0,
    );
  }
  function Cn(e, t, n, o, i, s = null) {
    var r = e,
      a = { flags: t, items: new Map(), first: null };
    !(4 & t) || (r = e.appendChild(nt()));
    var l,
      u,
      c = null,
      d = !1,
      p = new Map(),
      f = _e(() => {
        var e = n();
        return E(e) ? e : null == e ? [] : S(e);
      });
    function m() {
      (!(function (e, t, n, o, i, s, r, a, l) {
        var u,
          c,
          d,
          p,
          f,
          m,
          v,
          h,
          b,
          g,
          w = !!(8 & r),
          y = !!(3 & r),
          k = t.length,
          x = n.items,
          E = n.first,
          _ = E,
          O = null,
          C = [],
          U = [];
        if (w)
          for (g = 0; g < k; g += 1)
            ((h = a((v = t[g]), g)),
              void 0 !== (b = x.get(h)) &&
                (null == (u = b.a) || u.measure(),
                (m ?? (m = new Set())).add(b)));
        for (g = 0; g < k; g += 1)
          if (((h = a((v = t[g]), g)), void 0 !== (b = x.get(h)))) {
            if (
              (y && Un(b, v, g, r),
              0 !== (b.e.f & B) &&
                (Et(b.e),
                w &&
                  (null == (c = b.a) || c.unfix(),
                  (m ?? (m = new Set())).delete(b))),
              b !== _)
            ) {
              if (void 0 !== f && f.has(b)) {
                if (C.length < U.length) {
                  var M,
                    L = U[0];
                  O = L.prev;
                  var z = C[0],
                    Q = C[C.length - 1];
                  for (M = 0; M < C.length; M += 1) Ln(C[M], L, i);
                  for (M = 0; M < U.length; M += 1) f.delete(U[M]);
                  (zn(n, z.prev, Q.next),
                    zn(n, O, z),
                    zn(n, Q, L),
                    (_ = L),
                    (O = Q),
                    (g -= 1),
                    (C = []),
                    (U = []));
                } else
                  (f.delete(b),
                    Ln(b, _, i),
                    zn(n, b.prev, b.next),
                    zn(n, b, null === O ? n.first : O.next),
                    zn(n, O, b),
                    (O = b));
                continue;
              }
              for (C = [], U = []; null !== _ && _.k !== h; )
                (0 === (_.e.f & B) && (f ?? (f = new Set())).add(_),
                  U.push(_),
                  (_ = _.next));
              if (null === _) continue;
              b = _;
            }
            (C.push(b), (O = b), (_ = b.next));
          } else {
            var $ = o.get(h);
            if (void 0 !== $) {
              (o.delete(h), x.set(h, $));
              var A = O ? O.next : _;
              (zn(n, O, $), zn(n, $, A), Ln($, A, i), (O = $));
            } else {
              O = Mn(
                _ ? _.e.nodes_start : i,
                n,
                O,
                null === O ? n.first : O.next,
                v,
                h,
                g,
                s,
                r,
                l,
              );
            }
            (x.set(h, O), (C = []), (U = []), (_ = O.next));
          }
        if (null !== _ || void 0 !== f) {
          for (var I = void 0 === f ? [] : S(f); null !== _; )
            (0 === (_.e.f & B) && I.push(_), (_ = _.next));
          var T = I.length;
          if (T > 0) {
            var N = 4 & r && 0 === k ? i : null;
            if (w) {
              for (g = 0; g < T; g += 1) null == (d = I[g].a) || d.measure();
              for (g = 0; g < T; g += 1) null == (p = I[g].a) || p.fix();
            }
            !(function (e, t, n) {
              for (var o = e.items, i = [], s = t.length, r = 0; r < s; r++)
                xt(t[r].e, i, !0);
              var a = s > 0 && 0 === i.length && null !== n;
              if (a) {
                var l = n.parentNode;
                ((l.textContent = ''),
                  l.append(n),
                  o.clear(),
                  zn(e, t[0].prev, t[s - 1].next));
              }
              kt(i, () => {
                for (var n = 0; n < s; n++) {
                  var i = t[n];
                  (a || (o.delete(i.k), zn(e, i.prev, i.next)), gt(i.e, !a));
                }
              });
            })(n, I, N);
          }
        }
        w &&
          we(() => {
            var e;
            if (void 0 !== m) for (b of m) null == (e = b.a) || e.apply();
          });
        for (var j of ((e.first = n.first && n.first.e),
        (e.last = O && O.e),
        o.values()))
          gt(j.e);
        o.clear();
      })(u, l, a, p, r, i, t, o, n),
        null !== s &&
          (0 === l.length
            ? c
              ? Et(c)
              : (c = vt(() => s(r)))
            : null !== c &&
              yt(c, () => {
                c = null;
              })));
    }
    mt(() => {
      u ?? (u = Qt);
      var e = (l = Xt(f)).length;
      (d && 0 === e) || ((d = 0 === e), m(), Xt(f));
    });
  }
  function Un(e, t, n, o) {
    (1 & o && Ke(e.v, t), 2 & o ? Ke(e.i, n) : (e.i = n));
  }
  function Mn(e, t, n, o, i, s, r, a, l, u, c) {
    var d = !!(1 & l) ? (!(16 & l) ? We(i, !1, !1) : Ve(i)) : i,
      p = 2 & l ? Ve(r) : r,
      f = { i: p, v: d, k: s, a: null, e: null, prev: n, next: o };
    try {
      if (null === e) document.createDocumentFragment().append((e = nt()));
      return (
        (f.e = vt(() => a(e, d, p, u), false)),
        (f.e.prev = n && n.e),
        (f.e.next = o && o.e),
        null === n ? c || (t.first = f) : ((n.next = f), (n.e.next = f.e)),
        null !== o && ((o.prev = f), (o.e.prev = f.e)),
        f
      );
    } finally {
    }
  }
  function Ln(e, t, n) {
    for (
      var o = e.next ? e.next.e.nodes_start : n,
        i = t ? t.e.nodes_start : n,
        s = e.e.nodes_start;
      null !== s && s !== o;

    ) {
      var r = it(s);
      (i.before(s), (s = r));
    }
  }
  function zn(e, t, n) {
    (null === t ? (e.first = n) : ((t.next = n), (t.e.next = n && n.e)),
      null !== n && ((n.prev = t), (n.e.prev = t && t.e)));
  }
  function Qn(e, t, n) {
    var o,
      i,
      s = e,
      r = null,
      a = null;
    function l() {
      (i && (yt(i), (i = null)),
        r && (r.lastChild.remove(), s.before(r), (r = null)),
        (i = a),
        (a = null));
    }
    mt(() => {
      if (o !== (o = t())) {
        var e = !1;
        if (o) {
          var i = s;
          (e, (a = vt(() => n(i, o))));
        }
        l();
      }
    }, W);
  }
  function $n(e, t, n) {
    ut(
      4,
      () => {
        var o = Zt(() => t(e, null == n ? void 0 : n()) || {});
        if (n && (null == o ? void 0 : o.update)) {
          var i = !1,
            s = {};
          (pt(() => {
            var e = n();
            (nn(e), i && re(s, e) && ((s = e), o.update(e)));
          }),
            (i = !0));
        }
        if (null == o ? void 0 : o.destroy) return () => o.destroy();
      },
      !1,
    );
  }
  const An = [...' \t\n\r\f \v\ufeff'];
  function In(e, t, n, o, i, s) {
    var r = e.__className;
    if (r !== n || void 0 === r) {
      var a = (function (e, t, n) {
        var o = null == e ? '' : '' + e;
        if ((t && (o = o ? o + ' ' + t : t), n))
          for (var i in n)
            if (n[i]) o = o ? o + ' ' + i : i;
            else if (o.length)
              for (var s = i.length, r = 0; (r = o.indexOf(i, r)) >= 0; ) {
                var a = r + s;
                (0 !== r && !An.includes(o[r - 1])) ||
                (a !== o.length && !An.includes(o[a]))
                  ? (r = a)
                  : (o =
                      (0 === r ? '' : o.substring(0, r)) + o.substring(a + 1));
              }
        return '' === o ? null : o;
      })(n, o, s);
      (null == a ? e.removeAttribute('class') : (e.className = a),
        (e.__className = n));
    } else if (s && i !== s)
      for (var l in s) {
        var u = !!s[l];
        (null != i && u === !!i[l]) || e.classList.toggle(l, u);
      }
    return s;
  }
  function Tn(e, t, n, o) {
    if (e.__style !== t) {
      var i = (function (e) {
        return null == e ? null : String(e);
      })(t);
      (null == i ? e.removeAttribute('style') : (e.style.cssText = i),
        (e.__style = t));
    }
    return o;
  }
  const Nn = Symbol('is custom element'),
    jn = Symbol('is html');
  function Dn(e, t, n, o) {
    var i = (function (e) {
      return (
        e.__attributes ??
        (e.__attributes = {
          [Nn]: e.nodeName.includes('-'),
          [jn]: e.namespaceURI === ie,
        })
      );
    })(e);
    i[t] !== (i[t] = n) &&
      ('loading' === t && (e[ee] = n),
      null == n
        ? e.removeAttribute(t)
        : 'string' != typeof n &&
            (function (e) {
              var t,
                n = qn.get(e.nodeName);
              if (n) return n;
              qn.set(e.nodeName, (n = []));
              var o = e,
                i = Element.prototype;
              for (; i !== o; ) {
                for (var s in (t = U(o))) t[s].set && n.push(s);
                o = z(o);
              }
              return n;
            })(e).includes(t)
          ? (e[t] = n)
          : e.setAttribute(t, n));
  }
  var qn = new Map();
  function Pn(e) {
    var t = e.type;
    return 'number' === t || 'range' === t;
  }
  function Fn(e) {
    return '' === e ? null : +e;
  }
  function Bn(e = !1) {
    const t = ue,
      n = t.l.u;
    if (!n) return;
    let o = () => nn(t.s);
    if (e) {
      let e = 0,
        n = {};
      const i = ke(() => {
        let o = !1;
        const i = t.s;
        for (const e in i) i[e] !== n[e] && ((n[e] = i[e]), (o = !0));
        return (o && e++, e);
      });
      o = () => Xt(i);
    }
    var i;
    (n.b.length &&
      ((i = () => {
        (Vn(t, o), I(n.b));
      }),
      lt(),
      ut(1048584, i, !0)),
      ct(() => {
        const e = Zt(() => n.m.map(A));
        return () => {
          for (const t of e) 'function' == typeof t && t();
        };
      }),
      n.a.length &&
        ct(() => {
          (Vn(t, o), I(n.a));
        }));
  }
  function Vn(e, t) {
    if (e.l.s) for (const t of e.l.s) Xt(t);
    t();
  }
  function Rn(e) {
    var t, n;
    (null === ue && ne(),
      le && null !== ue.l
        ? ((t = ue), (n = t.l), n.u ?? (n.u = { a: [], b: [], m: [] })).m.push(
            e,
          )
        : ct(() => {
            const t = Zt(e);
            if ('function' == typeof t) return t;
          }));
  }
  function Wn(e) {
    (null === ue && ne(), Rn(() => () => Zt(e)));
  }
  'undefined' != typeof window &&
    (
      (f = window.__svelte ?? (window.__svelte = {})).v ?? (f.v = new Set())
    ).add('5');
  const Jn = 'Dub+';
  function Kn() {
    return new Date().toLocaleTimeString();
  }
  function Yn(...e) {
    console.log(`[${Kn()}] ${Jn}:`, ...e);
  }
  function Hn(...e) {
    console.error(`[${Kn()}] ${Jn}:`, ...e);
  }
  function Xn(e, t = window) {
    const n = e.split('.');
    let o = t;
    for (let e = 0; e < n.length; e++) {
      if (void 0 === o[n[e]]) return !1;
      o = o[n[e]];
    }
    return !0;
  }
  function Gn(e, t = {}) {
    const n = Object.assign({}, { interval: 500, seconds: 5 }, t);
    return new Promise((t, o) => {
      let i = 0;
      const s = (1e3 * n.seconds) / n.interval,
        r = () => {
          (i++,
            !(function (e, t = window) {
              const n = t;
              for (let t = 0; t < e.length; t++)
                if (!Xn(e[t], n)) return (Yn(e[t], 'is not found yet'), !1);
              return !0;
            })(e)
              ? i < s
                ? window.setTimeout(r, n.interval)
                : o()
              : t());
        };
      r();
    });
  }
  le = !0;
  var Zn = wn(
    '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="0 0 2078.496 2083.914" enable-background="new 0 0 2078.496 2083.914" xml:space="preserve"><rect x="769.659" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#660078" width="539.178" height="539.178"></rect><g><rect x="1308.837" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#EB008B" width="537.488" height="539.178"></rect><polygon fill="#EB008B" points="2045.015,1042.035 1845.324,1311.625 1845.324,772.446 \t"></polygon></g><g><rect x="232.172" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#EB008B" width="537.487" height="539.178"></rect><polygon fill="#EB008B" points="33.481,1042.034 233.172,772.445 233.172,1311.623 \t"></polygon></g><g><rect x="769.659" y="1311.624" fill-rule="evenodd" clip-rule="evenodd" fill="#6FCBDC" width="539.178" height="537.487"></rect><polygon fill="#6FCBDC" points="1039.248,2047.802 769.659,1848.111 1308.837,1848.111 \t"></polygon></g><g><rect x="769.659" y="234.958" fill-rule="evenodd" clip-rule="evenodd" fill="#6FCBDC" width="539.178" height="537.487"></rect><polygon fill="#6FCBDC" points="1039.249,35.268 1308.837,235.958 769.659,235.958 \t"></polygon></g></svg>',
  );
  function eo(e) {
    xn(e, Zn());
  }
  const to = {
      en: {
        'Modal.confirm': 'OK',
        'Modal.cancel': 'Cancel',
        'Modal.close': 'Close',
        'Modal.defaultValue': 'Default Value',
        'Error.modal.title': 'Dub+ Error',
        'Error.modal.loggedout':
          "You're not logged in. Please login to use Dub+.",
        'Error.unknown':
          'Something went wrong starting Dub+. Please refresh and try again.',
        'Loading.text': 'Waiting for QueUp...',
        'Eta.tooltip.notInQueue': "You're not in the queue",
        'Eta.tootltip': 'ETA: {{minutes}} minutes',
        'Snooze.tooltip': 'Mute for current song',
        'Snooze.tooltip.undo': 'Cancel mute for current song',
        'SnoozeVideo.tooltip': 'Hide video for current song',
        'SnoozeVideo.tooltip.undo': 'Cancel hiding video for current song',
        'Notifcation.permission.title': 'Desktop Notification',
        'Notification.permission.denied':
          "You have dismissed, or chosen to deny, the request to allow desktop notifications. If you change your mind, you will need to reset this in your browser's site settings.",
        'Notification.permission.notSupported':
          'Sorry this browser does not support desktop notifications.  Please update your browser to the lastest version',
        'Menu.title': 'Dub+ Options',
        'general.title': 'General',
        'user-interface.title': 'User Interface',
        'settings.title': 'Settings',
        'customize.title': 'Customize',
        'contact.title': 'Contact',
        'contact.bugs': 'Report bugs on Discord',
        'Switch.on': 'On',
        'Switch.off': 'Off',
        'MenuItem.edit': 'Edit',
        'autovote.label': 'Autovote',
        'autovote.description': 'Toggles auto upvoting for every song',
        'afk.label': 'AFK Auto-respond',
        'afk.description':
          'Toggle Away from Keyboard and customize AFK message.',
        'afk.modal.title': 'Custom AFK Message',
        'afk.modal.content':
          'Enter a custom "Away From Keyboard" [AFK] message here. Message will be prefixed with \'[AFK]\'',
        'afk.modal.placeholder': 'Be right back!',
        'auto-afk.label': 'Auto AFK',
        'auto-afk.description':
          'Automatically set yourself to AFK after a certain amount of time of inactivity',
        'auto-afk.modal.title': 'Auto AFK Timer',
        'auto-afk.modal.content':
          'Enter the amount of time, in minutes, before you are set to AFK.',
        'auto-afk.modal.validation':
          'Please enter a whole number greater than 0',
        'emotes.label': 'Emotes',
        'emotes.description':
          'Adds Twitch, Bttv, and FrankerFacez emotes in chat.',
        'autocomplete.label': 'Autocomplete Emoji',
        'autocomplete.description':
          'Toggle autocompleting emojis and emotes. Shows a preview box in the chat',
        'autocomplete.preview.a11y':
          'press up and down to navigate, press enter or tab to select, press esc to close',
        'autocomplete.preview.navigate': 'navigate',
        'autocomplete.preview.select': 'select',
        'autocomplete.preview.close': 'close',
        'custom-mentions.label': 'Custom Mentions',
        'custom-mentions.description':
          'Toggle using custom mentions to trigger sounds in chat',
        'custom-mentions.modal.title': 'Custom Mentions',
        'custom-mentions.modal.content':
          'Add your custom mention triggers here (separate by comma)',
        'custom-mentions.modal.placeholder':
          'separate, custom mentions, by, comma, :heart:',
        'chat-cleaner.label': 'Chat Cleaner',
        'chat-cleaner.description':
          'Help keep CPU stress down by setting a limit of how many chat messages to keep in the chat box, deleting older messages.',
        'chat-cleaner.modal.title': 'Chat Cleaner',
        'chat-cleaner.modal.content':
          'Please specify the number of most recent chat items that will remain in your chat history',
        'chat-cleaner.modal.validation':
          'Please enter a whole number greater than, or equal to, 1',
        'chat-cleaner.modal.placeholder': '500',
        'collapsible-images.label': 'Collapsible Images',
        'collapsible-images.description': 'Make images in the chat collapsible',
        'mention-notifications.label': 'Notification on Mentions',
        'mention-notifications.description':
          'Enable desktop notifications when a user mentions you in chat',
        'pm-notifications.label': 'Notification on PM',
        'pm-notifications.description':
          'Enable desktop notifications when a user receives a private message',
        'pm-notifications.notification.title': 'You have a new PM',
        'dj-notification.label': 'DJ Notification',
        'dj-notification.description':
          'Get a notification when you are coming up to be the DJ',
        'dj-notification.modal.title': 'DJ Notification',
        'dj-notification.modal.content':
          'Please specify the position in queue you want to be notified at. Use "0" to be notified when you start playing.',
        'dj-notification.notification.title': 'DJ Alert!',
        'dj-notification.notification.content':
          'You will be DJing shortly! Make sure your song is set!',
        'dj-notification.modal.validation':
          'Please enter a whole number greater than, or equal to, 0',
        'dubs-hover.label': 'Show Dubs on Hover',
        'dubs-hover.description':
          'Show who dubs a song when hovering over the dubs count',
        'dubs-hover.no-votes': 'No {{dubType}}s have been casted yet!',
        'dubs-hover.no-grabs': 'No one has grabbed this song yet!',
        'downdubs-in-chat.label': 'Downdubs in Chat (mods only)',
        'downdubs-in-chat.description':
          'Toggle showing downdubs in the chat box (mods only)',
        'downdubs-in-chat.chat-message':
          '@{{username}} has downdubbed your song {{song_name}}',
        'updubs-in-chat.label': 'Updubs in Chat',
        'updubs-in-chat.description': 'Toggle showing updubs in the chat box',
        'updubs-in-chat.chat-message':
          '@{{username}} has updubbed your song {{song_name}}',
        'grabs-in-chat.label': 'Grabs in Chat',
        'grabs-in-chat.description': 'Toggle showing grabs in the chat box',
        'grabs-in-chat.chat-message':
          '@{{username}} has grabbed your song {{song_name}}',
        'snow.label': 'Snow',
        'snow.description': 'Make it snow!',
        'rain.label': 'Rain',
        'rain.description': 'Make it rain!',
        'fullscreen.label': 'Fullscreen',
        'fullscreen.description': 'Toggle fullscreen video mode',
        'split-chat.label': 'Split Chat',
        'split-chat.description': 'Toggle Split Chat UI enhancement',
        'hide-chat.label': 'Hide Chat',
        'hide-chat.description': 'Toggles hiding the chat box',
        'hide-video.label': 'Hide Video',
        'hide-video.description': 'Toggles hiding the video box',
        'hide-avatars.label': 'Hide Avatars',
        'hide-avatars.description':
          'Toggle hiding user avatars in the chat box',
        'hide-bg.label': 'Hide Background',
        'hide-bg.description': 'Toggle hiding background image',
        'show-timestamps.label': 'Show Timestamps',
        'show-timestamps.description':
          'Toggle always showing chat message timestamps',
        'flip-interface.label': 'Flip Interface',
        'flip-interface.description': 'Swap the video and chat positions',
        'pin-menu.label': 'Pin Menu',
        'pin-menu.description':
          'Pin the Dub+ menu to the left or right side. Use the action button to toggle which side it is pinned to. Only works in the non-mobile view',
        'pin-menu.secondaryAction.description':
          'Click to toggle between pinning to the left or right side',
        'spacebar-mute.label': 'Spacebar Mute',
        'spacebar-mute.description':
          'Turn on/off the ability to mute current song with the spacebar',
        'warn-redirect.label': 'Warn on Navigation',
        'warn-redirect.description':
          'Warns you when accidentally clicking on a link that takes you out of QueUp',
        'community-theme.label': 'Community Theme',
        'community-theme.description': 'Toggle Community CSS theme',
        'custom-css.label': 'Custom CSS',
        'custom-css.description': 'Add your own custom CSS.',
        'custom-css.modal.title': 'Custom CSS',
        'custom-css.modal.content': 'Enter a url location for your custom css',
        'custom-css.modal.placeholder': 'https://example.com/example.css',
        'custom-css.modal.validation': 'Invalid URL',
        'custom-bg.label': 'Custom Background',
        'custom-bg.description': 'Add your own custom background.',
        'custom-bg.modal.title': 'Custom Background Image',
        'custom-bg.modal.content':
          'Enter the full URL of an image. We recommend using a .jpg file. Leave blank to remove the current background image',
        'custom-bg.modal.placeholder': 'https://example.com/big-image.jpg',
        'custom-notification-sound.label': 'Custom Notification Sound',
        'custom-notification-sound.description':
          'Change the notification sound to a custom one.',
        'custom-notification-sound.modal.title': 'Custom Notification Sound',
        'custom-notification-sound.modal.content':
          "Enter the full URL of a sound file. We recommend using an .mp3 file. Leave blank to go back to QueUp's default sound",
        'custom-notification-sound.modal.placeholder':
          'https://example.com/sweet-sound.mp3',
        'custom-notification-sound.modal.validation':
          "Can't play sound from this URL. Please enter a valid URL to an MP3 file.",
        'grab-response.label': 'Grab Response',
        'grab-response.description':
          'Sends a chat message when you grab a song',
        'grab-response.modal.title': 'Grab Response',
        'grab-response.modal.content':
          'Enter a message to send when you grab a song',
        'grab-response.modal.placeholder': 'Thanks for the song!',
      },
    },
    no = Xe({ current: 'en' });
  function oo(e, t = {}) {
    return (function (e, t, n) {
      let o = to[e][t];
      return (
        o || 'en' === e || (o = to.en[t]),
        o
          ? (Object.keys(n).forEach((e) => {
              const t = new RegExp(`{{${e}}}`, 'g');
              o = o.replace(t, n[e]);
            }),
            o)
          : (Hn(`No translation found for ${e}.${t}`), t)
      );
    })(no.current, e, t);
  }
  var io = bn(
    '<div class="dubplus-waiting svelte-16mmbc"><div style="width: 26px; margin-right:5px"><!></div> <span style="flex: 1;"> </span></div>',
  );
  const so = Xe({
    id: '',
    open: !1,
    title: 'Dub+',
    content: '',
    value: '',
    placeholder: '',
    defaultValue: '',
    maxlength: 999,
    validation: () => !0,
    onConfirm: () => !0,
    onCancel: () => {},
  });
  function ro(e) {
    ((so.open = e.open ?? !1),
      (so.title = e.title || 'Dub+'),
      (so.content = e.content || ''),
      (so.value = e.value || ''),
      (so.placeholder = e.placeholder || ''),
      (so.defaultValue = e.defaultValue),
      (so.maxlength = e.maxlength || 999),
      (so.onConfirm = e.onConfirm),
      (so.onCancel = e.onCancel),
      (so.validation = e.validation || (() => !0)));
  }
  var ao = bn(
      '<div class="default svelte-ascx4b"><span class="default-label svelte-ascx4b"> </span> <span class="default-value svelte-ascx4b"> </span></div>',
    ),
    lo = bn('<textarea class="svelte-ascx4b">\n      </textarea>'),
    uo = bn('<p class="dp-modal--error svelte-ascx4b"> </p>'),
    co = bn(
      '<button class="dp-modal--cancel cancel svelte-ascx4b"> </button> <button class="dp-modal--confirm confirm svelte-ascx4b"> </button>',
      1,
    ),
    po = bn('<button class="dp-modal--cancel cancel svelte-ascx4b"> </button>'),
    fo = bn(
      '<dialog id="dubplus-dialog" class="dp-modal svelte-ascx4b"><h1 class="svelte-ascx4b"> </h1> <div class="dp-modal--content content svelte-ascx4b"><p class="svelte-ascx4b"> </p> <!> <!> <!></div> <div class="dp-modal--buttons buttons svelte-ascx4b"><!></div></dialog>',
    );
  function mo(e, t) {
    de(t, !0);
    let n,
      o = Re('');
    (Rn(() => {
      ((n = document.getElementById('dubplus-dialog')),
        n.addEventListener('close', () => {
          so.open = !1;
        }));
    }),
      ct(() => {
        so.open && n && !n.open && n.showModal();
      }));
    var i = fo(),
      s = st(i),
      r = st(s),
      a = at(s, 2),
      l = st(a),
      u = st(l),
      c = at(l, 2),
      d = (e) => {
        var t = ao(),
          n = st(t),
          o = st(n),
          i = st(at(n, 2));
        (ft(
          (e) => {
            (En(o, `${e ?? ''}:`), En(i, so.defaultValue));
          },
          [() => oo('Modal.defaultValue')],
        ),
          xn(e, t));
      };
    On(c, (e) => {
      so.defaultValue && e(d);
    });
    var p = at(c, 2),
      f = (e) => {
        var t = lo();
        (ft(() => {
          (Dn(t, 'placeholder', so.placeholder),
            Dn(t, 'maxlength', so.maxlength < 999 ? so.maxlength : 999));
        }),
          (function (e, t, n = t) {
            var o = fe(),
              i = new WeakSet();
            (un(e, 'input', (s) => {
              var r = s ? e.defaultValue : e.value;
              if (
                ((r = Pn(e) ? Fn(r) : r),
                n(r),
                null !== ze && i.add(ze),
                o && r !== (r = t()))
              ) {
                var a = e.selectionStart,
                  l = e.selectionEnd;
                ((e.value = r ?? ''),
                  null !== l &&
                    ((e.selectionStart = a),
                    (e.selectionEnd = Math.min(l, e.value.length))));
              }
            }),
              null == Zt(t) &&
                e.value &&
                (n(Pn(e) ? Fn(e.value) : e.value), null !== ze && i.add(ze)),
              pt(() => {
                var n = t();
                (e === document.activeElement && i.has(ze)) ||
                  (Pn(e) && n === Fn(e.value)) ||
                  (('date' !== e.type || n || e.value) &&
                    n !== e.value &&
                    (e.value = n ?? ''));
              }));
          })(
            t,
            () => so.value,
            (e) => (so.value = e),
          ),
          xn(e, t));
      };
    On(p, (e) => {
      (so.placeholder || so.value) && e(f);
    });
    var m = at(p, 2),
      v = (e) => {
        var t = uo(),
          n = st(t);
        (ft(() => En(n, Xt(o))), xn(e, t));
      };
    On(m, (e) => {
      Xt(o) && e(v);
    });
    var h = st(at(a, 2)),
      b = (e) => {
        var t = co(),
          i = rt(t);
        i.__click = () => {
          (n.close(),
            (so.open = !1),
            Je(o, ''),
            'function' == typeof so.onCancel && so.onCancel());
        };
        var s = st(i),
          r = at(i, 2);
        r.__click = () => {
          const e = so.validation(so.value);
          !0 === e
            ? (n.close(), (so.open = !1), so.onConfirm(so.value), Je(o, ''))
            : Je(o, e, !0);
        };
        var a = st(r);
        (ft(
          (e, t) => {
            (En(s, e), En(a, t));
          },
          [() => oo('Modal.cancel'), () => oo('Modal.confirm')],
        ),
          xn(e, t));
      },
      g = (e) => {
        var t = po();
        t.__click = () => {
          (n.close(), (so.open = !1), Je(o, ''));
        };
        var i = st(t);
        (ft((e) => En(i, e), [() => oo('Modal.close')]), xn(e, t));
      };
    (On(h, (e) => {
      'function' == typeof so.onConfirm ? e(b) : e(g, !1);
    }),
      ft(() => {
        (En(r, so.title), En(u, so.content));
      }),
      xn(e, i),
      pe());
  }
  fn(['click']);
  const vo = (e, { to: t, position: n = 'append' }) => {
    ct(() => {
      var o;
      e.id && (null == (o = document.getElementById(e.id)) || o.remove());
      const i = document.querySelector(t);
      if (!i) throw new Error(`teleport container not found: ${t}`);
      return (
        'append' === n ? i.appendChild(e) : i.prepend(e),
        () => {
          e.remove();
        }
      );
    });
  };
  function ho() {
    return document.querySelector('#chat-txt-message');
  }
  function bo(e = '') {
    return document.querySelectorAll(`ul.chat-main > li${e}`);
  }
  function go() {
    return document.querySelectorAll('.chat-main > li .autolink-image');
  }
  function wo() {
    return document.querySelector('.backstretch img');
  }
  function yo() {
    return document.querySelector('.queue-position');
  }
  const ko = '.player_sharing';
  var xo = () => {
      document
        .querySelector('.dubplus-menu')
        .classList.toggle('dubplus-menu-open');
    },
    Eo = bn(
      '<button id="dubplus-menu-icon" type="button" aria-label="Dub+ menu" class="dubplus-icon svelte-9z7rrn"><!></button>',
    );
  fn(['click']);
  const _o = {
      'dubplus-autovote': 'autovote',
      'dubplus-afk': 'afk',
      'dubplus-emotes': 'emotes',
      'dubplus-autocomplete': 'autocomplete',
      custom_mentions: 'custom-mentions',
      'chat-cleaner': 'chat-cleaner',
      mention_notifications: 'mention-notifications',
      dubplus_pm_notifications: 'pm-notifications',
      dj_notification: 'dj-notification',
      'dubplus-dubs-hover': 'dubs-hover',
      'dubplus-downdubs': 'downdubs-in-chat',
      'dubplus-updubs': 'updubs-in-chat',
      'dubplus-grabschat': 'grabs-in-chat',
      'dubplus-snow': 'snow',
      'dubplus-rain': 'rain',
      'dubplus-fullscreen': 'fullscreen',
      'dubplus-split-chat': 'split-chat',
      'dubplus-video-only': 'hide-chat',
      'dubplus-chat-only': 'hide-video',
      'dubplus-hide-avatars': 'hide-avatars',
      'dubplus-hide-bg': 'hide-bg',
      'dubplus-show-timestamp': 'show-timestamps',
      'dubplus-spacebar-mute': 'spacebar-mute',
      warn_redirect: 'warn-redirect',
      'dubplus-comm-theme': 'community-theme',
      'dubplus-custom-css': 'custom-css',
      'dubplus-custom-bg': 'custom-bg',
      'dubplus-custom-notification-sound': 'custom-notification-sound',
    },
    So = {
      customAfkMessage: _o['dubplus-afk'],
      custom_mentions: _o.custom_mentions,
      chat_cleaner: _o['chat-cleaner'],
      dj_notification: _o.dj_notification,
      css: _o['dubplus-custom-css'],
      bg: _o['dubplus-custom-bg'],
      notificationSound: _o['dubplus-custom-notification-sound'],
      'dubplus-custom-notification-sound':
        _o['dubplus-custom-notification-sound'],
    };
  const Oo = 'dubplusUserSettingsV2';
  let Co = Xe(
    Object.assign(
      {},
      {
        options: {},
        menu: {
          general: 'open',
          'user-interface': 'open',
          settings: 'open',
          customize: 'open',
          contact: 'open',
        },
        custom: {},
      },
      (function () {
        try {
          const e = JSON.parse(localStorage.getItem(Oo));
          if (e) return e;
        } catch (e) {
          Yn('Error loading v2 settings, trying old settings. Error:', e);
        }
        try {
          const e = JSON.parse(localStorage.getItem('dubplusUserSettings'));
          if (e)
            return (function (e) {
              Yn('Old Settings', e);
              const t = { options: {}, menu: { ...e.menu }, custom: {} };
              for (const [n, o] of Object.entries(e.options)) {
                const e = _o[n];
                try {
                  t.options[e] = o;
                } catch (t) {
                  Hn('Error converting options', t.message, n, e, o);
                }
              }
              for (const [n, o] of Object.entries(e.custom)) {
                const e = So[n];
                try {
                  t.custom[e] = o;
                } catch (t) {
                  Hn('Error converting custom', t.message, n, e, o);
                }
              }
              return t;
            })(e);
        } catch (e) {
          Yn('Error loading old settings:', e);
        }
        return {};
      })(),
    ),
  );
  function Uo() {
    try {
      localStorage.setItem(Oo, JSON.stringify(Co));
    } catch (e) {
      Hn('Error saving user settings:', e);
    }
  }
  function Mo(e, t, n) {
    if ('option' === e) return ((Co.options[t] = n), void Uo());
    if ('custom' === e) return ((Co.custom[t] = n), void Uo());
    if ('menu' === e) return ((Co.menu[t] = n), void Uo());
    throw new Error(`Invalid section: "${e}"`);
  }
  var Lo = bn(
    '<button type="button" class="dubplus-menu-section-header svelte-31yg9a"><span></span> <p class="svelte-31yg9a"> </p></button>',
  );
  function zo(e, t) {
    de(t, !0);
    let n = Re('down'),
      o = Re(!0);
    ct(() => {
      'closed' === Co.menu[t.settingsId]
        ? (Je(n, 'right'), Je(o, !1))
        : (Je(n, 'down'), Je(o, !0));
    });
    var i = Lo();
    i.__click = function () {
      ((Co.menu[t.settingsId] =
        'closed' === Co.menu[t.settingsId] ? 'open' : 'closed'),
        Mo('menu', t.settingsId, Co.menu[t.settingsId]));
    };
    var s = st(i),
      r = st(at(s, 2));
    (ft(() => {
      (Dn(i, 'id', `dubplus-menu-section-header-${t.settingsId}`),
        Dn(i, 'aria-expanded', Xt(o)),
        Dn(i, 'aria-controls', `dubplus-menu-section-${t.settingsId}`),
        In(s, 0, `fa fa-angle-${Xt(n) ?? ''}`, 'svelte-31yg9a'),
        En(r, t.name));
    }),
      xn(e, i),
      pe());
  }
  fn(['click']);
  var Qo = bn(
    '<ul class="dubplus-menu-section svelte-1pjvan3" role="region"><!></ul>',
  );
  function $o(e, t) {
    var n = Qo();
    (!(function (e, t, ...n) {
      var o,
        i = e,
        s = $;
      mt(() => {
        s !== (s = t()) &&
          (o && (gt(o), (o = null)), (o = vt(() => s(i, ...n))));
      }, W);
    })(st(n), () => t.children),
      ft(() => {
        (Dn(n, 'id', `dubplus-menu-section-${t.settingsId}`),
          Dn(
            n,
            'aria-labelledby',
            `dubplus-menu-section-header-${t.settingsId}`,
          ));
      }),
      xn(e, n));
  }
  var Ao = bn(
    '<li class="dubplus-menu-icon svelte-1oilhp7"><!> <a class="dubplus-menu-label svelte-1oilhp7" target="_blank"> </a></li>',
  );
  function Io(e, t) {
    var n = Ao(),
      o = st(n);
    Qn(
      o,
      () => t.icon,
      (e, t) => {
        t(e, {});
      },
    );
    var i = at(o, 2),
      s = st(i);
    (ft(() => {
      (Dn(i, 'href', t.href), En(s, t.text));
    }),
      xn(e, n));
  }
  var To = wn(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 0c53 0 96 43 96 96l0 3.6c0 15.7-12.7 28.4-28.4 28.4l-135.1 0c-15.7 0-28.4-12.7-28.4-28.4l0-3.6c0-53 43-96 96-96zM41.4 105.4c12.5-12.5 32.8-12.5 45.3 0l64 64c.7 .7 1.3 1.4 1.9 2.1c14.2-7.3 30.4-11.4 47.5-11.4l112 0c17.1 0 33.2 4.1 47.5 11.4c.6-.7 1.2-1.4 1.9-2.1l64-64c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-64 64c-.7 .7-1.4 1.3-2.1 1.9c6.2 12 10.1 25.3 11.1 39.5l64.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c0 24.6-5.5 47.8-15.4 68.6c2.2 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-63.1-63.1c-24.5 21.8-55.8 36.2-90.3 39.6L272 240c0-8.8-7.2-16-16-16s-16 7.2-16 16l0 239.2c-34.5-3.4-65.8-17.8-90.3-39.6L86.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l64-64c1.9-1.9 3.9-3.4 6-4.8C101.5 367.8 96 344.6 96 320l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64.3 0c1.1-14.1 5-27.5 11.1-39.5c-.7-.6-1.4-1.2-2.1-1.9l-64-64c-12.5-12.5-12.5-32.8 0-45.3z"></path></svg>',
  );
  function No(e) {
    xn(e, To());
  }
  var jo = wn(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32zM305.9 166.4c20.6 0 37.3-16.7 37.3-37.3s-16.7-37.3-37.3-37.3c-18 0-33.1 12.8-36.6 29.8c-30.2 3.2-53.8 28.8-53.8 59.9l0 .2c-32.8 1.4-62.8 10.7-86.6 25.5c-8.8-6.8-19.9-10.9-32-10.9c-28.9 0-52.3 23.4-52.3 52.3c0 21 12.3 39 30.1 47.4c1.7 60.7 67.9 109.6 149.3 109.6s147.6-48.9 149.3-109.7c17.7-8.4 29.9-26.4 29.9-47.3c0-28.9-23.4-52.3-52.3-52.3c-12 0-23 4-31.9 10.8c-24-14.9-54.3-24.2-87.5-25.4l0-.1c0-22.2 16.5-40.7 37.9-43.7l0 0c3.9 16.5 18.7 28.7 36.3 28.7zM155 248.1c14.6 0 25.8 15.4 25 34.4s-11.8 25.9-26.5 25.9s-27.5-7.7-26.6-26.7s13.5-33.5 28.1-33.5zm166.4 33.5c.9 19-12 26.7-26.6 26.7s-25.6-6.9-26.5-25.9c-.9-19 10.3-34.4 25-34.4s27.3 14.6 28.1 33.5zm-42.1 49.6c-9 21.5-30.3 36.7-55.1 36.7s-46.1-15.1-55.1-36.7c-1.1-2.6 .7-5.4 3.4-5.7c16.1-1.6 33.5-2.5 51.7-2.5s35.6 .9 51.7 2.5c2.7 .3 4.5 3.1 3.4 5.7z"></path></svg>',
  );
  function Do(e) {
    xn(e, jo());
  }
  var qo = wn(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64h98.2V334.2H109.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H255V480H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"></path></svg>',
  );
  function Po(e) {
    xn(e, qo());
  }
  var Fo = wn(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM351.3 199.3v0c0 86.7-66 186.6-186.6 186.6c-37.2 0-71.7-10.8-100.7-29.4c5.3 .6 10.4 .8 15.8 .8c30.7 0 58.9-10.4 81.4-28c-28.8-.6-53-19.5-61.3-45.5c10.1 1.5 19.2 1.5 29.6-1.2c-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3c-9-6-16.4-14.1-21.5-23.6s-7.8-20.2-7.7-31c0-12.2 3.2-23.4 8.9-33.1c32.3 39.8 80.8 65.8 135.2 68.6c-9.3-44.5 24-80.6 64-80.6c18.9 0 35.9 7.9 47.9 20.7c14.8-2.8 29-8.3 41.6-15.8c-4.9 15.2-15.2 28-28.8 36.1c13.2-1.4 26-5.1 37.8-10.2c-8.9 13.1-20.1 24.7-32.9 34c.2 2.8 .2 5.7 .2 8.5z"></path></svg>',
  );
  function Bo(e) {
    xn(e, Fo());
  }
  var Vo = bn('<!> <!> <!> <!>', 1),
    Ro = bn('<!> <!>', 1);
  function Wo(e, t, n) {
    t.disabled ||
      ('Enter' !== e.key && ' ' !== e.key) ||
      (e.preventDefault(), n());
  }
  function Jo(e, t, n) {
    t.disabled || n();
  }
  var Ko = bn(
    '<div role="switch" tabindex="0" class="svelte-1mny4ma"><span class="dubplus-switch svelte-1mny4ma"><span class="svelte-1mny4ma"></span></span> <span class="dubplus-switch-label svelte-1mny4ma"> </span></div>',
  );
  fn(['click', 'keydown']);
  var Yo = wn(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"></path></svg>',
  );
  function Ho(e) {
    xn(e, Yo());
  }
  function Xo(e) {
    return (
      window.QueUp.helpers.isSiteAdmin(e) ||
      window.QueUp.room.users.getIfOwner(e) ||
      window.QueUp.room.users.getIfManager(e) ||
      window.QueUp.room.users.getIfMod(e)
    );
  }
  var Go = bn(
      '<button type="button" class="svelte-1dzj03i"><!> <span class="sr-only"> </span></button>',
    ),
    Zo = bn(
      '<button type="button" class="svelte-1dzj03i"><!> <span class="sr-only"> </span></button>',
    ),
    ei = bn('<li><!> <!> <!></li>');
  function ti(e, t) {
    var n;
    de(t, !0);
    const o = (null == (n = t.secondaryAction) ? void 0 : n.icon) || Ho;
    function i() {
      (ro({
        title: oo(t.customize.title),
        content: oo(t.customize.content),
        placeholder: oo(t.customize.placeholder),
        defaultValue: t.customize.defaultValue
          ? oo(t.customize.defaultValue)
          : '',
        maxlength: t.customize.maxlength,
        value: Co.custom[t.id] || '',
        validation: t.customize.validation,
        onConfirm: (e) => {
          (Mo('custom', t.id, e),
            '' !== e.trim() ||
              t.customize.defaultValue ||
              (Mo('option', t.id, !1), t.turnOff()),
            'function' == typeof t.customize.onConfirm &&
              t.customize.onConfirm(e));
        },
        onCancel: () => {
          (t.customize.defaultValue ||
            (void 0 !== Co.custom[t.id] && '' !== Co.custom[t.id]) ||
            (Mo('option', t.id, !1), t.turnOff()),
            'function' == typeof t.customize.onCancel &&
              t.customize.onCancel());
        },
      }),
        (so.open = !0));
    }
    (Rn(() => {
      if ((t.init && t.init(), Co.options[t.id])) {
        (!t.modOnly || Xo(window.QueUp.session.id)) && t.turnOn(!0);
      }
    }),
      Wn(() => {
        Co.options[t.id] && t.turnOff();
      }));
    var s = ei();
    let r;
    var a = st(s);
    {
      let e = Ee(() => !!t.modOnly && !Xo(window.QueUp.session.id)),
        n = Ee(() => oo(t.label));
      !(function (e, t) {
        function n() {
          ((Co.options[t.optionId] = !Co.options[t.optionId]),
            t.onToggle(Co.options[t.optionId]));
        }
        de(t, !0);
        var o = Ko();
        ((o.__click = [Jo, t, n]), (o.__keydown = [Wo, t, n]));
        var i = at(st(o), 2),
          s = st(i);
        (ft(() => {
          (Dn(o, 'aria-disabled', t.disabled ? 'true' : 'false'),
            Dn(o, 'aria-checked', Co.options[t.optionId] ? 'true' : 'false'),
            En(s, t.label));
        }),
          xn(e, o),
          pe());
      })(a, {
        get disabled() {
          return Xt(e);
        },
        get label() {
          return Xt(n);
        },
        onToggle: (e) => {
          !t.customize || !0 !== e || Co.custom[t.id]
            ? (Mo('option', t.id, e), e ? t.turnOn() : t.turnOff())
            : i();
        },
        get optionId() {
          return t.id;
        },
      });
    }
    var l = at(a, 2),
      u = (e) => {
        var t = Go();
        t.__click = i;
        var n = st(t);
        Ho(n);
        var o = st(at(n, 2));
        (ft((e) => En(o, e), [() => oo('MenuItem.edit')]), xn(e, t));
      };
    On(l, (e) => {
      t.customize && e(u);
    });
    var c = at(l, 2),
      d = (e) => {
        var n = Zo();
        n.__click = function (...e) {
          var n;
          null == (n = t.secondaryAction.onClick) || n.apply(this, e);
        };
        var i = st(n);
        o(i, {});
        var s = st(at(i, 2));
        (ft(
          (e, t) => {
            (Dn(n, 'title', e), En(s, t));
          },
          [
            () => oo(t.secondaryAction.description),
            () => oo(t.secondaryAction.description),
          ],
        ),
          xn(e, n));
      };
    (On(c, (e) => {
      t.secondaryAction && e(d);
    }),
      ft(
        (e, n) => {
          (Dn(s, 'id', `dubplus-${t.id}`),
            Dn(s, 'title', e),
            (r = In(s, 0, 'svelte-1dzj03i', null, r, n)));
        },
        [
          () => oo(t.description),
          () => ({ disabled: !!t.modOnly && !Xo(window.QueUp.session.id) }),
        ],
      ),
      xn(e, s),
      pe());
  }
  fn(['click']);
  const ni = 'realtime:room_playlist-dub',
    oi = 'realtime:room_playlist-queue-update-grabs',
    ii = 'realtime:user-leave',
    si = 'realtime:room_playlist-update',
    ri = 'realtime:chat-message',
    ai = 'realtime:new-message';
  function li() {
    var e, t, n;
    null ==
      (n =
        null == (t = null == (e = window.QueUp) ? void 0 : e.playerController)
          ? void 0
          : t.voteUp) || n.click();
  }
  const ui = {
    id: 'autovote',
    label: 'autovote.label',
    description: 'autovote.description',
    category: 'general',
    turnOff() {
      window.QueUp.Events.unbind(si, li);
    },
    turnOn() {
      (li(), window.QueUp.Events.bind(si, li));
    },
  };
  function ci(e, t) {
    const n = document.createElement('li');
    n.className = `dubplus-chat-system ${e}`;
    const o = document.createElement('div');
    ((o.className = 'chatDelete'),
      (o.onclick = function (e) {
        e.target.parentElement.remove();
      }));
    const i = document.createElement('span');
    ((i.className = 'icon-close'), o.appendChild(i), n.appendChild(o));
    const s = document.createElement('div');
    ((s.className = 'text'),
      (s.textContent = t),
      n.appendChild(s),
      document.querySelector('ul.chat-main').appendChild(n));
  }
  function di(e) {
    const t = ho(),
      n = t.value;
    ((t.value = e), window.QueUp.room.chat.sendMessage(), n && (t.value = n));
  }
  let pi = !0;
  function fi(e) {
    if (!pi) return;
    const t = e.message,
      n = window.QueUp.session.get('username');
    if (
      t.includes(`@${n}`) &&
      window.QueUp.session.id !== e.user.userInfo.userid
    ) {
      let e = '';
      ((e = Co.custom.afk
        ? `[AFK] ${Co.custom.afk}`
        : `[AFK] ${oo('afk.modal.placeholder')}`),
        di(e),
        (pi = !1),
        setTimeout(() => {
          pi = !0;
        }, 3e4));
    }
  }
  const mi = {
    id: 'afk',
    label: 'afk.label',
    description: 'afk.description',
    category: 'general',
    turnOn() {
      window.QueUp.Events.bind(ri, fi);
    },
    turnOff() {
      window.QueUp.Events.unbind(ri, fi);
    },
    custom: {
      title: 'afk.modal.title',
      content: 'afk.modal.content',
      placeholder: 'afk.modal.placeholder',
      defaultValue: 'afk.modal.placeholder',
      maxlength: 255,
    },
  };
  const vi = new (class {
    constructor() {
      this.db = null;
      const e = window.indexedDB.open('d2', 1),
        t = this;
      ((e.onsuccess = function () {
        t.db = this.result;
      }),
        (e.onerror = function (e) {
          console.error('Dub+', 'indexedDB request error:', e);
        }),
        (e.onupgradeneeded = function () {
          ((t.db = null),
            (this.result.createObjectStore('s', {
              keyPath: 'k',
            }).transaction.oncomplete = function () {
              t.db = this.db;
            }));
        }));
    }
    get(e) {
      return new Promise((t) => {
        this.db
          ? (this.db.transaction('s').objectStore('s').get(e).onsuccess =
              function () {
                var e;
                t((null == (e = this.result) ? void 0 : e.v) || null);
              })
          : setTimeout(() => {
              this.get(e).then(t);
            }, 100);
      });
    }
    set(e, t) {
      this.db
        .transaction('s', 'readwrite')
        .objectStore('s')
        .put({ k: e, v: t });
    }
  })();
  const hi = {
    emoji: {
      template: (e) => (
        (e = e.replace(/:/g, '')),
        `${window.emojify.defaultConfig.img_dir}/${encodeURI(e)}.png`
      ),
    },
    twitchJSONSLoaded: !1,
    bttvJSONSLoaded: !1,
    frankerfacezJSONLoaded: !1,
    twitch: {
      template: (e) => `//static-cdn.jtvnw.net/emoticons/v1/${e}/3.0`,
      emotesMap: new Map(),
    },
    bttv: {
      template: (e) => `//cdn.betterttv.net/emote/${e}/3x`,
      emotesMap: new Map(),
    },
    frankerFacez: {
      template: (e) => `//cdn.frankerfacez.com/emoticon/${e}/1`,
      emotesMap: new Map(),
    },
    shouldUpdateAPIs: (e) =>
      vi.get(`${e}_api`).then((t) => {
        if (t)
          try {
            if (void 0 !== JSON.parse(t).error) return !0;
          } catch {
            return !0;
          }
        const n = Date.now(),
          o = parseInt(localStorage.getItem(`${e}_api_timestamp`));
        return isNaN(o) || n - o > 432e6 || !t;
      }),
    loadTwitchEmotes() {
      return this.twitchJSONSLoaded
        ? Promise.resolve()
        : this.shouldUpdateAPIs('twitch').then((e) =>
            e
              ? (Yn('twitch', 'loading from api'),
                fetch(
                  '//cdn.jsdelivr.net/gh/Jiiks/BetterDiscordApp/data/emotedata_twitch_global.json',
                )
                  .then((e) => e.json())
                  .then((e) => {
                    const t = {};
                    for (const n in e.emotes)
                      t[n] || (t[n] = e.emotes[n].image_id);
                    (localStorage.setItem(
                      'twitch_api_timestamp',
                      Date.now().toString(),
                    ),
                      vi.set('twitch_api', JSON.stringify(t)),
                      hi.processTwitchEmotes(t));
                  })
                  .catch((e) => Hn(e)))
              : vi.get('twitch_api').then((e) => {
                  Yn('twitch', 'loading from IndexedDB');
                  const t = JSON.parse(e);
                  hi.processTwitchEmotes(t);
                }),
          );
    },
    loadBTTVEmotes() {
      return this.bttvJSONSLoaded
        ? Promise.resolve()
        : this.shouldUpdateAPIs('bttv').then((e) =>
            e
              ? (Yn('bttv', 'loading from api'),
                fetch('//api.betterttv.net/3/cached/emotes/global')
                  .then((e) => e.json())
                  .then((e) => {
                    const t = {};
                    (e.forEach((e) => {
                      t[e.code] || (t[e.code] = e.id);
                    }),
                      localStorage.setItem(
                        'bttv_api_timestamp',
                        Date.now().toString(),
                      ),
                      vi.set('bttv_api', JSON.stringify(t)),
                      hi.processBTTVEmotes(t));
                  })
                  .catch((e) => Hn(e)))
              : vi.get('bttv_api').then((e) => {
                  Yn('bttv', 'loading from IndexedDB');
                  const t = JSON.parse(e);
                  hi.processBTTVEmotes(t);
                }),
          );
    },
    loadFrankerFacez() {
      return this.frankerfacezJSONLoaded
        ? Promise.resolve()
        : this.shouldUpdateAPIs('frankerfacez').then((e) =>
            e
              ? (Yn('frankerfacez', 'loading from api'),
                fetch(
                  '//api.frankerfacez.com/v1/emoticons?per_page=200&private=off&sort=count-desc',
                )
                  .then((e) => e.json())
                  .then((e) => {
                    const t = e;
                    (localStorage.setItem(
                      'frankerfacez_api_timestamp',
                      Date.now().toString(),
                    ),
                      vi.set('frankerfacez_api', JSON.stringify(t)),
                      hi.processFrankerFacez(t));
                  })
                  .catch((e) => Hn(e)))
              : vi.get('frankerfacez_api').then((e) => {
                  Yn('frankerfacez', 'loading from IndexedDB');
                  const t = JSON.parse(e);
                  hi.processFrankerFacez(t);
                }),
          );
    },
    processTwitchEmotes(e) {
      for (const t in e)
        if (Object.hasOwn(e, t)) {
          const n = t.toLowerCase();
          window.emojify.emojiNames.includes(n)
            ? this.twitch.emotesMap.set(`${n}_twitch`, e[t])
            : this.twitch.emotesMap.set(n, e[t]);
        }
      this.twitchJSONSLoaded = !0;
    },
    processBTTVEmotes(e) {
      for (const t in e)
        if (Object.hasOwn(e, t)) {
          const n = t.toLowerCase();
          if (t.includes(':')) continue;
          window.emojify.emojiNames.includes(n) || this.twitch.emotesMap.has(n)
            ? this.bttv.emotesMap.set(`${n}_bttv`, e[t])
            : this.bttv.emotesMap.set(n, e[t]);
        }
      this.bttvJSONSLoaded = !0;
    },
    processFrankerFacez(e) {
      for (const t of e.emoticons) {
        const e = t.name,
          n = e.toLowerCase();
        e.includes(':') ||
          (window.emojify.emojiNames.includes(n) ||
          this.twitch.emotesMap.has(n) ||
          this.bttv.emotesMap.has(n)
            ? this.frankerFacez.emotesMap.set(`${n}_ffz`, t.id)
            : this.frankerFacez.emotesMap.set(n, t.id));
      }
      this.frankerfacezJSONLoaded = !0;
    },
    findMatchingEmotes(e, t = !1) {
      const n = [];
      return (
        window.emojify.emojiNames.forEach((t) => {
          t.includes(e) &&
            n.push({
              src: this.emoji.template(t),
              text: t,
              alt: t,
              platform: 'emojify',
            });
        }),
        t
          ? (Array.from(this.twitch.emotesMap.keys()).forEach((t) => {
              t.includes(e) &&
                n.push({
                  src: this.twitch.template(this.twitch.emotesMap.get(t)),
                  text: t,
                  alt: t,
                  platform: 'twitch',
                });
            }),
            Array.from(this.bttv.emotesMap.keys()).forEach((t) => {
              t.includes(e) &&
                n.push({
                  src: this.bttv.template(this.bttv.emotesMap.get(t)),
                  text: t,
                  alt: t,
                  platform: 'bttv',
                });
            }),
            Array.from(this.frankerFacez.emotesMap.keys()).forEach((t) => {
              t.includes(e) &&
                n.push({
                  src: this.frankerFacez.template(
                    this.frankerFacez.emotesMap.get(t),
                  ),
                  text: t,
                  alt: t,
                  platform: 'ffz',
                });
            }),
            n)
          : n
      );
    },
  };
  function bi(e, t, n, o, i) {
    const s = document.createElement('img');
    return (
      (s.className = `emoji ${e}-emote`),
      (s.title = n),
      (s.alt = n),
      (s.src = t),
      s
    );
  }
  function gi(e) {
    e.querySelectorAll('.text p').forEach((e) => {
      if (
        !e.hasAttribute('dubplus-emotes-processed') &&
        '' !== (null == e ? void 0 : e.textContent.trim())
      ) {
        const t = (function (e) {
          const t = /(:[^: ]+:)/g,
            n = e.split(t),
            o = [];
          return (
            n.forEach((e) => {
              if (e.match(t)) {
                const t = e.toLowerCase().replace(/^:/, '').replace(/:$/, '');
                if (hi.twitchJSONSLoaded && hi.twitch.emotesMap.has(t)) {
                  const e = hi.twitch.emotesMap.get(t),
                    n = bi('twitch', hi.twitch.template(e), t);
                  o.push(n);
                } else if (hi.bttvJSONSLoaded && hi.bttv.emotesMap.has(t)) {
                  const e = hi.bttv.emotesMap.get(t),
                    n = bi('bttv', hi.bttv.template(e), t);
                  o.push(n);
                } else if (
                  hi.frankerfacezJSONLoaded &&
                  hi.frankerFacez.emotesMap.has(t)
                ) {
                  const e = hi.frankerFacez.emotesMap.get(t),
                    n = bi('frankerFacez', hi.frankerFacez.template(e), t);
                  o.push(n);
                } else o.push(document.createTextNode(e));
              } else o.push(document.createTextNode(e));
            }),
            o
          );
        })(e.textContent);
        (e.replaceChildren(...t),
          e.setAttribute('dubplus-emotes-processed', 'true'));
      }
    });
  }
  function wi(e) {
    if (null == e ? void 0 : e.chatid) {
      const t = document.querySelector(`.chat-id-${e.chatid}`);
      if (t) return void gi(t);
    }
    const t = bo();
    (null == t ? void 0 : t.length) && t.forEach(gi);
  }
  const yi = {
      id: 'emotes',
      label: 'emotes.label',
      description: 'emotes.description',
      category: 'general',
      turnOn() {
        hi.loadTwitchEmotes()
          .then(() => hi.loadBTTVEmotes())
          .then(() => hi.loadFrankerFacez())
          .then(() => {
            (wi(), window.QueUp.Events.bind(ri, wi));
          });
      },
      turnOff() {
        window.QueUp.Events.unbind(ri, wi);
      },
    },
    ki = Xe({ selectedIndex: 0, emojiList: [] });
  function xi() {
    ((ki.selectedIndex = 0), (ki.emojiList = []));
  }
  function Ei(e) {
    return ' ' === e || '\n' === e;
  }
  const _i = {
    up: 'ArrowUp',
    down: 'ArrowDown',
    enter: 'Enter',
    esc: 'Escape',
    tab: 'Tab',
  };
  let Si,
    Oi = document.querySelector('#autocomplete-preview');
  function Ci(e, t) {
    const n = ki.emojiList[t],
      [o, i] = (function (e, t) {
        let n = t > 0 ? t : 0;
        for (; n > 0 && ':' !== e[n]; ) n -= 1;
        let o = t;
        for (; !Ei(e[o]) && o < e.length; ) o += 1;
        return [n, o];
      })(e.value, e.selectionStart),
      s = e.value.substring(o, i);
    ((e.value = e.value.replace(s, `:${n.text}:`)), xi());
  }
  function Ui(e) {
    const t = e.target,
      n = t.value,
      o = t.selectionStart;
    let i = '',
      s = o - 1;
    for (; !Ei(n[s]) && s >= 0; ) ((i = n[s] + i), s--);
    let r = o;
    for (; !Ei(n[r]) && r < n.length; ) ((i += n[r]), r++);
    if (i.startsWith(':') && i.length >= 2 && !i.endsWith(':')) {
      const e = i.substring(1).trim();
      !(function (e, t) {
        const n = ['emojify', 'twitch', 'bttv', 'ffz'];
        ki.emojiList = e
          .filter(
            (e, t, n) =>
              t ===
              n.findIndex((t) => t.src === e.src && t.platform === e.platform),
          )
          .sort((e, o) => {
            const i = n.indexOf(e.platform),
              s = n.indexOf(o.platform);
            return i === s
              ? e.text.startsWith(t) && !o.text.startsWith(t)
                ? -1
                : !e.text.startsWith(t) && o.text.startsWith(t)
                  ? 1
                  : e.text.localeCompare(o.text)
              : i - s;
          });
      })(hi.findMatchingEmotes(e, Co.options.emotes), e);
    } else xi();
  }
  function Mi(e) {
    Oi = Oi || document.querySelector('#autocomplete-preview');
    const t = Oi.children.length > 0;
    if (!(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {
      if (e.key === _i.up && t)
        return (
          e.preventDefault(),
          void (ki.selectedIndex > 0
            ? ki.selectedIndex--
            : (ki.selectedIndex = ki.emojiList.length - 1))
        );
      if (e.key === _i.down && t)
        return (
          e.preventDefault(),
          void (ki.selectedIndex < ki.emojiList.length - 1
            ? ki.selectedIndex++
            : (ki.selectedIndex = 0))
        );
      if ((e.key === _i.enter || e.key === _i.tab) && t) {
        (e.preventDefault(), e.stopImmediatePropagation());
        return void Ci(e.target, ki.selectedIndex);
      }
      e.key !== _i.enter || t || e.shiftKey
        ? e.key === _i.esc && t
          ? xi()
          : Ui(e)
        : setTimeout(() => {
            window.QueUp.room.chat.resizeTextarea();
          }, 10);
    }
  }
  function Li(e) {
    Oi = Oi || document.querySelector('#autocomplete-preview');
    const t = 0 === Oi.children.length,
      n = [_i.tab, _i.enter, _i.up, _i.down].includes(e.key),
      o = e.shiftKey || e.ctrlKey || e.altKey || e.metaKey;
    o || t || !n
      ? o || e.key !== _i.enter
        ? o || window.QueUp.room.chat.ncKeyDown(e)
        : (window.QueUp.room.chat.sendMessage(),
          window.QueUp.room.chat.resizeTextarea())
      : e.preventDefault();
  }
  const zi = {
      id: 'autocomplete',
      label: 'autocomplete.label',
      category: 'general',
      description: 'autocomplete.description',
      turnOn() {
        ((Oi = document.querySelector('#autocomplete-preview')),
          xi(),
          (Si = window.QueUp.room.chat.events['keydown #chat-txt-message']));
        const e = { ...window.QueUp.room.chat.events };
        (delete e['keydown #chat-txt-message'],
          window.QueUp.room.chat.delegateEvents(e));
        const t = ho();
        (t.addEventListener('keydown', Li),
          t.addEventListener('keyup', Mi),
          t.addEventListener('click', Ui));
      },
      turnOff() {
        (xi(),
          (window.QueUp.room.chat.events['keydown #chat-txt-message'] = Si),
          window.QueUp.room.chat.delegateEvents(window.QueUp.room.chat.events));
        const e = ho();
        (e.removeEventListener('keydown', Li),
          e.removeEventListener('keyup', Mi),
          e.removeEventListener('click', Ui));
      },
    },
    Qi = 'custom-mentions';
  function $i(e) {
    const t = Co.options[Qi],
      n = Co.custom[Qi];
    if (t && window.QueUp.session.id !== e.user.userInfo.userid) {
      n.split(',').some(function (t) {
        return new RegExp(`\\b@?${t.trim()}\\b`, 'ig').test(e.message);
      }) && window.QueUp.room.chat.mentionChatSound.play();
    }
  }
  const Ai = {
      id: Qi,
      label: `${Qi}.label`,
      description: `${Qi}.description`,
      category: 'general',
      custom: {
        title: `${Qi}.modal.title`,
        content: `${Qi}.modal.content`,
        placeholder: `${Qi}.modal.placeholder`,
        maxlength: 255,
      },
      turnOn() {
        window.QueUp.Events.bind(ri, $i);
      },
      turnOff() {
        window.QueUp.Events.unbind(ri, $i);
      },
    },
    Ii = 'chat-cleaner';
  function Ti(e) {
    const t = bo();
    if (!(!(null == t ? void 0 : t.length) || isNaN(e) || t.length < e))
      for (let n = 0; n < t.length - e; n++) t[n].remove();
  }
  function Ni() {
    const e = Co.custom[Ii];
    if ('number' == typeof e) Ti(e);
    else if ('string' == typeof e && '' !== e.trim()) {
      Ti(parseInt(e, 10));
    }
  }
  const ji = {
      id: Ii,
      label: `${Ii}.label`,
      description: `${Ii}.description`,
      category: 'general',
      custom: {
        title: `${Ii}.modal.title`,
        content: `${Ii}.modal.content`,
        placeholder: `${Ii}.modal.placeholder`,
        maxlength: 5,
        validation(e) {
          if ('' === e.trim()) return !0;
          const t = parseInt(e, 10);
          return (
            !(e.includes('.') || isNaN(t) || t < 1) ||
            oo(`${Ii}.modal.validation`)
          );
        },
        onConfirm: (e) => {
          Co.options[Ii] && Ti(parseInt(e, 10));
        },
      },
      turnOn() {
        (Ti(void 0), window.QueUp.Events.bind(ri, Ni));
      },
      turnOff() {
        window.QueUp.Events.unbind(ri, Ni);
      },
    },
    Di = Xe({ isActive: !0 }),
    qi = [],
    Pi = [];
  function Fi(e) {
    Di.isActive && (['blur', 'pagehide'].includes(e.type) || document.hidden)
      ? ((Di.isActive = !1), qi.forEach((e) => e()))
      : Di.isActive ||
        (!['focus', 'pageshow'].includes(e.type) && document.hidden) ||
        ((Di.isActive = !0), Pi.forEach((e) => e()));
  }
  function Bi() {
    ro({
      title: oo('Notifcation.permission.title'),
      content: oo('Notification.permission.denied'),
      open: !0,
    });
  }
  function Vi() {
    return new Promise((e, t) =>
      'Notification' in window
        ? 'granted' !== Notification.permission
          ? 'denied' === Notification.permission
            ? (Bi(), void t())
            : void Notification.requestPermission().then(function (n) {
                if ('denied' === n || 'default' === n) return (Bi(), void t());
                e();
              })
          : void e()
        : (ro({
            open: !0,
            title: oo('Notifcation.permission.title'),
            content: oo('Notification.permission.notSupported'),
          }),
          void t(!1)),
    );
  }
  function Ri(e) {
    const t = Object.assign(
      {},
      { content: '', ignoreActiveTab: !1, callback: null, wait: 1e4 },
      e,
    );
    if (Di.isActive && !t.ignoreActiveTab) return;
    const n = {
        body: t.content,
        icon: 'https://cdn.jsdelivr.net/gh/DubPlus/DubPlus/images/dubplus.svg',
      },
      o = new Notification(t.title, n);
    ((o.onclick = function () {
      (window.focus(),
        'function' == typeof t.callback && t.callback(),
        o.close());
    }),
      setTimeout(o.close.bind(o), t.wait));
  }
  function Wi(e) {
    const t = e.message;
    let n = ['@' + window.QueUp.session.get('username').toLowerCase()];
    Co.options['custom-mentions'] &&
      Co.custom['custom-mentions'] &&
      ((n = n
        .concat(Co.custom['custom-mentions'].split(','))
        .map((e) => e.trim())),
      (n = n.concat(n.map((e) => '@' + e))));
    new RegExp(`\\b(${n.join('|')})\\b`, 'ig').test(t) &&
      !Di.isActive &&
      window.QueUp.session.id !== e.user.userInfo.userid &&
      Ri({ title: `Message from ${e.user.username}`, content: t });
  }
  (document.addEventListener('visibilitychange', Fi),
    (window.onpageshow = Fi),
    (window.onpagehide = Fi),
    (window.onfocus = Fi),
    (window.onblur = Fi),
    void 0 !== document.hidden &&
      Fi({ type: document.hidden ? 'blur' : 'focus' }));
  const Ji = {
    id: 'mention-notifications',
    label: 'mention-notifications.label',
    description: 'mention-notifications.description',
    category: 'general',
    turnOn() {
      Vi()
        .then(() => {
          window.QueUp.Events.bind(ri, Wi);
        })
        .catch(() => {
          Co.options[this.id] = !1;
        });
    },
    turnOff() {
      window.QueUp.Events.unbind(ri, Wi);
    },
  };
  function Ki(e) {
    window.QueUp.session.id !== e.userid &&
      Ri({
        title: oo('pm-notifications.notification.title'),
        ignoreActiveTab: !0,
        callback: function () {
          const t = document.querySelector('.user-messages');
          (null == t || t.click(),
            setTimeout(function () {
              const t =
                ((n = e.messageid),
                document.querySelector(`.message-item[data-messageid="${n}"]`));
              var n;
              null == t || t.click();
            }, 500));
        },
        wait: 1e4,
      });
  }
  const Yi = {
      id: 'pm-notifications',
      label: 'pm-notifications.label',
      description: 'pm-notifications.description',
      category: 'general',
      turnOn() {
        Vi()
          .then(() => {
            window.QueUp.Events.bind(ai, Ki);
          })
          .catch(() => {
            Co.options[this.id] = !1;
          });
      },
      turnOff() {
        window.QueUp.Events.unbind(ai, Ki);
      },
    },
    Hi = 'dj-notification';
  function Xi(e) {
    (e && e.startTime > 2) ||
      setTimeout(() => {
        var e, t, n, o;
        const i =
          null == (t = null == (e = yo()) ? void 0 : e.textContent)
            ? void 0
            : t.trim();
        if (!i) return;
        const s = parseInt(i, 10);
        if (isNaN(s))
          return void Hn(Hi, 'Could not parse current position:', i);
        let r = parseInt(Co.custom[Hi], 10);
        isNaN(r) &&
          ((r = 2), Yn(Hi, 'Could not parse setting, defaulting to 2'));
        return ((null ==
        (o =
          null == (n = document.querySelector('.queue-total'))
            ? void 0
            : n.textContent)
          ? void 0
          : o.trim()) === i &&
          0 === r) ||
          s === r
          ? (Ri({
              title: oo(`${Hi}.notification.title`),
              content: oo(`${Hi}.notification.content`),
              ignoreActiveTab: !0,
              wait: 1e4,
            }),
            void window.QueUp.room.chat.mentionChatSound.play())
          : void 0;
      }, 1e3);
  }
  const Gi = {
      id: Hi,
      label: `${Hi}.label`,
      description: `${Hi}.description`,
      category: 'general',
      custom: {
        title: `${Hi}.modal.title`,
        content: `${Hi}.modal.content`,
        placeholder: '2',
        defaultValue: '2',
        maxlength: 3,
        validation(e) {
          if ('' === e.trim()) return !0;
          const t = parseInt(e, 10);
          return (
            !(e.includes('.') || isNaN(t) || t < 0) ||
            oo(`${Hi}.modal.validation`)
          );
        },
        onConfirm: () => {
          Co.options[Hi] && Xi();
        },
      },
      turnOn() {
        Vi().then(() => {
          (Xi(), window.QueUp.Events.bind(si, Xi));
        });
      },
      turnOff() {
        window.QueUp.Events.unbind(si, Xi);
      },
    },
    Zi = Xe({ upDubs: [], downDubs: [], grabs: [] });
  const es = window.location.hostname.includes('staging')
    ? 'https://staging-api.queup.dev'
    : 'https://api.queup.net';
  function ts(e) {
    return new Promise((t, n) => {
      var o, i, s;
      const r =
        null ==
        (s =
          null ==
          (i =
            null ==
            (o = window.QueUp.room.users.collection.findWhere({ userid: e }))
              ? void 0
              : o.attributes)
            ? void 0
            : i._user)
          ? void 0
          : s.username;
      r
        ? t(r)
        : fetch(
            (function (e) {
              return `${es}/user/${e}`;
            })(e),
          )
            .then((e) => e.json())
            .then((o) => {
              var i;
              if (
                null == (i = null == o ? void 0 : o.userinfo)
                  ? void 0
                  : i.username
              ) {
                const { username: e } = o.userinfo;
                t(e);
              } else n('Failed to get username from API for userid: ' + e);
            })
            .catch(n);
    });
  }
  function ns() {
    ((Zi.downDubs = []), (Zi.upDubs = []), (Zi.grabs = []));
    const e =
      ((t = window.QueUp.room.model.id),
      `${es}/room/${t}/playlist/active/dubs`);
    var t;
    fetch(e)
      .then((e) => e.json())
      .then((e) => {
        var t, n;
        (null == (t = e.data.upDubs) ||
          t.forEach((e) => {
            Zi.upDubs.find((t) => t.userid === e.userid) ||
              ts(e.userid)
                .then((t) => {
                  Zi.upDubs.push({ userid: e.userid, username: t });
                })
                .catch((e) => Hn('Failed to get username for upDubs:', e));
          }),
          Xo(window.QueUp.session.id) &&
            (null == (n = e.data.downDubs) ||
              n.forEach((e) => {
                Zi.downDubs.find((t) => t.userid === e.userid) ||
                  ts(e.userid)
                    .then((t) => {
                      Zi.downDubs.push({ userid: e.userid, username: t });
                    })
                    .catch((e) => Hn('Failed to get username for downDubs', e));
              })));
      })
      .catch((e) => Hn('Failed to fetch dubs data from API.', e));
  }
  function os(e) {
    'updub' === e.dubtype
      ? (Zi.upDubs.find((t) => t.userid === e.user._id) ||
          Zi.upDubs.push({ userid: e.user._id, username: e.user.username }),
        (Zi.downDubs = Zi.downDubs.filter((t) => t.userid !== e.user._id)))
      : 'downdub' === e.dubtype &&
        Xo(window.QueUp.session.id) &&
        (Zi.downDubs.find((t) => t.userid === e.user._id) ||
          Zi.downDubs.push({ userid: e.user._id, username: e.user.username }),
        (Zi.upDubs = Zi.upDubs.filter((t) => t.userid !== e.user._id)));
    Date.now() - window.QueUp.room.player.activeSong.attributes.song.played <
      1e3 ||
      ((Zi.upDubs.length !==
        window.QueUp.room.player.activeSong.attributes.song.updubs ||
        (Xo(window.QueUp.session.id) &&
          Zi.downDubs.length !==
            window.QueUp.room.player.activeSong.attributes.song.downdubs)) &&
        ns());
  }
  function is(e) {
    Zi.grabs.find((t) => t.userid === e.user._id) ||
      Zi.grabs.push({ userid: e.user._id, username: e.user.username });
  }
  function ss(e) {
    ((Zi.upDubs = Zi.upDubs.filter((t) => t.userid !== e.user._id)),
      (Zi.downDubs = Zi.downDubs.filter((t) => t.userid !== e.user._id)),
      (Zi.grabs = Zi.grabs.filter((t) => t.userid !== e.user._id)));
  }
  const rs = {
    id: 'dubs-hover',
    label: 'dubs-hover.label',
    description: 'dubs-hover.description',
    category: 'general',
    turnOn() {
      (ns(),
        window.QueUp.Events.bind(ni, os),
        window.QueUp.Events.bind(oi, is),
        window.QueUp.Events.bind(ii, ss),
        window.QueUp.Events.bind(si, ns));
    },
    turnOff() {
      (window.QueUp.Events.unbind(ni, os),
        window.QueUp.Events.unbind(oi, is),
        window.QueUp.Events.unbind(ii, ss),
        window.QueUp.Events.unbind(si, ns));
    },
  };
  function as(e) {
    window.QueUp.session.id ===
      window.QueUp.room.player.activeSong.attributes.song.userid &&
      'downdub' === e.dubtype &&
      ci(
        'dubplus-chat-system-downdub',
        oo('downdubs-in-chat.chat-message', {
          username: e.user.username,
          song_name:
            window.QueUp.room.player.activeSong.attributes.songInfo.name,
        }),
      );
  }
  const ls = {
    id: 'downdubs-in-chat',
    label: 'downdubs-in-chat.label',
    description: 'downdubs-in-chat.description',
    category: 'general',
    modOnly: !0,
    turnOn() {
      Xo(window.QueUp.session.id) && window.QueUp.Events.bind(ni, as);
    },
    turnOff() {
      window.QueUp.Events.unbind(ni, as);
    },
  };
  function us(e) {
    window.QueUp.session.id ===
      window.QueUp.room.player.activeSong.attributes.song.userid &&
      'updub' === e.dubtype &&
      ci(
        'dubplus-chat-system-updub',
        oo('updubs-in-chat.chat-message', {
          username: e.user.username,
          song_name:
            window.QueUp.room.player.activeSong.attributes.songInfo.name,
        }),
      );
  }
  const cs = {
    id: 'updubs-in-chat',
    label: 'updubs-in-chat.label',
    description: 'updubs-in-chat.description',
    category: 'general',
    turnOn() {
      window.QueUp.Events.bind(ni, us);
    },
    turnOff() {
      window.QueUp.Events.unbind(ni, us);
    },
  };
  function ds(e) {
    window.QueUp.session.id ===
      window.QueUp.room.player.activeSong.attributes.song.userid &&
      ci(
        'dubplus-chat-system-grab',
        oo('grabs-in-chat.chat-message', {
          username: e.user.username,
          song_name:
            window.QueUp.room.player.activeSong.attributes.songInfo.name,
        }),
      );
  }
  const ps = {
      id: 'grabs-in-chat',
      label: 'grabs-in-chat.label',
      description: 'grabs-in-chat.description',
      category: 'general',
      turnOn() {
        window.QueUp.room.model.get('displayUserGrab') ||
          window.QueUp.Events.bind(
            'realtime:room_playlist-queue-update-grabs',
            ds,
          );
      },
      turnOff() {
        window.QueUp.room.model.get('displayUserGrab') ||
          window.QueUp.Events.unbind(
            'realtime:room_playlist-queue-update-grabs',
            ds,
          );
      },
    },
    fs = {
      id: 'snow',
      label: 'snow.label',
      description: 'snow.description',
      category: 'general',
      turnOn() {},
      turnOff() {},
    };
  class ms {
    constructor() {
      ((this.particles = []),
        (this.drops = []),
        (this.numbase = 5),
        (this.numb = 2),
        (this.width = 0),
        (this.height = 0),
        (this.controls = {
          rain: 2,
          alpha: 1,
          color: 200,
          opacity: 1,
          saturation: 100,
          lightness: 50,
          back: 0,
          multi: !1,
          speed: 1,
        }),
        (this.requestAnimFrame = null),
        (this.canvas = null));
    }
    makeCanvas() {
      ((this.canvas = document.createElement('canvas')),
        (this.canvas.id = 'dubPlusRainCanvas'),
        (this.canvas.style.position = 'fixed'),
        (this.canvas.style.top = '0px'),
        (this.canvas.style.left = '0px'),
        (this.canvas.style.zIndex = '100'),
        (this.canvas.style.pointerEvents = 'none'),
        document.body.prepend(this.canvas));
    }
    start() {
      (this.makeCanvas(), this.startAnimation());
    }
    stop() {
      var e;
      (this.stopAnimation(), null == (e = this.canvas) || e.remove());
    }
    onWindowResize() {
      ((this.width = this.canvas.width = window.innerWidth),
        (this.height = this.canvas.height = window.innerHeight));
    }
    startAnimation() {
      const e = window.requestAnimationFrame;
      if (((this.requestAnimFrame = e ? e.bind(window) : null), !this.canvas))
        return;
      const t = this.canvas.getContext('2d');
      (this.width,
        (this.height = 0),
        this.onWindowResize(),
        (window.onresize = this.onWindowResize.bind(this)),
        (this.particles = []),
        (this.drops = []),
        (this.numbase = 5),
        (this.numb = 2));
      let n = this;
      !(function e() {
        (n.requestAnimFrame(e), n.update(), n.rendu(t));
      })();
    }
    buildRainParticle(e, t, n) {
      for (n || (n = this.numb); n--; )
        this.particles.push({
          speedX: 0.25 * Math.random(),
          speedY: 9 * Math.random() + 1,
          X: e,
          Y: t,
          alpha: 1,
          color:
            'hsla(' +
            this.controls.color +
            ',' +
            this.controls.saturation +
            '%, ' +
            this.controls.lightness +
            '%,' +
            this.controls.opacity +
            ')',
        });
    }
    explosion(e, t, n, o) {
      for (o || (o = this.numbase); o--; )
        this.drops.push({
          speedX: 4 * Math.random() - 2,
          speedY: -4 * Math.random(),
          X: e,
          Y: t,
          radius: 0.65 + Math.floor(1.6 * Math.random()),
          alpha: 1,
          color: n,
        });
    }
    rendu(e) {
      (this.controls.multi && (this.controls.color = 360 * Math.random()),
        e.save(),
        e.clearRect(0, 0, this.width, this.height));
      const t = this.particles,
        n = this.drops,
        o = 2 * Math.PI;
      for (let n, o = 0; (n = t[o]); o++)
        ((e.globalAlpha = n.alpha),
          (e.fillStyle = n.color),
          e.fillRect(n.X, n.Y, n.speedY / 4, n.speedY));
      for (let t, i = 0; (t = n[i]); i++)
        ((e.globalAlpha = t.alpha),
          (e.fillStyle = t.color),
          e.beginPath(),
          e.arc(t.X, t.Y, t.radius, 0, o),
          e.fill());
      ((e.strokeStyle = 'white'), (e.lineWidth = 2), e.restore());
    }
    update() {
      const e = this.particles,
        t = this.drops;
      for (let t, n = 0; (t = e[n]); n++)
        ((t.X += t.speedX),
          (t.Y += t.speedY + 5),
          t.Y > this.height - 15 &&
            (e.splice(n--, 1), this.explosion(t.X, t.Y, t.color)));
      for (let e, n = 0; (e = t[n]); n++)
        ((e.X += e.speedX),
          (e.Y += e.speedY),
          (e.radius -= 0.075),
          e.alpha > 0 ? (e.alpha -= 0.005) : (e.alpha = 0),
          e.radius < 0 && t.splice(n--, 1));
      let n = this.controls.rain;
      for (; n--; )
        this.buildRainParticle(Math.floor(Math.random() * this.width), -15);
    }
    stopAnimation() {
      this.requestAnimFrame = function () {};
    }
  }
  const vs = {
    id: 'rain',
    label: 'rain.label',
    description: 'rain.description',
    category: 'general',
    turnOn() {
      ((this.rainEffect = new ms()), this.rainEffect.start());
    },
    turnOff() {
      (this.rainEffect.stop(), delete this.rainEffect);
    },
  };
  var hs = wn(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 344v112a23.9 23.9 0 0 1 -24 24H312c-21.4 0-32.1-25.9-17-41l36.2-36.2L224 295.6 116.8 402.9 153 439c15.1 15.1 4.4 41-17 41H24a23.9 23.9 0 0 1 -24-24V344c0-21.4 25.9-32.1 41-17l36.2 36.2L184.5 256 77.2 148.7 41 185c-15.1 15.1-41 4.4-41-17V56a23.9 23.9 0 0 1 24-24h112c21.4 0 32.1 25.9 17 41l-36.2 36.2L224 216.4l107.2-107.3L295 73c-15.1-15.1-4.4-41 17-41h112a23.9 23.9 0 0 1 24 24v112c0 21.4-25.9 32.1-41 17l-36.2-36.2L263.5 256l107.3 107.3L407 327.1c15.1-15.2 41-4.5 41 16.9z"></path></svg>',
  );
  const bs = {
      id: 'fullscreen',
      label: 'fullscreen.label',
      description: 'fullscreen.description',
      category: 'user-interface',
      altIcon: function (e) {
        xn(e, hs());
      },
      onClick() {
        const e = document.querySelector('.player_container iframe');
        e
          ? e.requestFullscreen
            ? e.requestFullscreen()
            : e.msRequestFullscreen
              ? e.msRequestFullscreen()
              : e.mozRequestFullScreen
                ? e.mozRequestFullScreen()
                : e.webkitRequestFullscreen && e.webkitRequestFullscreen()
          : Yn('Fullscreen: No video element found');
      },
    },
    gs = {
      id: 'split-chat',
      label: 'split-chat.label',
      description: 'split-chat.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-split-chat');
      },
      turnOff() {
        document.body.classList.remove('dubplus-split-chat');
      },
    },
    ws = {
      id: 'hide-chat',
      label: 'hide-chat.label',
      description: 'hide-chat.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-video-only');
      },
      turnOff() {
        document.body.classList.remove('dubplus-video-only');
      },
    },
    ys = {
      id: 'hide-video',
      label: 'hide-video.label',
      description: 'hide-video.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-chat-only');
      },
      turnOff() {
        document.body.classList.remove('dubplus-chat-only');
      },
    },
    ks = {
      id: 'hide-avatars',
      label: 'hide-avatars.label',
      description: 'hide-avatars.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-hide-avatars');
      },
      turnOff() {
        document.body.classList.remove('dubplus-hide-avatars');
      },
    },
    xs = {
      id: 'hide-bg',
      label: 'hide-bg.label',
      description: 'hide-bg.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-hide-bg');
      },
      turnOff() {
        document.body.classList.remove('dubplus-hide-bg');
      },
    },
    Es = {
      id: 'show-timestamps',
      label: 'show-timestamps.label',
      description: 'show-timestamps.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-show-timestamp');
      },
      turnOff() {
        document.body.classList.remove('dubplus-show-timestamp');
      },
    };
  function _s(e) {
    const t = e.target.tagName.toLowerCase();
    ' ' === e.key &&
      'input' !== t &&
      'textarea' !== t &&
      window.QueUp.room.player.mutePlayer();
  }
  const Ss = {
    id: 'spacebar-mute',
    label: 'spacebar-mute.label',
    description: 'spacebar-mute.description',
    category: 'settings',
    turnOn() {
      document.addEventListener('keypress', _s);
    },
    turnOff() {
      document.removeEventListener('keypress', _s);
    },
  };
  function Os(e) {
    let t = 'You are leaving';
    return ((e.returnValue = t), t);
  }
  const Cs = {
      id: 'warn-redirect',
      label: 'warn-redirect.label',
      description: 'warn-redirect.description',
      category: 'settings',
      turnOn() {
        window.addEventListener('beforeunload', Os);
      },
      turnOff() {
        window.removeEventListener('beforeunload', Os);
      },
    },
    Us = 'dubplus',
    Ms = '4.1.0',
    Ls = 'Dub+ - A simple script/extension for QueUp.net',
    zs = 'MIT',
    Qs = 'https://dub.plus';
  function $s(e, t) {
    var n;
    return (
      null == (n = document.querySelector(`style#${t}`)) || n.remove(),
      fetch(e)
        .then((e) => e.text())
        .then((e) => {
          const n = document.createElement('style');
          ((n.id = t), (n.textContent = e), document.head.appendChild(n));
        })
    );
  }
  const As = 'dubplus-community-css',
    Is = {
      id: 'community-theme',
      label: 'community-theme.label',
      description: 'community-theme.description',
      category: 'customize',
      turnOn() {
        const e = window.QueUp.room.model.get('roomUrl');
        fetch(`https://api.queup.net/room/${e}`)
          .then((e) => e.json())
          .then((e) => {
            const t = e.data.description,
              n = new RegExp(
                /(@dub(x|plus|\+)=)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/,
                'i',
              );
            let o = null;
            if (
              (t.replace(n, function (e, t, n, i) {
                o = i;
              }),
              o)
            )
              return (Yn('loading community css theme from:', o), $s(o, As));
            Yn('No community CSS theme found');
          })
          .catch((e) => {
            Hn('Community CSS: Failed to load room info', e);
          });
      },
      turnOff() {
        var e;
        null == (e = document.getElementById(As)) || e.remove();
      },
    },
    Ts = 'dubplus-user-custom-css',
    Ns = {
      id: 'custom-css',
      label: 'custom-css.label',
      description: 'custom-css.description',
      category: 'customize',
      custom: {
        title: 'custom-css.modal.title',
        content: 'custom-css.modal.content',
        placeholder: 'custom-css.modal.placeholder',
        maxlength: 500,
        validation: (e) =>
          '' === e.trim() ||
          !!/^http.+\.css$/.test(e) ||
          oo('custom-css.modal.validation'),
        onConfirm(e) {
          var t;
          if (!e)
            return (
              null == (t = document.getElementById(Ts)) || t.remove(),
              void (Co.options[Ns.id] = !1)
            );
          $s(e, Ts).catch((e) => {
            Hn('Error loading custom css file:', e);
          });
        },
      },
      turnOn() {
        Co.custom[this.id] &&
          $s(Co.custom[this.id], Ts).catch((e) => {
            Hn('Error loading custom css file:', e);
          });
      },
      turnOff() {
        var e;
        null == (e = document.getElementById(Ts)) || e.remove();
      },
    };
  function js(e) {
    const t = wo();
    t && (t.setAttribute('data-original', t.src), (t.src = e));
  }
  function Ds() {
    const e = wo();
    e &&
      e.hasAttribute('data-original') &&
      ((e.src = e.getAttribute('data-original')), e.removeAttribute);
  }
  const qs = {
    id: 'custom-bg',
    label: 'custom-bg.label',
    description: 'custom-bg.description',
    category: 'customize',
    custom: {
      title: 'custom-bg.modal.title',
      content: 'custom-bg.modal.content',
      placeholder: 'custom-bg.modal.placeholder',
      maxlength: 500,
      validation: (e) =>
        '' === e.trim() ||
        !!e.startsWith('http') ||
        oo('custom-bg.modal.validation'),
      onConfirm(e) {
        (Ds(), e && js(e));
      },
    },
    turnOn() {
      Ds();
      const e = Co.custom[this.id];
      e && js(e);
    },
    turnOff() {
      Ds();
    },
  };
  let Ps;
  const Fs = {
      id: 'custom-notification-sound',
      label: 'custom-notification-sound.label',
      description: 'custom-notification-sound.description',
      category: 'customize',
      custom: {
        title: 'custom-notification-sound.modal.title',
        content: 'custom-notification-sound.modal.content',
        placeholder: 'custom-notification-sound.modal.placeholder',
        maxlength: 500,
        validation: (e) =>
          '' === e.trim() ||
          !!window.soundManager.canPlayURL(e) ||
          oo('custom-notification-sound.modal.validation'),
        onConfirm(e) {
          e
            ? (window.QueUp.room.chat.mentionChatSound.url = e)
            : ((window.QueUp.room.chat.mentionChatSound.url = Ps),
              (Co.options[Fs.id] = !1));
        },
      },
      turnOn() {
        ((Ps = window.QueUp.room.chat.mentionChatSound.url),
          Co.custom[this.id] &&
            (window.QueUp.room.chat.mentionChatSound.url = Co.custom[this.id]));
      },
      turnOff() {
        window.QueUp.room.chat.mentionChatSound.url = Ps;
      },
    },
    Bs = {
      id: 'flip-interface',
      label: 'flip-interface.label',
      description: 'flip-interface.description',
      category: 'user-interface',
      turnOn() {
        document.body.classList.add('dubplus-flip-interface');
      },
      turnOff() {
        document.body.classList.remove('dubplus-flip-interface');
      },
    };
  let Vs = null;
  function Rs() {
    if (Co.options.afk)
      Yn('auto-afk timer expired, but afk is already enabled');
    else {
      Yn('auto-afk timer expired, enabling afk');
      const e = document.querySelector('#dubplus-afk [role=switch]');
      null == e || e.click();
    }
  }
  function Ws() {
    let e = parseInt(Co.custom['auto-afk'], 10);
    (isNaN(e) && (e = 30),
      Yn('auto-afk onBlur: starting timer for ', e, 'minutes'),
      (Vs = setTimeout(Rs, 60 * e * 1e3)));
  }
  function Js() {
    Vs
      ? (Yn('auto-afk onFocus: clearing timer'), clearTimeout(Vs), (Vs = null))
      : Yn('auto-afk onFocus: no timer to clear');
  }
  const Ks = {
    id: 'auto-afk',
    label: 'auto-afk.label',
    description: 'auto-afk.description',
    category: 'general',
    turnOn() {
      var e, t;
      ((t = Ws), (e = Js) && Pi.push(e), t && qi.push(t));
    },
    turnOff() {
      var e, t;
      ((t = Ws),
        (e = Js) && Pi.splice(Pi.indexOf(e), 1),
        t && qi.splice(qi.indexOf(t), 1),
        Js());
    },
    custom: {
      title: 'auto-afk.modal.title',
      content: 'auto-afk.modal.content',
      placeholder: '30',
      defaultValue: '30',
      maxlength: 10,
      validation(e) {
        if ('' === e.trim()) return !0;
        const t = parseInt(e, 10);
        return (
          !(e.includes('.') || isNaN(t) || t < 1) ||
          oo('auto-afk.modal.validation')
        );
      },
    },
  };
  function Ys(e) {
    if (e.user._id === window.QueUp.session.id) {
      const e = Co.custom['grab-response'];
      e && di(e);
    }
  }
  const Hs = {
    id: 'grab-response',
    label: 'grab-response.label',
    description: 'grab-response.description',
    category: 'general',
    turnOn() {
      window.QueUp.Events.bind(oi, Ys);
    },
    turnOff() {
      window.QueUp.Events.unbind(oi, Ys);
    },
    custom: {
      title: 'grab-response.modal.title',
      content: 'grab-response.modal.content',
      placeholder: 'grab-response.modal.placeholder',
      maxlength: 255,
    },
  };
  function Xs(e) {
    const t = e.target.parentElement,
      n = e.target.previousElementSibling;
    t.classList.contains('dubplus-collapsed')
      ? (t.classList.remove('dubplus-collapsed'),
        (e.target.title = 'collapse image'),
        n.setAttribute('aria-hidden', 'false'),
        e.target.setAttribute('aria-expanded', 'true'))
      : (t.classList.add('dubplus-collapsed'),
        (e.target.title = 'expand image'),
        n.setAttribute('aria-hidden', 'true'),
        e.target.setAttribute('aria-expanded', 'false'));
  }
  function Gs(e) {
    if (e && !e.parentElement.classList.contains('dubplus-collapsible-image')) {
      e.parentElement.classList.add('dubplus-collapsible-image');
      const t = document.createElement('button');
      ((t.type = 'button'),
        (t.title = 'collapse image'),
        t.classList.add('dubplus-collapser'),
        t.addEventListener('click', Xs),
        e.parentElement.appendChild(t));
    }
  }
  function Zs(e) {
    if (null == e ? void 0 : e.chatid) {
      const t = document.querySelector(`.chat-id-${e.chatid}`);
      if (t) return void Gs(t.querySelector('.autolink-image'));
    }
    go().forEach(Gs);
  }
  const er = {
    id: 'collapsible-images',
    label: 'collapsible-images.label',
    description: 'collapsible-images.description',
    category: 'general',
    turnOn(e) {
      (window.QueUp.Events.bind(ri, Zs),
        e
          ? setTimeout(() => {
              Zs();
            }, 1e3)
          : Zs());
    },
    turnOff() {
      (window.QueUp.Events.unbind(ri, Zs),
        document.querySelectorAll('.dubplus-collapsible-image').forEach((e) => {
          (e.classList.remove('dubplus-collapsible-image'),
            e.classList.remove('dubplus-collapsed'));
        }),
        document.querySelectorAll('.dubplus-collapser').forEach((e) => {
          (e.removeEventListener('click', Xs), e.remove());
        }),
        go().forEach((e) => e.removeAttribute('aria-hidden')));
    },
  };
  var tr = wn(
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504.3 273.6c4.9-4.5 7.7-10.9 7.7-17.6s-2.8-13-7.7-17.6l-112-104c-7-6.5-17.2-8.2-25.9-4.4s-14.4 12.5-14.4 22l0 56-192 0 0-56c0-9.5-5.7-18.2-14.4-22s-18.9-2.1-25.9 4.4l-112 104C2.8 243 0 249.3 0 256s2.8 13 7.7 17.6l112 104c7 6.5 17.2 8.2 25.9 4.4s14.4-12.5 14.4-22l0-56 192 0 0 56c0 9.5 5.7 18.2 14.4 22s18.9 2.1 25.9-4.4l112-104z"></path></svg>',
  );
  const nr = {
      id: 'pin-menu',
      label: 'pin-menu.label',
      description: 'pin-menu.description',
      category: 'user-interface',
      turnOn() {
        const e = Co.custom[this.id] || 'right';
        document.body.classList.add(`dubplus-pin-menu-${e}`);
      },
      turnOff() {
        (document.body.classList.remove('dubplus-pin-menu-left'),
          document.body.classList.remove('dubplus-pin-menu-right'));
      },
      secondaryAction: {
        description: 'pin-menu.secondaryAction.description',
        icon: function (e) {
          xn(e, tr());
        },
        onClick: () => {
          const e = 'left' === (Co.custom[nr.id] || 'right') ? 'right' : 'left';
          (document.body.classList.toggle(
            'dubplus-pin-menu-left',
            'left' === e,
          ),
            document.body.classList.toggle(
              'dubplus-pin-menu-right',
              'right' === e,
            ),
            Mo('custom', nr.id, e));
        },
      },
    },
    or = [
      ui,
      mi,
      Ks,
      yi,
      zi,
      Ai,
      ji,
      er,
      Ji,
      Yi,
      Gi,
      rs,
      ls,
      cs,
      ps,
      Hs,
      fs,
      vs,
    ],
    ir = [bs, gs, ws, ys, ks, xs, Es, Bs, nr],
    sr = [Ss, Cs],
    rr = [Is, Ns, qs, Fs];
  var ar = bn('<!> <!>', 1);
  var lr = bn(
    '<button id="dubplus-eta" type="button" class="icon-history eta_tooltip_t dubplus-btn-player"></button>',
  );
  function ur(e, t) {
    de(t, !0);
    let n = Re('ETA');
    function o() {
      var e, t;
      const n = null == (e = yo()) ? void 0 : e.textContent;
      if (!n) return oo('Eta.tooltip.notInQueue');
      const o = parseInt(
          null == (t = document.querySelector('div.currentTime span.min'))
            ? void 0
            : t.textContent,
        ),
        i = 4 * parseInt(n) - 4 + o;
      return i >= 0
        ? oo('Eta.tootltip', { minutes: i })
        : oo('Eta.tooltip.notInQueue');
    }
    var i = lr();
    ($n(
      i,
      (e, t) => (null == vo ? void 0 : vo(e, t)),
      () => ({ to: ko }),
    ),
      ft(() => {
        (Dn(i, 'aria-label', Xt(n)), Dn(i, 'data-dp-tooltip', Xt(n)));
      }),
      pn('mouseenter', i, () => {
        Je(n, o(), !0);
      }),
      xn(e, i),
      pe());
  }
  var cr = bn(
    '<button id="dubplus-snooze" type="button" class="icon-mute snooze_btn dubplus-btn-player svelte-1va87zs"><span class="svelte-1va87zs">1</span></button>',
  );
  fn(['click']);
  var dr = bn(
      '<li><div class="ac-image svelte-198qtio"><img class="svelte-198qtio"/></div></li>',
    ),
    pr = bn(
      '<div><div class="ac-header svelte-198qtio"><span class="sr-only"> </span> <div class="tip-container" aria-hidden="true"><span class="tip-navigate"><key class="icon-upvote"></key> &amp; <key class="icon-downvote"></key> </span> <span class="tip-complete"><key>TAB</key> or <key>ENTER</key> </span> <span class="tip-close"><key>ESC</key> </span></div></div> <ul id="autocomplete-preview" class="svelte-198qtio"></ul> <span class="ac-text-preview svelte-198qtio"> </span></div>',
    );
  function fr(e, t) {
    (de(t, !0),
      ct(() => {
        if (ki.emojiList.length > 0 && 'number' == typeof ki.selectedIndex) {
          const e = document.querySelector('.preview-item.selected');
          e &&
            e.scrollIntoView({
              block: 'nearest',
              inline: 'nearest',
              behavior: 'smooth',
            });
        }
      }));
    var n = pr();
    let o;
    var i = st(n),
      s = st(i),
      r = st(s),
      a = st(at(s, 2)),
      l = at(st(a), 3),
      u = at(a, 2),
      c = at(st(u), 3),
      d = at(u, 2),
      p = at(st(d)),
      f = at(i, 2);
    Cn(
      f,
      23,
      () => ki.emojiList,
      ({ src: e, text: t, platform: n, alt: o }) => e + n,
      (e, t, n) => {
        let o = () => Xt(t).alt;
        var i = dr();
        let s;
        i.__click = () =>
          (function (e) {
            const t = ho();
            (Ci(t, e), t.focus());
          })(Xt(n));
        var r = st(i),
          a = st(r);
        (ft(
          (e) => {
            ((s = In(
              i,
              0,
              `preview-item ${Xt(t).platform}-previews`,
              'svelte-198qtio',
              s,
              e,
            )),
              Dn(i, 'title', Xt(t).text),
              Dn(a, 'src', Xt(t).src),
              Dn(a, 'alt', o()),
              Dn(a, 'title', o()));
          },
          [() => ({ selected: Xt(n) === ki.selectedIndex })],
        ),
          xn(e, i));
      },
    );
    var m = st(at(f, 2));
    ($n(
      n,
      (e, t) => (null == vo ? void 0 : vo(e, t)),
      () => ({ to: '.pusher-chat-widget-input', position: 'prepend' }),
    ),
      ft(
        (e, t, i, s, a) => {
          var u;
          ((o = In(n, 0, 'ac-preview-container svelte-198qtio', null, o, e)),
            En(r, t),
            En(l, ` (${i ?? ''})`),
            En(c, ` (${s ?? ''})`),
            En(p, ` (${a ?? ''})`),
            En(
              m,
              null == (u = ki.emojiList[ki.selectedIndex]) ? void 0 : u.text,
            ));
        },
        [
          () => ({ 'ac-show': ki.emojiList.length > 0 }),
          () => oo('autocomplete.preview.a11y'),
          () => oo('autocomplete.preview.navigate'),
          () => oo('autocomplete.preview.select'),
          () => oo('autocomplete.preview.close'),
        ],
      ),
      xn(e, n),
      pe());
  }
  fn(['click']);
  var mr = (e, t, n) => t(Xt(n).username),
    vr = bn(
      '<li class="preview-dubinfo-item users-previews svelte-ujv5bp"><div class="dubinfo-image svelte-ujv5bp"><img alt="User Avatar" class="svelte-ujv5bp"/></div> <button type="button" class="dubinfo-text svelte-ujv5bp"> </button></li>',
    ),
    hr = bn('<li><!></li>'),
    br = bn('<div role="none"><ul id="dubinfo-preview"><!></ul></div>');
  function gr(e, t) {
    de(t, !0);
    let n = Ee(() => {
        return 'updub' === (e = t.dubType)
          ? Zi.upDubs
          : 'downdub' === e
            ? Zi.downDubs
            : 'grab' === e
              ? Zi.grabs
              : [];
        var e;
      }),
      o = Re(0),
      i = Re(0),
      s = Re('none');
    function r() {
      var e, n;
      return 'updub' === t.dubType
        ? null == (e = document.querySelector('.dubup'))
          ? void 0
          : e.parentElement
        : 'downdub' === t.dubType
          ? null == (n = document.querySelector('.dubdown'))
            ? void 0
            : n.parentElement
          : 'grab' === t.dubType
            ? document.querySelector('.add-to-playlist')
            : null;
    }
    function a() {
      const e = r();
      if (e) {
        const t = e.getBoundingClientRect();
        (Je(o, window.innerWidth - t.right),
          Je(i, t.height - 2),
          Je(s, 'block'));
      } else Hn(`Could not find hover target for ${t.dubType} in onHover`);
    }
    function l(e) {
      (e.relatedTarget && e.relatedTarget.closest('.dubplus-dubs-container')) ||
        Je(s, 'none');
    }
    function u(e) {
      const t = ho();
      ((t.value = `${t.value}@${e} `.trimStart()), t.focus());
    }
    (Rn(() => {
      const e = r();
      e
        ? (e.addEventListener('mouseenter', a),
          e.addEventListener('mouseleave', l))
        : Hn(`Could not find hover target for ${t.dubType} in onMount`);
    }),
      Wn(() => {
        const e = r();
        e
          ? (e.removeEventListener('mouseenter', a),
            e.removeEventListener('mouseleave', l))
          : Hn(`Could not find hover target for ${t.dubType} in onDestroy`);
      }));
    var c = br(),
      d = st(c);
    let p;
    var f = st(d),
      m = (e) => {
        var t = kn();
        (Cn(
          rt(t),
          17,
          () => Xt(n),
          (e) => e.userid,
          (e, t) => {
            var n = vr(),
              o = st(n),
              i = st(o),
              s = at(o, 2);
            s.__click = [mr, u, t];
            var r = st(s);
            (ft(
              (e) => {
                (Dn(i, 'src', e), En(r, `@${Xt(t).username ?? ''}`));
              },
              [
                () => {
                  return ((e = Xt(t).userid), `${es}/user/${e}/image`);
                  var e;
                },
              ],
            ),
              xn(e, n));
          },
        ),
          xn(e, t));
      },
      v = (e) => {
        var n = hr(),
          o = st(n),
          i = (e) => {
            var n = yn();
            (ft(
              (e) => En(n, e),
              [() => oo('dubs-hover.no-votes', { dubType: t.dubType })],
            ),
              xn(e, n));
          },
          s = (e) => {
            var n = yn();
            (ft(
              (e) => En(n, e),
              [() => oo('dubs-hover.no-grabs', { dubType: t.dubType })],
            ),
              xn(e, n));
          };
        (On(o, (e) => {
          'updub' === t.dubType || 'downdub' === t.dubType ? e(i) : e(s, !1);
        }),
          xn(e, n));
      };
    (On(f, (e) => {
      Xt(n).length > 0 ? e(m) : e(v, !1);
    }),
      $n(
        c,
        (e, t) => (null == vo ? void 0 : vo(e, t)),
        () => ({ to: 'body' }),
      ),
      ft(
        (e) => {
          (Dn(c, 'id', `dubplus-${t.dubType}s-container`),
            In(
              c,
              0,
              `dubplus-dubs-container dubplus-${t.dubType}s-container`,
              'svelte-ujv5bp',
            ),
            Tn(c, `bottom: ${Xt(i)}px; right: ${Xt(o)}px; display: ${Xt(s)};`),
            (p = In(d, 0, 'dubinfo-show svelte-ujv5bp', null, p, e)));
        },
        [() => ({ 'dubplus-no-dubs': 0 === Xt(n).length })],
      ),
      pn('mouseleave', c, () => Je(s, 'none')),
      xn(e, c),
      pe());
  }
  fn(['click']);
  let wr = 200;
  const yr = 100;
  function kr() {
    return document.getElementById('snow-container');
  }
  function xr(e = '') {
    const t = (function () {
      let e = document.getElementById('psjs-css');
      return (
        e ||
        ((e = document.createElement('style')),
        (e.id = 'psjs-css'),
        document.head.appendChild(e),
        e)
      );
    })();
    ((t.textContent = e), document.head.appendChild(t));
  }
  function Er(e = 100) {
    return Math.floor(Math.random() * e) + 1;
  }
  function _r(e, t) {
    return (
      (e = Math.ceil(e)),
      (t = Math.floor(t)),
      Math.floor(Math.random() * (t - e + 1)) + e
    );
  }
  function Sr(e, t) {
    return Math.random() * (t - e) + e;
  }
  function Or() {
    (!(function () {
      var e;
      const t = kr();
      wr = Number(
        (null == (e = null == t ? void 0 : t.dataset) ? void 0 : e.count) || wr,
      );
    })(),
      (function (e = 200) {
        let t = '';
        for (let n = 1; n < e; n++) {
          let e = 100 * Math.random(),
            o = 10 * Math.random(),
            i = e + o,
            s = e + o / 2,
            r = Sr(0.3, 0.8),
            a = r * yr,
            l = Math.random(),
            u = _r(10, 30),
            c = -1 * Er(30);
          t += `\n      .snowflake:nth-child(${n}) {\n        opacity: ${Math.random()};\n        transform: translate(${e}vw, -10px) scale(${l});\n        animation: fall-${n} ${u}s ${c}s linear infinite;\n      }\n      @keyframes fall-${n} {\n        ${100 * r}% {\n          transform: translate(${i}vw, ${a}vh) scale(${l});\n        }\n        to {\n          transform: translate(${s}vw, 100vh) scale(${l});\n        }\n      }\n    `;
        }
        xr(t);
      })(wr),
      (function (e = 200) {
        e -= 1;
        const t = kr();
        t.replaceChildren();
        for (let n = 0; n < e; n++) {
          let e = document.createElement('div');
          ((e.className = 'snowflake'), t.appendChild(e));
        }
      })(wr));
  }
  var Cr = bn('<div id="snow-container" class="svelte-qgqre1"></div>');
  var Ur = bn(
    '<li class="svelte-psnl7x"><button type="button" class="svelte-psnl7x"><!> <span class="dubplus-menu-label svelte-psnl7x"> </span></button></li>',
  );
  fn(['click']);
  var Mr = bn('<!> <!>', 1);
  function Lr(e, t) {
    (de(t, !1), Bn());
    var n = Mr(),
      o = rt(n);
    {
      let e = _e(() => oo('user-interface.title'));
      zo(o, {
        settingsId: 'user-interface',
        get name() {
          return Xt(e);
        },
      });
    }
    ($o(at(o, 2), {
      settingsId: 'user-interface',
      children: (e, t) => {
        var n = kn();
        (Cn(
          rt(n),
          1,
          () => ir,
          (e) => e.id,
          (e, t) => {
            var n = kn(),
              o = rt(n),
              i = (e) => {
                !(function (e, t) {
                  (de(t, !0),
                    Rn(() => {
                      t.init && t.init();
                    }));
                  var n = Ur(),
                    o = st(n);
                  o.__click = function (...e) {
                    var n;
                    null == (n = t.onClick) || n.apply(this, e);
                  };
                  var i = st(o);
                  Qn(
                    i,
                    () => t.icon,
                    (e, t) => {
                      t(e, {});
                    },
                  );
                  var s = st(at(i, 2));
                  (ft(
                    (e, i, r) => {
                      (Dn(n, 'id', t.id),
                        Dn(n, 'title', e),
                        Dn(o, 'aria-label', i),
                        En(s, r));
                    },
                    [
                      () => oo(t.description),
                      () => oo(t.description),
                      () => oo(t.label),
                    ],
                  ),
                    xn(e, n),
                    pe());
                })(e, {
                  get id() {
                    return Xt(t).id;
                  },
                  get label() {
                    return Xt(t).label;
                  },
                  get description() {
                    return Xt(t).description;
                  },
                  get icon() {
                    return Xt(t).altIcon;
                  },
                  get onClick() {
                    return Xt(t).onClick;
                  },
                  get init() {
                    return Xt(t).init;
                  },
                });
              },
              s = (e) => {
                ti(e, {
                  get id() {
                    return Xt(t).id;
                  },
                  get label() {
                    return Xt(t).label;
                  },
                  get description() {
                    return Xt(t).description;
                  },
                  get init() {
                    return Xt(t).init;
                  },
                  get customize() {
                    return Xt(t).custom;
                  },
                  get secondaryAction() {
                    return Xt(t).secondaryAction;
                  },
                  get turnOn() {
                    return Xt(t).turnOn;
                  },
                  get turnOff() {
                    return Xt(t).turnOff;
                  },
                });
              };
            (On(o, (e) => {
              Xt(t).altIcon ? e(i) : e(s, !1);
            }),
              xn(e, n));
          },
        ),
          xn(e, n));
      },
    }),
      xn(e, n),
      pe());
  }
  var zr,
    Qr,
    $r =
      ((zr = () => Co),
      (Qr = Ve(0)),
      function () {
        return 1 === arguments.length
          ? (Je(Qr, Xt(Qr) + 1), arguments[0])
          : (Xt(Qr), zr());
      }),
    Ar = bn('<!> <!>', 1);
  var Ir = bn('<!> <!>', 1);
  function Tr(e, t, n, o, i, s) {
    document.body.classList.contains(t)
      ? s()
      : (Je(n, oo('SnoozeVideo.tooltip.undo'), !0),
        Je(o, 'icon-eye-unblocked'),
        document.body.classList.add(t),
        window.QueUp.Events.bind(si, i));
  }
  var Nr = bn(
    '<button id="dubplus-snooze-video" type="button"><span class="svelte-1va87zs">1</span></button>',
  );
  fn(['click']);
  var jr = bn('<!> <!> <!>', 1),
    Dr = bn(
      '<!> <!> <!> <!> <!> <!> <!> <aside class="dubplus-menu svelte-yl0u1x"><p class="dubplus-menu-header svelte-yl0u1x"> <span class="version svelte-yl0u1x"> </span></p> <!> <!> <!> <!> <!></aside> <!>',
      1,
    );
  function qr(e, t) {
    (de(t, !1),
      Rn(() => {
        document.querySelector('html').classList.add('dubplus');
      }),
      Bn());
    var n = Dr(),
      o = rt(n);
    !(function (e, t) {
      de(t, !0);
      let n = Re(Xe(oo('Snooze.tooltip')));
      const o = { currentVol: 50, snoozed: !1 };
      function i() {
        (window.QueUp.room.player.setVolume(o.currentVol),
          window.QueUp.room.player.updateVolumeBar(),
          (o.snoozed = !1),
          Je(n, oo('Snooze.tooltip'), !0),
          window.QueUp.Events.unbind(si, s));
      }
      function s(e) {
        if (e.startTime < 2 && o.snoozed) return (i(), !0);
      }
      var r = cr();
      ((r.__click = function () {
        !o.snoozed &&
        !window.QueUp.room.player.muted_player &&
        window.QueUp.playerController.volume > 2
          ? (Je(n, oo('Snooze.tooltip.undo'), !0),
            (o.currentVol = window.QueUp.playerController.volume),
            window.QueUp.room.player.mutePlayer(),
            (o.snoozed = !0),
            window.QueUp.Events.bind(si, s))
          : o.snoozed && i();
      }),
        $n(
          r,
          (e, t) => (null == vo ? void 0 : vo(e, t)),
          () => ({ to: ko }),
        ),
        ft(() => {
          (Dn(r, 'aria-label', Xt(n)), Dn(r, 'data-dp-tooltip', Xt(n)));
        }),
        xn(e, r),
        pe());
    })(o, {});
    var i = at(o, 2);
    !(function (e, t) {
      (de(t, !1), Bn());
      var n = Eo();
      ((n.__click = [xo]),
        eo(st(n)),
        $n(
          n,
          (e, t) => (null == vo ? void 0 : vo(e, t)),
          () => ({ to: '.header-right-navigation' }),
        ),
        xn(e, n),
        pe());
    })(i, {});
    var s = at(i, 2);
    ur(s, {});
    var r = at(s, 2);
    !(function (e, t) {
      de(t, !0);
      let n = Re('icon-eye-blocked'),
        o = Re(Xe(oo('SnoozeVideo.tooltip')));
      const i = 'dubplus-snooze-video';
      function s() {
        (Je(o, oo('SnoozeVideo.tooltip'), !0),
          Je(n, 'icon-eye-blocked'),
          document.body.classList.remove(i),
          window.QueUp.Events.unbind(si, r));
      }
      function r(e) {
        if (e.startTime < 2) return (s(), !0);
      }
      var a = Nr();
      ((a.__click = [Tr, i, o, n, r, s]),
        $n(
          a,
          (e, t) => (null == vo ? void 0 : vo(e, t)),
          () => ({ to: ko }),
        ),
        ft(() => {
          (In(
            a,
            0,
            `${Xt(n)} snooze-video-btn dubplus-btn-player`,
            'svelte-1va87zs',
          ),
            Dn(a, 'aria-label', Xt(o)),
            Dn(a, 'data-dp-tooltip', Xt(o)));
        }),
        xn(e, a),
        pe());
    })(r, {});
    var a = at(r, 2),
      l = (e) => {
        fr(e, {});
      };
    On(a, (e) => {
      Co.options.autocomplete && e(l);
    });
    var u = at(a, 2),
      c = (e) => {
        var t = jr(),
          n = rt(t);
        gr(n, { dubType: 'updub' });
        var o = at(n, 2);
        (gr(o, { dubType: 'downdub' }),
          gr(at(o, 2), { dubType: 'grab' }),
          xn(e, t));
      };
    On(u, (e) => {
      Co.options['dubs-hover'] && e(c);
    });
    var d = at(u, 2),
      p = (e) => {
        !(function (e, t) {
          (de(t, !1),
            Rn(() => {
              (Or(), window.addEventListener('resize', Or));
            }),
            Wn(() => {
              window.removeEventListener('resize', Or);
            }),
            Bn());
          var n = Cr();
          ($n(
            n,
            (e, t) => (null == vo ? void 0 : vo(e, t)),
            () => ({ to: 'body' }),
          ),
            xn(e, n),
            pe());
        })(e, {});
      };
    On(d, (e) => {
      Co.options.snow && e(p);
    });
    var f = at(d, 2),
      m = st(f),
      v = st(m),
      h = st(at(v)),
      b = at(m, 2);
    !(function (e, t) {
      (de(t, !1), Bn());
      var n = ar(),
        o = rt(n);
      {
        let e = _e(() => oo('general.title'));
        zo(o, {
          settingsId: 'general',
          get name() {
            return Xt(e);
          },
        });
      }
      ($o(at(o, 2), {
        settingsId: 'general',
        children: (e, t) => {
          var n = kn();
          (Cn(
            rt(n),
            1,
            () => or,
            (e) => e.id,
            (e, t) => {
              ti(e, {
                get id() {
                  return Xt(t).id;
                },
                get label() {
                  return Xt(t).label;
                },
                get description() {
                  return Xt(t).description;
                },
                get init() {
                  return Xt(t).init;
                },
                get customize() {
                  return Xt(t).custom;
                },
                get modOnly() {
                  return Xt(t).modOnly;
                },
                get turnOn() {
                  return Xt(t).turnOn;
                },
                get turnOff() {
                  return Xt(t).turnOff;
                },
              });
            },
          ),
            xn(e, n));
        },
      }),
        xn(e, n),
        pe());
    })(b, {});
    var g = at(b, 2);
    Lr(g, {});
    var w = at(g, 2);
    !(function (e, t) {
      (de(t, !1),
        sr.forEach((e) => {
          $r().options[e.id] || $r(($r().options[e.id] = !1));
        }),
        Bn());
      var n = Ar(),
        o = rt(n);
      {
        let e = _e(() => oo('settings.title'));
        zo(o, {
          settingsId: 'settings',
          get name() {
            return Xt(e);
          },
        });
      }
      ($o(at(o, 2), {
        settingsId: 'settings',
        children: (e, t) => {
          var n = kn();
          (Cn(
            rt(n),
            1,
            () => sr,
            (e) => e.id,
            (e, t) => {
              ti(e, {
                get id() {
                  return Xt(t).id;
                },
                get label() {
                  return Xt(t).label;
                },
                get description() {
                  return Xt(t).description;
                },
                get init() {
                  return Xt(t).init;
                },
                get customize() {
                  return Xt(t).custom;
                },
                get turnOn() {
                  return Xt(t).turnOn;
                },
                get turnOff() {
                  return Xt(t).turnOff;
                },
              });
            },
          ),
            xn(e, n));
        },
      }),
        xn(e, n),
        pe());
    })(w, {});
    var y = at(w, 2);
    (!(function (e, t) {
      (de(t, !1), Bn());
      var n = Ir(),
        o = rt(n);
      {
        let e = _e(() => oo('customize.title'));
        zo(o, {
          settingsId: 'customize',
          get name() {
            return Xt(e);
          },
        });
      }
      ($o(at(o, 2), {
        settingsId: 'customize',
        children: (e, t) => {
          var n = kn();
          (Cn(
            rt(n),
            1,
            () => rr,
            (e) => e.id,
            (e, t) => {
              ti(e, {
                get id() {
                  return Xt(t).id;
                },
                get label() {
                  return Xt(t).label;
                },
                get description() {
                  return Xt(t).description;
                },
                get init() {
                  return Xt(t).init;
                },
                get customize() {
                  return Xt(t).custom;
                },
                get turnOn() {
                  return Xt(t).turnOn;
                },
                get turnOff() {
                  return Xt(t).turnOff;
                },
              });
            },
          ),
            xn(e, n));
        },
      }),
        xn(e, n),
        pe());
    })(y, {}),
      (function (e, t) {
        (de(t, !1), Bn());
        var n = Ro(),
          o = rt(n);
        {
          let e = _e(() => oo('contact.title'));
          zo(o, {
            settingsId: 'contact',
            get name() {
              return Xt(e);
            },
          });
        }
        ($o(at(o, 2), {
          settingsId: 'contact',
          children: (e, t) => {
            var n = Vo(),
              o = rt(n);
            {
              let e = _e(() => oo('contact.bugs'));
              Io(o, {
                get icon() {
                  return No;
                },
                href: 'https://discord.gg/XUkG3Qy',
                get text() {
                  return Xt(e);
                },
              });
            }
            var i = at(o, 2);
            Io(i, {
              get icon() {
                return Do;
              },
              href: 'https://www.reddit.com/r/DubPlus/',
              text: 'Reddit',
            });
            var s = at(i, 2);
            (Io(s, {
              get icon() {
                return Po;
              },
              href: 'https://facebook.com/DubPlusScript',
              text: 'Facebook',
            }),
              Io(at(s, 2), {
                get icon() {
                  return Bo;
                },
                href: 'https://twitter.com/DubPlusScript',
                text: 'Twitter',
              }),
              xn(e, n));
          },
        }),
          xn(e, n),
          pe());
      })(at(y, 2), {}),
      mo(at(f, 2), {}),
      ft(
        (e) => {
          (En(v, `${e ?? ''} `), En(h, `v${Ms}`));
        },
        [() => oo('Menu.title')],
      ),
      xn(e, n),
      pe());
  }
  const Pr = 'dubplusExtensionLoaded' in window;
  var Fr, Br;
  (Yn('Dub+: loaded as extension:', Pr),
    Pr ||
      ((Fr = '/dubplus.css'),
      (Br = 'dubplus-css'),
      new Promise((e, t) => {
        var n;
        null == (n = document.querySelector(`link.${Br}`)) || n.remove();
        const o = (function (e, t) {
          const n = document.createElement('link');
          return (
            (n.rel = 'stylesheet'),
            (n.type = 'text/css'),
            (n.className = e),
            (n.href = t),
            n
          );
        })(
          Br,
          `//cdn.jsdelivr.net/gh/DubPlus/DubPlus@feature-pinned-menu${Fr}?${Ms}`,
        );
        ((o.onload = () => e()), (o.onerror = t), document.head.appendChild(o));
      })).catch((e) => {
        Hn('Failed to load dubplus.css', e);
      }));
  let Vr = document.getElementById('dubplus-container');
  Vr
    ? Vr.children.length > 0 &&
      (!(function (e, t) {
        const n = Sn.get(e);
        n ? (Sn.delete(e), n(t)) : Promise.resolve();
      })(Vr),
      Vr.replaceChildren())
    : ((Vr = document.createElement('div')),
      (Vr.id = 'dubplus-container'),
      document.body.appendChild(Vr));
  const Rr = (function (
    e,
    {
      target: t,
      anchor: n,
      props: o = {},
      events: i,
      context: s,
      intro: r = !0,
    },
  ) {
    !(function () {
      if (void 0 === Ge) {
        ((Ge = window), (Ze = /Firefox/.test(navigator.userAgent)));
        var e = Element.prototype,
          t = Node.prototype,
          n = Text.prototype;
        ((et = C(t, 'firstChild').get),
          (tt = C(t, 'nextSibling').get),
          Q(e) &&
            ((e.__click = void 0),
            (e.__className = void 0),
            (e.__attributes = null),
            (e.__style = void 0),
            (e.__e = void 0)),
          Q(n) && (n.__t = void 0));
      }
    })();
    var a = new Set(),
      l = (e) => {
        for (var n = 0; n < e.length; n++) {
          var o = e[n];
          if (!a.has(o)) {
            a.add(o);
            var i = rn(o);
            t.addEventListener(o, mn, { passive: i });
            var s = _n.get(o);
            void 0 === s
              ? (document.addEventListener(o, mn, { passive: i }), _n.set(o, 1))
              : _n.set(o, s + 1);
          }
        }
      };
    (l(S(cn)), dn.add(l));
    var u = void 0,
      c = (function (e) {
        De.ensure();
        const t = ut(N, e, !0);
        return (e = {}) =>
          new Promise((n) => {
            e.outro
              ? yt(t, () => {
                  (gt(t), n(void 0));
                })
              : (gt(t), n(void 0));
          });
      })(() => {
        var r = n ?? t.appendChild(nt());
        return (
          vt(() => {
            (s && (de({}), (ue.c = s)),
              i && (o.$$events = i),
              (u = e(r, o) || {}),
              s && pe());
          }),
          () => {
            var e;
            for (var o of a) {
              t.removeEventListener(o, mn);
              var i = _n.get(o);
              0 === --i
                ? (document.removeEventListener(o, mn), _n.delete(o))
                : _n.set(o, i);
            }
            (dn.delete(l),
              r !== n && (null == (e = r.parentNode) || e.removeChild(r)));
          }
        );
      });
    return (Sn.set(u, c), u);
  })(
    function (e, t) {
      (de(t, !0),
        (window.dubplus = Object.assign(window.dubplus || {}, {
          name: Us,
          version: Ms,
          description: Ls,
          license: zs,
          homepage: Qs,
        })));
      let n = Re('loading');
      function o(e) {
        ((so.title = oo('Error.modal.title')),
          (so.content = e),
          (so.open = !0));
      }
      (Gn([
        'QueUp.session.id',
        'QueUp.room.chat',
        'QueUp.Events',
        'QueUp.room.player',
        'QueUp.helpers.cookie',
        'QueUp.room.model',
        'QueUp.room.users',
      ])
        .then(() => {
          Je(n, 'ready');
        })
        .catch(() => {
          var e, t;
          (
            null == (t = null == (e = window.QueUp) ? void 0 : e.session)
              ? void 0
              : t.id
          )
            ? Je(n, 'error')
            : Je(n, 'loggedout');
        }),
        ct(() => {
          'loggedout' === Xt(n)
            ? o(oo('Error.modal.loggedout'))
            : 'error' === Xt(n) && o(oo('Error.unknown'));
        }));
      var i = kn(),
        s = rt(i),
        r = (e) => {
          !(function (e, t) {
            (de(t, !1), Bn());
            var n = io(),
              o = st(n);
            eo(st(o));
            var i = st(at(o, 2));
            (ft((e) => En(i, e), [() => oo('Loading.text')]), xn(e, n), pe());
          })(e, {});
        },
        a = (e) => {
          var t = kn(),
            o = rt(t),
            i = (e) => {
              qr(e, {});
            },
            s = (e) => {
              mo(e, {});
            };
          (On(
            o,
            (e) => {
              'ready' === Xt(n) ? e(i) : e(s, !1);
            },
            !0,
          ),
            xn(e, t));
        };
      (On(s, (e) => {
        'loading' === Xt(n) ? e(r) : e(a, !1);
      }),
        xn(e, i),
        pe());
    },
    { target: Vr },
  );
  return Rr;
})();
