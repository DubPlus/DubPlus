{"version":3,"file":"dubplus.js","sources":["node_modules/esm-env/false.js","node_modules/svelte/src/internal/shared/utils.js","node_modules/svelte/src/internal/client/constants.js","node_modules/svelte/src/internal/client/reactivity/equality.js","node_modules/svelte/src/internal/client/errors.js","node_modules/svelte/src/internal/flags/index.js","node_modules/svelte/src/constants.js","node_modules/svelte/src/internal/shared/errors.js","node_modules/svelte/src/internal/client/context.js","node_modules/svelte/src/internal/client/reactivity/sources.js","node_modules/svelte/src/internal/client/dom/hydration.js","node_modules/svelte/src/internal/client/proxy.js","node_modules/svelte/src/internal/client/dom/operations.js","node_modules/svelte/src/internal/client/reactivity/deriveds.js","node_modules/svelte/src/internal/client/reactivity/effects.js","node_modules/svelte/src/internal/client/dom/task.js","node_modules/svelte/src/internal/client/runtime.js","node_modules/svelte/src/utils.js","node_modules/svelte/src/internal/client/dom/elements/misc.js","node_modules/svelte/src/internal/client/dom/elements/bindings/shared.js","node_modules/svelte/src/internal/client/dom/elements/events.js","node_modules/svelte/src/internal/client/dom/reconciler.js","node_modules/svelte/src/internal/client/dom/template.js","node_modules/svelte/src/internal/client/render.js","node_modules/svelte/src/internal/client/dom/blocks/if.js","node_modules/svelte/src/internal/client/dom/blocks/each.js","node_modules/svelte/src/internal/client/dom/blocks/snippet.js","node_modules/svelte/src/internal/client/dom/blocks/svelte-component.js","node_modules/svelte/src/internal/client/dom/elements/actions.js","node_modules/svelte/src/internal/client/dom/elements/attributes.js","node_modules/svelte/src/internal/client/dom/elements/class.js","node_modules/svelte/src/internal/client/dom/elements/bindings/input.js","node_modules/svelte/src/internal/client/dom/legacy/lifecycle.js","node_modules/svelte/src/internal/client/dom/legacy/misc.js","node_modules/svelte/src/index-client.js","node_modules/svelte/src/version.js","node_modules/svelte/src/internal/disclose-version.js","src/utils/logger.js","src/utils/waitFor.js","node_modules/svelte/src/internal/flags/legacy.js","src/translation.js","src/lib/stores/i18n.svelte.js","src/lib/Loading.svelte","src/lib/stores/modalState.svelte.js","src/lib/Modal.svelte","src/lib/actions/teleport.js","src/lib/menu/MenuIcon.svelte","src/utils/settings-migrate-v2.js","src/lib/stores/settings.svelte.js","src/lib/menu/MenuHeader.svelte","src/lib/sections/Contact.svelte","src/lib/menu/Switch.svelte","src/utils/modcheck.js","src/lib/menu/MenuSwitch.svelte","src/events-constants.js","src/lib/modules/autovote.js","src/lib/modules/afk.js","src/utils/ldb.js","src/lib/emoji/emoji.js","src/lib/modules/emotes.js","src/lib/emoji/emojiState.svelte.js","src/lib/emoji/helpers.js","src/lib/modules/autocomplete.js","src/lib/modules/customMentions.js","src/lib/modules/chatCleaner.js","src/lib/stores/activeTabState.svelte.js","src/utils/notify.js","src/lib/modules/mentionNotifications.js","src/lib/modules/pmNotifications.js","src/lib/modules/djNotification.js","src/lib/stores/dubsState.svelte.js","src/lib/api.js","src/lib/modules/showDubsOnHover.js","src/utils/chat-message.js","src/lib/modules/downDubInChat.js","src/lib/modules/upDubInChat.js","src/lib/modules/grabsInChat.js","src/lib/modules/snow.js","src/lib/modules/rain.js","src/lib/modules/fullscreen.js","src/lib/modules/splitchat.js","src/lib/modules/hideChat.js","src/lib/modules/hideVideo.js","src/lib/modules/hideAvatars.js","src/lib/modules/hideBackground.js","src/lib/modules/showTimestamps.js","src/lib/modules/spacebarMute.js","src/lib/modules/warnOnNavigation.js","src/utils/css.js","src/lib/modules/communityTheme.js","src/lib/modules/customCSS.js","src/lib/modules/customBackground.js","src/lib/modules/customNotificationSound.js","src/lib/modules/flipInterface.js","src/lib/modules/index.js","src/lib/sections/General.svelte","src/lib/satellites/Eta.svelte","src/lib/satellites/Snooze.svelte","src/lib/emoji/EmojiPreview.svelte","node_modules/process/browser.js","src/lib/satellites/DubsInfo.svelte","src/external/pure-snow.js","src/lib/satellites/Snow.svelte","src/lib/menu/MenuAction.svelte","src/lib/sections/UserInterface.svelte","src/lib/sections/Settings.svelte","src/lib/sections/Customize.svelte","src/lib/menu/Menu.svelte","src/DubPlus.svelte","src/main.js"],"sourcesContent":["export default false;\n","// Store the references to globals in case someone tries to monkey patch these, causing the below\n// to de-opt (this occurs often when using popular extensions).\nexport var is_array = Array.isArray;\nexport var index_of = Array.prototype.indexOf;\nexport var array_from = Array.from;\nexport var object_keys = Object.keys;\nexport var define_property = Object.defineProperty;\nexport var get_descriptor = Object.getOwnPropertyDescriptor;\nexport var get_descriptors = Object.getOwnPropertyDescriptors;\nexport var object_prototype = Object.prototype;\nexport var array_prototype = Array.prototype;\nexport var get_prototype_of = Object.getPrototypeOf;\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nexport const noop = () => {};\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n\n/**\n * @template [T=any]\n * @param {any} value\n * @returns {value is PromiseLike<T>}\n */\nexport function is_promise(value) {\n\treturn typeof value?.then === 'function';\n}\n\n/** @param {Function} fn */\nexport function run(fn) {\n\treturn fn();\n}\n\n/** @param {Array<() => void>} arr */\nexport function run_all(arr) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tarr[i]();\n\t}\n}\n\n/**\n * TODO replace with Promise.withResolvers once supported widely enough\n * @template T\n */\nexport function deferred() {\n\t/** @type {(value: T) => void} */\n\tvar resolve;\n\n\t/** @type {(reason: any) => void} */\n\tvar reject;\n\n\t/** @type {Promise<T>} */\n\tvar promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\n\t// @ts-expect-error\n\treturn { promise, resolve, reject };\n}\n\n/**\n * @template V\n * @param {V} value\n * @param {V | (() => V)} fallback\n * @param {boolean} [lazy]\n * @returns {V}\n */\nexport function fallback(value, fallback, lazy = false) {\n\treturn value === undefined\n\t\t? lazy\n\t\t\t? /** @type {() => V} */ (fallback)()\n\t\t\t: /** @type {V} */ (fallback)\n\t\t: value;\n}\n","export const DERIVED = 1 << 1;\nexport const EFFECT = 1 << 2;\nexport const RENDER_EFFECT = 1 << 3;\nexport const BLOCK_EFFECT = 1 << 4;\nexport const BRANCH_EFFECT = 1 << 5;\nexport const ROOT_EFFECT = 1 << 6;\nexport const BOUNDARY_EFFECT = 1 << 7;\nexport const UNOWNED = 1 << 8;\nexport const DISCONNECTED = 1 << 9;\nexport const CLEAN = 1 << 10;\nexport const DIRTY = 1 << 11;\nexport const MAYBE_DIRTY = 1 << 12;\nexport const INERT = 1 << 13;\nexport const DESTROYED = 1 << 14;\nexport const EFFECT_RAN = 1 << 15;\n/** 'Transparent' effects do not create a transition boundary */\nexport const EFFECT_TRANSPARENT = 1 << 16;\n/** Svelte 4 legacy mode props need to be handled with deriveds and be recognized elsewhere, hence the dedicated flag */\nexport const LEGACY_DERIVED_PROP = 1 << 17;\nexport const INSPECT_EFFECT = 1 << 18;\nexport const HEAD_EFFECT = 1 << 19;\nexport const EFFECT_HAS_DERIVED = 1 << 20;\n\nexport const STATE_SYMBOL = Symbol('$state');\nexport const STATE_SYMBOL_METADATA = Symbol('$state metadata');\nexport const LEGACY_PROPS = Symbol('legacy props');\nexport const LOADING_ATTR_SYMBOL = Symbol('');\n","/** @import { Equals } from '#client' */\n/** @type {Equals} */\nexport function equals(value) {\n\treturn value === this.v;\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function safe_not_equal(a, b) {\n\treturn a != a\n\t\t? b == b\n\t\t: a !== b || (a !== null && typeof a === 'object') || typeof a === 'function';\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function not_equal(a, b) {\n\treturn a !== b;\n}\n\n/** @type {Equals} */\nexport function safe_equals(value) {\n\treturn !safe_not_equal(value, this.v);\n}\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\n/**\n * Using `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\n * @returns {never}\n */\nexport function bind_invalid_checkbox_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_checkbox_value\\nUsing \\`bind:value\\` together with a checkbox input is not allowed. Use \\`bind:checked\\` instead\\nhttps://svelte.dev/e/bind_invalid_checkbox_value`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_checkbox_value`);\n\t}\n}\n\n/**\n * Component %component% has an export named `%key%` that a consumer component is trying to access using `bind:%key%`, which is disallowed. Instead, use `bind:this` (e.g. `<%name% bind:this={component} />`) and then access the property on the bound component instance (e.g. `component.%key%`)\n * @param {string} component\n * @param {string} key\n * @param {string} name\n * @returns {never}\n */\nexport function bind_invalid_export(component, key, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_export\\nComponent ${component} has an export named \\`${key}\\` that a consumer component is trying to access using \\`bind:${key}\\`, which is disallowed. Instead, use \\`bind:this\\` (e.g. \\`<${name} bind:this={component} />\\`) and then access the property on the bound component instance (e.g. \\`component.${key}\\`)\\nhttps://svelte.dev/e/bind_invalid_export`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_export`);\n\t}\n}\n\n/**\n * A component is attempting to bind to a non-bindable property `%key%` belonging to %component% (i.e. `<%name% bind:%key%={...}>`). To mark a property as bindable: `let { %key% = $bindable() } = $props()`\n * @param {string} key\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function bind_not_bindable(key, component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_not_bindable\\nA component is attempting to bind to a non-bindable property \\`${key}\\` belonging to ${component} (i.e. \\`<${name} bind:${key}={...}>\\`). To mark a property as bindable: \\`let { ${key} = $bindable() } = $props()\\`\\nhttps://svelte.dev/e/bind_not_bindable`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_not_bindable`);\n\t}\n}\n\n/**\n * %parent% called `%method%` on an instance of %component%, which is no longer valid in Svelte 5\n * @param {string} parent\n * @param {string} method\n * @param {string} component\n * @returns {never}\n */\nexport function component_api_changed(parent, method, component) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_changed\\n${parent} called \\`${method}\\` on an instance of ${component}, which is no longer valid in Svelte 5\\nhttps://svelte.dev/e/component_api_changed`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_changed`);\n\t}\n}\n\n/**\n * Attempted to instantiate %component% with `new %name%`, which is no longer valid in Svelte 5. If this component is not under your control, set the `compatibility.componentApi` compiler option to `4` to keep it working.\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function component_api_invalid_new(component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_invalid_new\\nAttempted to instantiate ${component} with \\`new ${name}\\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \\`compatibility.componentApi\\` compiler option to \\`4\\` to keep it working.\\nhttps://svelte.dev/e/component_api_invalid_new`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_invalid_new`);\n\t}\n}\n\n/**\n * A derived value cannot reference itself recursively\n * @returns {never}\n */\nexport function derived_references_self() {\n\tif (DEV) {\n\t\tconst error = new Error(`derived_references_self\\nA derived value cannot reference itself recursively\\nhttps://svelte.dev/e/derived_references_self`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/derived_references_self`);\n\t}\n}\n\n/**\n * Keyed each block has duplicate key `%value%` at indexes %a% and %b%\n * @param {string} a\n * @param {string} b\n * @param {string | undefined | null} [value]\n * @returns {never}\n */\nexport function each_key_duplicate(a, b, value) {\n\tif (DEV) {\n\t\tconst error = new Error(`each_key_duplicate\\n${value ? `Keyed each block has duplicate key \\`${value}\\` at indexes ${a} and ${b}` : `Keyed each block has duplicate key at indexes ${a} and ${b}`}\\nhttps://svelte.dev/e/each_key_duplicate`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/each_key_duplicate`);\n\t}\n}\n\n/**\n * `%rune%` cannot be used inside an effect cleanup function\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_in_teardown(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_teardown\\n\\`${rune}\\` cannot be used inside an effect cleanup function\\nhttps://svelte.dev/e/effect_in_teardown`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_teardown`);\n\t}\n}\n\n/**\n * Effect cannot be created inside a `$derived` value that was not itself created inside an effect\n * @returns {never}\n */\nexport function effect_in_unowned_derived() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_unowned_derived\\nEffect cannot be created inside a \\`$derived\\` value that was not itself created inside an effect\\nhttps://svelte.dev/e/effect_in_unowned_derived`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_unowned_derived`);\n\t}\n}\n\n/**\n * `%rune%` can only be used inside an effect (e.g. during component initialisation)\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_orphan(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_orphan\\n\\`${rune}\\` can only be used inside an effect (e.g. during component initialisation)\\nhttps://svelte.dev/e/effect_orphan`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_orphan`);\n\t}\n}\n\n/**\n * Maximum update depth exceeded. This can happen when a reactive block or effect repeatedly sets a new value. Svelte limits the number of nested updates to prevent infinite loops\n * @returns {never}\n */\nexport function effect_update_depth_exceeded() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_update_depth_exceeded\\nMaximum update depth exceeded. This can happen when a reactive block or effect repeatedly sets a new value. Svelte limits the number of nested updates to prevent infinite loops\\nhttps://svelte.dev/e/effect_update_depth_exceeded`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_update_depth_exceeded`);\n\t}\n}\n\n/**\n * Failed to hydrate the application\n * @returns {never}\n */\nexport function hydration_failed() {\n\tif (DEV) {\n\t\tconst error = new Error(`hydration_failed\\nFailed to hydrate the application\\nhttps://svelte.dev/e/hydration_failed`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydration_failed`);\n\t}\n}\n\n/**\n * Could not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\n * @returns {never}\n */\nexport function invalid_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet\\nCould not \\`{@render}\\` snippet due to the expression being \\`null\\` or \\`undefined\\`. Consider using optional chaining \\`{@render snippet?.()}\\`\\nhttps://svelte.dev/e/invalid_snippet`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet`);\n\t}\n}\n\n/**\n * `%name%(...)` cannot be used in runes mode\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_legacy_only(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_legacy_only\\n\\`${name}(...)\\` cannot be used in runes mode\\nhttps://svelte.dev/e/lifecycle_legacy_only`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_legacy_only`);\n\t}\n}\n\n/**\n * Cannot do `bind:%key%={undefined}` when `%key%` has a fallback value\n * @param {string} key\n * @returns {never}\n */\nexport function props_invalid_value(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_invalid_value\\nCannot do \\`bind:${key}={undefined}\\` when \\`${key}\\` has a fallback value\\nhttps://svelte.dev/e/props_invalid_value`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_invalid_value`);\n\t}\n}\n\n/**\n * Rest element properties of `$props()` such as `%property%` are readonly\n * @param {string} property\n * @returns {never}\n */\nexport function props_rest_readonly(property) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_rest_readonly\\nRest element properties of \\`$props()\\` such as \\`${property}\\` are readonly\\nhttps://svelte.dev/e/props_rest_readonly`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_rest_readonly`);\n\t}\n}\n\n/**\n * The `%rune%` rune is only available inside `.svelte` and `.svelte.js/ts` files\n * @param {string} rune\n * @returns {never}\n */\nexport function rune_outside_svelte(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`rune_outside_svelte\\nThe \\`${rune}\\` rune is only available inside \\`.svelte\\` and \\`.svelte.js/ts\\` files\\nhttps://svelte.dev/e/rune_outside_svelte`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/rune_outside_svelte`);\n\t}\n}\n\n/**\n * Property descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\n * @returns {never}\n */\nexport function state_descriptors_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_descriptors_fixed\\nProperty descriptors defined on \\`$state\\` objects must contain \\`value\\` and always be \\`enumerable\\`, \\`configurable\\` and \\`writable\\`.\\nhttps://svelte.dev/e/state_descriptors_fixed`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_descriptors_fixed`);\n\t}\n}\n\n/**\n * Cannot set prototype of `$state` object\n * @returns {never}\n */\nexport function state_prototype_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_prototype_fixed\\nCannot set prototype of \\`$state\\` object\\nhttps://svelte.dev/e/state_prototype_fixed`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_prototype_fixed`);\n\t}\n}\n\n/**\n * Reading state that was created inside the same derived is forbidden. Consider using `untrack` to read locally created state\n * @returns {never}\n */\nexport function state_unsafe_local_read() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_unsafe_local_read\\nReading state that was created inside the same derived is forbidden. Consider using \\`untrack\\` to read locally created state\\nhttps://svelte.dev/e/state_unsafe_local_read`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_unsafe_local_read`);\n\t}\n}\n\n/**\n * Updating state inside a derived or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\n * @returns {never}\n */\nexport function state_unsafe_mutation() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_unsafe_mutation\\nUpdating state inside a derived or a template expression is forbidden. If the value should not be reactive, declare it without \\`$state\\`\\nhttps://svelte.dev/e/state_unsafe_mutation`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_unsafe_mutation`);\n\t}\n}","export let legacy_mode_flag = false;\nexport let tracing_mode_flag = false;\n\nexport function enable_legacy_mode_flag() {\n\tlegacy_mode_flag = true;\n}\n\nexport function enable_tracing_mode_flag() {\n\ttracing_mode_flag = true;\n}\n","export const EACH_ITEM_REACTIVE = 1;\nexport const EACH_INDEX_REACTIVE = 1 << 1;\n/** See EachBlock interface metadata.is_controlled for an explanation what this is */\nexport const EACH_IS_CONTROLLED = 1 << 2;\nexport const EACH_IS_ANIMATED = 1 << 3;\nexport const EACH_ITEM_IMMUTABLE = 1 << 4;\n\nexport const PROPS_IS_IMMUTABLE = 1;\nexport const PROPS_IS_RUNES = 1 << 1;\nexport const PROPS_IS_UPDATED = 1 << 2;\nexport const PROPS_IS_BINDABLE = 1 << 3;\nexport const PROPS_IS_LAZY_INITIAL = 1 << 4;\n\nexport const TRANSITION_IN = 1;\nexport const TRANSITION_OUT = 1 << 1;\nexport const TRANSITION_GLOBAL = 1 << 2;\n\nexport const TEMPLATE_FRAGMENT = 1;\nexport const TEMPLATE_USE_IMPORT_NODE = 1 << 1;\n\nexport const HYDRATION_START = '[';\n/** used to indicate that an `{:else}...` block was rendered */\nexport const HYDRATION_START_ELSE = '[!';\nexport const HYDRATION_END = ']';\nexport const HYDRATION_ERROR = {};\n\nexport const ELEMENT_IS_NAMESPACED = 1;\nexport const ELEMENT_PRESERVE_ATTRIBUTE_CASE = 1 << 1;\n\nexport const UNINITIALIZED = Symbol();\n\n// Dev-time component properties\nexport const FILENAME = Symbol('filename');\nexport const HMR = Symbol('hmr');\n\nexport const NAMESPACE_SVG = 'http://www.w3.org/2000/svg';\nexport const NAMESPACE_MATHML = 'http://www.w3.org/1998/Math/MathML';\n\n// we use a list of ignorable runtime warnings because not every runtime warning\n// can be ignored and we want to keep the validation for svelte-ignore in place\nexport const IGNORABLE_RUNTIME_WARNINGS = /** @type {const} */ ([\n\t'state_snapshot_uncloneable',\n\t'binding_property_non_reactive',\n\t'hydration_attribute_changed',\n\t'hydration_html_changed',\n\t'ownership_invalid_binding',\n\t'ownership_invalid_mutation'\n]);\n\n/**\n * Whitespace inside one of these elements will not result in\n * a whitespace node being created in any circumstances. (This\n * list is almost certainly very incomplete)\n * TODO this is currently unused\n */\nexport const ELEMENTS_WITHOUT_TEXT = ['audio', 'datalist', 'dl', 'optgroup', 'select', 'video'];\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\n/**\n * Cannot use `{@render children(...)}` if the parent component uses `let:` directives. Consider using a named snippet instead\n * @returns {never}\n */\nexport function invalid_default_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_default_snippet\\nCannot use \\`{@render children(...)}\\` if the parent component uses \\`let:\\` directives. Consider using a named snippet instead\\nhttps://svelte.dev/e/invalid_default_snippet`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_default_snippet`);\n\t}\n}\n\n/**\n * `%name%(...)` can only be used during component initialisation\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_outside_component(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_outside_component\\n\\`${name}(...)\\` can only be used during component initialisation\\nhttps://svelte.dev/e/lifecycle_outside_component`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_outside_component`);\n\t}\n}\n\n/**\n * `%name%` is not a store with a `subscribe` method\n * @param {string} name\n * @returns {never}\n */\nexport function store_invalid_shape(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`store_invalid_shape\\n\\`${name}\\` is not a store with a \\`subscribe\\` method\\nhttps://svelte.dev/e/store_invalid_shape`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/store_invalid_shape`);\n\t}\n}\n\n/**\n * The `this` prop on `<svelte:element>` must be a string, if defined\n * @returns {never}\n */\nexport function svelte_element_invalid_this_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_element_invalid_this_value\\nThe \\`this\\` prop on \\`<svelte:element>\\` must be a string, if defined\\nhttps://svelte.dev/e/svelte_element_invalid_this_value`);\n\n\t\terror.name = 'Svelte error';\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_element_invalid_this_value`);\n\t}\n}","/** @import { ComponentContext } from '#client' */\n\nimport { DEV } from 'esm-env';\nimport { add_owner } from './dev/ownership.js';\nimport { lifecycle_outside_component } from '../shared/errors.js';\nimport { source } from './reactivity/sources.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction,\n\tuntrack\n} from './runtime.js';\nimport { effect } from './reactivity/effects.js';\nimport { legacy_mode_flag } from '../flags/index.js';\n\n/** @type {ComponentContext | null} */\nexport let component_context = null;\n\n/** @param {ComponentContext | null} context */\nexport function set_component_context(context) {\n\tcomponent_context = context;\n}\n\n/**\n * The current component function. Different from current component context:\n * ```html\n * <!-- App.svelte -->\n * <Foo>\n *   <Bar /> <!-- context == Foo.svelte, function == App.svelte -->\n * </Foo>\n * ```\n * @type {ComponentContext['function']}\n */\nexport let dev_current_component_function = null;\n\n/** @param {ComponentContext['function']} fn */\nexport function set_dev_current_component_function(fn) {\n\tdev_current_component_function = fn;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\tconst context_map = get_or_init_context_map('getContext');\n\tconst result = /** @type {T} */ (context_map.get(key));\n\treturn result;\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tconst context_map = get_or_init_context_map('setContext');\n\n\tif (DEV) {\n\t\t// When state is put into context, we treat as if it's global from now on.\n\t\t// We do for performance reasons (it's for example very expensive to call\n\t\t// getContext on a big object many times when part of a list component)\n\t\t// and danger of false positives.\n\t\tuntrack(() => add_owner(context, null, true));\n\t}\n\n\tcontext_map.set(key, context);\n\treturn context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\tconst context_map = get_or_init_context_map('hasContext');\n\treturn context_map.has(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\tconst context_map = get_or_init_context_map('getAllContexts');\n\treturn /** @type {T} */ (context_map);\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {any} runes\n * @param {Function} [fn]\n * @returns {void}\n */\nexport function push(props, runes = false, fn) {\n\tcomponent_context = {\n\t\tp: component_context,\n\t\tc: null,\n\t\te: null,\n\t\tm: false,\n\t\ts: props,\n\t\tx: null,\n\t\tl: null\n\t};\n\n\tif (legacy_mode_flag && !runes) {\n\t\tcomponent_context.l = {\n\t\t\ts: null,\n\t\t\tu: null,\n\t\t\tr1: [],\n\t\t\tr2: source(false)\n\t\t};\n\t}\n\n\tif (DEV) {\n\t\t// component function\n\t\tcomponent_context.function = fn;\n\t\tdev_current_component_function = fn;\n\t}\n}\n\n/**\n * @template {Record<string, any>} T\n * @param {T} [component]\n * @returns {T}\n */\nexport function pop(component) {\n\tconst context_stack_item = component_context;\n\tif (context_stack_item !== null) {\n\t\tif (component !== undefined) {\n\t\t\tcontext_stack_item.x = component;\n\t\t}\n\t\tconst component_effects = context_stack_item.e;\n\t\tif (component_effects !== null) {\n\t\t\tvar previous_effect = active_effect;\n\t\t\tvar previous_reaction = active_reaction;\n\t\t\tcontext_stack_item.e = null;\n\t\t\ttry {\n\t\t\t\tfor (var i = 0; i < component_effects.length; i++) {\n\t\t\t\t\tvar component_effect = component_effects[i];\n\t\t\t\t\tset_active_effect(component_effect.effect);\n\t\t\t\t\tset_active_reaction(component_effect.reaction);\n\t\t\t\t\teffect(component_effect.fn);\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tset_active_effect(previous_effect);\n\t\t\t\tset_active_reaction(previous_reaction);\n\t\t\t}\n\t\t}\n\t\tcomponent_context = context_stack_item.p;\n\t\tif (DEV) {\n\t\t\tdev_current_component_function = context_stack_item.p?.function ?? null;\n\t\t}\n\t\tcontext_stack_item.m = true;\n\t}\n\t// Micro-optimization: Don't set .a above to the empty object\n\t// so it can be garbage-collected when the return here is unused\n\treturn component || /** @type {T} */ ({});\n}\n\n/** @returns {boolean} */\nexport function is_runes() {\n\treturn !legacy_mode_flag || (component_context !== null && component_context.l === null);\n}\n\n/**\n * @param {string} name\n * @returns {Map<unknown, unknown>}\n */\nfunction get_or_init_context_map(name) {\n\tif (component_context === null) {\n\t\tlifecycle_outside_component(name);\n\t}\n\n\treturn (component_context.c ??= new Map(get_parent_context(component_context) || undefined));\n}\n\n/**\n * @param {ComponentContext} component_context\n * @returns {Map<unknown, unknown> | null}\n */\nfunction get_parent_context(component_context) {\n\tlet parent = component_context.p;\n\twhile (parent !== null) {\n\t\tconst context_map = parent.c;\n\t\tif (context_map !== null) {\n\t\t\treturn context_map;\n\t\t}\n\t\tparent = parent.p;\n\t}\n\treturn null;\n}\n","/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tuntracked_writes,\n\tget,\n\tschedule_effect,\n\tset_untracked_writes,\n\tset_signal_status,\n\tuntrack,\n\tincrement_write_version,\n\tupdate_effect,\n\tderived_sources,\n\tset_derived_sources,\n\tcheck_dirtiness,\n\tset_is_flushing_effect,\n\tis_flushing_effect,\n\tuntracking\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport {\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tINSPECT_EFFECT,\n\tUNOWNED,\n\tMAYBE_DIRTY,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT\n} from '../constants.js';\nimport * as e from '../errors.js';\nimport { legacy_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { get_stack } from '../dev/tracing.js';\nimport { component_context, is_runes } from '../context.js';\n\nexport let inspect_effects = new Set();\n\n/**\n * @param {Set<any>} v\n */\nexport function set_inspect_effects(v) {\n\tinspect_effects = v;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n * @returns {Source<V>}\n */\nexport function source(v, stack) {\n\t/** @type {Value} */\n\tvar signal = {\n\t\tf: 0, // TODO ideally we could skip this altogether, but it causes type errors\n\t\tv,\n\t\treactions: null,\n\t\tequals,\n\t\trv: 0,\n\t\twv: 0\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = stack ?? get_stack('CreatedAt');\n\t\tsignal.debug = null;\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {V} v\n */\nexport function state(v) {\n\treturn push_derived_source(source(v));\n}\n\n/**\n * @template V\n * @param {V} initial_value\n * @param {boolean} [immutable]\n * @returns {Source<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function mutable_source(initial_value, immutable = false) {\n\tconst s = source(initial_value);\n\tif (!immutable) {\n\t\ts.equals = safe_equals;\n\t}\n\n\t// bind the signal to the component context, in case we need to\n\t// track updates to trigger beforeUpdate/afterUpdate callbacks\n\tif (legacy_mode_flag && component_context !== null && component_context.l !== null) {\n\t\t(component_context.l.s ??= []).push(s);\n\t}\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {boolean} [immutable]\n * @returns {Source<V>}\n */\nexport function mutable_state(v, immutable = false) {\n\treturn push_derived_source(mutable_source(v, immutable));\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction push_derived_source(source) {\n\tif (active_reaction !== null && !untracking && (active_reaction.f & DERIVED) !== 0) {\n\t\tif (derived_sources === null) {\n\t\t\tset_derived_sources([source]);\n\t\t} else {\n\t\t\tderived_sources.push(source);\n\t\t}\n\t}\n\n\treturn source;\n}\n\n/**\n * @template V\n * @param {Value<V>} source\n * @param {V} value\n */\nexport function mutate(source, value) {\n\tset(\n\t\tsource,\n\t\tuntrack(() => get(source))\n\t);\n\treturn value;\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @returns {V}\n */\nexport function set(source, value) {\n\tif (\n\t\tactive_reaction !== null &&\n\t\t!untracking &&\n\t\tis_runes() &&\n\t\t(active_reaction.f & (DERIVED | BLOCK_EFFECT)) !== 0 &&\n\t\t// If the source was created locally within the current derived, then\n\t\t// we allow the mutation.\n\t\t(derived_sources === null || !derived_sources.includes(source))\n\t) {\n\t\te.state_unsafe_mutation();\n\t}\n\n\treturn internal_set(source, value);\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @returns {V}\n */\nexport function internal_set(source, value) {\n\tif (!source.equals(value)) {\n\t\tvar old_value = source.v;\n\t\tsource.v = value;\n\t\tsource.wv = increment_write_version();\n\n\t\tif (DEV && tracing_mode_flag) {\n\t\t\tsource.updated = get_stack('UpdatedAt');\n\t\t\tif (active_effect != null) {\n\t\t\t\tsource.trace_need_increase = true;\n\t\t\t\tsource.trace_v ??= old_value;\n\t\t\t}\n\t\t}\n\n\t\tmark_reactions(source, DIRTY);\n\n\t\t// It's possible that the current reaction might not have up-to-date dependencies\n\t\t// whilst it's actively running. So in the case of ensuring it registers the reaction\n\t\t// properly for itself, we need to ensure the current effect actually gets\n\t\t// scheduled. i.e: `$effect(() => x++)`\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tactive_effect !== null &&\n\t\t\t(active_effect.f & CLEAN) !== 0 &&\n\t\t\t(active_effect.f & (BRANCH_EFFECT | ROOT_EFFECT)) === 0\n\t\t) {\n\t\t\tif (untracked_writes === null) {\n\t\t\t\tset_untracked_writes([source]);\n\t\t\t} else {\n\t\t\t\tuntracked_writes.push(source);\n\t\t\t}\n\t\t}\n\n\t\tif (DEV && inspect_effects.size > 0) {\n\t\t\tconst inspects = Array.from(inspect_effects);\n\t\t\tvar previously_flushing_effect = is_flushing_effect;\n\t\t\tset_is_flushing_effect(true);\n\t\t\ttry {\n\t\t\t\tfor (const effect of inspects) {\n\t\t\t\t\t// Mark clean inspect-effects as maybe dirty and then check their dirtiness\n\t\t\t\t\t// instead of just updating the effects - this way we avoid overfiring.\n\t\t\t\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t\t\t}\n\t\t\t\t\tif (check_dirtiness(effect)) {\n\t\t\t\t\t\tupdate_effect(effect);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tset_is_flushing_effect(previously_flushing_effect);\n\t\t\t}\n\t\t\tinspect_effects.clear();\n\t\t}\n\t}\n\n\treturn value;\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update(source, d = 1) {\n\tvar value = get(source);\n\tvar result = d === 1 ? value++ : value--;\n\n\tset(source, value);\n\n\t// @ts-expect-error\n\treturn result;\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update_pre(source, d = 1) {\n\tvar value = get(source);\n\n\t// @ts-expect-error\n\treturn set(source, d === 1 ? ++value : --value);\n}\n\n/**\n * @param {Value} signal\n * @param {number} status should be DIRTY or MAYBE_DIRTY\n * @returns {void}\n */\nfunction mark_reactions(signal, status) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tvar runes = is_runes();\n\tvar length = reactions.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tvar reaction = reactions[i];\n\t\tvar flags = reaction.f;\n\n\t\t// Skip any effects that are already dirty\n\t\tif ((flags & DIRTY) !== 0) continue;\n\n\t\t// In legacy mode, skip the current effect to prevent infinite loops\n\t\tif (!runes && reaction === active_effect) continue;\n\n\t\t// Inspect effects need to run immediately, so that the stack trace makes sense\n\t\tif (DEV && (flags & INSPECT_EFFECT) !== 0) {\n\t\t\tinspect_effects.add(reaction);\n\t\t\tcontinue;\n\t\t}\n\n\t\tset_signal_status(reaction, status);\n\n\t\t// If the signal a) was previously clean or b) is an unowned derived, then mark it\n\t\tif ((flags & (CLEAN | UNOWNED)) !== 0) {\n\t\t\tif ((flags & DERIVED) !== 0) {\n\t\t\t\tmark_reactions(/** @type {Derived} */ (reaction), MAYBE_DIRTY);\n\t\t\t} else {\n\t\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t\t}\n\t\t}\n\t}\n}\n","/** @import { TemplateNode } from '#client' */\n\nimport {\n\tHYDRATION_END,\n\tHYDRATION_ERROR,\n\tHYDRATION_START,\n\tHYDRATION_START_ELSE\n} from '../../../constants.js';\nimport * as w from '../warnings.js';\nimport { get_next_sibling } from './operations.js';\n\n/**\n * Use this variable to guard everything related to hydration code so it can be treeshaken out\n * if the user doesn't use the `hydrate` method and these code paths are therefore not needed.\n */\nexport let hydrating = false;\n\n/** @param {boolean} value */\nexport function set_hydrating(value) {\n\thydrating = value;\n}\n\n/**\n * The node that is currently being hydrated. This starts out as the first node inside the opening\n * <!--[--> comment, and updates each time a component calls `$.child(...)` or `$.sibling(...)`.\n * When entering a block (e.g. `{#if ...}`), `hydrate_node` is the block opening comment; by the\n * time we leave the block it is the closing comment, which serves as the block's anchor.\n * @type {TemplateNode}\n */\nexport let hydrate_node;\n\n/** @param {TemplateNode} node */\nexport function set_hydrate_node(node) {\n\tif (node === null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\treturn (hydrate_node = node);\n}\n\nexport function hydrate_next() {\n\treturn set_hydrate_node(/** @type {TemplateNode} */ (get_next_sibling(hydrate_node)));\n}\n\n/** @param {TemplateNode} node */\nexport function reset(node) {\n\tif (!hydrating) return;\n\n\t// If the node has remaining siblings, something has gone wrong\n\tif (get_next_sibling(hydrate_node) !== null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\thydrate_node = node;\n}\n\n/**\n * @param {HTMLTemplateElement} template\n */\nexport function hydrate_template(template) {\n\tif (hydrating) {\n\t\t// @ts-expect-error TemplateNode doesn't include DocumentFragment, but it's actually fine\n\t\thydrate_node = template.content;\n\t}\n}\n\nexport function next(count = 1) {\n\tif (hydrating) {\n\t\tvar i = count;\n\t\tvar node = hydrate_node;\n\n\t\twhile (i--) {\n\t\t\tnode = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\t}\n\n\t\thydrate_node = node;\n\t}\n}\n\n/**\n * Removes all nodes starting at `hydrate_node` up until the next hydration end comment\n */\nexport function remove_nodes() {\n\tvar depth = 0;\n\tvar node = hydrate_node;\n\n\twhile (true) {\n\t\tif (node.nodeType === 8) {\n\t\t\tvar data = /** @type {Comment} */ (node).data;\n\n\t\t\tif (data === HYDRATION_END) {\n\t\t\t\tif (depth === 0) return node;\n\t\t\t\tdepth -= 1;\n\t\t\t} else if (data === HYDRATION_START || data === HYDRATION_START_ELSE) {\n\t\t\t\tdepth += 1;\n\t\t\t}\n\t\t}\n\n\t\tvar next = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tnode.remove();\n\t\tnode = next;\n\t}\n}\n","/** @import { ProxyMetadata, Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport { get, active_effect } from './runtime.js';\nimport { component_context } from './context.js';\nimport {\n\tarray_prototype,\n\tget_descriptor,\n\tget_prototype_of,\n\tis_array,\n\tobject_prototype\n} from '../shared/utils.js';\nimport { check_ownership, widen_ownership } from './dev/ownership.js';\nimport { source, set } from './reactivity/sources.js';\nimport { STATE_SYMBOL, STATE_SYMBOL_METADATA } from './constants.js';\nimport { UNINITIALIZED } from '../../constants.js';\nimport * as e from './errors.js';\nimport { get_stack } from './dev/tracing.js';\nimport { tracing_mode_flag } from '../flags/index.js';\n\n/**\n * @template T\n * @param {T} value\n * @param {ProxyMetadata | null} [parent]\n * @param {Source<T>} [prev] dev mode only\n * @returns {T}\n */\nexport function proxy(value, parent = null, prev) {\n\t/** @type {Error | null} */\n\tvar stack = null;\n\tif (DEV && tracing_mode_flag) {\n\t\tstack = get_stack('CreatedAt');\n\t}\n\t// if non-proxyable, or is already a proxy, return `value`\n\tif (typeof value !== 'object' || value === null || STATE_SYMBOL in value) {\n\t\treturn value;\n\t}\n\n\tconst prototype = get_prototype_of(value);\n\n\tif (prototype !== object_prototype && prototype !== array_prototype) {\n\t\treturn value;\n\t}\n\n\t/** @type {Map<any, Source<any>>} */\n\tvar sources = new Map();\n\tvar is_proxied_array = is_array(value);\n\tvar version = source(0);\n\n\tif (is_proxied_array) {\n\t\t// We need to create the length source eagerly to ensure that\n\t\t// mutations to the array are properly synced with our proxy\n\t\tsources.set('length', source(/** @type {any[]} */ (value).length, stack));\n\t}\n\n\t/** @type {ProxyMetadata} */\n\tvar metadata;\n\n\tif (DEV) {\n\t\tmetadata = {\n\t\t\tparent,\n\t\t\towners: null\n\t\t};\n\n\t\tif (prev) {\n\t\t\t// Reuse owners from previous state; necessary because reassignment is not guaranteed to have correct component context.\n\t\t\t// If no previous proxy exists we play it safe and assume ownerless state\n\t\t\t// @ts-expect-error\n\t\t\tconst prev_owners = prev.v?.[STATE_SYMBOL_METADATA]?.owners;\n\t\t\tmetadata.owners = prev_owners ? new Set(prev_owners) : null;\n\t\t} else {\n\t\t\tmetadata.owners =\n\t\t\t\tparent === null\n\t\t\t\t\t? component_context !== null\n\t\t\t\t\t\t? new Set([component_context.function])\n\t\t\t\t\t\t: null\n\t\t\t\t\t: new Set();\n\t\t}\n\t}\n\n\treturn new Proxy(/** @type {any} */ (value), {\n\t\tdefineProperty(_, prop, descriptor) {\n\t\t\tif (\n\t\t\t\t!('value' in descriptor) ||\n\t\t\t\tdescriptor.configurable === false ||\n\t\t\t\tdescriptor.enumerable === false ||\n\t\t\t\tdescriptor.writable === false\n\t\t\t) {\n\t\t\t\t// we disallow non-basic descriptors, because unless they are applied to the\n\t\t\t\t// target object — which we avoid, so that state can be forked — we will run\n\t\t\t\t// afoul of the various invariants\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/getOwnPropertyDescriptor#invariants\n\t\t\t\te.state_descriptors_fixed();\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\n\t\t\tif (s === undefined) {\n\t\t\t\ts = source(descriptor.value, stack);\n\t\t\t\tsources.set(prop, s);\n\t\t\t} else {\n\t\t\t\tset(s, proxy(descriptor.value, metadata));\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tdeleteProperty(target, prop) {\n\t\t\tvar s = sources.get(prop);\n\n\t\t\tif (s === undefined) {\n\t\t\t\tif (prop in target) {\n\t\t\t\t\tsources.set(prop, source(UNINITIALIZED, stack));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// When working with arrays, we need to also ensure we update the length when removing\n\t\t\t\t// an indexed property\n\t\t\t\tif (is_proxied_array && typeof prop === 'string') {\n\t\t\t\t\tvar ls = /** @type {Source<number>} */ (sources.get('length'));\n\t\t\t\t\tvar n = Number(prop);\n\n\t\t\t\t\tif (Number.isInteger(n) && n < ls.v) {\n\t\t\t\t\t\tset(ls, n);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tset(s, UNINITIALIZED);\n\t\t\t\tupdate_version(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tget(target, prop, receiver) {\n\t\t\tif (DEV && prop === STATE_SYMBOL_METADATA) {\n\t\t\t\treturn metadata;\n\t\t\t}\n\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar exists = prop in target;\n\n\t\t\t// create a source, but only if it's an own property and not a prototype property\n\t\t\tif (s === undefined && (!exists || get_descriptor(target, prop)?.writable)) {\n\t\t\t\ts = source(proxy(exists ? target[prop] : UNINITIALIZED, metadata), stack);\n\t\t\t\tsources.set(prop, s);\n\t\t\t}\n\n\t\t\tif (s !== undefined) {\n\t\t\t\tvar v = get(s);\n\n\t\t\t\t// In case of something like `foo = bar.map(...)`, foo would have ownership\n\t\t\t\t// of the array itself, while the individual items would have ownership\n\t\t\t\t// of the component that created bar. That means if we later do `foo[0].baz = 42`,\n\t\t\t\t// we could get a false-positive ownership violation, since the two proxies\n\t\t\t\t// are not connected to each other via the parent metadata relationship.\n\t\t\t\t// For this reason, we need to widen the ownership of the children\n\t\t\t\t// upon access when we detect they are not connected.\n\t\t\t\tif (DEV) {\n\t\t\t\t\t/** @type {ProxyMetadata | undefined} */\n\t\t\t\t\tvar prop_metadata = v?.[STATE_SYMBOL_METADATA];\n\t\t\t\t\tif (prop_metadata && prop_metadata?.parent !== metadata) {\n\t\t\t\t\t\twiden_ownership(metadata, prop_metadata);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn v === UNINITIALIZED ? undefined : v;\n\t\t\t}\n\n\t\t\treturn Reflect.get(target, prop, receiver);\n\t\t},\n\n\t\tgetOwnPropertyDescriptor(target, prop) {\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\tif (descriptor && 'value' in descriptor) {\n\t\t\t\tvar s = sources.get(prop);\n\t\t\t\tif (s) descriptor.value = get(s);\n\t\t\t} else if (descriptor === undefined) {\n\t\t\t\tvar source = sources.get(prop);\n\t\t\t\tvar value = source?.v;\n\n\t\t\t\tif (source !== undefined && value !== UNINITIALIZED) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\twritable: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn descriptor;\n\t\t},\n\n\t\thas(target, prop) {\n\t\t\tif (DEV && prop === STATE_SYMBOL_METADATA) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = (s !== undefined && s.v !== UNINITIALIZED) || Reflect.has(target, prop);\n\n\t\t\tif (\n\t\t\t\ts !== undefined ||\n\t\t\t\t(active_effect !== null && (!has || get_descriptor(target, prop)?.writable))\n\t\t\t) {\n\t\t\t\tif (s === undefined) {\n\t\t\t\t\ts = source(has ? proxy(target[prop], metadata) : UNINITIALIZED, stack);\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\n\t\t\t\tvar value = get(s);\n\t\t\t\tif (value === UNINITIALIZED) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn has;\n\t\t},\n\n\t\tset(target, prop, value, receiver) {\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = prop in target;\n\n\t\t\t// variable.length = value -> clear all signals with index >= value\n\t\t\tif (is_proxied_array && prop === 'length') {\n\t\t\t\tfor (var i = value; i < /** @type {Source<number>} */ (s).v; i += 1) {\n\t\t\t\t\tvar other_s = sources.get(i + '');\n\t\t\t\t\tif (other_s !== undefined) {\n\t\t\t\t\t\tset(other_s, UNINITIALIZED);\n\t\t\t\t\t} else if (i in target) {\n\t\t\t\t\t\t// If the item exists in the original, we need to create a uninitialized source,\n\t\t\t\t\t\t// else a later read of the property would result in a source being created with\n\t\t\t\t\t\t// the value of the original item at that index.\n\t\t\t\t\t\tother_s = source(UNINITIALIZED, stack);\n\t\t\t\t\t\tsources.set(i + '', other_s);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we haven't yet created a source for this property, we need to ensure\n\t\t\t// we do so otherwise if we read it later, then the write won't be tracked and\n\t\t\t// the heuristics of effects will be different vs if we had read the proxied\n\t\t\t// object property before writing to that property.\n\t\t\tif (s === undefined) {\n\t\t\t\tif (!has || get_descriptor(target, prop)?.writable) {\n\t\t\t\t\ts = source(undefined, stack);\n\t\t\t\t\tset(s, proxy(value, metadata));\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thas = s.v !== UNINITIALIZED;\n\t\t\t\tset(s, proxy(value, metadata));\n\t\t\t}\n\n\t\t\tif (DEV) {\n\t\t\t\t/** @type {ProxyMetadata | undefined} */\n\t\t\t\tvar prop_metadata = value?.[STATE_SYMBOL_METADATA];\n\t\t\t\tif (prop_metadata && prop_metadata?.parent !== metadata) {\n\t\t\t\t\twiden_ownership(metadata, prop_metadata);\n\t\t\t\t}\n\t\t\t\tcheck_ownership(metadata);\n\t\t\t}\n\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\t// Set the new value before updating any signals so that any listeners get the new value\n\t\t\tif (descriptor?.set) {\n\t\t\t\tdescriptor.set.call(receiver, value);\n\t\t\t}\n\n\t\t\tif (!has) {\n\t\t\t\t// If we have mutated an array directly, we might need to\n\t\t\t\t// signal that length has also changed. Do it before updating metadata\n\t\t\t\t// to ensure that iterating over the array as a result of a metadata update\n\t\t\t\t// will not cause the length to be out of sync.\n\t\t\t\tif (is_proxied_array && typeof prop === 'string') {\n\t\t\t\t\tvar ls = /** @type {Source<number>} */ (sources.get('length'));\n\t\t\t\t\tvar n = Number(prop);\n\n\t\t\t\t\tif (Number.isInteger(n) && n >= ls.v) {\n\t\t\t\t\t\tset(ls, n + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tupdate_version(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\townKeys(target) {\n\t\t\tget(version);\n\n\t\t\tvar own_keys = Reflect.ownKeys(target).filter((key) => {\n\t\t\t\tvar source = sources.get(key);\n\t\t\t\treturn source === undefined || source.v !== UNINITIALIZED;\n\t\t\t});\n\n\t\t\tfor (var [key, source] of sources) {\n\t\t\t\tif (source.v !== UNINITIALIZED && !(key in target)) {\n\t\t\t\t\town_keys.push(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn own_keys;\n\t\t},\n\n\t\tsetPrototypeOf() {\n\t\t\te.state_prototype_fixed();\n\t\t}\n\t});\n}\n\n/**\n * @param {Source<number>} signal\n * @param {1 | -1} [d]\n */\nfunction update_version(signal, d = 1) {\n\tset(signal, signal.v + d);\n}\n\n/**\n * @param {any} value\n */\nexport function get_proxied_value(value) {\n\tif (value !== null && typeof value === 'object' && STATE_SYMBOL in value) {\n\t\treturn value[STATE_SYMBOL];\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n */\nexport function is(a, b) {\n\treturn Object.is(get_proxied_value(a), get_proxied_value(b));\n}\n","/** @import { TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport { DEV } from 'esm-env';\nimport { init_array_prototype_warnings } from '../dev/equality.js';\nimport { get_descriptor } from '../../shared/utils.js';\n\n// export these for reference in the compiled code, making global name deduplication unnecessary\n/** @type {Window} */\nexport var $window;\n\n/** @type {Document} */\nexport var $document;\n\n/** @type {boolean} */\nexport var is_firefox;\n\n/** @type {() => Node | null} */\nvar first_child_getter;\n/** @type {() => Node | null} */\nvar next_sibling_getter;\n\n/**\n * Initialize these lazily to avoid issues when using the runtime in a server context\n * where these globals are not available while avoiding a separate server entry point\n */\nexport function init_operations() {\n\tif ($window !== undefined) {\n\t\treturn;\n\t}\n\n\t$window = window;\n\t$document = document;\n\tis_firefox = /Firefox/.test(navigator.userAgent);\n\n\tvar element_prototype = Element.prototype;\n\tvar node_prototype = Node.prototype;\n\n\t// @ts-ignore\n\tfirst_child_getter = get_descriptor(node_prototype, 'firstChild').get;\n\t// @ts-ignore\n\tnext_sibling_getter = get_descriptor(node_prototype, 'nextSibling').get;\n\n\t// the following assignments improve perf of lookups on DOM nodes\n\t// @ts-expect-error\n\telement_prototype.__click = undefined;\n\t// @ts-expect-error\n\telement_prototype.__className = '';\n\t// @ts-expect-error\n\telement_prototype.__attributes = null;\n\t// @ts-expect-error\n\telement_prototype.__styles = null;\n\t// @ts-expect-error\n\telement_prototype.__e = undefined;\n\n\t// @ts-expect-error\n\tText.prototype.__t = undefined;\n\n\tif (DEV) {\n\t\t// @ts-expect-error\n\t\telement_prototype.__svelte_meta = null;\n\n\t\tinit_array_prototype_warnings();\n\t}\n}\n\n/**\n * @param {string} value\n * @returns {Text}\n */\nexport function create_text(value = '') {\n\treturn document.createTextNode(value);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {Node | null}\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_first_child(node) {\n\treturn first_child_getter.call(node);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {Node | null}\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_next_sibling(node) {\n\treturn next_sibling_getter.call(node);\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @template {Node} N\n * @param {N} node\n * @param {boolean} is_text\n * @returns {Node | null}\n */\nexport function child(node, is_text) {\n\tif (!hydrating) {\n\t\treturn get_first_child(node);\n\t}\n\n\tvar child = /** @type {TemplateNode} */ (get_first_child(hydrate_node));\n\n\t// Child can be null if we have an element with a single child, like `<p>{text}</p>`, where `text` is empty\n\tif (child === null) {\n\t\tchild = hydrate_node.appendChild(create_text());\n\t} else if (is_text && child.nodeType !== 3) {\n\t\tvar text = create_text();\n\t\tchild?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(child);\n\treturn child;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {DocumentFragment | TemplateNode[]} fragment\n * @param {boolean} is_text\n * @returns {Node | null}\n */\nexport function first_child(fragment, is_text) {\n\tif (!hydrating) {\n\t\t// when not hydrating, `fragment` is a `DocumentFragment` (the result of calling `open_frag`)\n\t\tvar first = /** @type {DocumentFragment} */ (get_first_child(/** @type {Node} */ (fragment)));\n\n\t\t// TODO prevent user comments with the empty string when preserveComments is true\n\t\tif (first instanceof Comment && first.data === '') return get_next_sibling(first);\n\n\t\treturn first;\n\t}\n\n\t// if an {expression} is empty during SSR, there might be no\n\t// text node to hydrate — we must therefore create one\n\tif (is_text && hydrate_node?.nodeType !== 3) {\n\t\tvar text = create_text();\n\n\t\thydrate_node?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\treturn hydrate_node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {number} count\n * @param {boolean} is_text\n * @returns {Node | null}\n */\nexport function sibling(node, count = 1, is_text = false) {\n\tlet next_sibling = hydrating ? hydrate_node : node;\n\tvar last_sibling;\n\n\twhile (count--) {\n\t\tlast_sibling = next_sibling;\n\t\tnext_sibling = /** @type {TemplateNode} */ (get_next_sibling(next_sibling));\n\t}\n\n\tif (!hydrating) {\n\t\treturn next_sibling;\n\t}\n\n\tvar type = next_sibling?.nodeType;\n\n\t// if a sibling {expression} is empty during SSR, there might be no\n\t// text node to hydrate — we must therefore create one\n\tif (is_text && type !== 3) {\n\t\tvar text = create_text();\n\t\t// If the next sibling is `null` and we're handling text then it's because\n\t\t// the SSR content was empty for the text, so we need to generate a new text\n\t\t// node and insert it after the last sibling\n\t\tif (next_sibling === null) {\n\t\t\tlast_sibling?.after(text);\n\t\t} else {\n\t\t\tnext_sibling.before(text);\n\t\t}\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(next_sibling);\n\treturn /** @type {TemplateNode} */ (next_sibling);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {void}\n */\nexport function clear_text_content(node) {\n\tnode.textContent = '';\n}\n","/** @import { Derived, Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport { CLEAN, DERIVED, DIRTY, EFFECT_HAS_DERIVED, MAYBE_DIRTY, UNOWNED } from '../constants.js';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tset_signal_status,\n\tskip_reaction,\n\tupdate_reaction,\n\tincrement_write_version,\n\tset_active_effect\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport * as e from '../errors.js';\nimport { destroy_effect } from './effects.js';\nimport { inspect_effects, set_inspect_effects } from './sources.js';\nimport { get_stack } from '../dev/tracing.js';\nimport { tracing_mode_flag } from '../../flags/index.js';\nimport { component_context } from '../context.js';\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived(fn) {\n\tvar flags = DERIVED | DIRTY;\n\tvar parent_derived =\n\t\tactive_reaction !== null && (active_reaction.f & DERIVED) !== 0\n\t\t\t? /** @type {Derived} */ (active_reaction)\n\t\t\t: null;\n\n\tif (active_effect === null || (parent_derived !== null && (parent_derived.f & UNOWNED) !== 0)) {\n\t\tflags |= UNOWNED;\n\t} else {\n\t\t// Since deriveds are evaluated lazily, any effects created inside them are\n\t\t// created too late to ensure that the parent effect is added to the tree\n\t\tactive_effect.f |= EFFECT_HAS_DERIVED;\n\t}\n\n\t/** @type {Derived<V>} */\n\tconst signal = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\teffects: null,\n\t\tequals,\n\t\tf: flags,\n\t\tfn,\n\t\treactions: null,\n\t\trv: 0,\n\t\tv: /** @type {V} */ (null),\n\t\twv: 0,\n\t\tparent: parent_derived ?? active_effect\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = get_stack('CreatedAt');\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived_safe_equal(fn) {\n\tconst signal = derived(fn);\n\tsignal.equals = safe_equals;\n\treturn signal;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function destroy_derived_effects(derived) {\n\tvar effects = derived.effects;\n\n\tif (effects !== null) {\n\t\tderived.effects = null;\n\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdestroy_effect(/** @type {Effect} */ (effects[i]));\n\t\t}\n\t}\n}\n\n/**\n * The currently updating deriveds, used to detect infinite recursion\n * in dev mode and provide a nicer error than 'too much recursion'\n * @type {Derived[]}\n */\nlet stack = [];\n\n/**\n * @param {Derived} derived\n * @returns {Effect | null}\n */\nfunction get_derived_parent_effect(derived) {\n\tvar parent = derived.parent;\n\twhile (parent !== null) {\n\t\tif ((parent.f & DERIVED) === 0) {\n\t\t\treturn /** @type {Effect} */ (parent);\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\treturn null;\n}\n\n/**\n * @template T\n * @param {Derived} derived\n * @returns {T}\n */\nexport function execute_derived(derived) {\n\tvar value;\n\tvar prev_active_effect = active_effect;\n\n\tset_active_effect(get_derived_parent_effect(derived));\n\n\tif (DEV) {\n\t\tlet prev_inspect_effects = inspect_effects;\n\t\tset_inspect_effects(new Set());\n\t\ttry {\n\t\t\tif (stack.includes(derived)) {\n\t\t\t\te.derived_references_self();\n\t\t\t}\n\n\t\t\tstack.push(derived);\n\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t\tset_inspect_effects(prev_inspect_effects);\n\t\t\tstack.pop();\n\t\t}\n\t} else {\n\t\ttry {\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t}\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function update_derived(derived) {\n\tvar value = execute_derived(derived);\n\tvar status =\n\t\t(skip_reaction || (derived.f & UNOWNED) !== 0) && derived.deps !== null ? MAYBE_DIRTY : CLEAN;\n\n\tset_signal_status(derived, status);\n\n\tif (!derived.equals(value)) {\n\t\tderived.v = value;\n\t\tderived.wv = increment_write_version();\n\t}\n}\n","/** @import { ComponentContext, ComponentContextLegacy, Derived, Effect, TemplateNode, TransitionManager } from '#client' */\nimport {\n\tcheck_dirtiness,\n\tactive_effect,\n\tactive_reaction,\n\tupdate_effect,\n\tget,\n\tis_destroying_effect,\n\tis_flushing_effect,\n\tremove_reactions,\n\tschedule_effect,\n\tset_active_reaction,\n\tset_is_destroying_effect,\n\tset_is_flushing_effect,\n\tset_signal_status,\n\tuntrack,\n\tskip_reaction,\n\tuntracking\n} from '../runtime.js';\nimport {\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tRENDER_EFFECT,\n\tEFFECT,\n\tDESTROYED,\n\tINERT,\n\tEFFECT_RAN,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tEFFECT_TRANSPARENT,\n\tDERIVED,\n\tUNOWNED,\n\tCLEAN,\n\tINSPECT_EFFECT,\n\tHEAD_EFFECT,\n\tMAYBE_DIRTY,\n\tEFFECT_HAS_DERIVED,\n\tBOUNDARY_EFFECT\n} from '../constants.js';\nimport { set } from './sources.js';\nimport * as e from '../errors.js';\nimport { DEV } from 'esm-env';\nimport { define_property } from '../../shared/utils.js';\nimport { get_next_sibling } from '../dom/operations.js';\nimport { derived } from './deriveds.js';\nimport { component_context, dev_current_component_function } from '../context.js';\n\n/**\n * @param {'$effect' | '$effect.pre' | '$inspect'} rune\n */\nexport function validate_effect(rune) {\n\tif (active_effect === null && active_reaction === null) {\n\t\te.effect_orphan(rune);\n\t}\n\n\tif (active_reaction !== null && (active_reaction.f & UNOWNED) !== 0 && active_effect === null) {\n\t\te.effect_in_unowned_derived();\n\t}\n\n\tif (is_destroying_effect) {\n\t\te.effect_in_teardown(rune);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect} parent_effect\n */\nfunction push_effect(effect, parent_effect) {\n\tvar parent_last = parent_effect.last;\n\tif (parent_last === null) {\n\t\tparent_effect.last = parent_effect.first = effect;\n\t} else {\n\t\tparent_last.next = effect;\n\t\teffect.prev = parent_last;\n\t\tparent_effect.last = effect;\n\t}\n}\n\n/**\n * @param {number} type\n * @param {null | (() => void | (() => void))} fn\n * @param {boolean} sync\n * @param {boolean} push\n * @returns {Effect}\n */\nfunction create_effect(type, fn, sync, push = true) {\n\tvar is_root = (type & ROOT_EFFECT) !== 0;\n\tvar parent_effect = active_effect;\n\n\tif (DEV) {\n\t\t// Ensure the parent is never an inspect effect\n\t\twhile (parent_effect !== null && (parent_effect.f & INSPECT_EFFECT) !== 0) {\n\t\t\tparent_effect = parent_effect.parent;\n\t\t}\n\t}\n\n\t/** @type {Effect} */\n\tvar effect = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\tnodes_start: null,\n\t\tnodes_end: null,\n\t\tf: type | DIRTY,\n\t\tfirst: null,\n\t\tfn,\n\t\tlast: null,\n\t\tnext: null,\n\t\tparent: is_root ? null : parent_effect,\n\t\tprev: null,\n\t\tteardown: null,\n\t\ttransitions: null,\n\t\twv: 0\n\t};\n\n\tif (DEV) {\n\t\teffect.component_function = dev_current_component_function;\n\t}\n\n\tif (sync) {\n\t\tvar previously_flushing_effect = is_flushing_effect;\n\n\t\ttry {\n\t\t\tset_is_flushing_effect(true);\n\t\t\tupdate_effect(effect);\n\t\t\teffect.f |= EFFECT_RAN;\n\t\t} catch (e) {\n\t\t\tdestroy_effect(effect);\n\t\t\tthrow e;\n\t\t} finally {\n\t\t\tset_is_flushing_effect(previously_flushing_effect);\n\t\t}\n\t} else if (fn !== null) {\n\t\tschedule_effect(effect);\n\t}\n\n\t// if an effect has no dependencies, no DOM and no teardown function,\n\t// don't bother adding it to the effect tree\n\tvar inert =\n\t\tsync &&\n\t\teffect.deps === null &&\n\t\teffect.first === null &&\n\t\teffect.nodes_start === null &&\n\t\teffect.teardown === null &&\n\t\t(effect.f & (EFFECT_HAS_DERIVED | BOUNDARY_EFFECT)) === 0;\n\n\tif (!inert && !is_root && push) {\n\t\tif (parent_effect !== null) {\n\t\t\tpush_effect(effect, parent_effect);\n\t\t}\n\n\t\t// if we're in a derived, add the effect there too\n\t\tif (active_reaction !== null && (active_reaction.f & DERIVED) !== 0) {\n\t\t\tvar derived = /** @type {Derived} */ (active_reaction);\n\t\t\t(derived.effects ??= []).push(effect);\n\t\t}\n\t}\n\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect.tracking()`\n * @returns {boolean}\n */\nexport function effect_tracking() {\n\treturn active_reaction !== null && !untracking;\n}\n\n/**\n * @param {() => void} fn\n */\nexport function teardown(fn) {\n\tconst effect = create_effect(RENDER_EFFECT, null, false);\n\tset_signal_status(effect, CLEAN);\n\teffect.teardown = fn;\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect(...)`\n * @param {() => void | (() => void)} fn\n */\nexport function user_effect(fn) {\n\tvalidate_effect('$effect');\n\n\t// Non-nested `$effect(...)` in a component should be deferred\n\t// until the component is mounted\n\tvar defer =\n\t\tactive_effect !== null &&\n\t\t(active_effect.f & BRANCH_EFFECT) !== 0 &&\n\t\tcomponent_context !== null &&\n\t\t!component_context.m;\n\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect'\n\t\t});\n\t}\n\n\tif (defer) {\n\t\tvar context = /** @type {ComponentContext} */ (component_context);\n\t\t(context.e ??= []).push({\n\t\t\tfn,\n\t\t\teffect: active_effect,\n\t\t\treaction: active_reaction\n\t\t});\n\t} else {\n\t\tvar signal = effect(fn);\n\t\treturn signal;\n\t}\n}\n\n/**\n * Internal representation of `$effect.pre(...)`\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function user_pre_effect(fn) {\n\tvalidate_effect('$effect.pre');\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect.pre'\n\t\t});\n\t}\n\treturn render_effect(fn);\n}\n\n/** @param {() => void | (() => void)} fn */\nexport function inspect_effect(fn) {\n\treturn create_effect(INSPECT_EFFECT, fn, true);\n}\n\n/**\n * Internal representation of `$effect.root(...)`\n * @param {() => void | (() => void)} fn\n * @returns {() => void}\n */\nexport function effect_root(fn) {\n\tconst effect = create_effect(ROOT_EFFECT, fn, true);\n\n\treturn () => {\n\t\tdestroy_effect(effect);\n\t};\n}\n\n/**\n * An effect root whose children can transition out\n * @param {() => void} fn\n * @returns {(options?: { outro?: boolean }) => Promise<void>}\n */\nexport function component_root(fn) {\n\tconst effect = create_effect(ROOT_EFFECT, fn, true);\n\n\treturn (options = {}) => {\n\t\treturn new Promise((fulfil) => {\n\t\t\tif (options.outro) {\n\t\t\t\tpause_effect(effect, () => {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t\tfulfil(undefined);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdestroy_effect(effect);\n\t\t\t\tfulfil(undefined);\n\t\t\t}\n\t\t});\n\t};\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function effect(fn) {\n\treturn create_effect(EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$: ..`\n * @param {() => any} deps\n * @param {() => void | (() => void)} fn\n */\nexport function legacy_pre_effect(deps, fn) {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\t/** @type {{ effect: null | Effect, ran: boolean }} */\n\tvar token = { effect: null, ran: false };\n\tcontext.l.r1.push(token);\n\n\ttoken.effect = render_effect(() => {\n\t\tdeps();\n\n\t\t// If this legacy pre effect has already run before the end of the reset, then\n\t\t// bail out to emulate the same behavior.\n\t\tif (token.ran) return;\n\n\t\ttoken.ran = true;\n\t\tset(context.l.r2, true);\n\t\tuntrack(fn);\n\t});\n}\n\nexport function legacy_pre_effect_reset() {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\trender_effect(() => {\n\t\tif (!get(context.l.r2)) return;\n\n\t\t// Run dirty `$:` statements\n\t\tfor (var token of context.l.r1) {\n\t\t\tvar effect = token.effect;\n\n\t\t\t// If the effect is CLEAN, then make it MAYBE_DIRTY. This ensures we traverse through\n\t\t\t// the effects dependencies and correctly ensure each dependency is up-to-date.\n\t\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t}\n\n\t\t\tif (check_dirtiness(effect)) {\n\t\t\t\tupdate_effect(effect);\n\t\t\t}\n\n\t\t\ttoken.ran = false;\n\t\t}\n\n\t\tcontext.l.r2.v = false; // set directly to avoid rerunning this effect\n\t});\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function render_effect(fn) {\n\treturn create_effect(RENDER_EFFECT, fn, true);\n}\n\n/**\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} thunks\n * @returns {Effect}\n */\nexport function template_effect(fn, thunks = [], d = derived) {\n\tconst deriveds = thunks.map(d);\n\tconst effect = () => fn(...deriveds.map(get));\n\n\tif (DEV) {\n\t\tdefine_property(effect, 'name', {\n\t\t\tvalue: '{expression}'\n\t\t});\n\t}\n\n\treturn block(effect);\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function block(fn, flags = 0) {\n\treturn create_effect(RENDER_EFFECT | BLOCK_EFFECT | flags, fn, true);\n}\n\n/**\n * @param {(() => void)} fn\n * @param {boolean} [push]\n */\nexport function branch(fn, push = true) {\n\treturn create_effect(RENDER_EFFECT | BRANCH_EFFECT, fn, true, push);\n}\n\n/**\n * @param {Effect} effect\n */\nexport function execute_effect_teardown(effect) {\n\tvar teardown = effect.teardown;\n\tif (teardown !== null) {\n\t\tconst previously_destroying_effect = is_destroying_effect;\n\t\tconst previous_reaction = active_reaction;\n\t\tset_is_destroying_effect(true);\n\t\tset_active_reaction(null);\n\t\ttry {\n\t\t\tteardown.call(null);\n\t\t} finally {\n\t\t\tset_is_destroying_effect(previously_destroying_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @param {boolean} remove_dom\n * @returns {void}\n */\nexport function destroy_effect_children(signal, remove_dom = false) {\n\tvar effect = signal.first;\n\tsignal.first = signal.last = null;\n\n\twhile (effect !== null) {\n\t\tvar next = effect.next;\n\t\tdestroy_effect(effect, remove_dom);\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function destroy_block_effect_children(signal) {\n\tvar effect = signal.first;\n\n\twhile (effect !== null) {\n\t\tvar next = effect.next;\n\t\tif ((effect.f & BRANCH_EFFECT) === 0) {\n\t\t\tdestroy_effect(effect);\n\t\t}\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} [remove_dom]\n * @returns {void}\n */\nexport function destroy_effect(effect, remove_dom = true) {\n\tvar removed = false;\n\n\tif ((remove_dom || (effect.f & HEAD_EFFECT) !== 0) && effect.nodes_start !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar node = effect.nodes_start;\n\t\tvar end = effect.nodes_end;\n\n\t\twhile (node !== null) {\n\t\t\t/** @type {TemplateNode | null} */\n\t\t\tvar next = node === end ? null : /** @type {TemplateNode} */ (get_next_sibling(node));\n\n\t\t\tnode.remove();\n\t\t\tnode = next;\n\t\t}\n\n\t\tremoved = true;\n\t}\n\n\tdestroy_effect_children(effect, remove_dom && !removed);\n\tremove_reactions(effect, 0);\n\tset_signal_status(effect, DESTROYED);\n\n\tvar transitions = effect.transitions;\n\n\tif (transitions !== null) {\n\t\tfor (const transition of transitions) {\n\t\t\ttransition.stop();\n\t\t}\n\t}\n\n\texecute_effect_teardown(effect);\n\n\tvar parent = effect.parent;\n\n\t// If the parent doesn't have any children, then skip this work altogether\n\tif (parent !== null && parent.first !== null) {\n\t\tunlink_effect(effect);\n\t}\n\n\tif (DEV) {\n\t\teffect.component_function = null;\n\t}\n\n\t// `first` and `child` are nulled out in destroy_effect_children\n\t// we don't null out `parent` so that error propagation can work correctly\n\teffect.next =\n\t\teffect.prev =\n\t\teffect.teardown =\n\t\teffect.ctx =\n\t\teffect.deps =\n\t\teffect.fn =\n\t\teffect.nodes_start =\n\t\teffect.nodes_end =\n\t\t\tnull;\n}\n\n/**\n * Detach an effect from the effect tree, freeing up memory and\n * reducing the amount of work that happens on subsequent traversals\n * @param {Effect} effect\n */\nexport function unlink_effect(effect) {\n\tvar parent = effect.parent;\n\tvar prev = effect.prev;\n\tvar next = effect.next;\n\n\tif (prev !== null) prev.next = next;\n\tif (next !== null) next.prev = prev;\n\n\tif (parent !== null) {\n\t\tif (parent.first === effect) parent.first = next;\n\t\tif (parent.last === effect) parent.last = prev;\n\t}\n}\n\n/**\n * When a block effect is removed, we don't immediately destroy it or yank it\n * out of the DOM, because it might have transitions. Instead, we 'pause' it.\n * It stays around (in memory, and in the DOM) until outro transitions have\n * completed, and if the state change is reversed then we _resume_ it.\n * A paused effect does not update, and the DOM subtree becomes inert.\n * @param {Effect} effect\n * @param {() => void} [callback]\n */\nexport function pause_effect(effect, callback) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\n\tpause_children(effect, transitions, true);\n\n\trun_out_transitions(transitions, () => {\n\t\tdestroy_effect(effect);\n\t\tif (callback) callback();\n\t});\n}\n\n/**\n * @param {TransitionManager[]} transitions\n * @param {() => void} fn\n */\nexport function run_out_transitions(transitions, fn) {\n\tvar remaining = transitions.length;\n\tif (remaining > 0) {\n\t\tvar check = () => --remaining || fn();\n\t\tfor (var transition of transitions) {\n\t\t\ttransition.out(check);\n\t\t}\n\t} else {\n\t\tfn();\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {TransitionManager[]} transitions\n * @param {boolean} local\n */\nexport function pause_children(effect, transitions, local) {\n\tif ((effect.f & INERT) !== 0) return;\n\teffect.f ^= INERT;\n\n\tif (effect.transitions !== null) {\n\t\tfor (const transition of effect.transitions) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransitions.push(transition);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call pause_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tpause_children(child, transitions, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n}\n\n/**\n * The opposite of `pause_effect`. We call this if (for example)\n * `x` becomes falsy then truthy: `{#if x}...{/if}`\n * @param {Effect} effect\n */\nexport function resume_effect(effect) {\n\tresume_children(effect, true);\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} local\n */\nfunction resume_children(effect, local) {\n\tif ((effect.f & INERT) === 0) return;\n\teffect.f ^= INERT;\n\n\t// Ensure the effect is marked as clean again so that any dirty child\n\t// effects can schedule themselves for execution\n\tif ((effect.f & CLEAN) === 0) {\n\t\teffect.f ^= CLEAN;\n\t}\n\n\t// If a dependency of this effect changed while it was paused,\n\t// schedule the effect to update\n\tif (check_dirtiness(effect)) {\n\t\tset_signal_status(effect, DIRTY);\n\t\tschedule_effect(effect);\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call resume_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tresume_children(child, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n\n\tif (effect.transitions !== null) {\n\t\tfor (const transition of effect.transitions) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransition.in();\n\t\t\t}\n\t\t}\n\t}\n}\n","import { run_all } from '../../shared/utils.js';\n\n// Fallback for when requestIdleCallback is not available\nexport const request_idle_callback =\n\ttypeof requestIdleCallback === 'undefined'\n\t\t? (/** @type {() => void} */ cb) => setTimeout(cb, 1)\n\t\t: requestIdleCallback;\n\nlet is_micro_task_queued = false;\nlet is_idle_task_queued = false;\n\n/** @type {Array<() => void>} */\nlet current_queued_micro_tasks = [];\n/** @type {Array<() => void>} */\nlet current_queued_idle_tasks = [];\n\nfunction process_micro_tasks() {\n\tis_micro_task_queued = false;\n\tconst tasks = current_queued_micro_tasks.slice();\n\tcurrent_queued_micro_tasks = [];\n\trun_all(tasks);\n}\n\nfunction process_idle_tasks() {\n\tis_idle_task_queued = false;\n\tconst tasks = current_queued_idle_tasks.slice();\n\tcurrent_queued_idle_tasks = [];\n\trun_all(tasks);\n}\n\n/**\n * @param {() => void} fn\n */\nexport function queue_micro_task(fn) {\n\tif (!is_micro_task_queued) {\n\t\tis_micro_task_queued = true;\n\t\tqueueMicrotask(process_micro_tasks);\n\t}\n\tcurrent_queued_micro_tasks.push(fn);\n}\n\n/**\n * @param {() => void} fn\n */\nexport function queue_idle_task(fn) {\n\tif (!is_idle_task_queued) {\n\t\tis_idle_task_queued = true;\n\t\trequest_idle_callback(process_idle_tasks);\n\t}\n\tcurrent_queued_idle_tasks.push(fn);\n}\n\n/**\n * Synchronously run any queued tasks.\n */\nexport function flush_tasks() {\n\tif (is_micro_task_queued) {\n\t\tprocess_micro_tasks();\n\t}\n\tif (is_idle_task_queued) {\n\t\tprocess_idle_tasks();\n\t}\n}\n","/** @import { ComponentContext, Derived, Effect, Reaction, Signal, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport { define_property, get_descriptors, get_prototype_of, index_of } from '../shared/utils.js';\nimport {\n\tdestroy_block_effect_children,\n\tdestroy_effect_children,\n\texecute_effect_teardown,\n\tunlink_effect\n} from './reactivity/effects.js';\nimport {\n\tEFFECT,\n\tRENDER_EFFECT,\n\tDIRTY,\n\tMAYBE_DIRTY,\n\tCLEAN,\n\tDERIVED,\n\tUNOWNED,\n\tDESTROYED,\n\tINERT,\n\tBRANCH_EFFECT,\n\tSTATE_SYMBOL,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tLEGACY_DERIVED_PROP,\n\tDISCONNECTED,\n\tBOUNDARY_EFFECT\n} from './constants.js';\nimport { flush_tasks } from './dom/task.js';\nimport { internal_set } from './reactivity/sources.js';\nimport { destroy_derived_effects, update_derived } from './reactivity/deriveds.js';\nimport * as e from './errors.js';\nimport { FILENAME } from '../../constants.js';\nimport { tracing_mode_flag } from '../flags/index.js';\nimport { tracing_expressions, get_stack } from './dev/tracing.js';\nimport {\n\tcomponent_context,\n\tdev_current_component_function,\n\tis_runes,\n\tset_component_context,\n\tset_dev_current_component_function\n} from './context.js';\nimport { is_firefox } from './dom/operations.js';\n\nconst FLUSH_MICROTASK = 0;\nconst FLUSH_SYNC = 1;\n// Used for DEV time error handling\n/** @param {WeakSet<Error>} value */\nconst handled_errors = new WeakSet();\nexport let is_throwing_error = false;\n\n// Used for controlling the flush of effects.\nlet scheduler_mode = FLUSH_MICROTASK;\n// Used for handling scheduling\nlet is_micro_task_queued = false;\n\n/** @type {Effect | null} */\nlet last_scheduled_effect = null;\n\nexport let is_flushing_effect = false;\nexport let is_destroying_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_flushing_effect(value) {\n\tis_flushing_effect = value;\n}\n\n/** @param {boolean} value */\nexport function set_is_destroying_effect(value) {\n\tis_destroying_effect = value;\n}\n\n// Handle effect queues\n\n/** @type {Effect[]} */\nlet queued_root_effects = [];\n\nlet flush_count = 0;\n/** @type {Effect[]} Stack of effects, dev only */\nlet dev_effect_stack = [];\n// Handle signal reactivity tree dependencies and reactions\n\n/** @type {null | Reaction} */\nexport let active_reaction = null;\n\nexport let untracking = false;\n\n/** @param {null | Reaction} reaction */\nexport function set_active_reaction(reaction) {\n\tactive_reaction = reaction;\n}\n\n/** @type {null | Effect} */\nexport let active_effect = null;\n\n/** @param {null | Effect} effect */\nexport function set_active_effect(effect) {\n\tactive_effect = effect;\n}\n\n/**\n * When sources are created within a derived, we record them so that we can safely allow\n * local mutations to these sources without the side-effect error being invoked unnecessarily.\n * @type {null | Source[]}\n */\nexport let derived_sources = null;\n\n/**\n * @param {Source[] | null} sources\n */\nexport function set_derived_sources(sources) {\n\tderived_sources = sources;\n}\n\n/**\n * The dependencies of the reaction that is currently being executed. In many cases,\n * the dependencies are unchanged between runs, and so this will be `null` unless\n * and until a new dependency is accessed — we track this via `skipped_deps`\n * @type {null | Value[]}\n */\nexport let new_deps = null;\n\nlet skipped_deps = 0;\n\n/**\n * Tracks writes that the effect it's executed in doesn't listen to yet,\n * so that the dependency can be added to the effect later on if it then reads it\n * @type {null | Source[]}\n */\nexport let untracked_writes = null;\n\n/** @param {null | Source[]} value */\nexport function set_untracked_writes(value) {\n\tuntracked_writes = value;\n}\n\n/**\n * @type {number} Used by sources and deriveds for handling updates.\n * Version starts from 1 so that unowned deriveds differentiate between a created effect and a run one for tracing\n **/\nlet write_version = 1;\n\n/** @type {number} Used to version each read of a source of derived to avoid duplicating depedencies inside a reaction */\nlet read_version = 0;\n\n// If we are working with a get() chain that has no active container,\n// to prevent memory leaks, we skip adding the reaction.\nexport let skip_reaction = false;\n// Handle collecting all signals which are read during a specific time frame\n/** @type {Set<Value> | null} */\nexport let captured_signals = null;\n\n/** @param {Set<Value> | null} value */\nexport function set_captured_signals(value) {\n\tcaptured_signals = value;\n}\n\nexport function increment_write_version() {\n\treturn ++write_version;\n}\n\n/**\n * Determines whether a derived or effect is dirty.\n * If it is MAYBE_DIRTY, will set the status to CLEAN\n * @param {Reaction} reaction\n * @returns {boolean}\n */\nexport function check_dirtiness(reaction) {\n\tvar flags = reaction.f;\n\n\tif ((flags & DIRTY) !== 0) {\n\t\treturn true;\n\t}\n\n\tif ((flags & MAYBE_DIRTY) !== 0) {\n\t\tvar dependencies = reaction.deps;\n\t\tvar is_unowned = (flags & UNOWNED) !== 0;\n\n\t\tif (dependencies !== null) {\n\t\t\tvar i;\n\t\t\tvar dependency;\n\t\t\tvar is_disconnected = (flags & DISCONNECTED) !== 0;\n\t\t\tvar is_unowned_connected = is_unowned && active_effect !== null && !skip_reaction;\n\t\t\tvar length = dependencies.length;\n\n\t\t\t// If we are working with a disconnected or an unowned signal that is now connected (due to an active effect)\n\t\t\t// then we need to re-connect the reaction to the dependency\n\t\t\tif (is_disconnected || is_unowned_connected) {\n\t\t\t\tvar derived = /** @type {Derived} */ (reaction);\n\t\t\t\tvar parent = derived.parent;\n\n\t\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\t\tdependency = dependencies[i];\n\n\t\t\t\t\t// We always re-add all reactions (even duplicates) if the derived was\n\t\t\t\t\t// previously disconnected, however we don't if it was unowned as we\n\t\t\t\t\t// de-duplicate dependencies in that case\n\t\t\t\t\tif (is_disconnected || !dependency?.reactions?.includes(derived)) {\n\t\t\t\t\t\t(dependency.reactions ??= []).push(derived);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (is_disconnected) {\n\t\t\t\t\tderived.f ^= DISCONNECTED;\n\t\t\t\t}\n\t\t\t\t// If the unowned derived is now fully connected to the graph again (it's unowned and reconnected, has a parent\n\t\t\t\t// and the parent is not unowned), then we can mark it as connected again, removing the need for the unowned\n\t\t\t\t// flag\n\t\t\t\tif (is_unowned_connected && parent !== null && (parent.f & UNOWNED) === 0) {\n\t\t\t\t\tderived.f ^= UNOWNED;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\tdependency = dependencies[i];\n\n\t\t\t\tif (check_dirtiness(/** @type {Derived} */ (dependency))) {\n\t\t\t\t\tupdate_derived(/** @type {Derived} */ (dependency));\n\t\t\t\t}\n\n\t\t\t\tif (dependency.wv > reaction.wv) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Unowned signals should never be marked as clean unless they\n\t\t// are used within an active_effect without skip_reaction\n\t\tif (!is_unowned || (active_effect !== null && !skip_reaction)) {\n\t\t\tset_signal_status(reaction, CLEAN);\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * @param {unknown} error\n * @param {Effect} effect\n */\nfunction propagate_error(error, effect) {\n\t/** @type {Effect | null} */\n\tvar current = effect;\n\n\twhile (current !== null) {\n\t\tif ((current.f & BOUNDARY_EFFECT) !== 0) {\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error\n\t\t\t\tcurrent.fn(error);\n\t\t\t\treturn;\n\t\t\t} catch {\n\t\t\t\t// Remove boundary flag from effect\n\t\t\t\tcurrent.f ^= BOUNDARY_EFFECT;\n\t\t\t}\n\t\t}\n\n\t\tcurrent = current.parent;\n\t}\n\n\tis_throwing_error = false;\n\tthrow error;\n}\n\n/**\n * @param {Effect} effect\n */\nfunction should_rethrow_error(effect) {\n\treturn (\n\t\t(effect.f & DESTROYED) === 0 &&\n\t\t(effect.parent === null || (effect.parent.f & BOUNDARY_EFFECT) === 0)\n\t);\n}\n\nexport function reset_is_throwing_error() {\n\tis_throwing_error = false;\n}\n\n/**\n * @param {unknown} error\n * @param {Effect} effect\n * @param {Effect | null} previous_effect\n * @param {ComponentContext | null} component_context\n */\nexport function handle_error(error, effect, previous_effect, component_context) {\n\tif (is_throwing_error) {\n\t\tif (previous_effect === null) {\n\t\t\tis_throwing_error = false;\n\t\t}\n\n\t\tif (should_rethrow_error(effect)) {\n\t\t\tthrow error;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tif (previous_effect !== null) {\n\t\tis_throwing_error = true;\n\t}\n\n\tif (\n\t\t!DEV ||\n\t\tcomponent_context === null ||\n\t\t!(error instanceof Error) ||\n\t\thandled_errors.has(error)\n\t) {\n\t\tpropagate_error(error, effect);\n\t\treturn;\n\t}\n\n\thandled_errors.add(error);\n\n\tconst component_stack = [];\n\n\tconst effect_name = effect.fn?.name;\n\n\tif (effect_name) {\n\t\tcomponent_stack.push(effect_name);\n\t}\n\n\t/** @type {ComponentContext | null} */\n\tlet current_context = component_context;\n\n\twhile (current_context !== null) {\n\t\tif (DEV) {\n\t\t\t/** @type {string} */\n\t\t\tvar filename = current_context.function?.[FILENAME];\n\n\t\t\tif (filename) {\n\t\t\t\tconst file = filename.split('/').pop();\n\t\t\t\tcomponent_stack.push(file);\n\t\t\t}\n\t\t}\n\n\t\tcurrent_context = current_context.p;\n\t}\n\n\tconst indent = is_firefox ? '  ' : '\\t';\n\tdefine_property(error, 'message', {\n\t\tvalue: error.message + `\\n${component_stack.map((name) => `\\n${indent}in ${name}`).join('')}\\n`\n\t});\n\tdefine_property(error, 'component_stack', {\n\t\tvalue: component_stack\n\t});\n\n\tconst stack = error.stack;\n\n\t// Filter out internal files from callstack\n\tif (stack) {\n\t\tconst lines = stack.split('\\n');\n\t\tconst new_lines = [];\n\t\tfor (let i = 0; i < lines.length; i++) {\n\t\t\tconst line = lines[i];\n\t\t\tif (line.includes('svelte/src/internal')) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tnew_lines.push(line);\n\t\t}\n\t\tdefine_property(error, 'stack', {\n\t\t\tvalue: new_lines.join('\\n')\n\t\t});\n\t}\n\n\tpropagate_error(error, effect);\n\n\tif (should_rethrow_error(effect)) {\n\t\tthrow error;\n\t}\n}\n\n/**\n * @param {Value} signal\n * @param {Effect} effect\n * @param {boolean} [root]\n */\nfunction schedule_possible_effect_self_invalidation(signal, effect, root = true) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tfor (var i = 0; i < reactions.length; i++) {\n\t\tvar reaction = reactions[i];\n\t\tif ((reaction.f & DERIVED) !== 0) {\n\t\t\tschedule_possible_effect_self_invalidation(/** @type {Derived} */ (reaction), effect, false);\n\t\t} else if (effect === reaction) {\n\t\t\tif (root) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t} else if ((reaction.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(reaction, MAYBE_DIRTY);\n\t\t\t}\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/**\n * @template V\n * @param {Reaction} reaction\n * @returns {V}\n */\nexport function update_reaction(reaction) {\n\tvar previous_deps = new_deps;\n\tvar previous_skipped_deps = skipped_deps;\n\tvar previous_untracked_writes = untracked_writes;\n\tvar previous_reaction = active_reaction;\n\tvar previous_skip_reaction = skip_reaction;\n\tvar prev_derived_sources = derived_sources;\n\tvar previous_component_context = component_context;\n\tvar previous_untracking = untracking;\n\tvar flags = reaction.f;\n\n\tnew_deps = /** @type {null | Value[]} */ (null);\n\tskipped_deps = 0;\n\tuntracked_writes = null;\n\tactive_reaction = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) === 0 ? reaction : null;\n\tskip_reaction =\n\t\t(flags & UNOWNED) !== 0 &&\n\t\t(!is_flushing_effect || previous_reaction === null || previous_untracking);\n\n\tderived_sources = null;\n\tset_component_context(reaction.ctx);\n\tuntracking = false;\n\tread_version++;\n\n\ttry {\n\t\tvar result = /** @type {Function} */ (0, reaction.fn)();\n\t\tvar deps = reaction.deps;\n\n\t\tif (new_deps !== null) {\n\t\t\tvar i;\n\n\t\t\tremove_reactions(reaction, skipped_deps);\n\n\t\t\tif (deps !== null && skipped_deps > 0) {\n\t\t\t\tdeps.length = skipped_deps + new_deps.length;\n\t\t\t\tfor (i = 0; i < new_deps.length; i++) {\n\t\t\t\t\tdeps[skipped_deps + i] = new_deps[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treaction.deps = deps = new_deps;\n\t\t\t}\n\n\t\t\tif (!skip_reaction) {\n\t\t\t\tfor (i = skipped_deps; i < deps.length; i++) {\n\t\t\t\t\t(deps[i].reactions ??= []).push(reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (deps !== null && skipped_deps < deps.length) {\n\t\t\tremove_reactions(reaction, skipped_deps);\n\t\t\tdeps.length = skipped_deps;\n\t\t}\n\n\t\t// If we're inside an effect and we have untracked writes, then we need to\n\t\t// ensure that if any of those untracked writes result in re-invalidation\n\t\t// of the current effect, then that happens accordingly\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tuntracked_writes !== null &&\n\t\t\t!untracking &&\n\t\t\tdeps !== null &&\n\t\t\t(reaction.f & (DERIVED | MAYBE_DIRTY | DIRTY)) === 0\n\t\t) {\n\t\t\tfor (i = 0; i < /** @type {Source[]} */ (untracked_writes).length; i++) {\n\t\t\t\tschedule_possible_effect_self_invalidation(\n\t\t\t\t\tuntracked_writes[i],\n\t\t\t\t\t/** @type {Effect} */ (reaction)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// If we are returning to an previous reaction then\n\t\t// we need to increment the read version to ensure that\n\t\t// any dependencies in this reaction aren't marked with\n\t\t// the same version\n\t\tif (previous_reaction !== null) {\n\t\t\tread_version++;\n\t\t}\n\n\t\treturn result;\n\t} finally {\n\t\tnew_deps = previous_deps;\n\t\tskipped_deps = previous_skipped_deps;\n\t\tuntracked_writes = previous_untracked_writes;\n\t\tactive_reaction = previous_reaction;\n\t\tskip_reaction = previous_skip_reaction;\n\t\tderived_sources = prev_derived_sources;\n\t\tset_component_context(previous_component_context);\n\t\tuntracking = previous_untracking;\n\t}\n}\n\n/**\n * @template V\n * @param {Reaction} signal\n * @param {Value<V>} dependency\n * @returns {void}\n */\nfunction remove_reaction(signal, dependency) {\n\tlet reactions = dependency.reactions;\n\tif (reactions !== null) {\n\t\tvar index = index_of.call(reactions, signal);\n\t\tif (index !== -1) {\n\t\t\tvar new_length = reactions.length - 1;\n\t\t\tif (new_length === 0) {\n\t\t\t\treactions = dependency.reactions = null;\n\t\t\t} else {\n\t\t\t\t// Swap with last element and then remove.\n\t\t\t\treactions[index] = reactions[new_length];\n\t\t\t\treactions.pop();\n\t\t\t}\n\t\t}\n\t}\n\t// If the derived has no reactions, then we can disconnect it from the graph,\n\t// allowing it to either reconnect in the future, or be GC'd by the VM.\n\tif (\n\t\treactions === null &&\n\t\t(dependency.f & DERIVED) !== 0 &&\n\t\t// Destroying a child effect while updating a parent effect can cause a dependency to appear\n\t\t// to be unused, when in fact it is used by the currently-updating parent. Checking `new_deps`\n\t\t// allows us to skip the expensive work of disconnecting and immediately reconnecting it\n\t\t(new_deps === null || !new_deps.includes(dependency))\n\t) {\n\t\tset_signal_status(dependency, MAYBE_DIRTY);\n\t\t// If we are working with a derived that is owned by an effect, then mark it as being\n\t\t// disconnected.\n\t\tif ((dependency.f & (UNOWNED | DISCONNECTED)) === 0) {\n\t\t\tdependency.f ^= DISCONNECTED;\n\t\t}\n\t\t// Disconnect any reactions owned by this reaction\n\t\tdestroy_derived_effects(/** @type {Derived} **/ (dependency));\n\t\tremove_reactions(/** @type {Derived} **/ (dependency), 0);\n\t}\n}\n\n/**\n * @param {Reaction} signal\n * @param {number} start_index\n * @returns {void}\n */\nexport function remove_reactions(signal, start_index) {\n\tvar dependencies = signal.deps;\n\tif (dependencies === null) return;\n\n\tfor (var i = start_index; i < dependencies.length; i++) {\n\t\tremove_reaction(signal, dependencies[i]);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @returns {void}\n */\nexport function update_effect(effect) {\n\tvar flags = effect.f;\n\n\tif ((flags & DESTROYED) !== 0) {\n\t\treturn;\n\t}\n\n\tset_signal_status(effect, CLEAN);\n\n\tvar previous_effect = active_effect;\n\tvar previous_component_context = component_context;\n\n\tactive_effect = effect;\n\n\tif (DEV) {\n\t\tvar previous_component_fn = dev_current_component_function;\n\t\tset_dev_current_component_function(effect.component_function);\n\t}\n\n\ttry {\n\t\tif ((flags & BLOCK_EFFECT) !== 0) {\n\t\t\tdestroy_block_effect_children(effect);\n\t\t} else {\n\t\t\tdestroy_effect_children(effect);\n\t\t}\n\n\t\texecute_effect_teardown(effect);\n\t\tvar teardown = update_reaction(effect);\n\t\teffect.teardown = typeof teardown === 'function' ? teardown : null;\n\t\teffect.wv = write_version;\n\n\t\tvar deps = effect.deps;\n\n\t\t// In DEV, we need to handle a case where $inspect.trace() might\n\t\t// incorrectly state a source dependency has not changed when it has.\n\t\t// That's beacuse that source was changed by the same effect, causing\n\t\t// the versions to match. We can avoid this by incrementing the version\n\t\tif (DEV && tracing_mode_flag && (effect.f & DIRTY) !== 0 && deps !== null) {\n\t\t\tfor (let i = 0; i < deps.length; i++) {\n\t\t\t\tvar dep = deps[i];\n\t\t\t\tif (dep.trace_need_increase) {\n\t\t\t\t\tdep.wv = increment_write_version();\n\t\t\t\t\tdep.trace_need_increase = undefined;\n\t\t\t\t\tdep.trace_v = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (DEV) {\n\t\t\tdev_effect_stack.push(effect);\n\t\t}\n\t} catch (error) {\n\t\thandle_error(error, effect, previous_effect, previous_component_context || effect.ctx);\n\t} finally {\n\t\tactive_effect = previous_effect;\n\n\t\tif (DEV) {\n\t\t\tset_dev_current_component_function(previous_component_fn);\n\t\t}\n\t}\n}\n\nfunction log_effect_stack() {\n\t// eslint-disable-next-line no-console\n\tconsole.error(\n\t\t'Last ten effects were: ',\n\t\tdev_effect_stack.slice(-10).map((d) => d.fn)\n\t);\n\tdev_effect_stack = [];\n}\n\nfunction infinite_loop_guard() {\n\tif (flush_count > 1000) {\n\t\tflush_count = 0;\n\t\ttry {\n\t\t\te.effect_update_depth_exceeded();\n\t\t} catch (error) {\n\t\t\tif (DEV) {\n\t\t\t\t// stack is garbage, ignore. Instead add a console.error message.\n\t\t\t\tdefine_property(error, 'stack', {\n\t\t\t\t\tvalue: ''\n\t\t\t\t});\n\t\t\t}\n\t\t\t// Try and handle the error so it can be caught at a boundary, that's\n\t\t\t// if there's an effect available from when it was last scheduled\n\t\t\tif (last_scheduled_effect !== null) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\thandle_error(error, last_scheduled_effect, null, null);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// Only log the effect stack if the error is re-thrown\n\t\t\t\t\t\tlog_effect_stack();\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\thandle_error(error, last_scheduled_effect, null, null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tlog_effect_stack();\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t}\n\tflush_count++;\n}\n\n/**\n * @param {Array<Effect>} root_effects\n * @returns {void}\n */\nfunction flush_queued_root_effects(root_effects) {\n\tvar length = root_effects.length;\n\tif (length === 0) {\n\t\treturn;\n\t}\n\tinfinite_loop_guard();\n\n\tvar previously_flushing_effect = is_flushing_effect;\n\tis_flushing_effect = true;\n\n\ttry {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tvar effect = root_effects[i];\n\n\t\t\tif ((effect.f & CLEAN) === 0) {\n\t\t\t\teffect.f ^= CLEAN;\n\t\t\t}\n\n\t\t\tvar collected_effects = process_effects(effect);\n\t\t\tflush_queued_effects(collected_effects);\n\t\t}\n\t} finally {\n\t\tis_flushing_effect = previously_flushing_effect;\n\t}\n}\n\n/**\n * @param {Array<Effect>} effects\n * @returns {void}\n */\nfunction flush_queued_effects(effects) {\n\tvar length = effects.length;\n\tif (length === 0) return;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tvar effect = effects[i];\n\n\t\tif ((effect.f & (DESTROYED | INERT)) === 0) {\n\t\t\ttry {\n\t\t\t\tif (check_dirtiness(effect)) {\n\t\t\t\t\tupdate_effect(effect);\n\n\t\t\t\t\t// Effects with no dependencies or teardown do not get added to the effect tree.\n\t\t\t\t\t// Deferred effects (e.g. `$effect(...)`) _are_ added to the tree because we\n\t\t\t\t\t// don't know if we need to keep them until they are executed. Doing the check\n\t\t\t\t\t// here (rather than in `update_effect`) allows us to skip the work for\n\t\t\t\t\t// immediate effects.\n\t\t\t\t\tif (effect.deps === null && effect.first === null && effect.nodes_start === null) {\n\t\t\t\t\t\tif (effect.teardown === null) {\n\t\t\t\t\t\t\t// remove this effect from the graph\n\t\t\t\t\t\t\tunlink_effect(effect);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// keep the effect in the graph, but free up some memory\n\t\t\t\t\t\t\teffect.fn = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\thandle_error(error, effect, null, effect.ctx);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction process_deferred() {\n\tis_micro_task_queued = false;\n\tif (flush_count > 1001) {\n\t\treturn;\n\t}\n\tconst previous_queued_root_effects = queued_root_effects;\n\tqueued_root_effects = [];\n\tflush_queued_root_effects(previous_queued_root_effects);\n\n\tif (!is_micro_task_queued) {\n\t\tflush_count = 0;\n\t\tlast_scheduled_effect = null;\n\t\tif (DEV) {\n\t\t\tdev_effect_stack = [];\n\t\t}\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function schedule_effect(signal) {\n\tif (scheduler_mode === FLUSH_MICROTASK) {\n\t\tif (!is_micro_task_queued) {\n\t\t\tis_micro_task_queued = true;\n\t\t\tqueueMicrotask(process_deferred);\n\t\t}\n\t}\n\n\tlast_scheduled_effect = signal;\n\n\tvar effect = signal;\n\n\twhile (effect.parent !== null) {\n\t\teffect = effect.parent;\n\t\tvar flags = effect.f;\n\n\t\tif ((flags & (ROOT_EFFECT | BRANCH_EFFECT)) !== 0) {\n\t\t\tif ((flags & CLEAN) === 0) return;\n\t\t\teffect.f ^= CLEAN;\n\t\t}\n\t}\n\n\tqueued_root_effects.push(effect);\n}\n\n/**\n *\n * This function both runs render effects and collects user effects in topological order\n * from the starting effect passed in. Effects will be collected when they match the filtered\n * bitwise flag passed in only. The collected effects array will be populated with all the user\n * effects to be flushed.\n *\n * @param {Effect} effect\n * @returns {Effect[]}\n */\nfunction process_effects(effect) {\n\t/** @type {Effect[]} */\n\tvar effects = [];\n\n\tvar current_effect = effect.first;\n\n\tmain_loop: while (current_effect !== null) {\n\t\tvar flags = current_effect.f;\n\t\tvar is_branch = (flags & BRANCH_EFFECT) !== 0;\n\t\tvar is_skippable_branch = is_branch && (flags & CLEAN) !== 0;\n\t\tvar sibling = current_effect.next;\n\n\t\tif (!is_skippable_branch && (flags & INERT) === 0) {\n\t\t\tif ((flags & EFFECT) !== 0) {\n\t\t\t\teffects.push(current_effect);\n\t\t\t} else if (is_branch) {\n\t\t\t\tcurrent_effect.f ^= CLEAN;\n\t\t\t} else {\n\t\t\t\t// Ensure we set the effect to be the active reaction\n\t\t\t\t// to ensure that unowned deriveds are correctly tracked\n\t\t\t\t// because we're flushing the current effect\n\t\t\t\tvar previous_active_reaction = active_reaction;\n\t\t\t\ttry {\n\t\t\t\t\tactive_reaction = current_effect;\n\t\t\t\t\tif (check_dirtiness(current_effect)) {\n\t\t\t\t\t\tupdate_effect(current_effect);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\thandle_error(error, current_effect, null, current_effect.ctx);\n\t\t\t\t} finally {\n\t\t\t\t\tactive_reaction = previous_active_reaction;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar child = current_effect.first;\n\n\t\t\tif (child !== null) {\n\t\t\t\tcurrent_effect = child;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tif (sibling === null) {\n\t\t\tlet parent = current_effect.parent;\n\n\t\t\twhile (parent !== null) {\n\t\t\t\tif (effect === parent) {\n\t\t\t\t\tbreak main_loop;\n\t\t\t\t}\n\t\t\t\tvar parent_sibling = parent.next;\n\t\t\t\tif (parent_sibling !== null) {\n\t\t\t\t\tcurrent_effect = parent_sibling;\n\t\t\t\t\tcontinue main_loop;\n\t\t\t\t}\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t}\n\n\t\tcurrent_effect = sibling;\n\t}\n\n\treturn effects;\n}\n\n/**\n * Internal version of `flushSync` with the option to not flush previous effects.\n * Returns the result of the passed function, if given.\n * @param {() => any} [fn]\n * @returns {any}\n */\nexport function flush_sync(fn) {\n\tvar previous_scheduler_mode = scheduler_mode;\n\tvar previous_queued_root_effects = queued_root_effects;\n\n\ttry {\n\t\tinfinite_loop_guard();\n\n\t\t/** @type {Effect[]} */\n\t\tconst root_effects = [];\n\n\t\tscheduler_mode = FLUSH_SYNC;\n\t\tqueued_root_effects = root_effects;\n\t\tis_micro_task_queued = false;\n\n\t\tflush_queued_root_effects(previous_queued_root_effects);\n\n\t\tvar result = fn?.();\n\n\t\tflush_tasks();\n\t\tif (queued_root_effects.length > 0 || root_effects.length > 0) {\n\t\t\tflush_sync();\n\t\t}\n\n\t\tflush_count = 0;\n\t\tlast_scheduled_effect = null;\n\t\tif (DEV) {\n\t\t\tdev_effect_stack = [];\n\t\t}\n\n\t\treturn result;\n\t} finally {\n\t\tscheduler_mode = previous_scheduler_mode;\n\t\tqueued_root_effects = previous_queued_root_effects;\n\t}\n}\n\n/**\n * Returns a promise that resolves once any pending state changes have been applied.\n * @returns {Promise<void>}\n */\nexport async function tick() {\n\tawait Promise.resolve();\n\t// By calling flush_sync we guarantee that any pending state changes are applied after one tick.\n\t// TODO look into whether we can make flushing subsequent updates synchronously in the future.\n\tflush_sync();\n}\n\n/**\n * @template V\n * @param {Value<V>} signal\n * @returns {V}\n */\nexport function get(signal) {\n\tvar flags = signal.f;\n\tvar is_derived = (flags & DERIVED) !== 0;\n\n\tif (captured_signals !== null) {\n\t\tcaptured_signals.add(signal);\n\t}\n\n\t// Register the dependency on the current reaction signal.\n\tif (active_reaction !== null && !untracking) {\n\t\tif (derived_sources !== null && derived_sources.includes(signal)) {\n\t\t\te.state_unsafe_local_read();\n\t\t}\n\t\tvar deps = active_reaction.deps;\n\t\tif (signal.rv < read_version) {\n\t\t\tsignal.rv = read_version;\n\t\t\t// If the signal is accessing the same dependencies in the same\n\t\t\t// order as it did last time, increment `skipped_deps`\n\t\t\t// rather than updating `new_deps`, which creates GC cost\n\t\t\tif (new_deps === null && deps !== null && deps[skipped_deps] === signal) {\n\t\t\t\tskipped_deps++;\n\t\t\t} else if (new_deps === null) {\n\t\t\t\tnew_deps = [signal];\n\t\t\t} else if (!skip_reaction || !new_deps.includes(signal)) {\n\t\t\t\t// Normally we can push duplicated dependencies to `new_deps`, but if we're inside\n\t\t\t\t// an unowned derived because skip_reaction is true, then we need to ensure that\n\t\t\t\t// we don't have duplicates\n\t\t\t\tnew_deps.push(signal);\n\t\t\t}\n\t\t}\n\t} else if (\n\t\tis_derived &&\n\t\t/** @type {Derived} */ (signal).deps === null &&\n\t\t/** @type {Derived} */ (signal).effects === null\n\t) {\n\t\tvar derived = /** @type {Derived} */ (signal);\n\t\tvar parent = derived.parent;\n\n\t\tif (parent !== null && (parent.f & UNOWNED) === 0) {\n\t\t\t// If the derived is owned by another derived then mark it as unowned\n\t\t\t// as the derived value might have been referenced in a different context\n\t\t\t// since and thus its parent might not be its true owner anymore\n\t\t\tderived.f ^= UNOWNED;\n\t\t}\n\t}\n\n\tif (is_derived) {\n\t\tderived = /** @type {Derived} */ (signal);\n\n\t\tif (check_dirtiness(derived)) {\n\t\t\tupdate_derived(derived);\n\t\t}\n\t}\n\n\tif (\n\t\tDEV &&\n\t\ttracing_mode_flag &&\n\t\ttracing_expressions !== null &&\n\t\tactive_reaction !== null &&\n\t\ttracing_expressions.reaction === active_reaction\n\t) {\n\t\t// Used when mapping state between special blocks like `each`\n\t\tif (signal.debug) {\n\t\t\tsignal.debug();\n\t\t} else if (signal.created) {\n\t\t\tvar entry = tracing_expressions.entries.get(signal);\n\n\t\t\tif (entry === undefined) {\n\t\t\t\tentry = { read: [] };\n\t\t\t\ttracing_expressions.entries.set(signal, entry);\n\t\t\t}\n\n\t\t\tentry.read.push(get_stack('TracedAt'));\n\t\t}\n\t}\n\n\treturn signal.v;\n}\n\n/**\n * Like `get`, but checks for `undefined`. Used for `var` declarations because they can be accessed before being declared\n * @template V\n * @param {Value<V> | undefined} signal\n * @returns {V | undefined}\n */\nexport function safe_get(signal) {\n\treturn signal && get(signal);\n}\n\n/**\n * Capture an array of all the signals that are read when `fn` is called\n * @template T\n * @param {() => T} fn\n */\nexport function capture_signals(fn) {\n\tvar previous_captured_signals = captured_signals;\n\tcaptured_signals = new Set();\n\n\tvar captured = captured_signals;\n\tvar signal;\n\n\ttry {\n\t\tuntrack(fn);\n\t\tif (previous_captured_signals !== null) {\n\t\t\tfor (signal of captured_signals) {\n\t\t\t\tprevious_captured_signals.add(signal);\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tcaptured_signals = previous_captured_signals;\n\t}\n\n\treturn captured;\n}\n\n/**\n * Invokes a function and captures all signals that are read during the invocation,\n * then invalidates them.\n * @param {() => any} fn\n */\nexport function invalidate_inner_signals(fn) {\n\tvar captured = capture_signals(() => untrack(fn));\n\n\tfor (var signal of captured) {\n\t\t// Go one level up because derived signals created as part of props in legacy mode\n\t\tif ((signal.f & LEGACY_DERIVED_PROP) !== 0) {\n\t\t\tfor (const dep of /** @type {Derived} */ (signal).deps || []) {\n\t\t\t\tif ((dep.f & DERIVED) === 0) {\n\t\t\t\t\t// Use internal_set instead of set here and below to avoid mutation validation\n\t\t\t\t\tinternal_set(dep, dep.v);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tinternal_set(signal, signal.v);\n\t\t}\n\t}\n}\n\n/**\n * When used inside a [`$derived`](https://svelte.dev/docs/svelte/$derived) or [`$effect`](https://svelte.dev/docs/svelte/$effect),\n * any state read inside `fn` will not be treated as a dependency.\n *\n * ```ts\n * $effect(() => {\n *   // this will run when `data` changes, but not when `time` changes\n *   save(data, {\n *     timestamp: untrack(() => time)\n *   });\n * });\n * ```\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function untrack(fn) {\n\tvar previous_untracking = untracking;\n\ttry {\n\t\tuntracking = true;\n\t\treturn fn();\n\t} finally {\n\t\tuntracking = previous_untracking;\n\t}\n}\n\nconst STATUS_MASK = ~(DIRTY | MAYBE_DIRTY | CLEAN);\n\n/**\n * @param {Signal} signal\n * @param {number} status\n * @returns {void}\n */\nexport function set_signal_status(signal, status) {\n\tsignal.f = (signal.f & STATUS_MASK) | status;\n}\n\n/**\n * @param {Record<string, unknown>} obj\n * @param {string[]} keys\n * @returns {Record<string, unknown>}\n */\nexport function exclude_from_object(obj, keys) {\n\t/** @type {Record<string, unknown>} */\n\tvar result = {};\n\n\tfor (var key in obj) {\n\t\tif (!keys.includes(key)) {\n\t\t\tresult[key] = obj[key];\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Possibly traverse an object and read all its properties so that they're all reactive in case this is `$state`.\n * Does only check first level of an object for performance reasons (heuristic should be good for 99% of all cases).\n * @param {any} value\n * @returns {void}\n */\nexport function deep_read_state(value) {\n\tif (typeof value !== 'object' || !value || value instanceof EventTarget) {\n\t\treturn;\n\t}\n\n\tif (STATE_SYMBOL in value) {\n\t\tdeep_read(value);\n\t} else if (!Array.isArray(value)) {\n\t\tfor (let key in value) {\n\t\t\tconst prop = value[key];\n\t\t\tif (typeof prop === 'object' && prop && STATE_SYMBOL in prop) {\n\t\t\t\tdeep_read(prop);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Deeply traverse an object and read all its properties\n * so that they're all reactive in case this is `$state`\n * @param {any} value\n * @param {Set<any>} visited\n * @returns {void}\n */\nexport function deep_read(value, visited = new Set()) {\n\tif (\n\t\ttypeof value === 'object' &&\n\t\tvalue !== null &&\n\t\t// We don't want to traverse DOM elements\n\t\t!(value instanceof EventTarget) &&\n\t\t!visited.has(value)\n\t) {\n\t\tvisited.add(value);\n\t\t// When working with a possible SvelteDate, this\n\t\t// will ensure we capture changes to it.\n\t\tif (value instanceof Date) {\n\t\t\tvalue.getTime();\n\t\t}\n\t\tfor (let key in value) {\n\t\t\ttry {\n\t\t\t\tdeep_read(value[key], visited);\n\t\t\t} catch (e) {\n\t\t\t\t// continue\n\t\t\t}\n\t\t}\n\t\tconst proto = get_prototype_of(value);\n\t\tif (\n\t\t\tproto !== Object.prototype &&\n\t\t\tproto !== Array.prototype &&\n\t\t\tproto !== Map.prototype &&\n\t\t\tproto !== Set.prototype &&\n\t\t\tproto !== Date.prototype\n\t\t) {\n\t\t\tconst descriptors = get_descriptors(proto);\n\t\t\tfor (let key in descriptors) {\n\t\t\t\tconst get = descriptors[key].get;\n\t\t\t\tif (get) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tget.call(value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// continue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","const regex_return_characters = /\\r/g;\n\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function hash(str) {\n\tstr = str.replace(regex_return_characters, '');\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn (hash >>> 0).toString(36);\n}\n\nconst VOID_ELEMENT_NAMES = [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];\n\n/**\n * Returns `true` if `name` is of a void element\n * @param {string} name\n */\nexport function is_void(name) {\n\treturn VOID_ELEMENT_NAMES.includes(name) || name.toLowerCase() === '!doctype';\n}\n\nconst RESERVED_WORDS = [\n\t'arguments',\n\t'await',\n\t'break',\n\t'case',\n\t'catch',\n\t'class',\n\t'const',\n\t'continue',\n\t'debugger',\n\t'default',\n\t'delete',\n\t'do',\n\t'else',\n\t'enum',\n\t'eval',\n\t'export',\n\t'extends',\n\t'false',\n\t'finally',\n\t'for',\n\t'function',\n\t'if',\n\t'implements',\n\t'import',\n\t'in',\n\t'instanceof',\n\t'interface',\n\t'let',\n\t'new',\n\t'null',\n\t'package',\n\t'private',\n\t'protected',\n\t'public',\n\t'return',\n\t'static',\n\t'super',\n\t'switch',\n\t'this',\n\t'throw',\n\t'true',\n\t'try',\n\t'typeof',\n\t'var',\n\t'void',\n\t'while',\n\t'with',\n\t'yield'\n];\n\n/**\n * Returns `true` if `word` is a reserved JavaScript keyword\n * @param {string} word\n */\nexport function is_reserved(word) {\n\treturn RESERVED_WORDS.includes(word);\n}\n\n/**\n * @param {string} name\n */\nexport function is_capture_event(name) {\n\treturn name.endsWith('capture') && name !== 'gotpointercapture' && name !== 'lostpointercapture';\n}\n\n/** List of Element events that will be delegated */\nconst DELEGATED_EVENTS = [\n\t'beforeinput',\n\t'click',\n\t'change',\n\t'dblclick',\n\t'contextmenu',\n\t'focusin',\n\t'focusout',\n\t'input',\n\t'keydown',\n\t'keyup',\n\t'mousedown',\n\t'mousemove',\n\t'mouseout',\n\t'mouseover',\n\t'mouseup',\n\t'pointerdown',\n\t'pointermove',\n\t'pointerout',\n\t'pointerover',\n\t'pointerup',\n\t'touchend',\n\t'touchmove',\n\t'touchstart'\n];\n\n/**\n * Returns `true` if `event_name` is a delegated event\n * @param {string} event_name\n */\nexport function is_delegated(event_name) {\n\treturn DELEGATED_EVENTS.includes(event_name);\n}\n\n/**\n * Attributes that are boolean, i.e. they are present or not present.\n */\nconst DOM_BOOLEAN_ATTRIBUTES = [\n\t'allowfullscreen',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'disabled',\n\t'formnovalidate',\n\t'hidden',\n\t'indeterminate',\n\t'inert',\n\t'ismap',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'seamless',\n\t'selected',\n\t'webkitdirectory',\n\t'defer',\n\t'disablepictureinpicture',\n\t'disableremoteplayback'\n];\n\n/**\n * Returns `true` if `name` is a boolean attribute\n * @param {string} name\n */\nexport function is_boolean_attribute(name) {\n\treturn DOM_BOOLEAN_ATTRIBUTES.includes(name);\n}\n\n/**\n * @type {Record<string, string>}\n * List of attribute names that should be aliased to their property names\n * because they behave differently between setting them as an attribute and\n * setting them as a property.\n */\nconst ATTRIBUTE_ALIASES = {\n\t// no `class: 'className'` because we handle that separately\n\tformnovalidate: 'formNoValidate',\n\tismap: 'isMap',\n\tnomodule: 'noModule',\n\tplaysinline: 'playsInline',\n\treadonly: 'readOnly',\n\tdefaultvalue: 'defaultValue',\n\tdefaultchecked: 'defaultChecked',\n\tsrcobject: 'srcObject',\n\tnovalidate: 'noValidate',\n\tallowfullscreen: 'allowFullscreen',\n\tdisablepictureinpicture: 'disablePictureInPicture',\n\tdisableremoteplayback: 'disableRemotePlayback'\n};\n\n/**\n * @param {string} name\n */\nexport function normalize_attribute(name) {\n\tname = name.toLowerCase();\n\treturn ATTRIBUTE_ALIASES[name] ?? name;\n}\n\nconst DOM_PROPERTIES = [\n\t...DOM_BOOLEAN_ATTRIBUTES,\n\t'formNoValidate',\n\t'isMap',\n\t'noModule',\n\t'playsInline',\n\t'readOnly',\n\t'value',\n\t'volume',\n\t'defaultValue',\n\t'defaultChecked',\n\t'srcObject',\n\t'noValidate',\n\t'allowFullscreen',\n\t'disablePictureInPicture',\n\t'disableRemotePlayback'\n];\n\n/**\n * @param {string} name\n */\nexport function is_dom_property(name) {\n\treturn DOM_PROPERTIES.includes(name);\n}\n\nconst NON_STATIC_PROPERTIES = ['autofocus', 'muted', 'defaultValue', 'defaultChecked'];\n\n/**\n * Returns `true` if the given attribute cannot be set through the template\n * string, i.e. needs some kind of JavaScript handling to work.\n * @param {string} name\n */\nexport function cannot_be_set_statically(name) {\n\treturn NON_STATIC_PROPERTIES.includes(name);\n}\n\n/**\n * Subset of delegated events which should be passive by default.\n * These two are already passive via browser defaults on window, document and body.\n * But since\n * - we're delegating them\n * - they happen often\n * - they apply to mobile which is generally less performant\n * we're marking them as passive by default for other elements, too.\n */\nconst PASSIVE_EVENTS = ['touchstart', 'touchmove'];\n\n/**\n * Returns `true` if `name` is a passive event\n * @param {string} name\n */\nexport function is_passive_event(name) {\n\treturn PASSIVE_EVENTS.includes(name);\n}\n\nconst CONTENT_EDITABLE_BINDINGS = ['textContent', 'innerHTML', 'innerText'];\n\n/** @param {string} name */\nexport function is_content_editable_binding(name) {\n\treturn CONTENT_EDITABLE_BINDINGS.includes(name);\n}\n\nconst LOAD_ERROR_ELEMENTS = [\n\t'body',\n\t'embed',\n\t'iframe',\n\t'img',\n\t'link',\n\t'object',\n\t'script',\n\t'style',\n\t'track'\n];\n\n/**\n * Returns `true` if the element emits `load` and `error` events\n * @param {string} name\n */\nexport function is_load_error_element(name) {\n\treturn LOAD_ERROR_ELEMENTS.includes(name);\n}\n\nconst SVG_ELEMENTS = [\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'discard',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feDropShadow',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hatch',\n\t'hatchpath',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'mesh',\n\t'meshgradient',\n\t'meshpatch',\n\t'meshrow',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'set',\n\t'solidcolor',\n\t'stop',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'tref',\n\t'tspan',\n\t'unknown',\n\t'use',\n\t'view',\n\t'vkern'\n];\n\n/** @param {string} name */\nexport function is_svg(name) {\n\treturn SVG_ELEMENTS.includes(name);\n}\n\nconst MATHML_ELEMENTS = [\n\t'annotation',\n\t'annotation-xml',\n\t'maction',\n\t'math',\n\t'merror',\n\t'mfrac',\n\t'mi',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mprescripts',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics'\n];\n\n/** @param {string} name */\nexport function is_mathml(name) {\n\treturn MATHML_ELEMENTS.includes(name);\n}\n\nconst RUNES = /** @type {const} */ ([\n\t'$state',\n\t'$state.raw',\n\t'$state.snapshot',\n\t'$props',\n\t'$props.id',\n\t'$bindable',\n\t'$derived',\n\t'$derived.by',\n\t'$effect',\n\t'$effect.pre',\n\t'$effect.tracking',\n\t'$effect.root',\n\t'$inspect',\n\t'$inspect().with',\n\t'$inspect.trace',\n\t'$host'\n]);\n\n/**\n * @param {string} name\n * @returns {name is RUNES[number]}\n */\nexport function is_rune(name) {\n\treturn RUNES.includes(/** @type {RUNES[number]} */ (name));\n}\n\n/** List of elements that require raw contents and should not have SSR comments put in them */\nconst RAW_TEXT_ELEMENTS = /** @type {const} */ (['textarea', 'script', 'style', 'title']);\n\n/** @param {string} name */\nexport function is_raw_text_element(name) {\n\treturn RAW_TEXT_ELEMENTS.includes(/** @type {RAW_TEXT_ELEMENTS[number]} */ (name));\n}\n\n/**\n * Prevent devtools trying to make `location` a clickable link by inserting a zero-width space\n * @param {string | undefined} location\n */\nexport function sanitize_location(location) {\n\treturn location?.replace(/\\//g, '/\\u200b');\n}\n","import { hydrating } from '../hydration.js';\nimport { clear_text_content, get_first_child } from '../operations.js';\nimport { queue_micro_task } from '../task.js';\n\n/**\n * @param {HTMLElement} dom\n * @param {boolean} value\n * @returns {void}\n */\nexport function autofocus(dom, value) {\n\tif (value) {\n\t\tconst body = document.body;\n\t\tdom.autofocus = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tif (document.activeElement === body) {\n\t\t\t\tdom.focus();\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * The child of a textarea actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLTextAreaElement} dom\n * @returns {void}\n */\nexport function remove_textarea_child(dom) {\n\tif (hydrating && get_first_child(dom) !== null) {\n\t\tclear_text_content(dom);\n\t}\n}\n\nlet listening_to_form_reset = false;\n\nexport function add_form_reset_listener() {\n\tif (!listening_to_form_reset) {\n\t\tlistening_to_form_reset = true;\n\t\tdocument.addEventListener(\n\t\t\t'reset',\n\t\t\t(evt) => {\n\t\t\t\t// Needs to happen one tick later or else the dom properties of the form\n\t\t\t\t// elements have not updated to their reset values yet\n\t\t\t\tPromise.resolve().then(() => {\n\t\t\t\t\tif (!evt.defaultPrevented) {\n\t\t\t\t\t\tfor (const e of /**@type {HTMLFormElement} */ (evt.target).elements) {\n\t\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\t\te.__on_r?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// In the capture phase to guarantee we get noticed of it (no possiblity of stopPropagation)\n\t\t\t{ capture: true }\n\t\t);\n\t}\n}\n","import { teardown } from '../../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../../runtime.js';\nimport { add_form_reset_listener } from '../misc.js';\n\n/**\n * Fires the handler once immediately (unless corresponding arg is set to `false`),\n * then listens to the given events until the render effect context is destroyed\n * @param {EventTarget} target\n * @param {Array<string>} events\n * @param {(event?: Event) => void} handler\n * @param {any} call_handler_immediately\n */\nexport function listen(target, events, handler, call_handler_immediately = true) {\n\tif (call_handler_immediately) {\n\t\thandler();\n\t}\n\n\tfor (var name of events) {\n\t\ttarget.addEventListener(name, handler);\n\t}\n\n\tteardown(() => {\n\t\tfor (var name of events) {\n\t\t\ttarget.removeEventListener(name, handler);\n\t\t}\n\t});\n}\n\n/**\n * @template T\n * @param {() => T} fn\n */\nexport function without_reactive_context(fn) {\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * Listen to the given event, and then instantiate a global form reset listener if not already done,\n * to notify all bindings when the form is reset\n * @param {HTMLElement} element\n * @param {string} event\n * @param {(is_reset?: true) => void} handler\n * @param {(is_reset?: true) => void} [on_reset]\n */\nexport function listen_to_event_and_reset_event(element, event, handler, on_reset = handler) {\n\telement.addEventListener(event, () => without_reactive_context(handler));\n\t// @ts-expect-error\n\tconst prev = element.__on_r;\n\tif (prev) {\n\t\t// special case for checkbox that can have multiple binds (group & checked)\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => {\n\t\t\tprev();\n\t\t\ton_reset(true);\n\t\t};\n\t} else {\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => on_reset(true);\n\t}\n\n\tadd_form_reset_listener();\n}\n","/** @import { Location } from 'locate-character' */\nimport { teardown } from '../../reactivity/effects.js';\nimport { define_property, is_array } from '../../../shared/utils.js';\nimport { hydrating } from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport { FILENAME } from '../../../../constants.js';\nimport * as w from '../../warnings.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { without_reactive_context } from './bindings/shared.js';\n\n/** @type {Set<string>} */\nexport const all_registered_events = new Set();\n\n/** @type {Set<(events: Array<string>) => void>} */\nexport const root_event_handles = new Set();\n\n/**\n * SSR adds onload and onerror attributes to catch those events before the hydration.\n * This function detects those cases, removes the attributes and replays the events.\n * @param {HTMLElement} dom\n */\nexport function replay_events(dom) {\n\tif (!hydrating) return;\n\n\tif (dom.onload) {\n\t\tdom.removeAttribute('onload');\n\t}\n\tif (dom.onerror) {\n\t\tdom.removeAttribute('onerror');\n\t}\n\t// @ts-expect-error\n\tconst event = dom.__e;\n\tif (event !== undefined) {\n\t\t// @ts-expect-error\n\t\tdom.__e = undefined;\n\t\tqueueMicrotask(() => {\n\t\t\tif (dom.isConnected) {\n\t\t\t\tdom.dispatchEvent(event);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @param {string} event_name\n * @param {EventTarget} dom\n * @param {EventListener} [handler]\n * @param {AddEventListenerOptions} [options]\n */\nexport function create_event(event_name, dom, handler, options = {}) {\n\t/**\n\t * @this {EventTarget}\n\t */\n\tfunction target_handler(/** @type {Event} */ event) {\n\t\tif (!options.capture) {\n\t\t\t// Only call in the bubble phase, else delegated events would be called before the capturing events\n\t\t\thandle_event_propagation.call(dom, event);\n\t\t}\n\t\tif (!event.cancelBubble) {\n\t\t\treturn without_reactive_context(() => {\n\t\t\t\treturn handler?.call(this, event);\n\t\t\t});\n\t\t}\n\t}\n\n\t// Chrome has a bug where pointer events don't work when attached to a DOM element that has been cloned\n\t// with cloneNode() and the DOM element is disconnected from the document. To ensure the event works, we\n\t// defer the attachment till after it's been appended to the document. TODO: remove this once Chrome fixes\n\t// this bug. The same applies to wheel events and touch events.\n\tif (\n\t\tevent_name.startsWith('pointer') ||\n\t\tevent_name.startsWith('touch') ||\n\t\tevent_name === 'wheel'\n\t) {\n\t\tqueue_micro_task(() => {\n\t\t\tdom.addEventListener(event_name, target_handler, options);\n\t\t});\n\t} else {\n\t\tdom.addEventListener(event_name, target_handler, options);\n\t}\n\n\treturn target_handler;\n}\n\n/**\n * Attaches an event handler to an element and returns a function that removes the handler. Using this\n * rather than `addEventListener` will preserve the correct order relative to handlers added declaratively\n * (with attributes like `onclick`), which use event delegation for performance reasons\n *\n * @param {EventTarget} element\n * @param {string} type\n * @param {EventListener} handler\n * @param {AddEventListenerOptions} [options]\n */\nexport function on(element, type, handler, options = {}) {\n\tvar target_handler = create_event(type, element, handler, options);\n\n\treturn () => {\n\t\telement.removeEventListener(type, target_handler, options);\n\t};\n}\n\n/**\n * @param {string} event_name\n * @param {Element} dom\n * @param {EventListener} [handler]\n * @param {boolean} [capture]\n * @param {boolean} [passive]\n * @returns {void}\n */\nexport function event(event_name, dom, handler, capture, passive) {\n\tvar options = { capture, passive };\n\tvar target_handler = create_event(event_name, dom, handler, options);\n\n\t// @ts-ignore\n\tif (dom === document.body || dom === window || dom === document) {\n\t\tteardown(() => {\n\t\t\tdom.removeEventListener(event_name, target_handler, options);\n\t\t});\n\t}\n}\n\n/**\n * @param {Array<string>} events\n * @returns {void}\n */\nexport function delegate(events) {\n\tfor (var i = 0; i < events.length; i++) {\n\t\tall_registered_events.add(events[i]);\n\t}\n\n\tfor (var fn of root_event_handles) {\n\t\tfn(events);\n\t}\n}\n\n/**\n * @this {EventTarget}\n * @param {Event} event\n * @returns {void}\n */\nexport function handle_event_propagation(event) {\n\tvar handler_element = this;\n\tvar owner_document = /** @type {Node} */ (handler_element).ownerDocument;\n\tvar event_name = event.type;\n\tvar path = event.composedPath?.() || [];\n\tvar current_target = /** @type {null | Element} */ (path[0] || event.target);\n\n\t// composedPath contains list of nodes the event has propagated through.\n\t// We check __root to skip all nodes below it in case this is a\n\t// parent of the __root node, which indicates that there's nested\n\t// mounted apps. In this case we don't want to trigger events multiple times.\n\tvar path_idx = 0;\n\n\t// @ts-expect-error is added below\n\tvar handled_at = event.__root;\n\n\tif (handled_at) {\n\t\tvar at_idx = path.indexOf(handled_at);\n\t\tif (\n\t\t\tat_idx !== -1 &&\n\t\t\t(handler_element === document || handler_element === /** @type {any} */ (window))\n\t\t) {\n\t\t\t// This is the fallback document listener or a window listener, but the event was already handled\n\t\t\t// -> ignore, but set handle_at to document/window so that we're resetting the event\n\t\t\t// chain in case someone manually dispatches the same event object again.\n\t\t\t// @ts-expect-error\n\t\t\tevent.__root = handler_element;\n\t\t\treturn;\n\t\t}\n\n\t\t// We're deliberately not skipping if the index is higher, because\n\t\t// someone could create an event programmatically and emit it multiple times,\n\t\t// in which case we want to handle the whole propagation chain properly each time.\n\t\t// (this will only be a false negative if the event is dispatched multiple times and\n\t\t// the fallback document listener isn't reached in between, but that's super rare)\n\t\tvar handler_idx = path.indexOf(handler_element);\n\t\tif (handler_idx === -1) {\n\t\t\t// handle_idx can theoretically be -1 (happened in some JSDOM testing scenarios with an event listener on the window object)\n\t\t\t// so guard against that, too, and assume that everything was handled at this point.\n\t\t\treturn;\n\t\t}\n\n\t\tif (at_idx <= handler_idx) {\n\t\t\tpath_idx = at_idx;\n\t\t}\n\t}\n\n\tcurrent_target = /** @type {Element} */ (path[path_idx] || event.target);\n\t// there can only be one delegated event per element, and we either already handled the current target,\n\t// or this is the very first target in the chain which has a non-delegated listener, in which case it's safe\n\t// to handle a possible delegated event on it later (through the root delegation listener for example).\n\tif (current_target === handler_element) return;\n\n\t// Proxy currentTarget to correct target\n\tdefine_property(event, 'currentTarget', {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn current_target || owner_document;\n\t\t}\n\t});\n\n\t// This started because of Chromium issue https://chromestatus.com/feature/5128696823545856,\n\t// where removal or moving of of the DOM can cause sync `blur` events to fire, which can cause logic\n\t// to run inside the current `active_reaction`, which isn't what we want at all. However, on reflection,\n\t// it's probably best that all event handled by Svelte have this behaviour, as we don't really want\n\t// an event handler to run in the context of another reaction or effect.\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\t/**\n\t\t * @type {unknown}\n\t\t */\n\t\tvar throw_error;\n\t\t/**\n\t\t * @type {unknown[]}\n\t\t */\n\t\tvar other_errors = [];\n\n\t\twhile (current_target !== null) {\n\t\t\t/** @type {null | Element} */\n\t\t\tvar parent_element =\n\t\t\t\tcurrent_target.assignedSlot ||\n\t\t\t\tcurrent_target.parentNode ||\n\t\t\t\t/** @type {any} */ (current_target).host ||\n\t\t\t\tnull;\n\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error\n\t\t\t\tvar delegated = current_target['__' + event_name];\n\n\t\t\t\tif (delegated !== undefined && !(/** @type {any} */ (current_target).disabled)) {\n\t\t\t\t\tif (is_array(delegated)) {\n\t\t\t\t\t\tvar [fn, ...data] = delegated;\n\t\t\t\t\t\tfn.apply(current_target, [event, ...data]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelegated.call(current_target, event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (throw_error) {\n\t\t\t\t\tother_errors.push(error);\n\t\t\t\t} else {\n\t\t\t\t\tthrow_error = error;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (event.cancelBubble || parent_element === handler_element || parent_element === null) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent_target = parent_element;\n\t\t}\n\n\t\tif (throw_error) {\n\t\t\tfor (let error of other_errors) {\n\t\t\t\t// Throw the rest of the errors, one-by-one on a microtask\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow throw_error;\n\t\t}\n\t} finally {\n\t\t// @ts-expect-error is used above\n\t\tevent.__root = handler_element;\n\t\t// @ts-ignore remove proxy on currentTarget\n\t\tdelete event.currentTarget;\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * In dev, warn if an event handler is not a function, as it means the\n * user probably called the handler or forgot to add a `() =>`\n * @param {() => (event: Event, ...args: any) => void} thunk\n * @param {EventTarget} element\n * @param {[Event, ...any]} args\n * @param {any} component\n * @param {[number, number]} [loc]\n * @param {boolean} [remove_parens]\n */\nexport function apply(\n\tthunk,\n\telement,\n\targs,\n\tcomponent,\n\tloc,\n\thas_side_effects = false,\n\tremove_parens = false\n) {\n\tlet handler;\n\tlet error;\n\n\ttry {\n\t\thandler = thunk();\n\t} catch (e) {\n\t\terror = e;\n\t}\n\n\tif (typeof handler === 'function') {\n\t\thandler.apply(element, args);\n\t} else if (has_side_effects || handler != null || error) {\n\t\tconst filename = component?.[FILENAME];\n\t\tconst location = loc ? ` at ${filename}:${loc[0]}:${loc[1]}` : ` in ${filename}`;\n\n\t\tconst event_name = args[0].type;\n\t\tconst description = `\\`${event_name}\\` handler${location}`;\n\t\tconst suggestion = remove_parens ? 'remove the trailing `()`' : 'add a leading `() =>`';\n\n\t\tw.event_handler_invalid(description, suggestion);\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n","/** @param {string} html */\nexport function create_fragment_from_html(html) {\n\tvar elem = document.createElement('template');\n\telem.innerHTML = html;\n\treturn elem.content;\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport { create_text, get_first_child, is_firefox } from './operations.js';\nimport { create_fragment_from_html } from './reconciler.js';\nimport { active_effect } from '../runtime.js';\nimport { TEMPLATE_FRAGMENT, TEMPLATE_USE_IMPORT_NODE } from '../../../constants.js';\n\n/**\n * @param {TemplateNode} start\n * @param {TemplateNode | null} end\n */\nexport function assign_nodes(start, end) {\n\tvar effect = /** @type {Effect} */ (active_effect);\n\tif (effect.nodes_start === null) {\n\t\teffect.nodes_start = start;\n\t\teffect.nodes_end = end;\n\t}\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function template(content, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tnode = create_fragment_from_html(has_start ? content : '<!>' + content);\n\t\t\tif (!is_fragment) node = /** @type {Node} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function template_with_script(content, flags) {\n\tvar fn = template(content, flags);\n\treturn () => run_scripts(/** @type {Element | DocumentFragment} */ (fn()));\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @param {'svg' | 'math'} ns\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function ns_template(content, flags, ns = 'svg') {\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar wrapped = `<${ns}>${has_start ? content : '<!>' + content}</${ns}>`;\n\n\t/** @type {Element | DocumentFragment} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (!node) {\n\t\t\tvar fragment = /** @type {DocumentFragment} */ (create_fragment_from_html(wrapped));\n\t\t\tvar root = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (is_fragment) {\n\t\t\t\tnode = document.createDocumentFragment();\n\t\t\t\twhile (get_first_child(root)) {\n\t\t\t\t\tnode.appendChild(/** @type {Node} */ (get_first_child(root)));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode = /** @type {Element} */ (get_first_child(root));\n\t\t\t}\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (node.cloneNode(true));\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function svg_template_with_script(content, flags) {\n\tvar fn = ns_template(content, flags);\n\treturn () => run_scripts(/** @type {Element | DocumentFragment} */ (fn()));\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function mathml_template(content, flags) {\n\treturn ns_template(content, flags, 'math');\n}\n\n/**\n * Creating a document fragment from HTML that contains script tags will not execute\n * the scripts. We need to replace the script tags with new ones so that they are executed.\n * @param {Element | DocumentFragment} node\n * @returns {Node | Node[]}\n */\nfunction run_scripts(node) {\n\t// scripts were SSR'd, in which case they will run\n\tif (hydrating) return node;\n\n\tconst is_fragment = node.nodeType === 11;\n\tconst scripts =\n\t\t/** @type {HTMLElement} */ (node).tagName === 'SCRIPT'\n\t\t\t? [/** @type {HTMLScriptElement} */ (node)]\n\t\t\t: node.querySelectorAll('script');\n\tconst effect = /** @type {Effect} */ (active_effect);\n\n\tfor (const script of scripts) {\n\t\tconst clone = document.createElement('script');\n\t\tfor (var attribute of script.attributes) {\n\t\t\tclone.setAttribute(attribute.name, attribute.value);\n\t\t}\n\n\t\tclone.textContent = script.textContent;\n\n\t\t// The script has changed - if it's at the edges, the effect now points at dead nodes\n\t\tif (is_fragment ? node.firstChild === script : node === script) {\n\t\t\teffect.nodes_start = clone;\n\t\t}\n\t\tif (is_fragment ? node.lastChild === script : node === script) {\n\t\t\teffect.nodes_end = clone;\n\t\t}\n\n\t\tscript.replaceWith(clone);\n\t}\n\treturn node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {any} value\n */\nexport function text(value = '') {\n\tif (!hydrating) {\n\t\tvar t = create_text(value + '');\n\t\tassign_nodes(t, t);\n\t\treturn t;\n\t}\n\n\tvar node = hydrate_node;\n\n\tif (node.nodeType !== 3) {\n\t\t// if an {expression} is empty during SSR, we need to insert an empty text node\n\t\tnode.before((node = create_text()));\n\t\tset_hydrate_node(node);\n\t}\n\n\tassign_nodes(node, node);\n\treturn node;\n}\n\nexport function comment() {\n\t// we're not delegating to `template` here for performance reasons\n\tif (hydrating) {\n\t\tassign_nodes(hydrate_node, null);\n\t\treturn hydrate_node;\n\t}\n\n\tvar frag = document.createDocumentFragment();\n\tvar start = document.createComment('');\n\tvar anchor = create_text();\n\tfrag.append(start, anchor);\n\n\tassign_nodes(start, anchor);\n\n\treturn frag;\n}\n\n/**\n * Assign the created (or in hydration mode, traversed) dom elements to the current block\n * and insert the elements into the dom (in client mode).\n * @param {Text | Comment | Element} anchor\n * @param {DocumentFragment | Element} dom\n */\nexport function append(anchor, dom) {\n\tif (hydrating) {\n\t\t/** @type {Effect} */ (active_effect).nodes_end = hydrate_node;\n\t\thydrate_next();\n\t\treturn;\n\t}\n\n\tif (anchor === null) {\n\t\t// edge case — void `<svelte:element>` with content\n\t\treturn;\n\t}\n\n\tanchor.before(/** @type {Node} */ (dom));\n}\n\nlet uid = 1;\n\n/**\n * Create (or hydrate) an unique UID for the component instance.\n */\nexport function props_id() {\n\tif (\n\t\thydrating &&\n\t\thydrate_node &&\n\t\thydrate_node.nodeType === 8 &&\n\t\thydrate_node.textContent?.startsWith('#s')\n\t) {\n\t\tconst id = hydrate_node.textContent.substring(1);\n\t\thydrate_next();\n\t\treturn id;\n\t}\n\n\treturn 'c' + uid++;\n}\n","/** @import { ComponentContext, Effect, TemplateNode } from '#client' */\n/** @import { Component, ComponentType, SvelteComponent, MountOptions } from '../../index.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tinit_operations\n} from './dom/operations.js';\nimport { HYDRATION_END, HYDRATION_ERROR, HYDRATION_START } from '../../constants.js';\nimport { active_effect } from './runtime.js';\nimport { push, pop, component_context } from './context.js';\nimport { component_root, branch } from './reactivity/effects.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tset_hydrate_node,\n\tset_hydrating\n} from './dom/hydration.js';\nimport { array_from } from '../shared/utils.js';\nimport {\n\tall_registered_events,\n\thandle_event_propagation,\n\troot_event_handles\n} from './dom/elements/events.js';\nimport { reset_head_anchor } from './dom/blocks/svelte-head.js';\nimport * as w from './warnings.js';\nimport * as e from './errors.js';\nimport { assign_nodes } from './dom/template.js';\nimport { is_passive_event } from '../../utils.js';\n\n/**\n * This is normally true — block effects should run their intro transitions —\n * but is false during hydration (unless `options.intro` is `true`) and\n * when creating the children of a `<svelte:element>` that just changed tag\n */\nexport let should_intro = true;\n\n/** @param {boolean} value */\nexport function set_should_intro(value) {\n\tshould_intro = value;\n}\n\n/**\n * @param {Element} text\n * @param {string} value\n * @returns {void}\n */\nexport function set_text(text, value) {\n\t// For objects, we apply string coercion (which might make things like $state array references in the template reactive) before diffing\n\tvar str = value == null ? '' : typeof value === 'object' ? value + '' : value;\n\t// @ts-expect-error\n\tif (str !== (text.__t ??= text.nodeValue)) {\n\t\t// @ts-expect-error\n\t\ttext.__t = str;\n\t\ttext.nodeValue = str + '';\n\t}\n}\n\n/**\n * Mounts a component to the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component.\n * Transitions will play during the initial render unless the `intro` option is set to `false`.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {MountOptions<Props>} options\n * @returns {Exports}\n */\nexport function mount(component, options) {\n\treturn _mount(component, options);\n}\n\n/**\n * Hydrates a component on the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {{} extends Props ? {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops?: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t} : {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t}} options\n * @returns {Exports}\n */\nexport function hydrate(component, options) {\n\tinit_operations();\n\toptions.intro = options.intro ?? false;\n\tconst target = options.target;\n\tconst was_hydrating = hydrating;\n\tconst previous_hydrate_node = hydrate_node;\n\n\ttry {\n\t\tvar anchor = /** @type {TemplateNode} */ (get_first_child(target));\n\t\twhile (\n\t\t\tanchor &&\n\t\t\t(anchor.nodeType !== 8 || /** @type {Comment} */ (anchor).data !== HYDRATION_START)\n\t\t) {\n\t\t\tanchor = /** @type {TemplateNode} */ (get_next_sibling(anchor));\n\t\t}\n\n\t\tif (!anchor) {\n\t\t\tthrow HYDRATION_ERROR;\n\t\t}\n\n\t\tset_hydrating(true);\n\t\tset_hydrate_node(/** @type {Comment} */ (anchor));\n\t\thydrate_next();\n\n\t\tconst instance = _mount(component, { ...options, anchor });\n\n\t\tif (\n\t\t\thydrate_node === null ||\n\t\t\thydrate_node.nodeType !== 8 ||\n\t\t\t/** @type {Comment} */ (hydrate_node).data !== HYDRATION_END\n\t\t) {\n\t\t\tw.hydration_mismatch();\n\t\t\tthrow HYDRATION_ERROR;\n\t\t}\n\n\t\tset_hydrating(false);\n\n\t\treturn /**  @type {Exports} */ (instance);\n\t} catch (error) {\n\t\tif (error === HYDRATION_ERROR) {\n\t\t\tif (options.recover === false) {\n\t\t\t\te.hydration_failed();\n\t\t\t}\n\n\t\t\t// If an error occured above, the operations might not yet have been initialised.\n\t\t\tinit_operations();\n\t\t\tclear_text_content(target);\n\n\t\t\tset_hydrating(false);\n\t\t\treturn mount(component, options);\n\t\t}\n\n\t\tthrow error;\n\t} finally {\n\t\tset_hydrating(was_hydrating);\n\t\tset_hydrate_node(previous_hydrate_node);\n\t\treset_head_anchor();\n\t}\n}\n\n/** @type {Map<string, number>} */\nconst document_listeners = new Map();\n\n/**\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<any>> | Component<any>} Component\n * @param {MountOptions} options\n * @returns {Exports}\n */\nfunction _mount(Component, { target, anchor, props = {}, events, context, intro = true }) {\n\tinit_operations();\n\n\tvar registered_events = new Set();\n\n\t/** @param {Array<string>} events */\n\tvar event_handle = (events) => {\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tvar event_name = events[i];\n\n\t\t\tif (registered_events.has(event_name)) continue;\n\t\t\tregistered_events.add(event_name);\n\n\t\t\tvar passive = is_passive_event(event_name);\n\n\t\t\t// Add the event listener to both the container and the document.\n\t\t\t// The container listener ensures we catch events from within in case\n\t\t\t// the outer content stops propagation of the event.\n\t\t\ttarget.addEventListener(event_name, handle_event_propagation, { passive });\n\n\t\t\tvar n = document_listeners.get(event_name);\n\n\t\t\tif (n === undefined) {\n\t\t\t\t// The document listener ensures we catch events that originate from elements that were\n\t\t\t\t// manually moved outside of the container (e.g. via manual portals).\n\t\t\t\tdocument.addEventListener(event_name, handle_event_propagation, { passive });\n\t\t\t\tdocument_listeners.set(event_name, 1);\n\t\t\t} else {\n\t\t\t\tdocument_listeners.set(event_name, n + 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tevent_handle(array_from(all_registered_events));\n\troot_event_handles.add(event_handle);\n\n\t/** @type {Exports} */\n\t// @ts-expect-error will be defined because the render effect runs synchronously\n\tvar component = undefined;\n\n\tvar unmount = component_root(() => {\n\t\tvar anchor_node = anchor ?? target.appendChild(create_text());\n\n\t\tbranch(() => {\n\t\t\tif (context) {\n\t\t\t\tpush({});\n\t\t\t\tvar ctx = /** @type {ComponentContext} */ (component_context);\n\t\t\t\tctx.c = context;\n\t\t\t}\n\n\t\t\tif (events) {\n\t\t\t\t// We can't spread the object or else we'd lose the state proxy stuff, if it is one\n\t\t\t\t/** @type {any} */ (props).$$events = events;\n\t\t\t}\n\n\t\t\tif (hydrating) {\n\t\t\t\tassign_nodes(/** @type {TemplateNode} */ (anchor_node), null);\n\t\t\t}\n\n\t\t\tshould_intro = intro;\n\t\t\t// @ts-expect-error the public typings are not what the actual function looks like\n\t\t\tcomponent = Component(anchor_node, props) || {};\n\t\t\tshould_intro = true;\n\n\t\t\tif (hydrating) {\n\t\t\t\t/** @type {Effect} */ (active_effect).nodes_end = hydrate_node;\n\t\t\t}\n\n\t\t\tif (context) {\n\t\t\t\tpop();\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tfor (var event_name of registered_events) {\n\t\t\t\ttarget.removeEventListener(event_name, handle_event_propagation);\n\n\t\t\t\tvar n = /** @type {number} */ (document_listeners.get(event_name));\n\n\t\t\t\tif (--n === 0) {\n\t\t\t\t\tdocument.removeEventListener(event_name, handle_event_propagation);\n\t\t\t\t\tdocument_listeners.delete(event_name);\n\t\t\t\t} else {\n\t\t\t\t\tdocument_listeners.set(event_name, n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\troot_event_handles.delete(event_handle);\n\n\t\t\tif (anchor_node !== anchor) {\n\t\t\t\tanchor_node.parentNode?.removeChild(anchor_node);\n\t\t\t}\n\t\t};\n\t});\n\n\tmounted_components.set(component, unmount);\n\treturn component;\n}\n\n/**\n * References of the components that were mounted or hydrated.\n * Uses a `WeakMap` to avoid memory leaks.\n */\nlet mounted_components = new WeakMap();\n\n/**\n * Unmounts a component that was previously mounted using `mount` or `hydrate`.\n *\n * Since 5.13.0, if `options.outro` is `true`, [transitions](https://svelte.dev/docs/svelte/transition) will play before the component is removed from the DOM.\n *\n * Returns a `Promise` that resolves after transitions have completed if `options.outro` is true, or immediately otherwise (prior to 5.13.0, returns `void`).\n *\n * ```js\n * import { mount, unmount } from 'svelte';\n * import App from './App.svelte';\n *\n * const app = mount(App, { target: document.body });\n *\n * // later...\n * unmount(app, { outro: true });\n * ```\n * @param {Record<string, any>} component\n * @param {{ outro?: boolean }} [options]\n * @returns {Promise<void>}\n */\nexport function unmount(component, options) {\n\tconst fn = mounted_components.get(component);\n\n\tif (fn) {\n\t\tmounted_components.delete(component);\n\t\treturn fn(options);\n\t}\n\n\tif (DEV) {\n\t\tw.lifecycle_double_unmount();\n\t}\n\n\treturn Promise.resolve();\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { EFFECT_TRANSPARENT } from '../../constants.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tremove_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport { block, branch, pause_effect, resume_effect } from '../../reactivity/effects.js';\nimport { HYDRATION_START_ELSE, UNINITIALIZED } from '../../../../constants.js';\n\n/**\n * @param {TemplateNode} node\n * @param {(branch: (fn: (anchor: Node) => void, flag?: boolean) => void) => void} fn\n * @param {boolean} [elseif] True if this is an `{:else if ...}` block rather than an `{#if ...}`, as that affects which transitions are considered 'local'\n * @returns {void}\n */\nexport function if_block(node, fn, elseif = false) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar anchor = node;\n\n\t/** @type {Effect | null} */\n\tvar consequent_effect = null;\n\n\t/** @type {Effect | null} */\n\tvar alternate_effect = null;\n\n\t/** @type {UNINITIALIZED | boolean | null} */\n\tvar condition = UNINITIALIZED;\n\n\tvar flags = elseif ? EFFECT_TRANSPARENT : 0;\n\n\tvar has_branch = false;\n\n\tconst set_branch = (/** @type {(anchor: Node) => void} */ fn, flag = true) => {\n\t\thas_branch = true;\n\t\tupdate_branch(flag, fn);\n\t};\n\n\tconst update_branch = (\n\t\t/** @type {boolean | null} */ new_condition,\n\t\t/** @type {null | ((anchor: Node) => void)} */ fn\n\t) => {\n\t\tif (condition === (condition = new_condition)) return;\n\n\t\t/** Whether or not there was a hydration mismatch. Needs to be a `let` or else it isn't treeshaken out */\n\t\tlet mismatch = false;\n\n\t\tif (hydrating) {\n\t\t\tconst is_else = /** @type {Comment} */ (anchor).data === HYDRATION_START_ELSE;\n\n\t\t\tif (!!condition === is_else) {\n\t\t\t\t// Hydration mismatch: remove everything inside the anchor and start fresh.\n\t\t\t\t// This could happen with `{#if browser}...{/if}`, for example\n\t\t\t\tanchor = remove_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tset_hydrating(false);\n\t\t\t\tmismatch = true;\n\t\t\t}\n\t\t}\n\n\t\tif (condition) {\n\t\t\tif (consequent_effect) {\n\t\t\t\tresume_effect(consequent_effect);\n\t\t\t} else if (fn) {\n\t\t\t\tconsequent_effect = branch(() => fn(anchor));\n\t\t\t}\n\n\t\t\tif (alternate_effect) {\n\t\t\t\tpause_effect(alternate_effect, () => {\n\t\t\t\t\talternate_effect = null;\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tif (alternate_effect) {\n\t\t\t\tresume_effect(alternate_effect);\n\t\t\t} else if (fn) {\n\t\t\t\talternate_effect = branch(() => fn(anchor));\n\t\t\t}\n\n\t\t\tif (consequent_effect) {\n\t\t\t\tpause_effect(consequent_effect, () => {\n\t\t\t\t\tconsequent_effect = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (mismatch) {\n\t\t\t// continue in hydration mode\n\t\t\tset_hydrating(true);\n\t\t}\n\t};\n\n\tblock(() => {\n\t\thas_branch = false;\n\t\tfn(set_branch);\n\t\tif (!has_branch) {\n\t\t\tupdate_branch(null, null);\n\t\t}\n\t}, flags);\n\n\tif (hydrating) {\n\t\tanchor = hydrate_node;\n\t}\n}\n","/** @import { EachItem, EachState, Effect, MaybeSource, Source, TemplateNode, TransitionManager, Value } from '#client' */\nimport {\n\tEACH_INDEX_REACTIVE,\n\tEACH_IS_ANIMATED,\n\tEACH_IS_CONTROLLED,\n\tEACH_ITEM_IMMUTABLE,\n\tEACH_ITEM_REACTIVE,\n\tHYDRATION_END,\n\tHYDRATION_START_ELSE\n} from '../../../../constants.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tremove_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling\n} from '../operations.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\trun_out_transitions,\n\tpause_children,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { source, mutable_source, internal_set } from '../../reactivity/sources.js';\nimport { array_from, is_array } from '../../../shared/utils.js';\nimport { INERT } from '../../constants.js';\nimport { queue_micro_task } from '../task.js';\nimport { active_effect, active_reaction, get } from '../../runtime.js';\nimport { DEV } from 'esm-env';\nimport { derived_safe_equal } from '../../reactivity/deriveds.js';\n\n/**\n * The row of a keyed each block that is currently updating. We track this\n * so that `animate:` directives have something to attach themselves to\n * @type {EachItem | null}\n */\nexport let current_each_item = null;\n\n/** @param {EachItem | null} item */\nexport function set_current_each_item(item) {\n\tcurrent_each_item = item;\n}\n\n/**\n * @param {any} _\n * @param {number} i\n */\nexport function index(_, i) {\n\treturn i;\n}\n\n/**\n * Pause multiple effects simultaneously, and coordinate their\n * subsequent destruction. Used in each blocks\n * @param {EachState} state\n * @param {EachItem[]} items\n * @param {null | Node} controlled_anchor\n * @param {Map<any, EachItem>} items_map\n */\nfunction pause_effects(state, items, controlled_anchor, items_map) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\tvar length = items.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tpause_children(items[i].e, transitions, true);\n\t}\n\n\tvar is_controlled = length > 0 && transitions.length === 0 && controlled_anchor !== null;\n\t// If we have a controlled anchor, it means that the each block is inside a single\n\t// DOM element, so we can apply a fast-path for clearing the contents of the element.\n\tif (is_controlled) {\n\t\tvar parent_node = /** @type {Element} */ (\n\t\t\t/** @type {Element} */ (controlled_anchor).parentNode\n\t\t);\n\t\tclear_text_content(parent_node);\n\t\tparent_node.append(/** @type {Element} */ (controlled_anchor));\n\t\titems_map.clear();\n\t\tlink(state, items[0].prev, items[length - 1].next);\n\t}\n\n\trun_out_transitions(transitions, () => {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tvar item = items[i];\n\t\t\tif (!is_controlled) {\n\t\t\t\titems_map.delete(item.k);\n\t\t\t\tlink(state, item.prev, item.next);\n\t\t\t}\n\t\t\tdestroy_effect(item.e, !is_controlled);\n\t\t}\n\t});\n}\n\n/**\n * @template V\n * @param {Element | Comment} node The next sibling node, or the parent node if this is a 'controlled' block\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @param {(value: V, index: number) => any} get_key\n * @param {(anchor: Node, item: MaybeSource<V>, index: MaybeSource<number>) => void} render_fn\n * @param {null | ((anchor: Node) => void)} fallback_fn\n * @returns {void}\n */\nexport function each(node, flags, get_collection, get_key, render_fn, fallback_fn = null) {\n\tvar anchor = node;\n\n\t/** @type {EachState} */\n\tvar state = { flags, items: new Map(), first: null };\n\n\tvar is_controlled = (flags & EACH_IS_CONTROLLED) !== 0;\n\n\tif (is_controlled) {\n\t\tvar parent_node = /** @type {Element} */ (node);\n\n\t\tanchor = hydrating\n\t\t\t? set_hydrate_node(/** @type {Comment | Text} */ (get_first_child(parent_node)))\n\t\t\t: parent_node.appendChild(create_text());\n\t}\n\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\t/** @type {Effect | null} */\n\tvar fallback = null;\n\n\tvar was_empty = false;\n\n\t// TODO: ideally we could use derived for runes mode but because of the ability\n\t// to use a store which can be mutated, we can't do that here as mutating a store\n\t// will still result in the collection array being the same from the store\n\tvar each_array = derived_safe_equal(() => {\n\t\tvar collection = get_collection();\n\n\t\treturn is_array(collection) ? collection : collection == null ? [] : array_from(collection);\n\t});\n\n\tblock(() => {\n\t\tvar array = get(each_array);\n\t\tvar length = array.length;\n\n\t\tif (was_empty && length === 0) {\n\t\t\t// ignore updates if the array is empty,\n\t\t\t// and it already was empty on previous run\n\t\t\treturn;\n\t\t}\n\t\twas_empty = length === 0;\n\n\t\t/** `true` if there was a hydration mismatch. Needs to be a `let` or else it isn't treeshaken out */\n\t\tlet mismatch = false;\n\n\t\tif (hydrating) {\n\t\t\tvar is_else = /** @type {Comment} */ (anchor).data === HYDRATION_START_ELSE;\n\n\t\t\tif (is_else !== (length === 0)) {\n\t\t\t\t// hydration mismatch — remove the server-rendered DOM and start over\n\t\t\t\tanchor = remove_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tset_hydrating(false);\n\t\t\t\tmismatch = true;\n\t\t\t}\n\t\t}\n\n\t\t// this is separate to the previous block because `hydrating` might change\n\t\tif (hydrating) {\n\t\t\t/** @type {EachItem | null} */\n\t\t\tvar prev = null;\n\n\t\t\t/** @type {EachItem} */\n\t\t\tvar item;\n\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tif (\n\t\t\t\t\thydrate_node.nodeType === 8 &&\n\t\t\t\t\t/** @type {Comment} */ (hydrate_node).data === HYDRATION_END\n\t\t\t\t) {\n\t\t\t\t\t// The server rendered fewer items than expected,\n\t\t\t\t\t// so break out and continue appending non-hydrated items\n\t\t\t\t\tanchor = /** @type {Comment} */ (hydrate_node);\n\t\t\t\t\tmismatch = true;\n\t\t\t\t\tset_hydrating(false);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tvar value = array[i];\n\t\t\t\tvar key = get_key(value, i);\n\t\t\t\titem = create_item(\n\t\t\t\t\thydrate_node,\n\t\t\t\t\tstate,\n\t\t\t\t\tprev,\n\t\t\t\t\tnull,\n\t\t\t\t\tvalue,\n\t\t\t\t\tkey,\n\t\t\t\t\ti,\n\t\t\t\t\trender_fn,\n\t\t\t\t\tflags,\n\t\t\t\t\tget_collection\n\t\t\t\t);\n\t\t\t\tstate.items.set(key, item);\n\n\t\t\t\tprev = item;\n\t\t\t}\n\n\t\t\t// remove excess nodes\n\t\t\tif (length > 0) {\n\t\t\t\tset_hydrate_node(remove_nodes());\n\t\t\t}\n\t\t}\n\n\t\tif (!hydrating) {\n\t\t\treconcile(array, state, anchor, render_fn, flags, get_key, get_collection);\n\t\t}\n\n\t\tif (fallback_fn !== null) {\n\t\t\tif (length === 0) {\n\t\t\t\tif (fallback) {\n\t\t\t\t\tresume_effect(fallback);\n\t\t\t\t} else {\n\t\t\t\t\tfallback = branch(() => fallback_fn(anchor));\n\t\t\t\t}\n\t\t\t} else if (fallback !== null) {\n\t\t\t\tpause_effect(fallback, () => {\n\t\t\t\t\tfallback = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (mismatch) {\n\t\t\t// continue in hydration mode\n\t\t\tset_hydrating(true);\n\t\t}\n\n\t\t// When we mount the each block for the first time, the collection won't be\n\t\t// connected to this effect as the effect hasn't finished running yet and its deps\n\t\t// won't be assigned. However, it's possible that when reconciling the each block\n\t\t// that a mutation occurred and it's made the collection MAYBE_DIRTY, so reading the\n\t\t// collection again can provide consistency to the reactive graph again as the deriveds\n\t\t// will now be `CLEAN`.\n\t\tget(each_array);\n\t});\n\n\tif (hydrating) {\n\t\tanchor = hydrate_node;\n\t}\n}\n\n/**\n * Add, remove, or reorder items output by an each block as its input changes\n * @template V\n * @param {Array<V>} array\n * @param {EachState} state\n * @param {Element | Comment | Text} anchor\n * @param {(anchor: Node, item: MaybeSource<V>, index: number | Source<number>, collection: () => V[]) => void} render_fn\n * @param {number} flags\n * @param {(value: V, index: number) => any} get_key\n * @param {() => V[]} get_collection\n * @returns {void}\n */\nfunction reconcile(array, state, anchor, render_fn, flags, get_key, get_collection) {\n\tvar is_animated = (flags & EACH_IS_ANIMATED) !== 0;\n\tvar should_update = (flags & (EACH_ITEM_REACTIVE | EACH_INDEX_REACTIVE)) !== 0;\n\n\tvar length = array.length;\n\tvar items = state.items;\n\tvar first = state.first;\n\tvar current = first;\n\n\t/** @type {undefined | Set<EachItem>} */\n\tvar seen;\n\n\t/** @type {EachItem | null} */\n\tvar prev = null;\n\n\t/** @type {undefined | Set<EachItem>} */\n\tvar to_animate;\n\n\t/** @type {EachItem[]} */\n\tvar matched = [];\n\n\t/** @type {EachItem[]} */\n\tvar stashed = [];\n\n\t/** @type {V} */\n\tvar value;\n\n\t/** @type {any} */\n\tvar key;\n\n\t/** @type {EachItem | undefined} */\n\tvar item;\n\n\t/** @type {number} */\n\tvar i;\n\n\tif (is_animated) {\n\t\tfor (i = 0; i < length; i += 1) {\n\t\t\tvalue = array[i];\n\t\t\tkey = get_key(value, i);\n\t\t\titem = items.get(key);\n\n\t\t\tif (item !== undefined) {\n\t\t\t\titem.a?.measure();\n\t\t\t\t(to_animate ??= new Set()).add(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (i = 0; i < length; i += 1) {\n\t\tvalue = array[i];\n\t\tkey = get_key(value, i);\n\t\titem = items.get(key);\n\n\t\tif (item === undefined) {\n\t\t\tvar child_anchor = current ? /** @type {TemplateNode} */ (current.e.nodes_start) : anchor;\n\n\t\t\tprev = create_item(\n\t\t\t\tchild_anchor,\n\t\t\t\tstate,\n\t\t\t\tprev,\n\t\t\t\tprev === null ? state.first : prev.next,\n\t\t\t\tvalue,\n\t\t\t\tkey,\n\t\t\t\ti,\n\t\t\t\trender_fn,\n\t\t\t\tflags,\n\t\t\t\tget_collection\n\t\t\t);\n\n\t\t\titems.set(key, prev);\n\n\t\t\tmatched = [];\n\t\t\tstashed = [];\n\n\t\t\tcurrent = prev.next;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (should_update) {\n\t\t\tupdate_item(item, value, i, flags);\n\t\t}\n\n\t\tif ((item.e.f & INERT) !== 0) {\n\t\t\tresume_effect(item.e);\n\t\t\tif (is_animated) {\n\t\t\t\titem.a?.unfix();\n\t\t\t\t(to_animate ??= new Set()).delete(item);\n\t\t\t}\n\t\t}\n\n\t\tif (item !== current) {\n\t\t\tif (seen !== undefined && seen.has(item)) {\n\t\t\t\tif (matched.length < stashed.length) {\n\t\t\t\t\t// more efficient to move later items to the front\n\t\t\t\t\tvar start = stashed[0];\n\t\t\t\t\tvar j;\n\n\t\t\t\t\tprev = start.prev;\n\n\t\t\t\t\tvar a = matched[0];\n\t\t\t\t\tvar b = matched[matched.length - 1];\n\n\t\t\t\t\tfor (j = 0; j < matched.length; j += 1) {\n\t\t\t\t\t\tmove(matched[j], start, anchor);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (j = 0; j < stashed.length; j += 1) {\n\t\t\t\t\t\tseen.delete(stashed[j]);\n\t\t\t\t\t}\n\n\t\t\t\t\tlink(state, a.prev, b.next);\n\t\t\t\t\tlink(state, prev, a);\n\t\t\t\t\tlink(state, b, start);\n\n\t\t\t\t\tcurrent = start;\n\t\t\t\t\tprev = b;\n\t\t\t\t\ti -= 1;\n\n\t\t\t\t\tmatched = [];\n\t\t\t\t\tstashed = [];\n\t\t\t\t} else {\n\t\t\t\t\t// more efficient to move earlier items to the back\n\t\t\t\t\tseen.delete(item);\n\t\t\t\t\tmove(item, current, anchor);\n\n\t\t\t\t\tlink(state, item.prev, item.next);\n\t\t\t\t\tlink(state, item, prev === null ? state.first : prev.next);\n\t\t\t\t\tlink(state, prev, item);\n\n\t\t\t\t\tprev = item;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmatched = [];\n\t\t\tstashed = [];\n\n\t\t\twhile (current !== null && current.k !== key) {\n\t\t\t\t// If the each block isn't inert and an item has an effect that is already inert,\n\t\t\t\t// skip over adding it to our seen Set as the item is already being handled\n\t\t\t\tif ((current.e.f & INERT) === 0) {\n\t\t\t\t\t(seen ??= new Set()).add(current);\n\t\t\t\t}\n\t\t\t\tstashed.push(current);\n\t\t\t\tcurrent = current.next;\n\t\t\t}\n\n\t\t\tif (current === null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\titem = current;\n\t\t}\n\n\t\tmatched.push(item);\n\t\tprev = item;\n\t\tcurrent = item.next;\n\t}\n\n\tif (current !== null || seen !== undefined) {\n\t\tvar to_destroy = seen === undefined ? [] : array_from(seen);\n\n\t\twhile (current !== null) {\n\t\t\t// If the each block isn't inert, then inert effects are currently outroing and will be removed once the transition is finished\n\t\t\tif ((current.e.f & INERT) === 0) {\n\t\t\t\tto_destroy.push(current);\n\t\t\t}\n\t\t\tcurrent = current.next;\n\t\t}\n\n\t\tvar destroy_length = to_destroy.length;\n\n\t\tif (destroy_length > 0) {\n\t\t\tvar controlled_anchor = (flags & EACH_IS_CONTROLLED) !== 0 && length === 0 ? anchor : null;\n\n\t\t\tif (is_animated) {\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].a?.measure();\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].a?.fix();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpause_effects(state, to_destroy, controlled_anchor, items);\n\t\t}\n\t}\n\n\tif (is_animated) {\n\t\tqueue_micro_task(() => {\n\t\t\tif (to_animate === undefined) return;\n\t\t\tfor (item of to_animate) {\n\t\t\t\titem.a?.apply();\n\t\t\t}\n\t\t});\n\t}\n\n\t/** @type {Effect} */ (active_effect).first = state.first && state.first.e;\n\t/** @type {Effect} */ (active_effect).last = prev && prev.e;\n}\n\n/**\n * @param {EachItem} item\n * @param {any} value\n * @param {number} index\n * @param {number} type\n * @returns {void}\n */\nfunction update_item(item, value, index, type) {\n\tif ((type & EACH_ITEM_REACTIVE) !== 0) {\n\t\tinternal_set(item.v, value);\n\t}\n\n\tif ((type & EACH_INDEX_REACTIVE) !== 0) {\n\t\tinternal_set(/** @type {Value<number>} */ (item.i), index);\n\t} else {\n\t\titem.i = index;\n\t}\n}\n\n/**\n * @template V\n * @param {Node} anchor\n * @param {EachState} state\n * @param {EachItem | null} prev\n * @param {EachItem | null} next\n * @param {V} value\n * @param {unknown} key\n * @param {number} index\n * @param {(anchor: Node, item: V | Source<V>, index: number | Value<number>, collection: () => V[]) => void} render_fn\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @returns {EachItem}\n */\nfunction create_item(\n\tanchor,\n\tstate,\n\tprev,\n\tnext,\n\tvalue,\n\tkey,\n\tindex,\n\trender_fn,\n\tflags,\n\tget_collection\n) {\n\tvar previous_each_item = current_each_item;\n\tvar reactive = (flags & EACH_ITEM_REACTIVE) !== 0;\n\tvar mutable = (flags & EACH_ITEM_IMMUTABLE) === 0;\n\n\tvar v = reactive ? (mutable ? mutable_source(value) : source(value)) : value;\n\tvar i = (flags & EACH_INDEX_REACTIVE) === 0 ? index : source(index);\n\n\tif (DEV && reactive) {\n\t\t// For tracing purposes, we need to link the source signal we create with the\n\t\t// collection + index so that tracing works as intended\n\t\t/** @type {Value} */ (v).debug = () => {\n\t\t\tvar collection_index = typeof i === 'number' ? index : i.v;\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\tget_collection()[collection_index];\n\t\t};\n\t}\n\n\t/** @type {EachItem} */\n\tvar item = {\n\t\ti,\n\t\tv,\n\t\tk: key,\n\t\ta: null,\n\t\t// @ts-expect-error\n\t\te: null,\n\t\tprev,\n\t\tnext\n\t};\n\n\tcurrent_each_item = item;\n\n\ttry {\n\t\titem.e = branch(() => render_fn(anchor, v, i, get_collection), hydrating);\n\n\t\titem.e.prev = prev && prev.e;\n\t\titem.e.next = next && next.e;\n\n\t\tif (prev === null) {\n\t\t\tstate.first = item;\n\t\t} else {\n\t\t\tprev.next = item;\n\t\t\tprev.e.next = item.e;\n\t\t}\n\n\t\tif (next !== null) {\n\t\t\tnext.prev = item;\n\t\t\tnext.e.prev = item.e;\n\t\t}\n\n\t\treturn item;\n\t} finally {\n\t\tcurrent_each_item = previous_each_item;\n\t}\n}\n\n/**\n * @param {EachItem} item\n * @param {EachItem | null} next\n * @param {Text | Element | Comment} anchor\n */\nfunction move(item, next, anchor) {\n\tvar end = item.next ? /** @type {TemplateNode} */ (item.next.e.nodes_start) : anchor;\n\n\tvar dest = next ? /** @type {TemplateNode} */ (next.e.nodes_start) : anchor;\n\tvar node = /** @type {TemplateNode} */ (item.e.nodes_start);\n\n\twhile (node !== end) {\n\t\tvar next_node = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tdest.before(node);\n\t\tnode = next_node;\n\t}\n}\n\n/**\n * @param {EachState} state\n * @param {EachItem | null} prev\n * @param {EachItem | null} next\n */\nfunction link(state, prev, next) {\n\tif (prev === null) {\n\t\tstate.first = next;\n\t} else {\n\t\tprev.next = next;\n\t\tprev.e.next = next && next.e;\n\t}\n\n\tif (next !== null) {\n\t\tnext.prev = prev;\n\t\tnext.e.prev = prev && prev.e;\n\t}\n}\n","/** @import { Snippet } from 'svelte' */\n/** @import { Effect, TemplateNode } from '#client' */\n/** @import { Getters } from '#shared' */\nimport { EFFECT_TRANSPARENT } from '../../constants.js';\nimport { branch, block, destroy_effect, teardown } from '../../reactivity/effects.js';\nimport {\n\tdev_current_component_function,\n\tset_dev_current_component_function\n} from '../../context.js';\nimport { hydrate_next, hydrate_node, hydrating } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport * as e from '../../errors.js';\nimport { DEV } from 'esm-env';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { noop } from '../../../shared/utils.js';\n\n/**\n * @template {(node: TemplateNode, ...args: any[]) => void} SnippetFn\n * @param {TemplateNode} node\n * @param {() => SnippetFn | null | undefined} get_snippet\n * @param {(() => any)[]} args\n * @returns {void}\n */\nexport function snippet(node, get_snippet, ...args) {\n\tvar anchor = node;\n\n\t/** @type {SnippetFn | null | undefined} */\n\t// @ts-ignore\n\tvar snippet = noop;\n\n\t/** @type {Effect | null} */\n\tvar snippet_effect;\n\n\tblock(() => {\n\t\tif (snippet === (snippet = get_snippet())) return;\n\n\t\tif (snippet_effect) {\n\t\t\tdestroy_effect(snippet_effect);\n\t\t\tsnippet_effect = null;\n\t\t}\n\n\t\tif (DEV && snippet == null) {\n\t\t\te.invalid_snippet();\n\t\t}\n\n\t\tsnippet_effect = branch(() => /** @type {SnippetFn} */ (snippet)(anchor, ...args));\n\t}, EFFECT_TRANSPARENT);\n\n\tif (hydrating) {\n\t\tanchor = hydrate_node;\n\t}\n}\n\n/**\n * In development, wrap the snippet function so that it passes validation, and so that the\n * correct component context is set for ownership checks\n * @param {any} component\n * @param {(node: TemplateNode, ...args: any[]) => void} fn\n */\nexport function wrap_snippet(component, fn) {\n\treturn (/** @type {TemplateNode} */ node, /** @type {any[]} */ ...args) => {\n\t\tvar previous_component_function = dev_current_component_function;\n\t\tset_dev_current_component_function(component);\n\n\t\ttry {\n\t\t\treturn fn(node, ...args);\n\t\t} finally {\n\t\t\tset_dev_current_component_function(previous_component_function);\n\t\t}\n\t};\n}\n\n/**\n * Create a snippet programmatically\n * @template {unknown[]} Params\n * @param {(...params: Getters<Params>) => {\n *   render: () => string\n *   setup?: (element: Element) => void | (() => void)\n * }} fn\n * @returns {Snippet<Params>}\n */\nexport function createRawSnippet(fn) {\n\t// @ts-expect-error the types are a lie\n\treturn (/** @type {TemplateNode} */ anchor, /** @type {Getters<Params>} */ ...params) => {\n\t\tvar snippet = fn(...params);\n\n\t\t/** @type {Element} */\n\t\tvar element;\n\n\t\tif (hydrating) {\n\t\t\telement = /** @type {Element} */ (hydrate_node);\n\t\t\thydrate_next();\n\t\t} else {\n\t\t\tvar html = snippet.render().trim();\n\t\t\tvar fragment = create_fragment_from_html(html);\n\t\t\telement = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (DEV && (get_next_sibling(element) !== null || element.nodeType !== 1)) {\n\t\t\t\tw.invalid_raw_snippet_render();\n\t\t\t}\n\n\t\t\tanchor.before(element);\n\t\t}\n\n\t\tconst result = snippet.setup?.(element);\n\t\tassign_nodes(element, element);\n\n\t\tif (typeof result === 'function') {\n\t\t\tteardown(result);\n\t\t}\n\t};\n}\n","/** @import { TemplateNode, Dom, Effect } from '#client' */\nimport { EFFECT_TRANSPARENT } from '../../constants.js';\nimport { block, branch, pause_effect } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrate_node, hydrating } from '../hydration.js';\n\n/**\n * @template P\n * @template {(props: P) => void} C\n * @param {TemplateNode} node\n * @param {() => C} get_component\n * @param {(anchor: TemplateNode, component: C) => Dom | void} render_fn\n * @returns {void}\n */\nexport function component(node, get_component, render_fn) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar anchor = node;\n\n\t/** @type {C} */\n\tvar component;\n\n\t/** @type {Effect | null} */\n\tvar effect;\n\n\tblock(() => {\n\t\tif (component === (component = get_component())) return;\n\n\t\tif (effect) {\n\t\t\tpause_effect(effect);\n\t\t\teffect = null;\n\t\t}\n\n\t\tif (component) {\n\t\t\teffect = branch(() => render_fn(anchor, component));\n\t\t}\n\t}, EFFECT_TRANSPARENT);\n\n\tif (hydrating) {\n\t\tanchor = hydrate_node;\n\t}\n}\n","/** @import { ActionPayload } from '#client' */\nimport { effect, render_effect } from '../../reactivity/effects.js';\nimport { safe_not_equal } from '../../reactivity/equality.js';\nimport { deep_read_state, untrack } from '../../runtime.js';\n\n/**\n * @template P\n * @param {Element} dom\n * @param {(dom: Element, value?: P) => ActionPayload<P>} action\n * @param {() => P} [get_value]\n * @returns {void}\n */\nexport function action(dom, action, get_value) {\n\teffect(() => {\n\t\tvar payload = untrack(() => action(dom, get_value?.()) || {});\n\n\t\tif (get_value && payload?.update) {\n\t\t\tvar inited = false;\n\t\t\t/** @type {P} */\n\t\t\tvar prev = /** @type {any} */ ({}); // initialize with something so it's never equal on first run\n\n\t\t\trender_effect(() => {\n\t\t\t\tvar value = get_value();\n\n\t\t\t\t// Action's update method is coarse-grained, i.e. when anything in the passed value changes, update.\n\t\t\t\t// This works in legacy mode because of mutable_source being updated as a whole, but when using $state\n\t\t\t\t// together with actions and mutation, it wouldn't notice the change without a deep read.\n\t\t\t\tdeep_read_state(value);\n\n\t\t\t\tif (inited && safe_not_equal(prev, value)) {\n\t\t\t\t\tprev = value;\n\t\t\t\t\t/** @type {Function} */ (payload.update)(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinited = true;\n\t\t}\n\n\t\tif (payload?.destroy) {\n\t\t\treturn () => /** @type {Function} */ (payload.destroy)();\n\t\t}\n\t});\n}\n","import { DEV } from 'esm-env';\nimport { hydrating, set_hydrating } from '../hydration.js';\nimport { get_descriptors, get_prototype_of } from '../../../shared/utils.js';\nimport { create_event, delegate } from './events.js';\nimport { add_form_reset_listener, autofocus } from './misc.js';\nimport * as w from '../../warnings.js';\nimport { LOADING_ATTR_SYMBOL } from '../../constants.js';\nimport { queue_idle_task } from '../task.js';\nimport { is_capture_event, is_delegated, normalize_attribute } from '../../../../utils.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { clsx } from '../../../shared/attributes.js';\n\n/**\n * The value/checked attribute in the template actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLInputElement} input\n * @returns {void}\n */\nexport function remove_input_defaults(input) {\n\tif (!hydrating) return;\n\n\tvar already_removed = false;\n\n\t// We try and remove the default attributes later, rather than sync during hydration.\n\t// Doing it sync during hydration has a negative impact on performance, but deferring the\n\t// work in an idle task alleviates this greatly. If a form reset event comes in before\n\t// the idle callback, then we ensure the input defaults are cleared just before.\n\tvar remove_defaults = () => {\n\t\tif (already_removed) return;\n\t\talready_removed = true;\n\n\t\t// Remove the attributes but preserve the values\n\t\tif (input.hasAttribute('value')) {\n\t\t\tvar value = input.value;\n\t\t\tset_attribute(input, 'value', null);\n\t\t\tinput.value = value;\n\t\t}\n\n\t\tif (input.hasAttribute('checked')) {\n\t\t\tvar checked = input.checked;\n\t\t\tset_attribute(input, 'checked', null);\n\t\t\tinput.checked = checked;\n\t\t}\n\t};\n\n\t// @ts-expect-error\n\tinput.__on_r = remove_defaults;\n\tqueue_idle_task(remove_defaults);\n\tadd_form_reset_listener();\n}\n\n/**\n * @param {Element} element\n * @param {any} value\n */\nexport function set_value(element, value) {\n\t// @ts-expect-error\n\tvar attributes = (element.__attributes ??= {});\n\n\tif (\n\t\tattributes.value ===\n\t\t\t(attributes.value =\n\t\t\t\t// treat null and undefined the same for the initial value\n\t\t\t\tvalue ?? undefined) ||\n\t\t// @ts-expect-error\n\t\t// `progress` elements always need their value set when it's `0`\n\t\t(element.value === value && (value !== 0 || element.nodeName !== 'PROGRESS'))\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.value = value ?? '';\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n */\nexport function set_checked(element, checked) {\n\t// @ts-expect-error\n\tvar attributes = (element.__attributes ??= {});\n\n\tif (\n\t\tattributes.checked ===\n\t\t(attributes.checked =\n\t\t\t// treat null and undefined the same for the initial value\n\t\t\tchecked ?? undefined)\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.checked = checked;\n}\n\n/**\n * Sets the `selected` attribute on an `option` element.\n * Not set through the property because that doesn't reflect to the DOM,\n * which means it wouldn't be taken into account when a form is reset.\n * @param {HTMLOptionElement} element\n * @param {boolean} selected\n */\nexport function set_selected(element, selected) {\n\tif (selected) {\n\t\t// The selected option could've changed via user selection, and\n\t\t// setting the value without this check would set it back.\n\t\tif (!element.hasAttribute('selected')) {\n\t\t\telement.setAttribute('selected', '');\n\t\t}\n\t} else {\n\t\telement.removeAttribute('selected');\n\t}\n}\n\n/**\n * Applies the default checked property without influencing the current checked property.\n * @param {HTMLInputElement} element\n * @param {boolean} checked\n */\nexport function set_default_checked(element, checked) {\n\tconst existing_value = element.checked;\n\telement.defaultChecked = checked;\n\telement.checked = existing_value;\n}\n\n/**\n * Applies the default value property without influencing the current value property.\n * @param {HTMLInputElement | HTMLTextAreaElement} element\n * @param {string} value\n */\nexport function set_default_value(element, value) {\n\tconst existing_value = element.value;\n\telement.defaultValue = value;\n\telement.value = existing_value;\n}\n\n/**\n * @param {Element} element\n * @param {string} attribute\n * @param {string | null} value\n * @param {boolean} [skip_warning]\n */\nexport function set_attribute(element, attribute, value, skip_warning) {\n\t// @ts-expect-error\n\tvar attributes = (element.__attributes ??= {});\n\n\tif (hydrating) {\n\t\tattributes[attribute] = element.getAttribute(attribute);\n\n\t\tif (\n\t\t\tattribute === 'src' ||\n\t\t\tattribute === 'srcset' ||\n\t\t\t(attribute === 'href' && element.nodeName === 'LINK')\n\t\t) {\n\t\t\tif (!skip_warning) {\n\t\t\t\tcheck_src_in_dev_hydration(element, attribute, value ?? '');\n\t\t\t}\n\n\t\t\t// If we reset these attributes, they would result in another network request, which we want to avoid.\n\t\t\t// We assume they are the same between client and server as checking if they are equal is expensive\n\t\t\t// (we can't just compare the strings as they can be different between client and server but result in the\n\t\t\t// same url, so we would need to create hidden anchor elements to compare them)\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (attributes[attribute] === (attributes[attribute] = value)) return;\n\n\tif (attribute === 'style' && '__styles' in element) {\n\t\t// reset styles to force style: directive to update\n\t\telement.__styles = {};\n\t}\n\n\tif (attribute === 'loading') {\n\t\t// @ts-expect-error\n\t\telement[LOADING_ATTR_SYMBOL] = value;\n\t}\n\n\tif (value == null) {\n\t\telement.removeAttribute(attribute);\n\t} else if (typeof value !== 'string' && get_setters(element).includes(attribute)) {\n\t\t// @ts-ignore\n\t\telement[attribute] = value;\n\t} else {\n\t\telement.setAttribute(attribute, value);\n\t}\n}\n\n/**\n * @param {Element} dom\n * @param {string} attribute\n * @param {string} value\n */\nexport function set_xlink_attribute(dom, attribute, value) {\n\tdom.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @param {string} prop\n * @param {any} value\n */\nexport function set_custom_element_data(node, prop, value) {\n\t// We need to ensure that setting custom element props, which can\n\t// invoke lifecycle methods on other custom elements, does not also\n\t// associate those lifecycle methods with the current active reaction\n\t// or effect\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet was_hydrating = hydrating;\n\tif (hydrating) {\n\t\tset_hydrating(false);\n\t}\n\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\ttry {\n\t\tif (\n\t\t\t// Don't compute setters for custom elements while they aren't registered yet,\n\t\t\t// because during their upgrade/instantiation they might add more setters.\n\t\t\t// Instead, fall back to a simple \"an object, then set as property\" heuristic.\n\t\t\tsetters_cache.has(node.nodeName) ||\n\t\t\t// customElements may not be available in browser extension contexts\n\t\t\t!customElements ||\n\t\t\tcustomElements.get(node.tagName.toLowerCase())\n\t\t\t\t? get_setters(node).includes(prop)\n\t\t\t\t: value && typeof value === 'object'\n\t\t) {\n\t\t\t// @ts-expect-error\n\t\t\tnode[prop] = value;\n\t\t} else {\n\t\t\t// We did getters etc checks already, stringify before passing to set_attribute\n\t\t\t// to ensure it doesn't invoke the same logic again, and potentially populating\n\t\t\t// the setters cache too early.\n\t\t\tset_attribute(node, prop, value == null ? value : String(value));\n\t\t}\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t}\n\t}\n}\n\n/**\n * Spreads attributes onto a DOM element, taking into account the currently set attributes\n * @param {Element & ElementCSSInlineStyle} element\n * @param {Record<string, any> | undefined} prev\n * @param {Record<string, any>} next New attributes - this function mutates this object\n * @param {string} [css_hash]\n * @param {boolean} [preserve_attribute_case]\n * @param {boolean} [is_custom_element]\n * @param {boolean} [skip_warning]\n * @returns {Record<string, any>}\n */\nexport function set_attributes(\n\telement,\n\tprev,\n\tnext,\n\tcss_hash,\n\tpreserve_attribute_case = false,\n\tis_custom_element = false,\n\tskip_warning = false\n) {\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet is_hydrating_custom_element = hydrating && is_custom_element;\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(false);\n\t}\n\n\tvar current = prev || {};\n\tvar is_option_element = element.tagName === 'OPTION';\n\n\tfor (var key in prev) {\n\t\tif (!(key in next)) {\n\t\t\tnext[key] = null;\n\t\t}\n\t}\n\n\tif (next.class) {\n\t\tnext.class = clsx(next.class);\n\t}\n\n\tif (css_hash !== undefined) {\n\t\tnext.class = next.class ? next.class + ' ' + css_hash : css_hash;\n\t}\n\n\tvar setters = get_setters(element);\n\n\t// @ts-expect-error\n\tvar attributes = /** @type {Record<string, unknown>} **/ (element.__attributes ??= {});\n\n\t// since key is captured we use const\n\tfor (const key in next) {\n\t\t// let instead of var because referenced in a closure\n\t\tlet value = next[key];\n\n\t\t// Up here because we want to do this for the initial value, too, even if it's undefined,\n\t\t// and this wouldn't be reached in case of undefined because of the equality check below\n\t\tif (is_option_element && key === 'value' && value == null) {\n\t\t\t// The <option> element is a special case because removing the value attribute means\n\t\t\t// the value is set to the text content of the option element, and setting the value\n\t\t\t// to null or undefined means the value is set to the string \"null\" or \"undefined\".\n\t\t\t// To align with how we handle this case in non-spread-scenarios, this logic is needed.\n\t\t\t// There's a super-edge-case bug here that is left in in favor of smaller code size:\n\t\t\t// Because of the \"set missing props to null\" logic above, we can't differentiate\n\t\t\t// between a missing value and an explicitly set value of null or undefined. That means\n\t\t\t// that once set, the value attribute of an <option> element can't be removed. This is\n\t\t\t// a very rare edge case, and removing the attribute altogether isn't possible either\n\t\t\t// for the <option value={undefined}> case, so we're not losing any functionality here.\n\t\t\t// @ts-ignore\n\t\t\telement.value = element.__value = '';\n\t\t\tcurrent[key] = value;\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar prev_value = current[key];\n\t\tif (value === prev_value) continue;\n\n\t\tcurrent[key] = value;\n\n\t\tvar prefix = key[0] + key[1]; // this is faster than key.slice(0, 2)\n\t\tif (prefix === '$$') continue;\n\n\t\tif (prefix === 'on') {\n\t\t\t/** @type {{ capture?: true }} */\n\t\t\tconst opts = {};\n\t\t\tconst event_handle_key = '$$' + key;\n\t\t\tlet event_name = key.slice(2);\n\t\t\tvar delegated = is_delegated(event_name);\n\n\t\t\tif (is_capture_event(event_name)) {\n\t\t\t\tevent_name = event_name.slice(0, -7);\n\t\t\t\topts.capture = true;\n\t\t\t}\n\n\t\t\tif (!delegated && prev_value) {\n\t\t\t\t// Listening to same event but different handler -> our handle function below takes care of this\n\t\t\t\t// If we were to remove and add listeners in this case, it could happen that the event is \"swallowed\"\n\t\t\t\t// (the browser seems to not know yet that a new one exists now) and doesn't reach the handler\n\t\t\t\t// https://github.com/sveltejs/svelte/issues/11903\n\t\t\t\tif (value != null) continue;\n\n\t\t\t\telement.removeEventListener(event_name, current[event_handle_key], opts);\n\t\t\t\tcurrent[event_handle_key] = null;\n\t\t\t}\n\n\t\t\tif (value != null) {\n\t\t\t\tif (!delegated) {\n\t\t\t\t\t/**\n\t\t\t\t\t * @this {any}\n\t\t\t\t\t * @param {Event} evt\n\t\t\t\t\t */\n\t\t\t\t\tfunction handle(evt) {\n\t\t\t\t\t\tcurrent[key].call(this, evt);\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrent[event_handle_key] = create_event(event_name, element, handle, opts);\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\telement[`__${event_name}`] = value;\n\t\t\t\t\tdelegate([event_name]);\n\t\t\t\t}\n\t\t\t} else if (delegated) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[`__${event_name}`] = undefined;\n\t\t\t}\n\t\t} else if (key === 'style' && value != null) {\n\t\t\telement.style.cssText = value + '';\n\t\t} else if (key === 'autofocus') {\n\t\t\tautofocus(/** @type {HTMLElement} */ (element), Boolean(value));\n\t\t} else if (!is_custom_element && (key === '__value' || (key === 'value' && value != null))) {\n\t\t\t// @ts-ignore We're not running this for custom elements because __value is actually\n\t\t\t// how Lit stores the current value on the element, and messing with that would break things.\n\t\t\telement.value = element.__value = value;\n\t\t} else if (key === 'selected' && is_option_element) {\n\t\t\tset_selected(/** @type {HTMLOptionElement} */ (element), value);\n\t\t} else {\n\t\t\tvar name = key;\n\t\t\tif (!preserve_attribute_case) {\n\t\t\t\tname = normalize_attribute(name);\n\t\t\t}\n\n\t\t\tvar is_default = name === 'defaultValue' || name === 'defaultChecked';\n\n\t\t\tif (value == null && !is_custom_element && !is_default) {\n\t\t\t\tattributes[key] = null;\n\n\t\t\t\tif (name === 'value' || name === 'checked') {\n\t\t\t\t\t// removing value/checked also removes defaultValue/defaultChecked — preserve\n\t\t\t\t\tlet input = /** @type {HTMLInputElement} */ (element);\n\t\t\t\t\tconst use_default = prev === undefined;\n\t\t\t\t\tif (name === 'value') {\n\t\t\t\t\t\tlet previous = input.defaultValue;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultValue = previous;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tinput.value = input.__value = use_default ? previous : null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet previous = input.defaultChecked;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultChecked = previous;\n\t\t\t\t\t\tinput.checked = use_default ? previous : false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.removeAttribute(key);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tis_default ||\n\t\t\t\t(setters.includes(name) && (is_custom_element || typeof value !== 'string'))\n\t\t\t) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[name] = value;\n\t\t\t} else if (typeof value !== 'function') {\n\t\t\t\tset_attribute(element, name, value);\n\t\t\t}\n\t\t}\n\t\tif (key === 'style' && '__styles' in element) {\n\t\t\t// reset styles to force style: directive to update\n\t\t\telement.__styles = {};\n\t\t}\n\t}\n\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(true);\n\t}\n\n\treturn current;\n}\n\n/** @type {Map<string, string[]>} */\nvar setters_cache = new Map();\n\n/** @param {Element} element */\nfunction get_setters(element) {\n\tvar setters = setters_cache.get(element.nodeName);\n\tif (setters) return setters;\n\tsetters_cache.set(element.nodeName, (setters = []));\n\n\tvar descriptors;\n\tvar proto = element; // In the case of custom elements there might be setters on the instance\n\tvar element_proto = Element.prototype;\n\n\t// Stop at Element, from there on there's only unnecessary setters we're not interested in\n\t// Do not use contructor.name here as that's unreliable in some browser environments\n\twhile (element_proto !== proto) {\n\t\tdescriptors = get_descriptors(proto);\n\n\t\tfor (var key in descriptors) {\n\t\t\tif (descriptors[key].set) {\n\t\t\t\tsetters.push(key);\n\t\t\t}\n\t\t}\n\n\t\tproto = get_prototype_of(proto);\n\t}\n\n\treturn setters;\n}\n\n/**\n * @param {any} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction check_src_in_dev_hydration(element, attribute, value) {\n\tif (!DEV) return;\n\tif (attribute === 'srcset' && srcset_url_equal(element, value)) return;\n\tif (src_url_equal(element.getAttribute(attribute) ?? '', value)) return;\n\n\tw.hydration_attribute_changed(\n\t\tattribute,\n\t\telement.outerHTML.replace(element.innerHTML, element.innerHTML && '...'),\n\t\tString(value)\n\t);\n}\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nfunction src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\treturn new URL(element_src, document.baseURI).href === new URL(url, document.baseURI).href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element\n * @param {string} srcset\n * @returns {boolean}\n */\nfunction srcset_url_equal(element, srcset) {\n\tvar element_urls = split_srcset(element.srcset);\n\tvar urls = split_srcset(srcset);\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n","import { hydrating } from '../hydration.js';\n\n/**\n * @param {SVGElement} dom\n * @param {string} value\n * @param {string} [hash]\n * @returns {void}\n */\nexport function set_svg_class(dom, value, hash) {\n\t// @ts-expect-error need to add __className to patched prototype\n\tvar prev_class_name = dom.__className;\n\tvar next_class_name = to_class(value, hash);\n\n\tif (hydrating && dom.getAttribute('class') === next_class_name) {\n\t\t// In case of hydration don't reset the class as it's already correct.\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = next_class_name;\n\t} else if (\n\t\tprev_class_name !== next_class_name ||\n\t\t(hydrating && dom.getAttribute('class') !== next_class_name)\n\t) {\n\t\tif (next_class_name === '') {\n\t\t\tdom.removeAttribute('class');\n\t\t} else {\n\t\t\tdom.setAttribute('class', next_class_name);\n\t\t}\n\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = next_class_name;\n\t}\n}\n\n/**\n * @param {MathMLElement} dom\n * @param {string} value\n * @param {string} [hash]\n * @returns {void}\n */\nexport function set_mathml_class(dom, value, hash) {\n\t// @ts-expect-error need to add __className to patched prototype\n\tvar prev_class_name = dom.__className;\n\tvar next_class_name = to_class(value, hash);\n\n\tif (hydrating && dom.getAttribute('class') === next_class_name) {\n\t\t// In case of hydration don't reset the class as it's already correct.\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = next_class_name;\n\t} else if (\n\t\tprev_class_name !== next_class_name ||\n\t\t(hydrating && dom.getAttribute('class') !== next_class_name)\n\t) {\n\t\tif (next_class_name === '') {\n\t\t\tdom.removeAttribute('class');\n\t\t} else {\n\t\t\tdom.setAttribute('class', next_class_name);\n\t\t}\n\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = next_class_name;\n\t}\n}\n\n/**\n * @param {HTMLElement} dom\n * @param {string} value\n * @param {string} [hash]\n * @returns {void}\n */\nexport function set_class(dom, value, hash) {\n\t// @ts-expect-error need to add __className to patched prototype\n\tvar prev_class_name = dom.__className;\n\tvar next_class_name = to_class(value, hash);\n\n\tif (hydrating && dom.className === next_class_name) {\n\t\t// In case of hydration don't reset the class as it's already correct.\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = next_class_name;\n\t} else if (\n\t\tprev_class_name !== next_class_name ||\n\t\t(hydrating && dom.className !== next_class_name)\n\t) {\n\t\t// Removing the attribute when the value is only an empty string causes\n\t\t// peformance issues vs simply making the className an empty string. So\n\t\t// we should only remove the class if the the value is nullish.\n\t\tif (value == null && !hash) {\n\t\t\tdom.removeAttribute('class');\n\t\t} else {\n\t\t\tdom.className = next_class_name;\n\t\t}\n\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = next_class_name;\n\t}\n}\n\n/**\n * @template V\n * @param {V} value\n * @param {string} [hash]\n * @returns {string | V}\n */\nfunction to_class(value, hash) {\n\treturn (value == null ? '' : value) + (hash ? ' ' + hash : '');\n}\n\n/**\n * @param {Element} dom\n * @param {string} class_name\n * @param {boolean} value\n * @returns {void}\n */\nexport function toggle_class(dom, class_name, value) {\n\tif (value) {\n\t\tif (dom.classList.contains(class_name)) return;\n\t\tdom.classList.add(class_name);\n\t} else {\n\t\tif (!dom.classList.contains(class_name)) return;\n\t\tdom.classList.remove(class_name);\n\t}\n}\n","import { DEV } from 'esm-env';\nimport { render_effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport * as e from '../../../errors.js';\nimport { is } from '../../../proxy.js';\nimport { queue_micro_task } from '../../task.js';\nimport { hydrating } from '../../hydration.js';\nimport { untrack } from '../../../runtime.js';\nimport { is_runes } from '../../../context.js';\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_value(input, get, set = get) {\n\tvar runes = is_runes();\n\n\tlisten_to_event_and_reset_event(input, 'input', (is_reset) => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\t/** @type {any} */\n\t\tvar value = is_reset ? input.defaultValue : input.value;\n\t\tvalue = is_numberlike_input(input) ? to_number(value) : value;\n\t\tset(value);\n\n\t\t// In runes mode, respect any validation in accessors (doesn't apply in legacy mode,\n\t\t// because we use mutable state which ensures the render effect always runs)\n\t\tif (runes && value !== (value = get())) {\n\t\t\tvar start = input.selectionStart;\n\t\t\tvar end = input.selectionEnd;\n\n\t\t\t// the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\n\t\t\t// Restore selection\n\t\t\tif (end !== null) {\n\t\t\t\tinput.selectionStart = start;\n\t\t\t\tinput.selectionEnd = Math.min(end, input.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\t(hydrating && input.defaultValue !== input.value) ||\n\t\t// If defaultValue is set, then value == defaultValue\n\t\t// TODO Svelte 6: remove input.value check and set to empty string?\n\t\t(untrack(get) == null && input.value)\n\t) {\n\t\tset(is_numberlike_input(input) ? to_number(input.value) : input.value);\n\t}\n\n\trender_effect(() => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\tvar value = get();\n\n\t\tif (is_numberlike_input(input) && value === to_number(input.value)) {\n\t\t\t// handles 0 vs 00 case (see https://github.com/sveltejs/svelte/issues/9959)\n\t\t\treturn;\n\t\t}\n\n\t\tif (input.type === 'date' && !value && !input.value) {\n\t\t\t// Handles the case where a temporarily invalid date is set (while typing, for example with a leading 0 for the day)\n\t\t\t// and prevents this state from clearing the other parts of the date input (see https://github.com/sveltejs/svelte/issues/7897)\n\t\t\treturn;\n\t\t}\n\n\t\t// don't set the value of the input if it's the same to allow\n\t\t// minlength to work properly\n\t\tif (value !== input.value) {\n\t\t\t// @ts-expect-error the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\t\t}\n\t});\n}\n\n/** @type {Set<HTMLInputElement[]>} */\nconst pending = new Set();\n\n/**\n * @param {HTMLInputElement[]} inputs\n * @param {null | [number]} group_index\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_group(inputs, group_index, input, get, set = get) {\n\tvar is_checkbox = input.getAttribute('type') === 'checkbox';\n\tvar binding_group = inputs;\n\n\t// needs to be let or related code isn't treeshaken out if it's always false\n\tlet hydration_mismatch = false;\n\n\tif (group_index !== null) {\n\t\tfor (var index of group_index) {\n\t\t\t// @ts-expect-error\n\t\t\tbinding_group = binding_group[index] ??= [];\n\t\t}\n\t}\n\n\tbinding_group.push(input);\n\n\tlisten_to_event_and_reset_event(\n\t\tinput,\n\t\t'change',\n\t\t() => {\n\t\t\t// @ts-ignore\n\t\t\tvar value = input.__value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t}\n\n\t\t\tset(value);\n\t\t},\n\t\t// TODO better default value handling\n\t\t() => set(is_checkbox ? [] : null)\n\t);\n\n\trender_effect(() => {\n\t\tvar value = get();\n\n\t\t// If we are hydrating and the value has since changed, then use the update value\n\t\t// from the input instead.\n\t\tif (hydrating && input.defaultChecked !== input.checked) {\n\t\t\thydration_mismatch = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (is_checkbox) {\n\t\t\tvalue = value || [];\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = value.includes(input.__value);\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = is(input.__value, value);\n\t\t}\n\t});\n\n\tteardown(() => {\n\t\tvar index = binding_group.indexOf(input);\n\n\t\tif (index !== -1) {\n\t\t\tbinding_group.splice(index, 1);\n\t\t}\n\t});\n\n\tif (!pending.has(binding_group)) {\n\t\tpending.add(binding_group);\n\n\t\tqueue_micro_task(() => {\n\t\t\t// necessary to maintain binding group order in all insertion scenarios\n\t\t\tbinding_group.sort((a, b) => (a.compareDocumentPosition(b) === 4 ? -1 : 1));\n\t\t\tpending.delete(binding_group);\n\t\t});\n\t}\n\n\tqueue_micro_task(() => {\n\t\tif (hydration_mismatch) {\n\t\t\tvar value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t} else {\n\t\t\t\tvar hydration_input = binding_group.find((input) => input.checked);\n\t\t\t\t// @ts-ignore\n\t\t\t\tvalue = hydration_input?.__value;\n\t\t\t}\n\n\t\t\tset(value);\n\t\t}\n\t});\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_checked(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', (is_reset) => {\n\t\tvar value = is_reset ? input.defaultChecked : input.checked;\n\t\tset(value);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the update value from the input instead.\n\t\t(hydrating && input.defaultChecked !== input.checked) ||\n\t\t// If defaultChecked is set, then checked == defaultChecked\n\t\tuntrack(get) == null\n\t) {\n\t\tset(input.checked);\n\t}\n\n\trender_effect(() => {\n\t\tvar value = get();\n\t\tinput.checked = Boolean(value);\n\t});\n}\n\n/**\n * @template V\n * @param {Array<HTMLInputElement>} group\n * @param {V} __value\n * @param {boolean} checked\n * @returns {V[]}\n */\nfunction get_binding_group_value(group, __value, checked) {\n\tvar value = new Set();\n\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) {\n\t\t\t// @ts-ignore\n\t\t\tvalue.add(group[i].__value);\n\t\t}\n\t}\n\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement} input\n */\nfunction is_numberlike_input(input) {\n\tvar type = input.type;\n\treturn type === 'number' || type === 'range';\n}\n\n/**\n * @param {string} value\n */\nfunction to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => FileList | null} get\n * @param {(value: FileList | null) => void} set\n */\nexport function bind_files(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', () => {\n\t\tset(input.files);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\thydrating &&\n\t\tinput.files\n\t) {\n\t\tset(input.files);\n\t}\n\n\trender_effect(() => {\n\t\tinput.files = get();\n\t});\n}\n","/** @import { ComponentContextLegacy } from '#client' */\nimport { run, run_all } from '../../../shared/utils.js';\nimport { component_context } from '../../context.js';\nimport { derived } from '../../reactivity/deriveds.js';\nimport { user_pre_effect, user_effect } from '../../reactivity/effects.js';\nimport { deep_read_state, get, untrack } from '../../runtime.js';\n\n/**\n * Legacy-mode only: Call `onMount` callbacks and set up `beforeUpdate`/`afterUpdate` effects\n * @param {boolean} [immutable]\n */\nexport function init(immutable = false) {\n\tconst context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\tconst callbacks = context.l.u;\n\tif (!callbacks) return;\n\n\tlet props = () => deep_read_state(context.s);\n\n\tif (immutable) {\n\t\tlet version = 0;\n\t\tlet prev = /** @type {Record<string, any>} */ ({});\n\n\t\t// In legacy immutable mode, before/afterUpdate only fire if the object identity of a prop changes\n\t\tconst d = derived(() => {\n\t\t\tlet changed = false;\n\t\t\tconst props = context.s;\n\t\t\tfor (const key in props) {\n\t\t\t\tif (props[key] !== prev[key]) {\n\t\t\t\t\tprev[key] = props[key];\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (changed) version++;\n\t\t\treturn version;\n\t\t});\n\n\t\tprops = () => get(d);\n\t}\n\n\t// beforeUpdate\n\tif (callbacks.b.length) {\n\t\tuser_pre_effect(() => {\n\t\t\tobserve_all(context, props);\n\t\t\trun_all(callbacks.b);\n\t\t});\n\t}\n\n\t// onMount (must run before afterUpdate)\n\tuser_effect(() => {\n\t\tconst fns = untrack(() => callbacks.m.map(run));\n\t\treturn () => {\n\t\t\tfor (const fn of fns) {\n\t\t\t\tif (typeof fn === 'function') {\n\t\t\t\t\tfn();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n\n\t// afterUpdate\n\tif (callbacks.a.length) {\n\t\tuser_effect(() => {\n\t\t\tobserve_all(context, props);\n\t\t\trun_all(callbacks.a);\n\t\t});\n\t}\n}\n\n/**\n * Invoke the getter of all signals associated with a component\n * so they can be registered to the effect this function is called in.\n * @param {ComponentContextLegacy} context\n * @param {(() => void)} props\n */\nfunction observe_all(context, props) {\n\tif (context.l.s) {\n\t\tfor (const signal of context.l.s) get(signal);\n\t}\n\n\tprops();\n}\n","import { set, source } from '../../reactivity/sources.js';\nimport { get } from '../../runtime.js';\nimport { is_array } from '../../../shared/utils.js';\n\n/**\n * Under some circumstances, imports may be reactive in legacy mode. In that case,\n * they should be using `reactive_import` as part of the transformation\n * @param {() => any} fn\n */\nexport function reactive_import(fn) {\n\tvar s = source(0);\n\n\treturn function () {\n\t\tif (arguments.length === 1) {\n\t\t\tset(s, get(s) + 1);\n\t\t\treturn arguments[0];\n\t\t} else {\n\t\t\tget(s);\n\t\t\treturn fn();\n\t\t}\n\t};\n}\n\n/**\n * @this {any}\n * @param {Record<string, unknown>} $$props\n * @param {Event} event\n * @returns {void}\n */\nexport function bubble_event($$props, event) {\n\tvar events = /** @type {Record<string, Function[] | Function>} */ ($$props.$$events)?.[\n\t\tevent.type\n\t];\n\n\tvar callbacks = is_array(events) ? events.slice() : events == null ? [] : [events];\n\n\tfor (var fn of callbacks) {\n\t\t// Preserve \"this\" context\n\t\tfn.call(this, event);\n\t}\n}\n\n/**\n * Used to simulate `$on` on a component instance when `compatibility.componentApi === 4`\n * @param {Record<string, any>} $$props\n * @param {string} event_name\n * @param {Function} event_callback\n */\nexport function add_legacy_event_listener($$props, event_name, event_callback) {\n\t$$props.$$events ||= {};\n\t$$props.$$events[event_name] ||= [];\n\t$$props.$$events[event_name].push(event_callback);\n}\n\n/**\n * Used to simulate `$set` on a component instance when `compatibility.componentApi === 4`.\n * Needs component accessors so that it can call the setter of the prop. Therefore doesn't\n * work for updating props in `$$props` or `$$restProps`.\n * @this {Record<string, any>}\n * @param {Record<string, any>} $$new_props\n */\nexport function update_legacy_props($$new_props) {\n\tfor (var key in $$new_props) {\n\t\tif (key in this) {\n\t\t\tthis[key] = $$new_props[key];\n\t\t}\n\t}\n}\n","/** @import { ComponentContext, ComponentContextLegacy } from '#client' */\n/** @import { EventDispatcher } from './index.js' */\n/** @import { NotFunction } from './internal/types.js' */\nimport { flush_sync, untrack } from './internal/client/runtime.js';\nimport { is_array } from './internal/shared/utils.js';\nimport { user_effect } from './internal/client/index.js';\nimport * as e from './internal/client/errors.js';\nimport { lifecycle_outside_component } from './internal/shared/errors.js';\nimport { legacy_mode_flag } from './internal/flags/index.js';\nimport { component_context } from './internal/client/context.js';\nimport { DEV } from 'esm-env';\n\nif (DEV) {\n\t/**\n\t * @param {string} rune\n\t */\n\tfunction throw_rune_error(rune) {\n\t\tif (!(rune in globalThis)) {\n\t\t\t// TODO if people start adjusting the \"this can contain runes\" config through v-p-s more, adjust this message\n\t\t\t/** @type {any} */\n\t\t\tlet value; // let's hope noone modifies this global, but belts and braces\n\t\t\tObject.defineProperty(globalThis, rune, {\n\t\t\t\tconfigurable: true,\n\t\t\t\t// eslint-disable-next-line getter-return\n\t\t\t\tget: () => {\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\n\t\t\t\t\te.rune_outside_svelte(rune);\n\t\t\t\t},\n\t\t\t\tset: (v) => {\n\t\t\t\t\tvalue = v;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tthrow_rune_error('$state');\n\tthrow_rune_error('$effect');\n\tthrow_rune_error('$derived');\n\tthrow_rune_error('$inspect');\n\tthrow_rune_error('$props');\n\tthrow_rune_error('$bindable');\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside [server-side components](https://svelte.dev/docs/svelte/svelte-server#render).\n *\n * @template T\n * @param {() => NotFunction<T> | Promise<NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tif (component_context === null) {\n\t\tlifecycle_outside_component('onMount');\n\t}\n\n\tif (legacy_mode_flag && component_context.l !== null) {\n\t\tinit_update_callbacks(component_context).m.push(fn);\n\t} else {\n\t\tuser_effect(() => {\n\t\t\tconst cleanup = untrack(fn);\n\t\t\tif (typeof cleanup === 'function') return /** @type {() => void} */ (cleanup);\n\t\t});\n\t}\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tif (component_context === null) {\n\t\tlifecycle_outside_component('onDestroy');\n\t}\n\n\tonMount(() => () => untrack(fn));\n}\n\n/**\n * @template [T=any]\n * @param {string} type\n * @param {T} [detail]\n * @param {any}params_0\n * @returns {CustomEvent<T>}\n */\nfunction create_custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs/svelte/legacy-on#Component-events).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * @deprecated Use callback props and/or the `$host()` rune instead — see [migration guide](https://svelte.dev/docs/svelte/v5-migration-guide#Event-changes-Component-events)\n * @template {Record<string, any>} [EventMap = any]\n * @returns {EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst active_component_context = component_context;\n\tif (active_component_context === null) {\n\t\tlifecycle_outside_component('createEventDispatcher');\n\t}\n\n\treturn (type, detail, options) => {\n\t\tconst events = /** @type {Record<string, Function | Function[]>} */ (\n\t\t\tactive_component_context.s.$$events\n\t\t)?.[/** @type {any} */ (type)];\n\n\t\tif (events) {\n\t\t\tconst callbacks = is_array(events) ? events.slice() : [events];\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = create_custom_event(/** @type {string} */ (type), detail, options);\n\t\t\tfor (const fn of callbacks) {\n\t\t\t\tfn.call(active_component_context.x, event);\n\t\t\t}\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\n\t\treturn true;\n\t};\n}\n\n// TODO mark beforeUpdate and afterUpdate as deprecated in Svelte 6\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`.\n *\n * In runes mode use `$effect.pre` instead.\n *\n * @deprecated Use [`$effect.pre`](https://svelte.dev/docs/svelte/$effect#$effect.pre) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tif (component_context === null) {\n\t\tlifecycle_outside_component('beforeUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('beforeUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).b.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`.\n *\n * In runes mode use `$effect` instead.\n *\n * @deprecated Use [`$effect`](https://svelte.dev/docs/svelte/$effect) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tif (component_context === null) {\n\t\tlifecycle_outside_component('afterUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('afterUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).a.push(fn);\n}\n\n/**\n * Legacy-mode: Init callbacks object for onMount/beforeUpdate/afterUpdate\n * @param {ComponentContext} context\n */\nfunction init_update_callbacks(context) {\n\tvar l = /** @type {ComponentContextLegacy} */ (context).l;\n\treturn (l.u ??= { a: [], b: [], m: [] });\n}\n\n/**\n * Synchronously flushes any pending state changes and those that result from it.\n * @param {() => void} [fn]\n * @returns {void}\n */\nexport function flushSync(fn) {\n\tflush_sync(fn);\n}\n\nexport { getContext, getAllContexts, hasContext, setContext } from './internal/client/context.js';\nexport { hydrate, mount, unmount } from './internal/client/render.js';\nexport { tick, untrack } from './internal/client/runtime.js';\nexport { createRawSnippet } from './internal/client/dom/blocks/snippet.js';\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n * @type {string}\n */\nexport const VERSION = '5.20.0';\nexport const PUBLIC_VERSION = '5';\n","import { PUBLIC_VERSION } from '../version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte ||= { v: new Set() }).v.add(PUBLIC_VERSION);\n","const PREFIX = \"Dub+\"; // This is the prefix for all log messages\n\nfunction getTimeStamp() {\n  return new Date().toLocaleTimeString();\n}\n\nexport function logInfo(...args) {\n  console.log(`[${getTimeStamp()}] ${PREFIX}:`, ...args);\n}\n\nexport function logWarn(...args) {\n  console.warn(`[${getTimeStamp()}] ${PREFIX}:`, ...args);\n}\n\nexport function logError(...args) {\n  console.error(`[${getTimeStamp()}] ${PREFIX}:`, ...args);\n}\n","import { logInfo } from \"./logger\";\n\n/**\n * Looks for a property to exist in the provided starting scope. Handles\n * nested property lookups.\n *\n * For example:\n * if `dottedString` is `\"QueUp.room.chat\"` and the `startingScope` is the window\n * object, it would check in the following order:\n * 1. `window.Queup`\n * 2. `window.Queup.room`\n * 3. `window.Queup.room.chat`\n *\n * All have to be defined for it to return true.\n *\n * @param  {string} dottedString  the item you are looking for\n * @param  {object} startingScope where to start looking. default: window\n * @return {boolean} if it is defined or not\n */\nfunction deepCheck(dottedString, startingScope = window) {\n  const props = dottedString.split(\".\");\n\n  let depth = startingScope;\n  for (let i = 0; i < props.length; i++) {\n    if (typeof depth[props[i]] === \"undefined\") {\n      return false;\n    }\n    depth = depth[props[i]];\n  }\n  return true;\n}\n\n/**\n *\n * @param {string[]} arr\n * @param {object} startingScope\n * @returns\n */\nfunction arrayDeepCheck(arr, startingScope = window) {\n  const scope = startingScope;\n\n  for (let i = 0; i < arr.length; i++) {\n    if (!deepCheck(arr[i], scope)) {\n      logInfo(arr[i], \"is not found yet\");\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Checks for the existence of the provides properties\n * @param {string[]} waitingFor what you are waiting for\n * @param {object} [options] options to pass\n * @param {number} [options.interval] how often to ping\n * @param {number} [options.seconds] how long to keep trying before failing\n * @return {Promise<void>}\n */\nexport function waitFor(waitingFor, options = {}) {\n  const defaults = {\n    interval: 500, // every XX ms we check to see if all variables are defined\n    seconds: 5, // how many total seconds we wish to continue pinging\n  };\n  const opts = Object.assign({}, defaults, options);\n\n  return new Promise((resolve, reject) => {\n    let tryCount = 0;\n    const tryLimit = (opts.seconds * 1000) / opts.interval; // how many intervals\n\n    const check = () => {\n      tryCount++;\n      if (arrayDeepCheck(waitingFor)) {\n        resolve();\n      } else if (tryCount < tryLimit) {\n        window.setTimeout(check, opts.interval);\n      } else {\n        reject();\n      }\n    };\n\n    check();\n  });\n}\n","import { enable_legacy_mode_flag } from './index.js';\n\nenable_legacy_mode_flag();\n","export const translations = {\n  en: {\n    'Modal.confirm': 'OK',\n    'Modal.cancel': 'Cancel',\n    'Modal.close': 'Close',\n\n    'Error.modal.title': 'Dub+ Error',\n    'Error.modal.loggedout': \"You're not logged in. Please login to use Dub+.\",\n    'Error.unknown':\n      'Something went wrong starting Dub+. Please refresh and try again.',\n\n    'Loading.text': 'Waiting for QueUp...',\n    'Eta.tooltip.notInQueue': \"You're not in the queue\",\n    'Eta.tootltip': 'ETA: {{minutes}} minutes',\n    'Snooze.tooltip': 'Mute current song',\n\n    'Notifcation.permission.title': 'Desktop Notification',\n    'Notification.permission.denied':\n      'You have dismissed or chosen to deny the request to allow desktop notifications. Reset this choice by clearing your cache for the site.',\n    'Notification.permission.notSupported':\n      'Sorry this browser does not support desktop notifications.  Please update your browser to the lastest version',\n\n    'Menu.title': 'Dub+ Options',\n    'general.title': 'General',\n    'user-interface.title': 'User Interface',\n    'settings.title': 'Settings',\n    'customize.title': 'Customize',\n    'contact.title': 'Contact',\n    'contact.bugs': 'Report bugs on Discord',\n\n    'Switch.on': 'On',\n    'Switch.off': 'Off',\n\n    // this text is only read by screen readers but we should still translate it\n    // it is the label of the little pencil icon\n    'MenuItem.edit': 'Edit',\n\n    'autovote.label': 'Autovote',\n    'autovote.description': 'Toggles auto upvoting for every song',\n\n    'afk.label': 'AFK Auto-respond',\n    'afk.description': 'Toggle Away from Keyboard and customize AFK message.',\n    'afk.modal.title': 'Custom AFK Message',\n    'afk.modal.content':\n      \"Enter a custom Away From Keyboard [AFK] message here. Message will be prefixed with '[AFK]'\",\n    'afk.modal.placeholder': 'Be right back!',\n\n    'emotes.label': 'Emotes',\n    'emotes.description': 'Adds Twitch, Bttv, and FrankerFacez emotes in chat.',\n\n    'autocomplete.label': 'Autocomplete Emoji',\n    'autocomplete.description':\n      'Toggle autocompleting emojis and emotes. Shows a preview box in the chat',\n    'autocomplete.preview.select': 'press enter or tab to select',\n\n    'custom-mentions.label': 'Custom Mentions',\n    'custom-mentions.description':\n      'Toggle using custom mentions to trigger sounds in chat',\n    'custom-mentions.modal.title': 'Custom Mentions',\n    'custom-mentions.modal.content':\n      'Add your custom mention triggers here (separate by comma)',\n    'custom-mentions.modal.placeholder':\n      'separate, custom mentions, by, comma, :heart:',\n\n    'chat-cleaner.label': 'Chat Cleaner',\n    'chat-cleaner.description':\n      'Help keep CPU stress down by setting a limit of how many chat messages to keep in the chat box, deleting older messages.',\n    'chat-cleaner.modal.title': 'Chat Cleaner',\n    'chat-cleaner.modal.content':\n      'Please specify the number of most recent chat items that will remain in your chat history',\n    'chat-cleaner.modal.validation': 'Please enter a valid number',\n    'chat-cleaner.modal.placeholder': '500',\n\n    'mention-notifications.label': 'Notification on Mentions',\n    'mention-notifications.description':\n      'Enable desktop notifications when a user mentions you in chat',\n\n    'pm-notifications.label': 'Notification on PM',\n    'pm-notifications.description':\n      'Enable desktop notifications when a user receives a private message',\n    'pm-notifications.notification.title': 'You have a new PM',\n\n    'dj-notification.label': 'DJ Notification',\n    'dj-notification.description':\n      'Get a notification when you are coming up to be the DJ',\n    'dj-notification.modal.title': 'DJ Notification',\n    'dj-notification.modal.content':\n      'Please specify the position in queue you want to be notified at',\n    'dj-notification.notification.title': 'DJ Alert!',\n    'dj-notification.notification.content':\n      'You will be DJing shortly! Make sure your song is set!',\n    'dj-notification.modal.validation': 'Please enter a valid number',\n\n    'dubs-hover.label': 'Show Dubs on Hover',\n    'dubs-hover.description':\n      'Show who dubs a song when hovering over the dubs count',\n    'dubs-hover.no-votes': 'No {{dubType}}s have been casted yet!',\n    'dubs-hover.no-grabs': 'No one has grabbed this song yet!',\n\n    'downdubs-in-chat.label': 'Downdubs in Chat (mods only)',\n    'downdubs-in-chat.description':\n      'Toggle showing downdubs in the chat box (mods only)',\n    'downdubs-in-chat.chat-message':\n      '@{{username}} has downdubbed your song {{song_name}}',\n\n    'updubs-in-chat.label': 'Updubs in Chat',\n    'updubs-in-chat.description': 'Toggle showing updubs in the chat box',\n    'updubs-in-chat.chat-message':\n      '@{{username}} has updubbed your song {{song_name}}',\n\n    'grabs-in-chat.label': 'Grabs in Chat',\n    'grabs-in-chat.description': 'Toggle showing grabs in the chat box',\n    'grabs-in-chat.chat-message':\n      '@{{username}} has grabbed your song {{song_name}}',\n\n    'snow.label': 'Snow',\n    'snow.description': 'Make it snow!',\n\n    'rain.label': 'Rain',\n    'rain.description': 'Make it rain!',\n\n    'fullscreen.label': 'Fullscreen',\n    'fullscreen.description': 'Toggle fullscreen video mode',\n\n    'split-chat.label': 'Split Chat',\n    'split-chat.description': 'Toggle Split Chat UI enhancement',\n\n    'hide-chat.label': 'Hide Chat',\n    'hide-chat.description': 'Toggles hiding the chat box',\n\n    'hide-video.label': 'Hide Video',\n    'hide-video.description': 'Toggles hiding the video box',\n\n    'hide-avatars.label': 'Hide Avatars',\n    'hide-avatars.description': 'Toggle hiding user avatars in the chat box',\n\n    'hide-bg.label': 'Hide Background',\n    'hide-bg.description': 'Toggle hiding background image',\n\n    'show-timestamps.label': 'Show Timestamps',\n    'show-timestamps.description':\n      'Toggle always showing chat message timestamps',\n\n    'flip-interface.label': 'Flip Interface',\n    'flip-interface.description': 'Swap the video and chat positions',\n\n    'spacebar-mute.label': 'Spacebar Mute',\n    'spacebar-mute.description':\n      'Turn on/off the ability to mute current song with the spacebar',\n\n    'warn-redirect.label': 'Warn on Navigation',\n    'warn-redirect.description':\n      'Warns you when accidentally clicking on a link that takes you out of QueUp',\n\n    'community-theme.label': 'Community Theme',\n    'community-theme.description': 'Toggle Community CSS theme',\n\n    'custom-css.label': 'Custom CSS',\n    'custom-css.description': 'Add your own custom CSS.',\n    'custom-css.modal.title': 'Custom CSS',\n    'custom-css.modal.content': 'Enter a url location for your custom css',\n    'custom-css.modal.placeholder': 'https://example.com/example.css',\n    'custom-css.modal.validation': 'Invalid URL',\n\n    'custom-bg.label': 'Custom Background',\n    'custom-bg.description': 'Add your own custom background.',\n    'custom-bg.modal.title': 'Custom Background Image',\n    'custom-bg.modal.content':\n      'Enter the full URL of an image. We recommend using a .jpg file. Leave blank to remove the current background image',\n    'custom-bg.modal.placeholder': 'https://example.com/big-image.jpg',\n\n    'custom-notification-sound.label': 'Custom Notification Sound',\n    'custom-notification-sound.description':\n      'Change the notification sound to a custom one.',\n    'custom-notification-sound.modal.title': 'Custom Notification Sound',\n    'custom-notification-sound.modal.content':\n      \"Enter the full URL of a sound file. We recommend using an .mp3 file. Leave blank to go back to QueUp's default sound\",\n    'custom-notification-sound.modal.placeholder':\n      'https://example.com/sweet-sound.mp3',\n    'custom-notification-sound.modal.validation':\n      \"Can't play sound from this URL. Please enter a valid URL to an MP3 file.\",\n  },\n};\n","import { translations } from '../../translation';\nimport { logError } from '../../utils/logger';\n\nexport const locale = $state({\n  current: 'en',\n});\n\nexport const locales = Object.keys(translations);\n\n/**\n *\n * @param {string} loc\n * @param {string} key\n * @param {Record<string, string|number|boolean>} vars\n */\nexport function translate(loc, key, vars) {\n  // try getting the translated text\n  let text = translations[loc][key];\n\n  // default to english if no translation found.\n  // we should at least have all text for english.\n  if (!text && loc !== 'en') {\n    text = translations['en'][key];\n  }\n\n  // if we STILL don't have text, just return the key\n  // and also log the error. This is useful so we can\n  // skip the translation process and just put text\n  // directly in place of the key. We really shouldn't\n  // do that but it could prove useful in some cases\n  if (!text) {\n    logError(`No translation found for ${loc}.${key}`);\n    return key;\n  }\n\n  // replace any variables\n  Object.keys(vars).forEach((item) => {\n    const regex = new RegExp(`{{${item}}}`, 'g');\n    text = text.replace(regex, vars[item]);\n  });\n\n  return text;\n}\n\n/**\n *\n * @param {string} key\n * @param {Record<string, string|number|boolean>} vars\n * @returns\n */\nexport function t(key, vars = {}) {\n  return translate(locale.current, key, vars);\n}\n\n/**\n * @param {string} loc\n * @returns {string}\n */\nexport function normalizeLocale(loc) {\n  // all english locales get the same translation\n  // en-US, en-GB, en-CA, en-AU, etc ---> all get \"en\"\n  if (loc.startsWith('en')) {\n    return 'en';\n  }\n  return loc;\n}\n","<script>\n  /**\n   * This component mounts the loading message on startup.\n   * All of the styles are inlined here so we can load this component faster\n   * and discard them after since they will no longer be needed.\n   */\n  import Logo from \"./svg/Logo.svelte\";\n  import { t } from \"./stores/i18n.svelte\";\n</script>\n\n<div class=\"dubplus-waiting\">\n  <div style=\"width: 26px; margin-right:5px\">\n    <Logo />\n  </div>\n  <span style=\"flex: 1;\">{t(\"Loading.text\")}</span>\n</div>\n\n<style>\n  .dubplus-waiting {\n    font-family: var(--dubplus-font-family);\n    z-index: 2147483647;\n    color: white;\n    position: fixed;\n    top: 69px;\n    right: 13px;\n    background: #222;\n    padding: 10px;\n    line-height: 1;\n    box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.75);\n    border-radius: 5px;\n    overflow: hidden;\n    width: 230px;\n    display: flex;\n    align-items: center;\n  }\n</style>\n","/** @type {import('../../global').ModalProps} */\nexport const modalState = $state({\n  id: \"\",\n  open: false,\n  title: \"Dub+\",\n  content: \"\",\n  value: \"\",\n  placeholder: \"\",\n  maxlength: 999,\n  validation: () => {\n    return true;\n  },\n  onConfirm: () => {\n    return true;\n  },\n  onCancel: () => {},\n});\n\n/**\n *\n * @param {import('../../global').ModalProps} nextState\n */\nexport function updateModalState(nextState) {\n  modalState.open = nextState.open ?? false;\n  modalState.title = nextState.title || \"Dub+\";\n  modalState.content = nextState.content || \"\";\n  modalState.value = nextState.value || \"\";\n  modalState.placeholder = nextState.placeholder || \"\";\n  modalState.maxlength = nextState.maxlength || 999;\n  modalState.onConfirm =\n    nextState.onConfirm ||\n    (() => {\n      return true;\n    });\n  modalState.onCancel = nextState.onCancel || (() => {});\n  modalState.validation = nextState.validation || (() => true);\n}\n","<script>\n  import { onMount } from \"svelte\";\n  import { modalState } from \"./stores/modalState.svelte\";\n  import { t } from \"./stores/i18n.svelte\";\n\n  let errorMessage = $state(\"\");\n\n  /** @type {HTMLDialogElement} */\n  let dialog; // Reference to the dialog tag\n\n  onMount(() => {\n    dialog = /**@type {HTMLDialogElement}*/ (\n      document.getElementById(\"dubplus-dialog\")\n    );\n\n    // this handles the closing via the ESC key\n    dialog.addEventListener(\"close\", () => {\n      modalState.open = false;\n    });\n  });\n\n  $effect(() => {\n    if (modalState.open && dialog && !dialog.open) {\n      dialog.showModal();\n    }\n  });\n</script>\n\n<dialog id=\"dubplus-dialog\" class=\"dp-modal\">\n  <h1>{modalState.title}</h1>\n  <div class=\"dp-modal--content content\">\n    <p>{modalState.content}</p>\n    {#if modalState.placeholder || modalState.value}\n      <textarea\n        bind:value={modalState.value}\n        placeholder={modalState.placeholder}\n        maxlength={modalState.maxlength < 999 ? modalState.maxlength : 999}\n      >\n      </textarea>\n    {/if}\n    {#if errorMessage}\n      <p class=\"dp-modal--error\">{errorMessage}</p>\n    {/if}\n  </div>\n  <div class=\"dp-modal--buttons buttons\">\n    {#if typeof modalState.onConfirm === \"function\"}\n      <button\n        onclick={() => {\n          dialog.close();\n          modalState.open = false;\n          errorMessage = \"\";\n        }}\n        class=\"dp-modal--cancel cancel\">{t(\"Modal.cancel\")}</button\n      >\n      <button\n        onclick={() => {\n          const isValidOrErrorMessage = modalState.validation(modalState.value);\n          if (isValidOrErrorMessage === true) {\n            dialog.close();\n            modalState.open = false;\n            modalState.onConfirm(modalState.value);\n            errorMessage = \"\";\n          } else {\n            errorMessage = isValidOrErrorMessage;\n          }\n        }}\n        class=\"dp-modal--confirm confirm\"\n        >{t(\"Modal.confirm\")}\n      </button>\n    {:else}\n      <button\n        onclick={() => {\n          dialog.close();\n          modalState.open = false;\n          errorMessage = \"\";\n        }}\n        class=\"dp-modal--cancel cancel\"\n        >{t(\"Modal.close\")}\n      </button>\n    {/if}\n  </div>\n</dialog>\n\n<style>\n  dialog::backdrop {\n    background: rgba(0, 0, 0, 0.6);\n    animation: fade-in 250ms;\n  }\n\n  dialog {\n    box-shadow: 0 0 5px #000;\n    background: #111;\n    color: #fff;\n    width: 500px;\n    font-family: var(--dubplus-font-family);\n    padding: 0;\n    border: none;\n  }\n\n  h1 {\n    height: 54px;\n    background: #333;\n    margin: 0;\n    text-align: center;\n    padding-top: 12px;\n    font-weight: 400;\n  }\n  .content {\n    padding: 27px 0;\n    font-size: 14px;\n  }\n\n  .content p {\n    margin: 0;\n    padding: 0 16px 16px;\n  }\n\n  textarea {\n    width: 100% !important;\n    min-height: 108px !important;\n    background: #333;\n    padding: 16px;\n    color: white;\n    border: transparent;\n    font-size: inherit;\n    resize: vertical;\n  }\n\n  .dp-modal--error {\n    color: red;\n  }\n\n  .buttons {\n    display: flex;\n    justify-content: flex-end;\n  }\n\n  button {\n    width: 50%;\n    text-align: center;\n    padding: 1em 0;\n    border: none;\n    text-transform: uppercase;\n    color: #eee;\n    font-size: 16px;\n    cursor: pointer;\n  }\n\n  .confirm {\n    background: #0ff;\n    color: #555;\n  }\n\n  .cancel {\n    background: #333;\n  }\n\n  @keyframes fade-in {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n</style>\n","/**\n * This helps render a component or element in a different part of the DOM\n * outside of the component's parent.\n *\n * @param {HTMLElement} node\n * @param {{to: string, position?: \"append\" | \"prepend\"}} containerSelector\n * @returns {{destroy: () => void}}\n */\nexport function teleport(node, { to, position = 'append' }) {\n  const teleportContainer = document.querySelector(to);\n  if (!teleportContainer) {\n    throw new Error(`teleport container not found: ${to}`);\n  }\n  if (position === 'append') {\n    teleportContainer.appendChild(node);\n  } else {\n    teleportContainer.prepend(node);\n  }\n\n  return {\n    destroy() {\n      node.remove();\n    },\n  };\n}\n","<script>\n  import Logo from \"../svg/Logo.svelte\";\n  import { teleport } from \"../actions/teleport\";\n</script>\n\n<button\n  use:teleport={{ to: \".header-right-navigation\" }}\n  type=\"button\"\n  aria-label=\"Dub+ menu\"\n  class=\"dubplus-icon\"\n  onclick={() => {\n    document\n      .querySelector(\".dubplus-menu\")\n      .classList.toggle(\"dubplus-menu-open\");\n  }}\n>\n  <Logo />\n</button>\n\n<style>\n  /* This is the Dub+ icon in the top right that's always showing\n     and triggers the open/close of Dub+ */\n  .dubplus-icon {\n    /* clear button styles */\n    background: none;\n    border: none;\n    appearance: none;\n    padding: 0;\n\n    width: 26px;\n    height: 26px;\n    cursor: pointer;\n    position: relative;\n    display: inline-block;\n    vertical-align: bottom;\n    margin-left: 1rem;\n\n    top: -4px;\n  }\n</style>\n","import { logError, logInfo } from './logger';\n\n/**\n * Migration function to convert old settings to new settings\n *\n * The big difference is the renaming of the keys for each option to remove\n * the unnecessary \"dubplus-\" prefix, and also normalize to all use hyphens\n * v1: \"dubplus-autovote\"\n * v2: \"autovote\"\n *\n * v1: \"mention_notifications\"\n * v2: \"mention-notifications\"\n */\n\nconst optionsKeyMap = {\n  'dubplus-autovote': 'autovote',\n  'dubplus-afk': 'afk',\n  'dubplus-emotes': 'emotes',\n  'dubplus-autocomplete': 'autocomplete',\n  custom_mentions: 'custom-mentions',\n  'chat-cleaner': 'chat-cleaner',\n  mention_notifications: 'mention-notifications',\n  dubplus_pm_notifications: 'pm-notifications',\n  dj_notification: 'dj-notification',\n  'dubplus-dubs-hover': 'dubs-hover',\n  'dubplus-downdubs': 'downdubs-in-chat',\n  'dubplus-updubs': 'updubs-in-chat',\n  'dubplus-grabschat': 'grabs-in-chat',\n  'dubplus-snow': 'snow',\n  'dubplus-rain': 'rain',\n  'dubplus-fullscreen': 'fullscreen',\n  'dubplus-split-chat': 'split-chat',\n  'dubplus-video-only': 'hide-chat',\n  'dubplus-chat-only': 'hide-video',\n  'dubplus-hide-avatars': 'hide-avatars',\n  'dubplus-hide-bg': 'hide-bg',\n  'dubplus-show-timestamp': 'show-timestamps',\n  'dubplus-spacebar-mute': 'spacebar-mute',\n  warn_redirect: 'warn-redirect',\n  'dubplus-comm-theme': 'community-theme',\n  'dubplus-custom-css': 'custom-css',\n  'dubplus-custom-bg': 'custom-bg',\n  'dubplus-custom-notification-sound': 'custom-notification-sound',\n};\n\nconst customKeyMap = {\n  customAfkMessage: optionsKeyMap['dubplus-afk'],\n  custom_mentions: optionsKeyMap['custom_mentions'],\n  chat_cleaner: optionsKeyMap['chat-cleaner'],\n  dj_notification: optionsKeyMap['dj_notification'],\n  css: optionsKeyMap['dubplus-custom-css'],\n  bg: optionsKeyMap['dubplus-custom-bg'],\n  notificationSound: optionsKeyMap['dubplus-custom-notification-sound'],\n  'dubplus-custom-notification-sound':\n    optionsKeyMap['dubplus-custom-notification-sound'],\n};\n\n/**\n *\n * @param {import(\"../global\").Settings} oldSettings\n * @returns {import(\"../global\").Settings}\n */\nexport function migrate(oldSettings) {\n  logInfo('Old Settings', oldSettings);\n\n  /**\n   * @type {import(\"../global\").Settings}\n   */\n  const newOptions = {\n    options: {},\n    menu: { ...oldSettings.menu },\n    custom: {},\n  };\n\n  for (const [oldKey, boolValue] of Object.entries(oldSettings.options)) {\n    const newKey = optionsKeyMap[oldKey];\n    try {\n      newOptions.options[newKey] = boolValue;\n    } catch (e) {\n      logError(\n        'Error converting options',\n        e.message,\n        oldKey,\n        newKey,\n        boolValue\n      );\n    }\n  }\n\n  for (const [oldKey, stringValue] of Object.entries(oldSettings.custom)) {\n    const newKey = customKeyMap[oldKey];\n    try {\n      newOptions.custom[newKey] = stringValue;\n    } catch (e) {\n      logError(\n        'Error converting custom',\n        e.message,\n        oldKey,\n        newKey,\n        stringValue\n      );\n    }\n  }\n\n  return newOptions;\n}\n","import { logError, logInfo } from '../../utils/logger';\nimport { migrate } from '../../utils/settings-migrate-v2';\n\nconst STORAGE_KEY_OLD = 'dubplusUserSettings';\nconst STORAGE_KEY_NEW = 'dubplusUserSettingsV2';\n\n/**\n * @type {import(\"../../global\").Settings}\n */\nconst defaults = {\n  // this will store all the on/off states\n  options: {},\n\n  // this will store the open/close state of the menu sections\n  menu: {\n    general: 'open',\n    'user-interface': 'open',\n    settings: 'open',\n    customize: 'open',\n    contact: 'open',\n  },\n\n  // this will store the user inputs from the modals for features that support it\n  custom: {},\n};\n\n/**\n * @return {import(\"../../global\").Settings}\n */\nfunction loadSettings() {\n  // try loading the v2 settings first\n  // if that doesn't exist, try the old settings and migrate them\n\n  try {\n    const v2Settings = JSON.parse(localStorage.getItem(STORAGE_KEY_NEW));\n    if (v2Settings) {\n      return /**@type {import(\"../../global\").Settings}*/ (v2Settings);\n    }\n  } catch (e) {\n    logInfo('Error loading v2 settings, trying old settings. Error:', e);\n  }\n\n  try {\n    const oldSettings = JSON.parse(localStorage.getItem(STORAGE_KEY_OLD));\n    if (oldSettings) {\n      return migrate(\n        /**@type {import(\"../../global\").Settings}*/ (oldSettings)\n      );\n    }\n  } catch (e) {\n    logInfo('Error loading old settings:', e);\n  }\n\n  // @ts-ignore this will get merged with the defaults\n  return {};\n}\n\nconst intialSettings = Object.assign({}, defaults, loadSettings());\n\n/**\n * @type {import(\"../../global\").Settings}\n */\nexport let settings = $state(intialSettings);\n\nfunction persist() {\n  try {\n    // we always store to the newer version of the settings\n    localStorage.setItem(STORAGE_KEY_NEW, JSON.stringify(settings));\n  } catch (e) {\n    logError('Error saving user settings:', e);\n  }\n}\n\n/**\n *\n * @param {import(\"../../global\").SettingsSections} section\n * @param {string} property\n * @param {any} value\n */\nexport function saveSetting(section, property, value) {\n  if (section === 'option') {\n    settings.options[property] = value;\n    persist();\n    return;\n  }\n\n  if (section === 'custom') {\n    settings.custom[property] = value;\n    persist();\n    return;\n  }\n\n  if (section === 'menu') {\n    settings.menu[property] = value;\n    persist();\n    return;\n  }\n\n  throw new Error(`Invalid section: \"${section}\"`);\n}\n","<script>\n  import { settings, saveSetting } from \"../stores/settings.svelte\";\n  /**\n   * @typedef {object} MenuHeaderProps\n   * @property {string} props.settingsId\n   * @property {string} props.name\n   */\n\n  /** @type {MenuHeaderProps} */\n  let { settingsId, name } = $props();\n  let arrow = $state(\"down\");\n  let expanded = $state(true);\n\n  $effect(() => {\n    if (settings.menu[settingsId] === \"closed\") {\n      arrow = \"right\";\n      expanded = false;\n    } else {\n      arrow = \"down\";\n      expanded = true;\n    }\n  });\n\n  function toggle() {\n    settings.menu[settingsId] =\n      settings.menu[settingsId] === \"closed\" ? \"open\" : \"closed\";\n\n    saveSetting(\"menu\", settingsId, settings.menu[settingsId]);\n  }\n</script>\n\n<button\n  id={`dubplus-menu-section-header-${settingsId}`}\n  type=\"button\"\n  class=\"dubplus-menu-section-header\"\n  onclick={toggle}\n  aria-expanded={expanded}\n  aria-controls={`dubplus-menu-section-${settingsId}`}\n>\n  <span class=\"fa fa-angle-{arrow}\"></span>\n  <p>{name}</p>\n</button>\n\n<style>\n  button {\n    border: none;\n    display: block;\n    width: 100%;\n    color: inherit;\n    text-align: left;\n    border-bottom: 1px solid #222;\n    overflow: hidden;\n    padding: 10px 15px;\n    cursor: pointer;\n    background-color: #202020;\n  }\n  button span {\n    display: block;\n    width: 10%;\n    float: left;\n  }\n  button p {\n    width: 90%;\n    float: left;\n    margin: 0;\n    line-height: 1;\n  }\n</style>\n","<script>\n  import MenuHeader from \"../menu/MenuHeader.svelte\";\n  import MenuSection from \"../menu/MenuSection.svelte\";\n  import MenuLink from \"../menu/MenuLink.svelte\";\n  import { t } from \"../stores/i18n.svelte\";\n  import IconBug from \"../svg/IconBug.svelte\";\n  import IconReddit from \"../svg/IconReddit.svelte\";\n  import IconFacebook from \"../svg/IconFacebook.svelte\";\n  import IconTwitter from \"../svg/IconTwitter.svelte\";\n</script>\n\n<MenuHeader settingsId=\"contact\" name={t(\"contact.title\")} />\n<MenuSection settingsId=\"contact\">\n  <MenuLink\n    icon={IconBug}\n    href=\"https://discord.gg/XUkG3Qy\"\n    text={t(\"contact.bugs\")}\n  />\n  <MenuLink\n    icon={IconReddit}\n    href=\"https://www.reddit.com/r/DubPlus/\"\n    text=\"Reddit\"\n  />\n  <MenuLink\n    icon={IconFacebook}\n    href=\"https://facebook.com/DubPlusScript\"\n    text=\"Facebook\"\n  />\n  <MenuLink\n    icon={IconTwitter}\n    href=\"https://twitter.com/DubPlusScript\"\n    text=\"Twitter\"\n  />\n</MenuSection>\n","<script>\n  /**\n   * @typedef {object} SwitchProps\n   * @property {string} label\n   * @property {boolean} isOn\n   * @property {boolean} [disabled]\n   * @property {(state: boolean) => void} onToggle\n   */\n\n  /**\n   * @type {SwitchProps} props\n   */\n  let { label, onToggle, isOn, disabled } = $props();\n\n  let checked = $state(!disabled ? isOn : false);\n\n  /**\n   * @param {KeyboardEvent} event\n   */\n  function handleKeydown(event) {\n    if (disabled) return;\n    if (event.key === \"Enter\" || event.key === \" \") {\n      event.preventDefault();\n      checked = !checked;\n      onToggle(checked);\n    }\n  }\n\n  function handleClick() {\n    if (disabled) return;\n    checked = !checked;\n    onToggle(checked);\n  }\n</script>\n\n<div\n  role=\"switch\"\n  aria-disabled={disabled ? \"true\" : \"false\"}\n  aria-checked={checked ? \"true\" : \"false\"}\n  tabindex=\"0\"\n  onclick={handleClick}\n  onkeydown={handleKeydown}\n>\n  <span class=\"dubplus-switch\">\n    <span></span>\n  </span>\n  <span class=\"dubplus-switch-label\">{label}</span>\n</div>\n\n<style>\n  [role=\"switch\"] {\n    user-select: none;\n    display: flex;\n    align-items: center;\n  }\n\n  .dubplus-switch-label {\n    flex: 1;\n    padding-left: 11px;\n  }\n\n  .dubplus-switch {\n    position: relative;\n    padding: 1px;\n    height: 16px;\n    width: 29px;\n    border-radius: 20px;\n    background: #333;\n    border: 2px solid #666;\n    cursor: pointer;\n  }\n  .dubplus-switch span {\n    display: inline-block;\n    width: 12px;\n    height: 12px;\n    border-radius: 12px;\n    vertical-align: middle;\n    position: absolute;\n    z-index: 2;\n    top: 0;\n    left: 2px;\n    background: var(--dubplus-primary-color);\n    transition: left 0.2s cubic-bezier(0.8, 0, 0.05, 1);\n  }\n  [role=\"switch\"][aria-checked=\"true\"] .dubplus-switch {\n    background: #666;\n  }\n  [role=\"switch\"][aria-checked=\"true\"] .dubplus-switch span {\n    background: var(--dubplus-secondary-color);\n    border-color: var(--dubplus-secondary-color);\n    left: 13px;\n  }\n</style>\n","/**\n * Check if a user is at least a mod or above\n * @param {string} userid\n */\nexport function isMod(userid) {\n  return (\n    window.QueUp.helpers.isSiteAdmin(userid) ||\n    window.QueUp.room.users.getIfOwner(userid) ||\n    window.QueUp.room.users.getIfManager(userid) ||\n    window.QueUp.room.users.getIfMod(userid)\n  );\n}\n","<script>\n  import Switch from \"./Switch.svelte\";\n  import IconPencil from \"../svg/IconPencil.svelte\";\n  import { onMount } from \"svelte\";\n  import { saveSetting, settings } from \"../stores/settings.svelte\";\n  import { modalState, updateModalState } from \"../stores/modalState.svelte\";\n  import { t } from \"../stores/i18n.svelte\";\n  import { isMod } from \"../../utils/modcheck\";\n  /**\n   * @typedef {object} MenuSwitchProps\n   * @property {string} id\n   * @property {string} label\n   * @property {string} description\n   * @property {boolean} [modOnly]\n   * @property {(state: boolean, onMount?: boolean) => void} onToggle `onMount` is `true`\n   * when run from component onMount, `false` when run from a user action\n   * @property {() => void} [init] always runs when the component mounts, whether\n   * the switch is on or off\n   * @property {import('../../global').ModalProps} [customize]\n   *\n   */\n\n  /**\n   * @type {MenuSwitchProps}\n   */\n  let { id, label, description, customize, onToggle, init, modOnly } = $props();\n\n  onMount(() => {\n    if (init) init();\n\n    if (settings.options[id]) {\n      // check user mod status if this is a mod only feature\n      const status = modOnly ? isMod(window.QueUp.session.id) : true;\n      onToggle(status, true);\n    }\n  });\n\n  function openEditModal() {\n    updateModalState({\n      title: t(customize.title),\n      content: t(customize.content),\n      placeholder: t(customize.placeholder),\n      maxlength: customize.maxlength,\n      value: settings.custom[id] || \"\",\n      validation: customize.validation,\n      onConfirm: (value) => {\n        saveSetting(\"custom\", id, value);\n        if (typeof customize.onConfirm === \"function\") {\n          customize.onConfirm(value);\n        }\n      },\n      onCancel: () => {\n        if (typeof customize.onCancel === \"function\") customize.onCancel();\n      },\n    });\n\n    modalState.open = true;\n  }\n</script>\n\n<li \n  {id} \n  title={t(description)} \n  class:disabled={modOnly ? !isMod(window.QueUp.session.id) : false}>\n  <Switch\n    disabled={modOnly ? !isMod(window.QueUp.session.id) : false}\n    label={t(label)}\n    onToggle={(state) => {\n      // When turning on a feature that requires a custom value, and that\n      // value hasn't been set by the user yet, then we popup the modal\n      if (customize && state === true && !settings.custom[id]) {\n          openEditModal();\n          return;\n      }\n      onToggle(state);\n    }}\n    isOn={settings.options[id]}\n  />\n  {#if customize}\n    <button onclick={openEditModal} type=\"button\">\n      <IconPencil />\n      <span class=\"sr-only\">{t(\"MenuItem.edit\")}</span>\n    </button>\n  {/if}\n</li>\n\n<style>\n  li {\n    display: flex;\n    align-items: center;\n    margin: 10px 0;\n    justify-content: space-between;\n  }\n\n  button {\n    appearance: none;\n    background: none;\n    border: none;\n    padding: 0;\n    color: #fff;\n    cursor: pointer;\n\n    height: 13px;\n    width: 13px;\n    \n  }\n  button :global(svg) {\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n  button :global(path) {\n    fill: var(--dubplus-text-color);\n  }\n\n  .disabled {\n    opacity: 0.5;\n  }\n  .disabled:hover {\n    cursor: not-allowed;\n  }\n</style>\n","/**\n * When a user in the rom up/down dubs a song\n */\nexport const DUB = \"realtime:room_playlist-dub\";\n\n/**\n * When user in the room grabs a song\n */\nexport const GRAB = \"realtime:room_playlist-queue-update-grabs\";\n\n/**\n * When a user leaves the room\n */\nexport const USER_LEAVE = \"realtime:user-leave\";\n\n/**\n * When the room playlist updates. Many things can trigger this.\n * - the next track plays\n * - someone joins the queue\n * - someone leaves the queue\n * - someone changes the order of the queue\n * - someone changes their song in the queue\n *\n * Each time it still only gives you information about currently playing song\n */\nexport const PLAYLIST_UPDATE = \"realtime:room_playlist-update\";\n\n/**\n * When any chat message arrives in the chat\n */\nexport const CHAT_MESSAGE = \"realtime:chat-message\";\n\n/**\n * When user receives a private message\n */\nexport const NEW_PM_MESSAGE = \"realtime:new-message\";\n\n// uncomment and copy paste into the console to see event objects\n// [\n//   \"realtime:room_playlist-dub\",\n//   \"realtime:room_playlist-queue-update-grabs\",\n//   \"realtime:user-leave\",\n//   \"realtime:room_playlist-update\",\n//   \"realtime:chat-message\",\n//   \"realtime:new-message\",\n// ].forEach((eventName) => {\n//   window.QueUp.Events.bind(eventName, (e) => {\n//     console.debug(\"DUB+\", eventName, e);\n//   });\n// });\n","import { PLAYLIST_UPDATE } from \"../../events-constants\";\n\nfunction voteCheck() {\n  // we can call this as many times as we want, it will only vote once per song\n  window.QueUp?.playerController?.voteUp?.click();\n}\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const autovote = {\n  id: \"autovote\",\n  label: \"autovote.label\",\n  description: \"autovote.description\",\n  category: \"general\",\n  turnOff() {\n    window.QueUp.Events.unbind(PLAYLIST_UPDATE, voteCheck);\n  },\n  turnOn() {\n    voteCheck();\n    window.QueUp.Events.bind(PLAYLIST_UPDATE, voteCheck);\n  },\n};\n","import { settings } from \"../stores/settings.svelte\";\nimport { t } from \"../stores/i18n.svelte\";\nimport { CHAT_MESSAGE } from \"../../events-constants\";\n/**\n * AFK -  Away from Keyboard\n * Toggles the afk auto response on/off\n * including adding a custom message\n */\n\nlet canSend = true;\n\n/**\n *\n * @param {import(\"../../events\").ChatMessageEvent} e\n * @returns {void}\n */\nfunction afk_chat_respond(e) {\n  if (!canSend) {\n    return; // do nothing until it's back to true\n  }\n  const content = e.message;\n  const user = window.QueUp.session.get(\"username\");\n\n  if (\n    content.includes(`@${user}`) &&\n    window.QueUp.session.id !== e.user.userInfo.userid\n  ) {\n    /**\n     * @type {HTMLInputElement}\n     */\n    const chatInput = document.querySelector(\"#chat-txt-message\");\n\n    if (settings.custom.afk) {\n      chatInput.value = `[AFK] ${settings.custom.afk}`;\n    } else {\n      chatInput.value = `[AFK] ${t(\"afk.modal.placeholder\")}`;\n    }\n\n    window.QueUp.room.chat.sendMessage();\n    canSend = false;\n\n    // prevent spamming. 30 seconds between messages\n    setTimeout(() => {\n      canSend = true;\n    }, 30000);\n  }\n}\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const afk = {\n  id: \"afk\",\n  label: \"afk.label\",\n  description: \"afk.description\",\n  category: \"general\",\n  turnOn() {\n    window.QueUp.Events.bind(CHAT_MESSAGE, afk_chat_respond);\n  },\n  turnOff() {\n    window.QueUp.Events.unbind(CHAT_MESSAGE, afk_chat_respond);\n  },\n  custom: {\n    title: \"afk.modal.title\",\n    content: \"afk.modal.content\",\n    placeholder: \"afk.modal.placeholder\",\n    maxlength: 255,\n  },\n};\n","/**\n * a wrapper around IndexedDB or increased quota compared to localstorage (5mb to 50mb).\n * This will add \"ldb\" to the window object (window.ldb).\n */\n\n!(function () {\n  function e(t, o) {\n    return n\n      ? void (n.transaction(\"s\").objectStore(\"s\").get(t).onsuccess = function (\n          e\n        ) {\n          var t = (e.target.result && e.target.result.v) || null;\n          o(t);\n        })\n      : void setTimeout(function () {\n          e(t, o);\n        }, 100);\n  }\n  var t =\n    window.indexedDB ||\n    window.mozIndexedDB ||\n    window.webkitIndexedDB ||\n    window.msIndexedDB;\n  if (!t) return void console.error(\"indexDB not supported\");\n  var n,\n    o = { k: \"\", v: \"\" },\n    r = t.open(\"d2\", 1);\n  (r.onsuccess = function (e) {\n    n = this.result;\n  }),\n    (r.onerror = function (e) {\n      console.error(\"indexedDB request error\"), console.log(e);\n    }),\n    (r.onupgradeneeded = function (e) {\n      n = null;\n      var t = e.target.result.createObjectStore(\"s\", { keyPath: \"k\" });\n      t.transaction.oncomplete = function (e) {\n        n = e.target.db;\n      };\n    }),\n    (window.ldb = {\n      get: e,\n      set: function (e, t) {\n        (o.k = e),\n          (o.v = t),\n          n.transaction(\"s\", \"readwrite\").objectStore(\"s\").put(o);\n      },\n    });\n})();\n","import \"../../utils/ldb\"; // loads ldb into the window object\nimport { logError, logInfo } from \"../../utils/logger\";\n\n/**\n * Promisify version of `window.ldb.get`\n * @param {string} key\n * @returns {Promise<string>}\n */\nfunction ldbGet(key) {\n  return new Promise((resolve) => {\n    window.ldb.get(key, function (data) {\n      resolve(data);\n    });\n  });\n}\n\n/**\n * @typedef {object} TwitchEmote\n * @property {string} description\n * @property {string} image_id\n * @property {string|null} first_seen\n */\n\n/**\n * @typedef {object} TwitchJsonResponse\n * @property {object} meta\n * @property {string} meta.generated_at\n * @property {object} template\n * @property {string} template.small\n * @property {string} template.medium\n * @property {string} template.large\n * @property {{[emote: string]: TwitchEmote}} emotes\n */\n\n/**\n *\n * @returns {Promise<TwitchJsonResponse>}\n */\nfunction fetchTwitchEmotes() {\n  return fetch(\n    \"//cdn.jsdelivr.net/gh/Jiiks/BetterDiscordApp/data/emotedata_twitch_global.json\"\n  ).then((res) => res.json());\n}\n\n/**\n * @typedef {object} BttvEmote\n * @property {string} id\n * @property {string} code\n * @property {string} imageType\n * @property {boolean} animated\n * @property {string} userId\n * @property {boolean} modifier\n */\n/**\n * @typedef {BttvEmote[]} BttvJsonResponse\n */\n\n/**\n * @returns {Promise<BttvJsonResponse>}\n */\nfunction fetchBTTVEmotes() {\n  return fetch(\"//api.betterttv.net/3/cached/emotes/global\").then((res) =>\n    res.json()\n  );\n}\n\n/**\n * @typedef {object} FrankerFacezEmote\n * @property {number} id\n * @property {string} name\n * @property {number} height\n * @property {number} width\n * @property {boolean} public\n * @property {boolean} hidden\n * @property {boolean} modifier\n * @property {number} modifier_flags\n * @property {null} offset\n * @property {null} margins\n * @property {null} css\n * @property {{_id: number, name: string, display_name: string}} owner\n * @property {null} artist\n * @property {{1: string, 2: string, 4: string}} urls\n * @property {number} status\n * @property {number} usage_count\n * @property {string} created_at\n * @property {string} last_updated\n */\n\n/**\n * @typedef {object} FrankerFacezJsonResponse\n * @property {number} _pages\n * @property {number} _total\n * @property {FrankerFacezEmote[]} emoticons\n */\n\n/**\n * @returns {Promise<FrankerFacezJsonResponse>}\n */\nfunction fetchFrankerFacezEmotes() {\n  return fetch(\n    \"//api.frankerfacez.com/v1/emoticons?per_page=200&private=off&sort=count-desc\"\n  ).then((res) => res.json());\n}\n\nexport const dubplus_emoji = {\n  emoji: {\n    /**\n     * @param {string} id\n     * @returns {string}\n     */\n    template(id) {\n      id = id.replace(/:/g, \"\");\n      return `${window.emojify.defaultConfig.img_dir}/${encodeURI(id)}.png`;\n    },\n  },\n  twitchJSONSLoaded: false,\n  bttvJSONSLoaded: false,\n  tastyJSONLoaded: false,\n  frankerfacezJSONLoaded: false,\n\n  twitch: {\n    /**\n     * @param {string} id\n     * @returns {string}\n     */\n    template(id) {\n      return `//static-cdn.jtvnw.net/emoticons/v1/${id}/3.0`;\n    },\n    /**\n     * @type {Map<string, string>}\n     */\n    emotesMap: new Map(),\n    chatRegex: new RegExp(\":([-_a-z0-9]+):\", \"ig\"),\n  },\n  bttv: {\n    /**\n     * @param {string} id\n     * @returns {string}\n     */\n    template(id) {\n      return `//cdn.betterttv.net/emote/${id}/3x`;\n    },\n    /**\n     * @type {Map<string, string>}\n     */\n    emotesMap: new Map(),\n    chatRegex: new RegExp(\":([&!()\\\\-_a-z0-9]+):\", \"ig\"),\n  },\n  tasty: {\n    /**\n     * @param {string} id\n     * @returns {string}\n     */\n    template(id) {\n      return this.emotesMap.get(id).url;\n    },\n    /**\n     * @type {Map<string, {url: string, width: number, height: number}>}\n     */\n    emotesMap: new Map(),\n  },\n  frankerFacez: {\n    /**\n     * @param {number} id\n     * @returns {string}\n     */\n    template(id) {\n      return `//cdn.frankerfacez.com/emoticon/${id}/1`;\n    },\n    /**\n     * @type {Map<string, number>}\n     */\n    emotesMap: new Map(),\n    chatRegex: new RegExp(\":([-_a-z0-9]+):\", \"ig\"),\n  },\n\n  /**\n   *\n   * @param {string} apiName\n   * @returns {Promise<boolean>}\n   */\n  shouldUpdateAPIs(apiName) {\n    const day = 86400000; // milliseconds in a day\n    // if api return an object with an error then we should try again\n    return ldbGet(`${apiName}_api`).then((savedItem) => {\n      if (savedItem) {\n        try {\n          const parsed = JSON.parse(savedItem);\n          if (typeof parsed.error !== \"undefined\") {\n            return true;\n          }\n        } catch (e) {\n          // if we can't parse the data then we should update\n          return true;\n        }\n      }\n\n      const today = Date.now();\n      const lastSaved = parseInt(\n        localStorage.getItem(`${apiName}_api_timestamp`)\n      );\n      // Is the lastsaved not a number for some strange reason, then we should update\n      // are we past 5 days from last update? then we should update\n      // does the data not exist in localStorage, then we should update\n      return isNaN(lastSaved) || today - lastSaved > day * 5 || !savedItem;\n    });\n  },\n  /**************************************************************************\n   * Loads the twitch emotes from the api.\n   * http://api.twitch.tv/kraken/chat/emoticon_images\n   */\n\n  /**\n   * @return {Promise<void>}\n   */\n  loadTwitchEmotes() {\n    if (this.twitchJSONSLoaded) {\n      return Promise.resolve();\n    }\n\n    // if it doesn't exist in localStorage or it's older than 5 days\n    // grab it from the twitch API\n    return this.shouldUpdateAPIs(\"twitch\").then((shouldUpdate) => {\n      if (shouldUpdate) {\n        logInfo(\"twitch\", \"loading from api\");\n        return fetchTwitchEmotes()\n          .then((json) => {\n            /**\n             * @type {{[emote: string]: string}}\n             */\n            const twitchEmotes = {};\n            for (const emote in json.emotes) {\n              if (!twitchEmotes[emote]) {\n                // if emote doesn't exist, add it\n                twitchEmotes[emote] = json.emotes[emote].image_id;\n              }\n            }\n            localStorage.setItem(\"twitch_api_timestamp\", Date.now().toString());\n            window.ldb.set(\"twitch_api\", JSON.stringify(twitchEmotes));\n            dubplus_emoji.processTwitchEmotes(twitchEmotes);\n          })\n          .catch((err) => logError(err));\n      } else {\n        return ldbGet(\"twitch_api\").then((data) => {\n          logInfo(\"twitch\", \"loading from IndexedDB\");\n          /**\n           * @type {{[emote: string]: string}}\n           */\n          const savedData = JSON.parse(data);\n          dubplus_emoji.processTwitchEmotes(savedData);\n        });\n      }\n    });\n  },\n\n  /**\n   * @return {Promise<void>}\n   */\n  loadBTTVEmotes() {\n    if (this.bttvJSONSLoaded) {\n      return Promise.resolve();\n    }\n    // if it doesn't exist in localStorage or it's older than 5 days\n    // grab it from the bttv API\n    return this.shouldUpdateAPIs(\"bttv\").then((shouldUpdate) => {\n      if (shouldUpdate) {\n        logInfo(\"bttv\", \"loading from api\");\n        return fetchBTTVEmotes()\n          .then((json) => {\n            /**\n             * @type {{[emote: string]: string}}\n             */\n            const bttvEmotes = {};\n\n            json.forEach((e) => {\n              if (!bttvEmotes[e.code]) {\n                // if emote doesn't exist, add it\n                bttvEmotes[e.code] = e.id;\n              }\n            });\n            localStorage.setItem(\"bttv_api_timestamp\", Date.now().toString());\n            window.ldb.set(\"bttv_api\", JSON.stringify(bttvEmotes));\n            dubplus_emoji.processBTTVEmotes(bttvEmotes);\n          })\n          .catch((err) => logError(err));\n      } else {\n        return ldbGet(\"bttv_api\").then((data) => {\n          logInfo(\"bttv\", \"loading from IndexedDB\");\n          /**\n           * @type {{[emote: string]: string}}\n           */\n          const savedData = JSON.parse(data);\n          dubplus_emoji.processBTTVEmotes(savedData);\n        });\n      }\n    });\n  },\n\n  /**\n   * @return {Promise<void>}\n   */\n  loadTastyEmotes() {\n    if (this.tastyJSONLoaded) {\n      return Promise.resolve();\n    }\n    logInfo(\"tasty\", \"loading from api\");\n    // since we control this API we should always have it load from remote\n    // @ts-ignore\n    return fetch(`${__SRC_ROOT__}/emotes/tastyemotes.json`)\n      .then((res) => res.json())\n      .then((json) => {\n        window.ldb.set(\"tasty_api\", JSON.stringify(json));\n        dubplus_emoji.processTastyEmotes(json);\n      })\n      .catch((err) => logError(err));\n  },\n\n  /**\n   * @return {Promise<void>}\n   */\n  loadFrankerFacez() {\n    if (this.frankerfacezJSONLoaded) {\n      return Promise.resolve();\n    }\n    // if it doesn't exist in localStorage or it's older than 5 days\n    // grab it from the frankerfacez API\n    return this.shouldUpdateAPIs(\"frankerfacez\").then((shouldUpdate) => {\n      if (shouldUpdate) {\n        logInfo(\"frankerfacez\", \"loading from api\");\n        return fetchFrankerFacezEmotes()\n          .then((json) => {\n            const frankerFacez = json;\n            localStorage.setItem(\n              \"frankerfacez_api_timestamp\",\n              Date.now().toString()\n            );\n            window.ldb.set(\"frankerfacez_api\", JSON.stringify(frankerFacez));\n            dubplus_emoji.processFrankerFacez(frankerFacez);\n          })\n          .catch((err) => logError(err));\n      } else {\n        return ldbGet(\"frankerfacez_api\").then((data) => {\n          logInfo(\"frankerfacez\", \"loading from IndexedDB\");\n          const savedData = JSON.parse(data);\n          dubplus_emoji.processFrankerFacez(savedData);\n        });\n      }\n    });\n  },\n\n  /**\n   *\n   * @param {{[emote: string]: string}} data\n   */\n  processTwitchEmotes(data) {\n    for (const code in data) {\n      if (Object.hasOwn(data, code)) {\n        const key = code.toLowerCase();\n\n        if (window.emojify.emojiNames.includes(key)) {\n          continue; // do nothing so we don't override emoji\n        }\n\n        this.twitch.emotesMap.set(key, data[code]);\n      }\n    }\n    this.twitchJSONSLoaded = true;\n  },\n\n  /**\n   * @param {{[emote: string]: string}} data\n   */\n  processBTTVEmotes(data) {\n    for (const code in data) {\n      if (Object.hasOwn(data, code)) {\n        const key = code.toLowerCase();\n\n        if (code.indexOf(\":\") >= 0) {\n          continue; // don't want any emotes with smileys and stuff\n        }\n\n        if (window.emojify.emojiNames.indexOf(key) >= 0) {\n          continue; // do nothing so we don't override emoji\n        }\n\n        if (!this.twitch.emotesMap.has(key)) {\n          this.bttv.emotesMap.set(key, data[code]);\n        }\n      }\n    }\n    this.bttvJSONSLoaded = true;\n  },\n\n  /**\n   * @param {{[emote: string]: { url: string; width: number; height: number; }}} data\n   */\n  processTastyEmotes(data) {\n    this.tasty.emotes = data.emotes;\n    this.tastyJSONLoaded = true;\n    Object.keys(this.tasty.emotes).forEach((key) => {\n      this.tasty.emotesMap.set(key, data[key]);\n    });\n  },\n\n  /**\n   * @param {FrankerFacezJsonResponse} data\n   */\n  processFrankerFacez(data) {\n    for (const emoticon of data.emoticons) {\n      const code = emoticon.name;\n      const key = code.toLowerCase();\n\n      if (code.indexOf(\":\") >= 0) {\n        continue; // don't want any emotes with smileys and stuff\n      }\n\n      if (window.emojify.emojiNames.includes(key)) {\n        continue; // do nothing so we don't override emojify emoji\n      }\n\n      if (!this.twitch.emotesMap.has(key) && !this.bttv.emotesMap.has(key)) {\n        this.frankerFacez.emotesMap.set(key, emoticon.id);\n      }\n    }\n    this.frankerfacezJSONLoaded = true;\n  },\n\n  /**\n   * @param {string} str\n   * @param {boolean} [emotesEnabled=false]\n   */\n  findMatchingEmotes(str, emotesEnabled = false) {\n    /**\n     * @type {import(\"./emojiTypes\").Emoji[]}\n     */\n    const matches = [];\n\n    // first we check the QueUp native emoji\n    window.emojify.emojiNames.forEach((emoji) => {\n      if (emoji.includes(str)) {\n        matches.push({\n          src: this.emoji.template(emoji),\n          text: emoji,\n          alt: emoji,\n          platform: \"emojify\",\n        });\n      }\n    });\n    if (!emotesEnabled) {\n      return matches;\n    }\n    Array.from(this.twitch.emotesMap.keys()).forEach((emoji) => {\n      if (emoji.includes(str)) {\n        matches.push({\n          src: this.twitch.template(this.twitch.emotesMap.get(emoji)),\n          text: emoji,\n          alt: emoji,\n          platform: \"twitch\",\n        });\n      }\n    });\n    Array.from(this.bttv.emotesMap.keys()).forEach((emoji) => {\n      if (emoji.includes(str)) {\n        matches.push({\n          src: this.bttv.template(this.bttv.emotesMap.get(emoji)),\n          text: emoji,\n          alt: emoji,\n          platform: \"bttv\",\n        });\n      }\n    });\n\n    Array.from(this.frankerFacez.emotesMap.keys()).forEach((emoji) => {\n      if (emoji.includes(str)) {\n        matches.push({\n          src: this.frankerFacez.template(\n            this.frankerFacez.emotesMap.get(emoji)\n          ),\n          text: emoji,\n          alt: emoji,\n          platform: \"ffz\",\n        });\n      }\n    });\n\n    return matches;\n  },\n};\n","import { CHAT_MESSAGE } from \"../../events-constants\";\nimport { dubplus_emoji } from \"../emoji/emoji\";\n\n/**\n *\n * @param {string} type\n * @param {string} src\n * @param {string} name\n * @param {number} [w]\n * @param {number} [h]\n * @returns {string}\n */\nfunction makeImage(type, src, name, w, h) {\n  const width = w ? `width=\"${w}\"` : \"\";\n  const height = h ? `height=\"${h}\"` : \"\";\n  return `<img class=\"emoji ${type}-emote\" ${width} ${height} title=\"${name}\" alt=\"${name}\" src=\"${src}\" />`;\n}\n\n/**\n * @param {string} html\n * @returns {string}\n */\nfunction replaceTwitch(html) {\n  if (!dubplus_emoji.twitchJSONSLoaded) {\n    return html;\n  }\n  const _regex = dubplus_emoji.twitch.chatRegex;\n  const emoted = html.replace(_regex, function (matched, p1) {\n    const key = p1.toLowerCase();\n    if (dubplus_emoji.twitch.emotesMap.has(key)) {\n      const id = dubplus_emoji.twitch.emotesMap.get(key);\n      const src = dubplus_emoji.twitch.template(id);\n      return makeImage(\"twitch\", src, key);\n    } else {\n      return matched;\n    }\n  });\n  return emoted;\n}\n\n/**\n * @param {string} html\n * @returns {string}\n */\nfunction replaceBttv(html) {\n  if (!dubplus_emoji.bttvJSONSLoaded) {\n    return html;\n  }\n  const _regex = dubplus_emoji.bttv.chatRegex;\n  const emoted = html.replace(_regex, function (matched, p1) {\n    const key = p1.toLowerCase();\n    if (dubplus_emoji.bttv.emotesMap.has(key)) {\n      const id = dubplus_emoji.bttv.emotesMap.get(key);\n      const src = dubplus_emoji.bttv.template(id);\n      return makeImage(\"bttv\", src, key);\n    } else {\n      return matched;\n    }\n  });\n  return emoted;\n}\n\n/**\n * @param {string} html\n * @returns {string}\n */\nfunction replaceFranker(html) {\n  if (!dubplus_emoji.frankerfacezJSONLoaded) {\n    return html;\n  }\n  const _regex = dubplus_emoji.frankerFacez.chatRegex;\n  const emoted = html.replace(_regex, function (matched, p1) {\n    const key = p1.toLowerCase();\n    if (dubplus_emoji.frankerFacez.emotesMap.has(key)) {\n      const id = dubplus_emoji.frankerFacez.emotesMap.get(key);\n      const src = dubplus_emoji.frankerFacez.template(id);\n      return makeImage(\"frankerFacez\", src, key);\n    } else {\n      return matched;\n    }\n  });\n  return emoted;\n}\n\n/**\n * run this when a new chat message is received\n * and only replaces emotes in the last message\n */\nfunction replaceTextWithEmote() {\n  const chats = document.querySelectorAll(\n    \".chat-main li:not([data-emote-processed])\"\n  );\n  if (!chats?.length) {\n    return;\n  }\n  chats.forEach((li) => {\n    li.setAttribute(\"data-emote-processed\", \"true\");\n    const text = li.querySelector(\".text\");\n    if (text?.innerHTML) {\n      let processedHTML = replaceTwitch(text.innerHTML);\n      processedHTML = replaceBttv(processedHTML);\n      processedHTML = replaceFranker(processedHTML);\n      text.innerHTML = processedHTML;\n    }\n  });\n}\n\n/**\n * Emotes\n * This module adds support for converting :emote: text into images.\n * Currently it only supports: Twitch, BTTV, and FrankerFaceZ emotes.\n * Tasty emotes are not supported at this time.\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const emotes = {\n  id: \"emotes\",\n  label: \"emotes.label\",\n  description: \"emotes.description\",\n  category: \"general\",\n  turnOn() {\n    dubplus_emoji\n      .loadTwitchEmotes()\n      .then(() => dubplus_emoji.loadBTTVEmotes())\n      .then(() => dubplus_emoji.loadFrankerFacez())\n      .then(() => {\n        replaceTextWithEmote();\n        window.QueUp.Events.bind(CHAT_MESSAGE, replaceTextWithEmote);\n      });\n  },\n\n  turnOff() {\n    window.QueUp.Events.unbind(CHAT_MESSAGE, replaceTextWithEmote);\n  },\n};\n","/**\n * @typedef {import('./emojiTypes').Emoji} Emoji\n */\n\n/**\n * @typedef {object} EmojiState\n * @property {number} selectedIndex\n * @property {Emoji[]} emojiList\n */\n\n/**\n * @type {EmojiState}\n */\nexport const emojiState = $state({\n  selectedIndex: 0,\n  emojiList: [],\n});\n\nexport function reset() {\n  emojiState.selectedIndex = 0;\n  emojiState.emojiList = [];\n}\n\n/**\n * @param {Emoji[]} listArray\n */\nexport function setEmojiList(listArray) {\n  // make listArray unique by emoji.src and emoji.platform\n  emojiState.emojiList = listArray.filter(\n    (emoji, index, self) =>\n      index ===\n      self.findIndex(\n        (e) => e.src === emoji.src && e.platform === emoji.platform\n      )\n  );\n}\n\nexport function decrement() {\n  if (emojiState.selectedIndex > 0) {\n    emojiState.selectedIndex--;\n  } else {\n    emojiState.selectedIndex = emojiState.emojiList.length - 1;\n  }\n}\n\nexport function increment() {\n  if (emojiState.selectedIndex < emojiState.emojiList.length - 1) {\n    emojiState.selectedIndex++;\n  } else {\n    emojiState.selectedIndex = 0;\n  }\n}\n","/**\n *\n * @param {string} char\n * @returns {boolean}\n */\nexport function isEdge(char) {\n  return char === ' ' || char === '\\n';\n}\n\n/**\n * Assuming that the selectionStart is adjacent to, or within, a partial emoji,\n * get the selection range of the partial emoji\n *\n * \"This is a :cat example\" -> [10, 14]\n *            ^^^^^ cursor can be anywhere in this range\n * @param {string} currentText\n * @param {number} cursorPos\n * @returns {[number, number]}\n */\nexport function getSelection(currentText, cursorPos) {\n  let left = cursorPos > 0 ? cursorPos : 0;\n\n  // keep going left until we find the start of the partial emoji\n  while (left > 0 && currentText[left] !== ':') {\n    left -= 1;\n  }\n\n  let right = cursorPos;\n  // keep going right until we hit a space or newline\n  while (!isEdge(currentText[right]) && right < currentText.length) {\n    right += 1;\n  }\n\n  return [left, right];\n}\n","/**\n * Autocomplete Emojis/Emotes\n */\nimport { dubplus_emoji } from '../emoji/emoji';\nimport {\n  decrement,\n  emojiState,\n  increment,\n  setEmojiList,\n  reset,\n} from '../emoji/emojiState.svelte';\nimport { settings } from '../stores/settings.svelte';\nimport { getSelection, isEdge } from '../emoji/helpers';\n\nconst KEYS = {\n  up: 'ArrowUp',\n  down: 'ArrowDown',\n  left: 'ArrowLeft',\n  right: 'ArrowRight',\n  enter: 'Enter',\n  esc: 'Escape',\n  tab: 'Tab',\n  backspace: 'Backspace',\n  del: 'Delete',\n  space: ' ',\n};\n\n/**\n * Minimum number of characters to start filtering emojis.\n * Includes the \":\" character so \":sm\" is 3 characters.\n */\nconst MIN_CHAR = 3;\nlet acPreview = document.querySelector('#autocomplete-preview');\nlet originalKeyDownEventHandler;\n\n/**\n *\n * @param {HTMLTextAreaElement} inputEl\n * @param {number} index\n */\nexport function insertEmote(inputEl, index) {\n  const selected = emojiState.emojiList[index];\n  const [start, end] = getSelection(inputEl.value, inputEl.selectionStart);\n  const target = inputEl.value.substring(start, end);\n  inputEl.value = inputEl.value.replace(target, `:${selected.text}:`);\n  reset();\n}\n\n/**\n * @param {KeyboardEvent | MouseEvent} e\n */\nfunction checkInput(e) {\n  const inputEl = /**@type {HTMLTextAreaElement}*/ (e.target);\n  const currentText = inputEl.value;\n  const cursorPos = inputEl.selectionStart;\n\n  /*  \n    In here we are finding the nearest incomplete emoji/emote to the cursor position\n    \n    For example, if we have the following chat message:\n    \"Smelly :cat\"\n    and the cursor is at the end of the message,\n    It will find the string \":cat\"\n\n    if the word is a complete emoji (starts and ends in a colon), like \":cat:\",\n    it will ignore it. This only cares about incomplete possible emojis/emotes\n\n    It will use that partial emoji/emote to filter the list of emojis/emotes \n    that show in the autocomplete preview panel\n  */\n\n  let str = '';\n  let goLeft = cursorPos - 1;\n  while (!isEdge(currentText[goLeft]) && goLeft >= 0) {\n    str = currentText[goLeft] + str;\n    goLeft--;\n  }\n\n  let goRight = cursorPos;\n  while (!isEdge(currentText[goRight]) && goRight < currentText.length) {\n    str = str + currentText[goRight];\n    goRight++;\n  }\n\n  if (str.startsWith(':') && str.length >= MIN_CHAR && !str.endsWith(':')) {\n    // start filtering emojis\n    const list = dubplus_emoji.findMatchingEmotes(\n      str.substring(1).trim(),\n      settings.options.emotes\n    );\n    setEmojiList(list);\n  } else {\n    reset();\n  }\n}\n\n/**\n *\n * @param {KeyboardEvent} e\n * @returns\n */\nfunction chatInputKeyupFunc(e) {\n  acPreview = acPreview || document.querySelector('#autocomplete-preview');\n  const hasItems = acPreview.children.length > 0;\n  const isModifierKey = e.shiftKey || e.ctrlKey || e.altKey || e.metaKey;\n\n  if (isModifierKey) {\n    // do nothing if a modifier key is pressed\n    return;\n  }\n\n  if (e.key === KEYS.up && hasItems) {\n    e.preventDefault();\n    decrement();\n    return;\n  }\n\n  if (e.key === KEYS.down && hasItems) {\n    e.preventDefault();\n    increment();\n    return;\n  }\n\n  // handle selecting the emoji/emote and replacing the text in chat input\n  if ((e.key === KEYS.enter || e.key === KEYS.tab) && hasItems) {\n    e.preventDefault();\n    e.stopImmediatePropagation();\n    const inputEl = /**@type {HTMLTextAreaElement}*/ (e.target);\n    insertEmote(inputEl, emojiState.selectedIndex);\n    return;\n  }\n\n  // just clear the preview if we hit escape\n  if (e.key === KEYS.esc && hasItems) {\n    reset();\n    return;\n  }\n\n  checkInput(e);\n}\n\n/**\n *\n * @param {KeyboardEvent} e\n * @returns\n */\nfunction chatInputKeydownFunc(e) {\n  acPreview = acPreview || document.querySelector('#autocomplete-preview');\n  const emptyPreview = acPreview.children.length === 0;\n  const isValidKey = [KEYS.tab, KEYS.enter, KEYS.up, KEYS.down].includes(e.key);\n  const isModifierKey = e.shiftKey || e.ctrlKey || e.altKey || e.metaKey;\n\n  if (!isModifierKey && !emptyPreview && isValidKey) {\n    e.preventDefault();\n    return;\n  }\n\n  // temporary fix to restore enter key functionality for sending messages\n  // due to the new multiline chat textarea\n  if (!isModifierKey && e.key === KEYS.enter) {\n    window.QueUp.room.chat.sendMessage();\n    window.QueUp.room.chat.resizeTextarea();\n  } else if (!isModifierKey) {\n    window.QueUp.room.chat.ncKeyDown(e);\n  }\n}\n\n/**\n * Autocomplete\n * This module will allow users to autocomplete emojis/emotes in chat by presenting\n * a popup window above the chat that users can navigate with the arrow keys and select\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const autocomplete = {\n  id: 'autocomplete',\n  label: 'autocomplete.label',\n  category: 'general',\n  description: 'autocomplete.description',\n  turnOn() {\n    acPreview = document.querySelector('#autocomplete-preview');\n    reset();\n\n    originalKeyDownEventHandler =\n      window.QueUp.room.chat.events['keydown #chat-txt-message'];\n\n    const newEventsObject = { ...window.QueUp.room.chat.events };\n    delete newEventsObject['keydown #chat-txt-message'];\n    window.QueUp.room.chat.delegateEvents(newEventsObject);\n\n    const chatInput = document.getElementById('chat-txt-message');\n    chatInput.addEventListener('keydown', chatInputKeydownFunc);\n    chatInput.addEventListener('keyup', chatInputKeyupFunc);\n    chatInput.addEventListener('click', checkInput);\n  },\n\n  turnOff() {\n    reset();\n    window.QueUp.room.chat.events['keydown #chat-txt-message'] =\n      originalKeyDownEventHandler;\n    window.QueUp.room.chat.delegateEvents(window.QueUp.room.chat.events);\n    const chatInput = document.getElementById('chat-txt-message');\n    chatInput.removeEventListener('keydown', chatInputKeydownFunc);\n    chatInput.removeEventListener('keyup', chatInputKeyupFunc);\n    chatInput.removeEventListener('click', checkInput);\n  },\n};\n","import { CHAT_MESSAGE } from \"../../events-constants\";\nimport { settings } from \"../stores/settings.svelte\";\n/**\n * Custom Mentions\n *\n * When enabled, you can set custom text that triggers the mention chat sound\n * when it is mentioned in chat.\n */\n\nconst MODULE_ID = \"custom-mentions\";\n\n/**\n * @param {import(\"../../events\").ChatMessageEvent} e\n */\nfunction customMentionCheck(e) {\n  const enabled = settings.options[MODULE_ID];\n  const custom = settings.custom[MODULE_ID];\n  if (\n    enabled &&\n    // we only want to play the sound if the message is not from the current user\n    window.QueUp.session.id !== e.user.userInfo.userid\n  ) {\n    const customMentions = custom.split(\",\");\n    const shouldPlaySound = customMentions.some(function (v) {\n      const reg = new RegExp(\"\\\\b\" + v.trim() + \"\\\\b\", \"i\");\n      return reg.test(e.message);\n    });\n\n    if (shouldPlaySound) {\n      window.QueUp.room.chat.mentionChatSound.play();\n    }\n  }\n}\n\n/**\n * @type {import('./module').DubPlusModule}\n */\nexport const customMentions = {\n  id: MODULE_ID,\n  label: `${MODULE_ID}.label`,\n  description: `${MODULE_ID}.description`,\n  category: \"general\",\n  custom: {\n    title: `${MODULE_ID}.modal.title`,\n    content: `${MODULE_ID}.modal.content`,\n    placeholder: `${MODULE_ID}.modal.placeholder`,\n    maxlength: 255,\n  },\n\n  turnOn() {\n    window.QueUp.Events.bind(CHAT_MESSAGE, customMentionCheck);\n  },\n  turnOff() {\n    window.QueUp.Events.unbind(CHAT_MESSAGE, customMentionCheck);\n  },\n};\n","import { CHAT_MESSAGE } from \"../../events-constants\";\nimport { t } from \"../stores/i18n.svelte\";\nimport { settings } from \"../stores/settings.svelte\";\n\nconst MODULE_ID = \"chat-cleaner\";\n\n/**\n * @param {string} n\n */\nfunction chatCleanerCheck(n) {\n  // these will be ordered from oldest to newest\n  const chatMessages = document.querySelectorAll(\"ul.chat-main > li\");\n\n  const limit = parseInt(n ?? settings.custom[MODULE_ID], 10);\n\n  if (!chatMessages?.length || isNaN(limit) || chatMessages.length < limit) {\n    return;\n  }\n\n  // if our limit is 100 and we have 110 message, we want to remove the first 10,\n  // deleting elements at index 0 -> 9\n  for (let i = 0; i < chatMessages.length - limit; i++) {\n    chatMessages[i].remove();\n  }\n}\n\n/**\n * @type {import('./module').DubPlusModule}\n */\nexport const chatCleaner = {\n  id: MODULE_ID,\n  label: `${MODULE_ID}.label`,\n  description: `${MODULE_ID}.description`,\n  category: \"general\",\n  custom: {\n    title: `${MODULE_ID}.modal.title`,\n    content: `${MODULE_ID}.modal.content`,\n    placeholder: `${MODULE_ID}.modal.placeholder`,\n    maxlength: 5,\n    validation(val) {\n      if (/[^0-9]+/g.test(val)) {\n        return t(`${MODULE_ID}.modal.validation`);\n      }\n      return true;\n    },\n    onConfirm: (value) => {\n      if (settings.options[MODULE_ID]) {\n        chatCleanerCheck(value);\n      }\n    },\n  },\n  turnOn() {\n    chatCleanerCheck(undefined);\n    window.QueUp.Events.bind(CHAT_MESSAGE, chatCleanerCheck);\n  },\n\n  turnOff() {\n    window.QueUp.Events.unbind(CHAT_MESSAGE, chatCleanerCheck);\n  },\n};\n","export const activeTabState = $state({ isActive: true });\n\nwindow.onfocus = function () {\n  activeTabState.isActive = true;\n};\n\nwindow.onblur = function () {\n  activeTabState.isActive = false;\n};\n","/* global Dubtrack */\nimport { updateModalState } from \"../lib/stores/modalState.svelte\";\nimport { activeTabState } from \"../lib/stores/activeTabState.svelte\";\nimport { t } from \"../lib/stores/i18n.svelte\";\n\nfunction onDenyDismiss() {\n  updateModalState({\n    title: t(\"Notifcation.permission.title\"),\n    content: t(\"Notification.permission.denied\"),\n    open: true,\n  });\n}\n\nexport function notifyCheckPermission() {\n  return new Promise((resolve, reject) => {\n    // first check if browser supports it\n    if (!(\"Notification\" in window)) {\n      updateModalState({\n        open: true,\n        title: t(\"Notifcation.permission.title\"),\n        content: t(\"Notification.permission.notSupported\"),\n      });\n      reject(false);\n      return;\n    }\n\n    // no request needed, good to go\n    if (Notification.permission === \"granted\") {\n      resolve();\n      return;\n    }\n\n    if (Notification.permission === \"denied\") {\n      onDenyDismiss();\n      reject();\n      return;\n    }\n\n    // persmission unknown, request it\n    Notification.requestPermission().then(function (result) {\n      if (result === \"denied\" || result === \"default\") {\n        onDenyDismiss();\n        reject();\n        return;\n      }\n\n      resolve();\n    });\n  });\n}\n\n/**\n *\n * @param {object} opts\n * @param {string} opts.title\n * @param {string} [opts.content]\n * @param {boolean} [opts.ignoreActiveTab]\n * @param {function|null} [opts.callback]\n * @param {number} [opts.wait]\n * @returns\n */\nexport function showNotification(opts) {\n  const defaults = {\n    content: \"\",\n    ignoreActiveTab: false,\n    callback: null,\n    wait: 10000,\n  };\n  const options = Object.assign({}, defaults, opts);\n\n  // don't show a notification if tab is active\n  if (activeTabState.isActive && !options.ignoreActiveTab) {\n    return;\n  }\n\n  const notificationOptions = {\n    body: options.content,\n    icon: \"https://cdn.jsdelivr.net/gh/DubPlus/DubPlus/images/dubplus.svg\",\n  };\n\n  const n = new Notification(options.title, notificationOptions);\n\n  n.onclick = function () {\n    window.focus();\n    if (typeof options.callback === \"function\") {\n      options.callback();\n    }\n    n.close();\n  };\n\n  // close automatically after 5 seconds\n  setTimeout(n.close.bind(n), options.wait);\n}\n","import { notifyCheckPermission, showNotification } from \"../../utils/notify\";\nimport { settings } from \"../stores/settings.svelte\";\nimport { activeTabState } from \"../stores/activeTabState.svelte\";\nimport { CHAT_MESSAGE } from \"../../events-constants\";\n\n/**\n *\n * @param {import(\"../../events\").ChatMessageEvent} e\n */\nfunction notifyOnMention(e) {\n  const content = e.message;\n  const user = window.QueUp.session.get(\"username\").toLowerCase();\n  let mentionTriggers = [\"@\" + user];\n\n  // is custom mentions enabled AND user has entered text in the custom mentions modal\n  if (\n    settings.options[\"custom-mentions\"] &&\n    settings.custom[\"custom-mentions\"]\n  ) {\n    //add custom mention triggers to array\n    mentionTriggers = mentionTriggers\n      .concat(settings.custom[\"custom-mentions\"].split(\",\"))\n      .map((v) => v.trim());\n  }\n\n  const mentionTriggersTest = mentionTriggers.some(function (v) {\n    const reg = new RegExp(\"\\\\b\" + v + \"\\\\b\", \"i\");\n    return reg.test(content);\n  });\n\n  if (\n    mentionTriggersTest &&\n    !activeTabState.isActive &&\n    window.QueUp.session.id !== e.user.userInfo.userid\n  ) {\n    showNotification({\n      title: `Message from ${e.user.username}`,\n      content: content,\n    });\n  }\n}\n\n/**\n * Mention Notifications\n * When a chat message comes in that contains a @mention to the user's username,\n * a browser notification will be triggered.\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const mentionNotifications = {\n  id: \"mention-notifications\",\n  label: \"mention-notifications.label\",\n  description: \"mention-notifications.description\",\n  category: \"general\",\n\n  turnOn() {\n    notifyCheckPermission()\n      .then(() => {\n        window.QueUp.Events.bind(CHAT_MESSAGE, notifyOnMention);\n      })\n      .catch(() => {\n        // turn back off until it's granted\n        settings.options[this.id] = false;\n      });\n  },\n\n  turnOff() {\n    window.QueUp.Events.unbind(CHAT_MESSAGE, notifyOnMention);\n  },\n};\n","import { notifyCheckPermission, showNotification } from \"../../utils/notify\";\nimport { settings } from \"../stores/settings.svelte\";\nimport { t } from \"../stores/i18n.svelte\";\nimport { NEW_PM_MESSAGE } from \"../../events-constants\";\n\n/**\n *\n * @param {import(\"../../events\").NewMessageEvent} e\n * @returns\n */\nfunction pmNotify(e) {\n  if (window.QueUp.session.id === e.userid) {\n    return;\n  }\n  showNotification({\n    title: t(\"pm-notifications.notification.title\"),\n    ignoreActiveTab: true,\n    callback: function () {\n      /**\n       * @type {HTMLSpanElement}\n       */\n      const openPmButton = document.querySelector(\".user-messages\");\n      openPmButton?.click();\n      setTimeout(function () {\n        /**\n         * @type {HTMLLIElement}\n         */\n        const messageItem = document.querySelector(\n          `.message-item[data-messageid=\"${e.messageid}\"]`\n        );\n        messageItem?.click();\n      }, 500);\n    },\n    wait: 10000,\n  });\n}\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const pmNotifications = {\n  id: \"pm-notifications\",\n  label: \"pm-notifications.label\",\n  description: \"pm-notifications.description\",\n  category: \"general\",\n  turnOn() {\n    notifyCheckPermission()\n      .then(() => {\n        window.QueUp.Events.bind(NEW_PM_MESSAGE, pmNotify);\n      })\n      .catch((err) => {\n        // turn back off until it's granted\n        settings.options[this.id] = false;\n      });\n  },\n  turnOff() {\n    window.QueUp.Events.unbind(NEW_PM_MESSAGE, pmNotify);\n  },\n};\n","import { PLAYLIST_UPDATE } from '../../events-constants';\nimport { logError, logInfo } from '../../utils/logger';\nimport { showNotification } from '../../utils/notify';\nimport { t } from '../stores/i18n.svelte';\nimport { settings } from '../stores/settings.svelte';\n\n/**\n * Sends a notification when the your position in the queue\n * is equal (or lower) than the value user set in the settings.\n *\n * examples:\n * if you want to be notified when you're next you would use position 1.\n * if you want to be notified when you started playing you would use position 0.\n * @param {{startTime: number}} e\n * @returns\n */\nfunction djNotificationCheck(e) {\n  logInfo('djNotificationCheck', e);\n\n  // check if user is in the queue. One easy but kinda hacky way to do this is\n  // to check the DOM for the queue position element to have a number\n  const isInQueue = !!document.querySelector('.queue-position')?.textContent;\n  if (!isInQueue) {\n    // if the user is NOT in the queue then we don't need to do anything\n    return;\n  }\n\n  const currentPosition = parseInt(\n    document.querySelector('.queue-position')?.textContent,\n    10\n  );\n  if (isNaN(currentPosition)) {\n    // this is important. if we can't parse it then we can't do anything\n    logError(\n      'dj-notification',\n      'Could not parse current position:',\n      currentPosition\n    );\n    return;\n  }\n\n  let parseSetting = parseInt(settings.custom['dj-notification'], 10);\n  if (isNaN(parseSetting)) {\n    // if this is NaN then we should default to 2\n    parseSetting = 2;\n    logInfo('djNotification', 'Could not parse setting, defaulting to 2');\n  }\n\n  if (currentPosition <= parseSetting) {\n    showNotification({\n      title: t('dj-notification.notification.title'),\n      content: t('dj-notification.notification.content'),\n      ignoreActiveTab: true,\n      wait: 10000,\n    });\n    window.QueUp.room.chat.mentionChatSound.play();\n  }\n}\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const djNotification = {\n  id: 'dj-notification',\n  label: 'dj-notification.label',\n  description: 'dj-notification.description',\n  category: 'general',\n  custom: {\n    title: 'dj-notification.modal.title',\n    content: 'dj-notification.modal.content',\n    placeholder: '2',\n    maxlength: 2,\n    onConfirm: (value) => {\n      if (/[^0-9]+/.test(value.trim())) {\n        window.alert(t('dj-notification.modal.validation'));\n        return false;\n      }\n      return true;\n    },\n  },\n  turnOn() {\n    window.QueUp.Events.bind(PLAYLIST_UPDATE, djNotificationCheck);\n  },\n  turnOff() {\n    window.QueUp.Events.unbind(PLAYLIST_UPDATE, djNotificationCheck);\n  },\n};\n","/**\n * @typedef {{userid: string, username: string}} DubInfo\n */\n\n/**\n * @typedef {object} DubsState\n * @property {DubInfo[]} upDubs\n * @property {DubInfo[]} downDubs\n * @property {DubInfo[]} grabs\n */\n\n/**\n * @type {DubsState}\n */\nexport const dubsState = $state({\n  upDubs: [],\n  downDubs: [],\n  grabs: [],\n});\n\n/**\n * @param {\"updub\" | \"downdub\" | \"grab\"} dubType\n * @returns {DubInfo[]}\n */\nexport function getDubCount(dubType) {\n  if (dubType === \"updub\") return dubsState.upDubs;\n  if (dubType === \"downdub\") return dubsState.downDubs;\n  if (dubType === \"grab\") return dubsState.grabs;\n  return [];\n}\n","/**\n * QueUp API wrappers\n */\n\nexport const apiBase = window.location.hostname.includes('staging')\n  ? 'https://staging-api.queup.dev'\n  : 'https://api.queup.net';\n\n/**\n * @param {string} userid\n */\nexport function userData(userid) {\n  return `${apiBase}/user/${userid}`;\n}\n\n/**\n *\n * @param {string} roomId\n */\nexport function activeDubs(roomId) {\n  return `${apiBase}/room/${roomId}/playlist/active/dubs`;\n}\n\n/**\n * @param {string} userid\n */\nexport function userImage(userid) {\n  return `${apiBase}/user/${userid}/image`;\n}\n","import { logError } from '../../utils/logger.js';\nimport { isMod } from '../../utils/modcheck.js';\nimport { dubsState } from '../stores/dubsState.svelte.js';\nimport {\n  DUB,\n  GRAB,\n  PLAYLIST_UPDATE,\n  USER_LEAVE,\n} from '../../events-constants.js';\nimport { activeDubs, userData } from '../api.js';\n\n/**\n * @param {string} userid\n * @returns {Promise<string>}\n */\nfunction getUserName(userid) {\n  return new Promise((resolve, reject) => {\n    // check if we already have the username\n    const username = window.QueUp.room.users.collection.findWhere({\n      userid,\n    })?.attributes?._user?.username;\n\n    if (username) {\n      resolve(username);\n      return;\n    }\n\n    // or try getting it via the API\n    fetch(userData(userid))\n      .then((response) => response.json())\n      .then((response) => {\n        if (response?.userinfo?.username) {\n          const { username } = response.userinfo;\n          resolve(username);\n        } else {\n          reject('Failed to get username from API for userid: ' + userid);\n        }\n      })\n      .catch(reject);\n  });\n}\n\n/**\n * @param {Array<{ userid: string}>} updubs\n */\nfunction updateUpdubs(updubs) {\n  updubs.forEach((dub) => {\n    // even though we reset before calling this, because this is async we could have\n    // had an upDub in the time it took to fetch the data\n    if (dubsState.upDubs.find((el) => el.userid === dub.userid)) {\n      return;\n    }\n\n    getUserName(dub.userid)\n      .then((username) => {\n        dubsState.upDubs.push({\n          userid: dub.userid,\n          username,\n        });\n      })\n      .catch((error) => logError('Failed to get username for upDubs:', error));\n  });\n}\n\n/**\n * @param {Array<{ userid: string}>} downdubs\n */\nfunction updateDowndubs(downdubs) {\n  downdubs.forEach((dub) => {\n    // even though we reset before calling this, because this is async we could have\n    // had an upDub in the time it took to fetch the data\n    if (dubsState.downDubs.find((el) => el.userid === dub.userid)) {\n      return;\n    }\n\n    getUserName(dub.userid)\n      .then((username) => {\n        dubsState.downDubs.push({\n          userid: dub.userid,\n          username,\n        });\n      })\n      .catch((error) => logError('Failed to get username for downDubs', error));\n  });\n}\n\n/**\n * @param {Array<{ userid: string}>} grabs\n */\nfunction updateGrabs(grabs) {\n  grabs.forEach((grab) => {\n    if (dubsState.grabs.find((el) => el.userid === grab.userid)) {\n      return;\n    }\n\n    getUserName(grab.userid)\n      .then((username) => {\n        dubsState.grabs.push({\n          userid: grab.userid,\n          username,\n        });\n      })\n      .catch((error) => logError('Failed to get username for grab', error));\n  });\n}\n\nfunction resetDubs() {\n  dubsState.downDubs = [];\n  dubsState.upDubs = [];\n  dubsState.grabs = [];\n\n  const dubsURL = activeDubs(window.QueUp.room.model.id);\n  fetch(dubsURL)\n    .then((response) => response.json())\n    .then((response) => {\n      updateUpdubs(response.data.upDubs);\n      // updateGrabs(response.data.grabs);\n\n      //Only let mods or higher access down dubs\n      if (isMod(window.QueUp.session.id)) {\n        updateDowndubs(response.data.downDubs);\n      }\n    })\n    .catch((error) => logError('Failed to fetch dubs data from API.', error));\n}\n\n/**\n * @param {import(\"../../events.js\").DubEvent} e\n * @returns\n */\nfunction dubWatcher(e) {\n  if (e.dubtype === 'updub') {\n    if (!dubsState.upDubs.find((el) => el.userid === e.user._id)) {\n      dubsState.upDubs.push({\n        userid: e.user._id,\n        username: e.user.username,\n      });\n    }\n\n    //Remove user from other dubtype if exists\n    dubsState.downDubs = dubsState.downDubs.filter(\n      (el) => el.userid !== e.user._id\n    );\n  } else if (e.dubtype === 'downdub' && isMod(window.QueUp.session.id)) {\n    if (!dubsState.downDubs.find((el) => el.userid === e.user._id)) {\n      dubsState.downDubs.push({\n        userid: e.user._id,\n        username: e.user.username,\n      });\n    }\n\n    //Remove user from other dubtype if exists\n    dubsState.upDubs = dubsState.upDubs.filter(\n      (el) => el.userid !== e.user._id\n    );\n  }\n\n  const msSinceSongStart =\n    Date.now() - window.QueUp.room.player.activeSong.attributes.song.played;\n\n  // not sure why we are checking this, maybe to give the API time to update?\n  // if the song started less than 1 second ago, don't reset the dubs\n  if (msSinceSongStart < 1000) {\n    return;\n  }\n\n  // if the dubs don't match the API, reset them\n  if (\n    dubsState.upDubs.length !==\n    window.QueUp.room.player.activeSong.attributes.song.updubs\n  ) {\n    resetDubs();\n  } else if (\n    isMod(window.QueUp.session.id) &&\n    dubsState.downDubs.length !==\n      window.QueUp.room.player.activeSong.attributes.song.downdubs\n  ) {\n    resetDubs();\n  }\n}\n\n/**\n * @param {import(\"../../events.js\").GrabEvent} e\n */\nfunction grabWatcher(e) {\n  if (!dubsState.grabs.find((el) => el.userid === e.user._id)) {\n    dubsState.grabs.push({\n      userid: e.user._id,\n      username: e.user.username,\n    });\n  }\n}\n\n/**\n * @param {import(\"../../events.js\").UserLeaveEvent} e\n */\nfunction dubUserLeaveWatcher(e) {\n  // remove from up dubs\n  dubsState.upDubs = dubsState.upDubs.filter((el) => el.userid !== e.user._id);\n  // remove from down dubs\n  dubsState.downDubs = dubsState.downDubs.filter(\n    (el) => el.userid !== e.user._id\n  );\n  // remove from grabs\n  dubsState.grabs = dubsState.grabs.filter((el) => el.userid !== e.user._id);\n}\n\n/**\n * @type {import(\"./module.js\").DubPlusModule}\n */\nexport const showDubsOnHover = {\n  id: 'dubs-hover',\n  label: 'dubs-hover.label',\n  description: 'dubs-hover.description',\n  category: 'general',\n  turnOn() {\n    resetDubs();\n    window.QueUp.Events.bind(DUB, dubWatcher);\n    window.QueUp.Events.bind(GRAB, grabWatcher);\n    window.QueUp.Events.bind(USER_LEAVE, dubUserLeaveWatcher);\n    window.QueUp.Events.bind(PLAYLIST_UPDATE, resetDubs);\n  },\n\n  turnOff() {\n    window.QueUp.Events.unbind(DUB, dubWatcher);\n    window.QueUp.Events.unbind(GRAB, grabWatcher);\n    window.QueUp.Events.unbind(USER_LEAVE, dubUserLeaveWatcher);\n    window.QueUp.Events.unbind(PLAYLIST_UPDATE, resetDubs);\n  },\n};\n","/**\n *\n * @param {string} className\n * @param {string} textContent\n */\nexport function insertQueupChat(className, textContent) {\n  const li = document.createElement(\"li\");\n  li.className = `dubplus-chat-system ${className}`;\n\n  const chatDelete = document.createElement(\"div\");\n  chatDelete.className = \"chatDelete\";\n  chatDelete.onclick = function (e) {\n    /**@type {HTMLDivElement}*/ (e.target).parentElement.remove();\n  };\n\n  const span = document.createElement(\"span\");\n  span.className = \"icon-close\";\n\n  chatDelete.appendChild(span);\n  li.appendChild(chatDelete);\n\n  const text = document.createElement(\"div\");\n  text.className = \"text\";\n  text.textContent = textContent;\n  li.appendChild(text);\n  document.querySelector(\"ul.chat-main\").appendChild(li);\n}\n","/**\n * Show downvotes in chat\n * only mods can use this\n */\nimport { isMod } from '../../utils/modcheck';\nimport { insertQueupChat } from '../../utils/chat-message';\nimport { t } from '../stores/i18n.svelte';\n\nfunction downdubWatcher(e) {\n  const isUserTheDJ =\n    window.QueUp.session.id ===\n    window.QueUp.room.player.activeSong.attributes.song.userid;\n\n  if (isUserTheDJ && e.dubtype === 'downdub') {\n    insertQueupChat(\n      'dubplus-chat-system-downdub',\n      t('downdubs-in-chat.chat-message', {\n        username: e.user.username,\n        song_name: window.QueUp.room.player.activeSong.attributes.songInfo.name,\n      })\n    );\n  }\n}\n\nexport const downdubsInChat = {\n  id: 'downdubs-in-chat',\n  label: 'downdubs-in-chat.label',\n  description: 'downdubs-in-chat.description',\n  category: 'general',\n  modOnly: true,\n  turnOn() {\n    if (isMod(window.QueUp.session.id)) {\n      window.QueUp.Events.bind('realtime:room_playlist-dub', downdubWatcher);\n    }\n  },\n\n  turnOff() {\n    window.QueUp.Events.unbind('realtime:room_playlist-dub', downdubWatcher);\n  },\n};\n","/**\n * Show downvotes in chat\n * only mods can use this\n */\n\nimport { insertQueupChat } from '../../utils/chat-message';\nimport { t } from '../stores/i18n.svelte';\n\nfunction updubWatcher(e) {\n  const isUserTheDJ =\n    window.QueUp.session.id ===\n    window.QueUp.room.player.activeSong.attributes.song.userid;\n\n  if (isUserTheDJ && e.dubtype === 'updub') {\n    insertQueupChat(\n      'dubplus-chat-system-updub',\n      t('updubs-in-chat.chat-message', {\n        username: e.user.username,\n        song_name: window.QueUp.room.player.activeSong.attributes.songInfo.name,\n      })\n    );\n  }\n}\n\nexport const upDubInChat = {\n  id: 'updubs-in-chat',\n  label: 'updubs-in-chat.label',\n  description: 'updubs-in-chat.description',\n  category: 'general',\n  turnOn() {\n    window.QueUp.Events.bind('realtime:room_playlist-dub', updubWatcher);\n  },\n  turnOff() {\n    window.QueUp.Events.unbind('realtime:room_playlist-dub', updubWatcher);\n  },\n};\n","/**\n * Show downvotes in chat\n * only mods can use this\n */\n\nimport { insertQueupChat } from '../../utils/chat-message';\nimport { t } from '../stores/i18n.svelte';\n\nfunction grabChatWatcher(e) {\n  const isUserTheDJ =\n    window.QueUp.session.id ===\n    window.QueUp.room.player.activeSong.attributes.song.userid;\n\n  // The owner of the room can set if grabs show in chat or not. If it is\n  // disabled, we only show grabs in chat if the user is the DJ.\n  if (isUserTheDJ) {\n    insertQueupChat(\n      'dubplus-chat-system-grab',\n      t('grabs-in-chat.chat-message', {\n        username: e.user.username,\n        song_name: window.QueUp.room.player.activeSong.attributes.songInfo.name,\n      })\n    );\n  }\n}\n\nexport const grabsInChat = {\n  id: 'grabs-in-chat',\n  label: 'grabs-in-chat.label',\n  description: 'grabs-in-chat.description',\n  category: 'general',\n  turnOn() {\n    if (!window.QueUp.room.model.get('displayUserGrab')) {\n      window.QueUp.Events.bind(\n        'realtime:room_playlist-queue-update-grabs',\n        grabChatWatcher\n      );\n    }\n  },\n\n  turnOff() {\n    if (!window.QueUp.room.model.get('displayUserGrab')) {\n      window.QueUp.Events.unbind(\n        'realtime:room_playlist-queue-update-grabs',\n        grabChatWatcher\n      );\n    }\n  },\n};\n","export const snow = {\n  id: \"snow\",\n  label: \"snow.label\",\n  description: \"snow.description\",\n  category: \"general\",\n\n  turnOn() {\n    // do nothing, we just want to turn the setting on\n    // everything is handled within the Snow component\n  },\n\n  turnOff() {\n    // do nothing, we just want to turn the setting off\n    // everything is handled within the Snow component\n  },\n};\n","class RainEffect {\n  constructor() {\n    // Rain settings\n    this.particles = [];\n    this.drops = [];\n    this.numbase = 5;\n    this.numb = 2;\n    this.width = 0;\n    this.height = 0;\n\n    // We can update these realtime\n    this.controls = {\n      rain: 2,\n      alpha: 1,\n      color: 200,\n      opacity: 1,\n      saturation: 100,\n      lightness: 50,\n      back: 0,\n      multi: false,\n      speed: 1,\n    };\n\n    this.requestAnimFrame = null;\n\n    /**\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas = null;\n  }\n  makeCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.id = \"dubPlusRainCanvas\";\n    this.canvas.style.position = \"fixed\";\n    this.canvas.style.top = \"0px\";\n    this.canvas.style.left = \"0px\";\n    this.canvas.style.zIndex = \"100\";\n    this.canvas.style.pointerEvents = \"none\";\n    document.body.prepend(this.canvas);\n  }\n\n  start() {\n    this.makeCanvas();\n    this.startAnimation();\n  }\n\n  stop() {\n    this.stopAnimation();\n    this.canvas?.remove();\n  }\n\n  onWindowResize() {\n    this.width = this.canvas.width = window.innerWidth;\n    this.height = this.canvas.height = window.innerHeight;\n  }\n\n  startAnimation() {\n    const windowAnimFram = window.requestAnimationFrame;\n\n    this.requestAnimFrame = windowAnimFram ? windowAnimFram.bind(window) : null;\n    if (!this.canvas) return;\n\n    const ctx = this.canvas.getContext(\"2d\");\n\n    this.width, (this.height = 0);\n\n    this.onWindowResize();\n    window.onresize = this.onWindowResize.bind(this);\n\n    this.particles = [];\n    this.drops = [];\n    this.numbase = 5;\n    this.numb = 2;\n\n    let that = this;\n\n    (function boucle() {\n      that.requestAnimFrame(boucle);\n      that.update();\n      that.rendu(ctx);\n    })();\n  }\n\n  /**\n   *\n   * @param {number} X\n   * @param {number} Y\n   * @param {number} [num]\n   */\n  buildRainParticle(X, Y, num) {\n    if (!num) {\n      num = this.numb;\n    }\n    while (num--) {\n      this.particles.push({\n        speedX: Math.random() * 0.25,\n        speedY: Math.random() * 9 + 1,\n        X,\n        Y,\n        alpha: 1,\n        color:\n          \"hsla(\" +\n          this.controls.color +\n          \",\" +\n          this.controls.saturation +\n          \"%, \" +\n          this.controls.lightness +\n          \"%,\" +\n          this.controls.opacity +\n          \")\",\n      });\n    }\n  }\n\n  /**\n   *\n   * @param {number} X\n   * @param {number} Y\n   * @param {any} color\n   * @param {number} [num]\n   */\n  explosion(X, Y, color, num) {\n    if (!num) {\n      num = this.numbase;\n    }\n    while (num--) {\n      this.drops.push({\n        speedX: Math.random() * 4 - 2,\n        speedY: Math.random() * -4,\n        X,\n        Y,\n        radius: 0.65 + Math.floor(Math.random() * 1.6),\n        alpha: 1,\n        color,\n      });\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  rendu(ctx) {\n    if (this.controls.multi) {\n      this.controls.color = Math.random() * 360;\n    }\n\n    ctx.save();\n    ctx.clearRect(0, 0, this.width, this.height);\n\n    const particleslocales = this.particles;\n    const dropslocales = this.drops;\n    const tau = Math.PI * 2;\n\n    for (\n      let i = 0, particlesactives;\n      (particlesactives = particleslocales[i]);\n      i++\n    ) {\n      ctx.globalAlpha = particlesactives.alpha;\n      ctx.fillStyle = particlesactives.color;\n      ctx.fillRect(\n        particlesactives.X,\n        particlesactives.Y,\n        particlesactives.speedY / 4,\n        particlesactives.speedY\n      );\n    }\n\n    for (let i = 0, dropsactives; (dropsactives = dropslocales[i]); i++) {\n      ctx.globalAlpha = dropsactives.alpha;\n      ctx.fillStyle = dropsactives.color;\n\n      ctx.beginPath();\n      ctx.arc(dropsactives.X, dropsactives.Y, dropsactives.radius, 0, tau);\n      ctx.fill();\n    }\n    ctx.strokeStyle = \"white\";\n    ctx.lineWidth = 2;\n\n    ctx.restore();\n  }\n\n  update() {\n    const particleslocales = this.particles;\n    const dropslocales = this.drops;\n\n    for (\n      let i = 0, particlesactives;\n      (particlesactives = particleslocales[i]);\n      i++\n    ) {\n      particlesactives.X += particlesactives.speedX;\n      particlesactives.Y += particlesactives.speedY + 5;\n      if (particlesactives.Y > this.height - 15) {\n        particleslocales.splice(i--, 1);\n        this.explosion(\n          particlesactives.X,\n          particlesactives.Y,\n          particlesactives.color\n        );\n      }\n    }\n\n    for (let i = 0, dropsactives; (dropsactives = dropslocales[i]); i++) {\n      dropsactives.X += dropsactives.speedX;\n      dropsactives.Y += dropsactives.speedY;\n      dropsactives.radius -= 0.075;\n      if (dropsactives.alpha > 0) {\n        dropsactives.alpha -= 0.005;\n      } else {\n        dropsactives.alpha = 0;\n      }\n      if (dropsactives.radius < 0) {\n        dropslocales.splice(i--, 1);\n      }\n    }\n\n    let i = this.controls.rain;\n    while (i--) {\n      this.buildRainParticle(Math.floor(Math.random() * this.width), -15);\n    }\n  }\n\n  stopAnimation() {\n    this.requestAnimFrame = function () {};\n  }\n}\n\nexport const rain = {\n  id: \"rain\",\n  label: \"rain.label\",\n  description: \"rain.description\",\n  category: \"general\",\n  turnOn() {\n    this.rainEffect = new RainEffect();\n    this.rainEffect.start();\n  },\n  turnOff() {\n    this.rainEffect.stop();\n    delete this.rainEffect;\n  },\n};\n","import { logInfo } from '../../utils/logger';\nimport IconFullscreen from '../svg/IconFullscreen.svelte';\n\n/**\n * Fullscreen video\n * Toggle fullscreen video mode\n */\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const fullscreen = {\n  id: 'fullscreen',\n  label: 'fullscreen.label',\n  description: 'fullscreen.description',\n  category: 'user-interface',\n  altIcon: IconFullscreen,\n  onClick() {\n    const elem = /**@type{HTMLIFrameElement}*/ (\n      document.querySelector('.player_container iframe')\n    );\n    if (!elem) {\n      logInfo('Fullscreen: No video element found');\n      return;\n    }\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n      // @ts-ignore\n    } else if (elem.msRequestFullscreen) {\n      // @ts-ignore\n      elem.msRequestFullscreen();\n      // @ts-ignore\n    } else if (elem.mozRequestFullScreen) {\n      // @ts-ignore\n      elem.mozRequestFullScreen();\n      // @ts-ignore\n    } else if (elem.webkitRequestFullscreen) {\n      // @ts-ignore\n      elem.webkitRequestFullscreen();\n    }\n  },\n};\n","/**\n * Split Chat\n * Toggle Split chat mode\n */\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const splitChat = {\n  id: \"split-chat\",\n  label: \"split-chat.label\",\n  description: \"split-chat.description\",\n  category: \"user-interface\",\n  turnOn() {\n    document.body.classList.add(\"dubplus-split-chat\");\n  },\n  turnOff() {\n    document.body.classList.remove(\"dubplus-split-chat\");\n  },\n};\n","/**\n * Hide the Chat box and only show the video\n */\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const hideChat = {\n  id: \"hide-chat\",\n  label: \"hide-chat.label\",\n  description: \"hide-chat.description\",\n  category: \"user-interface\",\n  turnOn() {\n    document.body.classList.add(\"dubplus-video-only\");\n  },\n  turnOff() {\n    document.body.classList.remove(\"dubplus-video-only\");\n  },\n};\n","/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const hideVideo = {\n  id: \"hide-video\",\n  label: \"hide-video.label\",\n  description: \"hide-video.description\",\n  category: \"user-interface\",\n  turnOn() {\n    document.body.classList.add(\"dubplus-chat-only\");\n  },\n  turnOff() {\n    document.body.classList.remove(\"dubplus-chat-only\");\n  },\n};\n","/**\n * Hide Avatars\n * Toggle hiding user avatars in the chat box.\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const hideAvatars = {\n  id: \"hide-avatars\",\n  label: \"hide-avatars.label\",\n  description: \"hide-avatars.description\",\n  category: \"user-interface\",\n  turnOn() {\n    document.body.classList.add(\"dubplus-hide-avatars\");\n  },\n  turnOff() {\n    document.body.classList.remove(\"dubplus-hide-avatars\");\n  },\n};\n","/**\n * Hide Background\n * toggle hiding background image\n *\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const hideBackground = {\n  id: \"hide-bg\",\n  label: \"hide-bg.label\",\n  description: \"hide-bg.description\",\n  category: \"user-interface\",\n  turnOn() {\n    document.body.classList.add(\"dubplus-hide-bg\");\n  },\n  turnOff() {\n    document.body.classList.remove(\"dubplus-hide-bg\");\n  },\n};\n","/**\n * Show Timestamps\n * Toggle always showing chat message timestamps.\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const showTimestamps = {\n  id: \"show-timestamps\",\n  label: \"show-timestamps.label\",\n  description: \"show-timestamps.description\",\n  category: \"user-interface\",\n  turnOn() {\n    document.body.classList.add(\"dubplus-show-timestamp\");\n  },\n  turnOff() {\n    document.body.classList.remove(\"dubplus-show-timestamp\");\n  },\n};\n","/**\n * @param {KeyboardEvent} e\n */\nfunction handleMute(e) {\n  const tag = /**@type {HTMLElement}*/ (e.target).tagName.toLowerCase();\n  if (e.key === \" \" && tag !== \"input\" && tag !== \"textarea\") {\n    window.QueUp.room.player.mutePlayer();\n  }\n}\n\n/**\n * Spacebar Mute\n * Turn on/off the ability to mute current song with the spacebar\n *\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const spacebarMute = {\n  id: \"spacebar-mute\",\n  label: \"spacebar-mute.label\",\n  description: \"spacebar-mute.description\",\n  category: \"settings\",\n  turnOn() {\n    document.addEventListener(\"keypress\", handleMute);\n  },\n  turnOff() {\n    document.removeEventListener(\"keypress\", handleMute);\n  },\n};\n","/**\n * Warn on Navigation\n * Warns you when accidentally clicking on a link that takes you out of dubtrack\n */\n\nfunction unloader(e) {\n  let confirmationMessage = \"You are leaving\";\n  e.returnValue = confirmationMessage; // Gecko, Trident, Chrome 34+\n  return confirmationMessage; // Gecko, WebKit, Chrome <34\n}\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const warnOnNavigation = {\n  id: \"warn-redirect\",\n  label: \"warn-redirect.label\",\n  description: \"warn-redirect.description\",\n  category: \"settings\",\n  turnOn() {\n    window.addEventListener(\"beforeunload\", unloader);\n  },\n  turnOff() {\n    window.removeEventListener(\"beforeunload\", unloader);\n  },\n};\n","/**\n * @param {string} className\n * @param {string} fileName\n * @returns\n */\nconst makeLink = function (className, fileName) {\n  const link = document.createElement('link');\n  link.rel = 'stylesheet';\n  link.type = 'text/css';\n  link.className = className;\n  link.href = fileName;\n  return link;\n};\n\n/**\n * Loads a CSS file into <head>.\n * It concats __SRC_ROOT__ with the first argument (cssFile)\n * @example:\n * css.load(\"/options/show_timestamps.css\", \"show_timestamps_link\");\n *\n * @param {string} cssFile    the css file location, should start with a /\n * @param {string} className  class name for element\n * @returns {Promise<void>}\n */\nexport function loadCSS(cssFile, className) {\n  return new Promise((resolve, reject) => {\n    if (document.querySelector(`link.${className}`)) {\n      // prevent from adding the same css file twice\n      resolve();\n      return;\n    }\n    const link = makeLink(\n      className,\n      // @ts-ignore __SRC_ROOT__ & __TIME_STAMP__ are replaced by vite\n      `${__SRC_ROOT__}${cssFile}?${__TIME_STAMP__}`\n    );\n    link.onload = () => resolve();\n    link.onerror = reject;\n    document.head.appendChild(link);\n  });\n}\n\n/**\n * Loads a css file from a full URL in the <head>\n * @param  {string} cssFile   the full url location of a CSS file\n * @param  {string} className a class name to give to the <link> element\n * @return {void}\n */\nexport function loadExternalCss(cssFile, className) {\n  if (document.querySelector(`link.${className}`)) {\n    // prevent from adding the same css file twice\n    return;\n  }\n  const link = makeLink(className, cssFile);\n  document.head.appendChild(link);\n}\n","import { logError, logInfo } from \"../../utils/logger\";\nimport { loadExternalCss } from \"../../utils/css\";\n/**\n * Community Theme\n * Toggle Community CSS theme\n *\n * In order to use this feature the mods of the room need to add a link to the\n * css in the room description. The link should be formatted as follows:\n *\n * @dub+=https://example.com/style.css\n * or\n * @dubplus=https://example.com/style.css\n *\n * for backwards compatibility with dubx we're also checking\n * @dubx=https://example.com/style.css\n */\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const communityTheme = {\n  id: \"community-theme\",\n  label: \"community-theme.label\",\n  description: \"community-theme.description\",\n  category: \"customize\",\n  turnOn() {\n    const location = window.QueUp.room.model.get(\"roomUrl\");\n    fetch(`https://api.queup.net/room/${location}`)\n      .then((response) => response.json())\n      .then((e) => {\n        const content = e.data.description;\n\n        // for backwards compatibility with dubx we're checking for both @dubx and @dubplus and @dub+\n        const themeCheck = new RegExp(\n          /(@dub(x|plus|\\+)=)((https?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+\\.?(:\\d+)?(\\/\\S*)?)/,\n          \"i\"\n        );\n        let communityCSSUrl = null;\n        content.replace(themeCheck, function (match, p1, p2, p3) {\n          communityCSSUrl = p3;\n        });\n\n        if (!communityCSSUrl) {\n          logInfo(\"No community CSS theme found\");\n          return;\n        }\n        logInfo(\"loading community css theme:\", communityCSSUrl);\n        loadExternalCss(communityCSSUrl, this.id);\n      })\n      .catch((error) => {\n        logError(\"Community CSS: Failed to load room info\", error);\n      });\n  },\n  turnOff() {\n    document.querySelector(`.${this.id}`)?.remove();\n  },\n};\n","/**\n * Custom CSS\n * Add custom CSS\n */\n\nimport { loadExternalCss } from \"../../utils/css\";\nimport { t } from \"../stores/i18n.svelte\";\nimport { settings } from \"../stores/settings.svelte\";\n\n/**\n * Custom CSS\n * loads an external CSS file\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const customCss = {\n  id: \"custom-css\",\n  label: \"custom-css.label\",\n  description: \"custom-css.description\",\n  category: \"customize\",\n  custom: {\n    title: \"custom-css.modal.title\",\n    content: \"custom-css.modal.content\",\n    placeholder: \"custom-css.modal.placeholder\",\n    maxlength: 500,\n    validation(value) {\n      if (!value) {\n        // we allow blank value to remove the custom CSS\n        return true;\n      }\n      // basic validation that it's a url starting with http and ends with .css\n      if (!/^http.+\\.css$/.test(value)) {\n        return t(\"custom-css.modal.validation\");\n      }\n\n      return true;\n    },\n    onConfirm(value) {\n      document.querySelector(`.${customCss.id}`)?.remove();\n      if (!value) {\n        // a blank value means the user wanted to remove the custom CSS\n        settings.options[customCss.id] = false; // turn it back off\n        return;\n      }\n\n      loadExternalCss(value, customCss.id);\n    },\n  },\n  turnOn() {\n    if (settings.custom[this.id]) {\n      loadExternalCss(settings.custom[this.id], this.id);\n    }\n  },\n\n  turnOff() {\n    document.querySelector(`.${this.id}`)?.remove();\n  },\n};\n","/**\n * Custom Background\n * Add your own custom background\n */\nimport { t } from \"../stores/i18n.svelte\";\nimport { settings } from \"../stores/settings.svelte\";\n\n/**\n *\n * @param {string} url\n * @param {string} className\n * @returns {HTMLDivElement}\n */\nfunction makeBGdiv(url, className) {\n  const div = document.createElement(\"div\");\n  div.className = className;\n  div.style.backgroundImage = `url(${url})`;\n  return div;\n}\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const customBackground = {\n  id: \"custom-bg\",\n  label: \"custom-bg.label\",\n  description: \"custom-bg.description\",\n  category: \"customize\",\n  custom: {\n    title: \"custom-bg.modal.title\",\n    content: \"custom-bg.modal.content\",\n    placeholder: \"custom-bg.modal.placeholder\",\n    maxlength: 500,\n    validation(value) {\n      if (!value) {\n        // we allow blank value to remove the custom notification sound\n        return true;\n      }\n      if (!value.startsWith(\"http\")) {\n        return t(\"custom-bg.modal.validation\");\n      }\n      return true;\n    },\n    onConfirm(value) {\n      document.querySelector(`.${customBackground.id}`)?.remove();\n      if (!value) {\n        // a blank value means the user wanted to remove the background image\n        return;\n      }\n      // validation already happened so we can trust this value\n      document.body.appendChild(makeBGdiv(value, customBackground.id));\n    },\n  },\n  turnOn() {\n    document.querySelector(`.${this.id}`)?.remove();\n    const savedCustomBG = settings.custom[this.id];\n    if (savedCustomBG) {\n      document.body.appendChild(makeBGdiv(savedCustomBG, this.id));\n    }\n  },\n\n  turnOff() {\n    document.querySelector(`.${this.id}`)?.remove();\n  },\n};\n","import { t } from \"../stores/i18n.svelte\";\nimport { settings } from \"../stores/settings.svelte\";\n\n// store original sound from QueUp before we alter it\nlet DubtrackDefaultSound;\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const customNotificationSound = {\n  id: \"custom-notification-sound\",\n  label: \"custom-notification-sound.label\",\n  description: \"custom-notification-sound.description\",\n  category: \"customize\",\n  custom: {\n    title: \"custom-notification-sound.modal.title\",\n    content: \"custom-notification-sound.modal.content\",\n    placeholder: \"custom-notification-sound.modal.placeholder\",\n    maxlength: 500,\n    validation(value) {\n      if (!value) {\n        // we allow blank value to remove the custom notification sound\n        return true;\n      }\n      if (!window.soundManager.canPlayURL(value)) {\n        return t(\"custom-notification-sound.modal.validation\");\n      }\n\n      return true;\n    },\n    onConfirm(value) {\n      if (!value) {\n        // a blank value means the user wanted to remove the custom notification sound\n        // so we default back to the QueUp sound\n        window.QueUp.room.chat.mentionChatSound.url = DubtrackDefaultSound;\n        settings.options[customNotificationSound.id] = false; // turn it back off\n      } else {\n        window.QueUp.room.chat.mentionChatSound.url = value;\n      }\n    },\n  },\n  turnOn() {\n    // store original sound\n    DubtrackDefaultSound = window.QueUp.room.chat.mentionChatSound.url;\n\n    // show modal if no image is in settings\n    if (settings.custom[this.id]) {\n      window.QueUp.room.chat.mentionChatSound.url = settings.custom[this.id];\n    }\n  },\n\n  turnOff() {\n    window.QueUp.room.chat.mentionChatSound.url = DubtrackDefaultSound;\n  },\n};\n","/**\n * Flip Interface\n *\n * This module allows you to swap the position of the chat and video elements.\n */\n\n/**\n * @type {import(\"./module\").DubPlusModule}\n */\nexport const flipInterface = {\n  id: 'flip-interface',\n  label: 'flip-interface.label',\n  description: 'flip-interface.description',\n  category: 'user-interface',\n  turnOn() {\n    document.body.classList.add('dubplus-flip-interface');\n  },\n  turnOff() {\n    document.body.classList.remove('dubplus-flip-interface');\n  },\n};\n","import { autovote } from './autovote';\nimport { afk } from './afk';\nimport { emotes } from './emotes';\nimport { autocomplete } from './autocomplete';\nimport { customMentions } from './customMentions';\nimport { chatCleaner } from './chatCleaner';\nimport { mentionNotifications } from './mentionNotifications';\nimport { pmNotifications } from './pmNotifications';\nimport { djNotification } from './djNotification';\nimport { showDubsOnHover } from './showDubsOnHover';\nimport { downdubsInChat } from './downDubInChat';\nimport { upDubInChat } from './upDubInChat';\nimport { grabsInChat } from './grabsInChat';\nimport { snow } from './snow';\nimport { rain } from './rain';\nimport { fullscreen } from './fullscreen';\nimport { splitChat } from './splitchat';\nimport { hideChat } from './hideChat';\nimport { hideVideo } from './hideVideo';\nimport { hideAvatars } from './hideAvatars';\nimport { hideBackground } from './hideBackground';\nimport { showTimestamps } from './showTimestamps';\nimport { spacebarMute } from './spacebarMute';\nimport { warnOnNavigation } from './warnOnNavigation';\nimport { communityTheme } from './communityTheme';\nimport { customCss } from './customCSS';\nimport { customBackground } from './customBackground';\nimport { customNotificationSound } from './customNotificationSound';\nimport { flipInterface } from './flipInterface';\n\n/**\n * @type {import(\"./module\").DubPlusModule[]}\n */\nexport const general = [\n  autovote,\n  afk,\n  emotes,\n  autocomplete,\n  customMentions,\n  chatCleaner,\n  mentionNotifications,\n  pmNotifications,\n  djNotification,\n  showDubsOnHover,\n  downdubsInChat,\n  upDubInChat,\n  grabsInChat,\n  snow,\n  rain,\n];\n\n/**\n * @type {import(\"./module\").DubPlusModule[]}\n */\nexport const userInterface = [\n  fullscreen,\n  splitChat,\n  hideChat,\n  hideVideo,\n  hideAvatars,\n  hideBackground,\n  showTimestamps,\n  flipInterface,\n];\n\n/**\n * @type {import(\"./module\").DubPlusModule[]}\n */\nexport const settingsModules = [spacebarMute, warnOnNavigation];\n\n/**\n * @type {import(\"./module\").DubPlusModule[]}\n */\nexport const customize = [\n  communityTheme,\n  customCss,\n  customBackground,\n  customNotificationSound,\n];\n","<script>\n  import MenuHeader from \"../menu/MenuHeader.svelte\";\n  import MenuSection from \"../menu/MenuSection.svelte\";\n  import MenuSwitch from \"../menu/MenuSwitch.svelte\";\n  import { saveSetting } from \"../stores/settings.svelte\";\n  import { general } from \"../modules\";\n  import { t } from \"../stores/i18n.svelte\";\n</script>\n\n<MenuHeader settingsId=\"general\" name={t(\"general.title\")} />\n<MenuSection settingsId=\"general\">\n  {#each general as module}\n    <MenuSwitch\n      id={module.id}\n      label={module.label}\n      description={module.description}\n      init={module.init}\n      customize={module.custom}\n      modOnly={module.modOnly}\n      onToggle={(on, onMount) => {\n        if (on) module.turnOn();\n        else module.turnOff();\n\n        if (!onMount) {\n          saveSetting(\"option\", module.id, on);\n        }\n      }}\n    />\n  {/each}\n</MenuSection>\n","<script>\n  import { teleport } from \"../actions/teleport\";\n  import { t } from \"../stores/i18n.svelte\";\n\n  let eta = $state(\"ETA\");\n\n  /**\n   * @returns {string}\n   */\n  function getEta() {\n    const booth_position =\n      document.querySelector(\".queue-position\")?.textContent;\n    if (!booth_position) {\n      return t(\"Eta.tooltip.notInQueue\");\n    }\n\n    // average time of a song in minutes\n    const average_song_minutes = 4;\n\n    // current_time is the minutes of the currently playing song\n    const current_time = parseInt(\n      document.querySelector(\n        \"#player-controller div.left ul li.infoContainer.display-block div.currentTime span.min\",\n      )?.textContent,\n    );\n\n    const position_in_queue = parseInt(booth_position);\n\n    // we caclulate an ESTIMATE using the position in the queue * the average time of a song + the current time\n    const booth_time = position_in_queue * average_song_minutes - average_song_minutes + current_time;\n    if (booth_time >= 0) {\n      return t(\"Eta.tootltip\", { minutes: booth_time });\n    } else {\n      return t(\"Eta.tooltip.notInQueue\");\n    }\n  }\n</script>\n\n<button\n  use:teleport={{ to: \".player_sharing\" }}\n  aria-label={eta}\n  type=\"button\"\n  class=\"icon-history eta_tooltip_t dubplus-btn-player\"\n  data-dp-tooltip={eta}\n  onmouseenter={() => {\n    eta = getEta();\n  }}\n>\n</button>\n","<script>\n  import { teleport } from \"../actions/teleport\";\n  import { t } from \"../stores/i18n.svelte\";\n\n  /**\n   * Snooze\n   * Mutes audio for one song.\n   *\n   * This module is not a menu item. It is self-contained feature\n   * that will always be automatically run on load.\n   */\n\n  const eventUtils = {\n    currentVol: 50,\n    snoozed: false,\n  };\n\n  /**\n   * Unmute when the song changes\n   * @param {{startTime: number}} e\n   * @returns\n   */\n  function eventSongAdvance(e) {\n    if (e.startTime < 2) {\n      if (eventUtils.snoozed) {\n        window.QueUp.room.player.setVolume(eventUtils.currentVol);\n        eventUtils.snoozed = false;\n      }\n      return true;\n    }\n  }\n\n  function snooze() {\n    if (\n      !eventUtils.snoozed &&\n      !window.QueUp.room.player.muted_player &&\n      window.QueUp.playerController.volume > 2\n    ) {\n      // save current volume so we can restore it later\n      eventUtils.currentVol = window.QueUp.playerController.volume;\n      // mute the player\n      window.QueUp.room.player.mutePlayer();\n      eventUtils.snoozed = true;\n      // setup event listener for song advance to restore volume\n      // when the song changes\n      window.QueUp.Events.once(\n        \"realtime:room_playlist-update\",\n        eventSongAdvance,\n      );\n    } else if (eventUtils.snoozed) {\n      window.QueUp.room.player.setVolume(eventUtils.currentVol);\n      window.QueUp.room.player.updateVolumeBar();\n      eventUtils.snoozed = false;\n    }\n  }\n</script>\n\n<button\n  use:teleport={{ to: \".player_sharing\" }}\n  type=\"button\"\n  class=\"icon-mute snooze_btn dubplus-btn-player\"\n  aria-label={t(\"Snooze.tooltip\")}\n  data-dp-tooltip={t(\"Snooze.tooltip\")}\n  onclick={snooze}\n>\n  <span>1</span>\n</button>\n\n<style>\n  button::after {\n    width: 186px;\n  }\n  span {\n    content: \"1\";\n    vertical-align: top;\n    font-size: 0.75rem !important;\n    font-weight: 700;\n    margin-right: 0 !important;\n  }\n</style>\n","<script>\n  import { teleport } from \"../actions/teleport\";\n  import { insertEmote } from \"../modules/autocomplete\";\n  import { t } from \"../stores/i18n.svelte\";\n  import { emojiState } from \"./emojiState.svelte\";\n\n  $effect(() => {\n    if (\n      emojiState.emojiList.length > 0 &&\n      typeof emojiState.selectedIndex === \"number\"\n    ) {\n      // scroll the li element into view\n      const selected = document.querySelector(\".preview-item.selected\");\n      if (selected) {\n        selected.scrollIntoView({\n          block: \"nearest\",\n          inline: \"nearest\",\n          behavior: \"smooth\",\n        });\n      }\n    }\n  });\n\n  /**\n   * @param {number} index\n   */\n  function handleClick(index) {\n    const inputEl = /**@type {HTMLTextAreaElement}*/ (document.getElementById(\"chat-txt-message\"));\n    insertEmote(inputEl, index);\n    inputEl.focus();\n  }\n</script>\n\n<ul\n  use:teleport={{ to: \".pusher-chat-widget-input\", position: \"prepend\" }}\n  id=\"autocomplete-preview\"\n  class:ac-show={emojiState.emojiList.length > 0}\n>\n  {#each emojiState.emojiList as { src, text, platform, alt }, i (src+platform)}\n    <!-- svelte-ignore a11y_click_events_have_key_events -->\n    <!-- svelte-ignore a11y_no_noninteractive_element_interactions -->\n    <li\n      class={`preview-item ${platform}-previews`}\n      class:selected={i === emojiState.selectedIndex}\n      onclick={() => handleClick(i)}\n    >\n      <div class=\"ac-image\">\n        <img {src} {alt} title={alt} />\n      </div>\n      <span class=\"ac-text\">{text}</span>\n      {#if i === emojiState.selectedIndex}\n        <span class=\"ac-list-press-enter\">\n          {t(\"autocomplete.preview.select\")}\n        </span>\n      {/if}\n    </li>\n  {/each}\n</ul>\n\n<style>\n  /****************************************************\n * Emoji and emote section\n * twitch logo white: https://i.imgur.com/FhzONPQ.png\n * bttv logo white: https://i.imgur.com/oTfAI0O.png\n */\n\n  ul {\n    overflow: auto;\n    display: block;\n    position: absolute;\n    bottom: 54px;\n    background-color: rgba(0, 0, 0, 0.9);\n    width: 100%;\n    height: auto;\n    max-height: 0;\n    padding: 0;\n    list-style-type: none;\n    margin: 0;\n  }\n\n  li {\n    display: block;\n    padding: 6px 10px;\n    margin: 0;\n    color: #fff;\n  }\n\n  li:hover,\n  li.selected {\n    background-color: #555;\n  }\n\n  li:focus {\n    outline: none;\n  }\n\n  .preview-item {\n    background-repeat: no-repeat;\n    background-size: 25px;\n    background-position: 98% center;\n    display: flex;\n    align-items: center;\n  }\n\n  :global(.twitch-previews) {\n    background-image: url(https://i.imgur.com/FhzONPQ.png);\n  }\n\n  :global(.bttv-previews) {\n    background-image: url(https://i.imgur.com/oTfAI0O.png);\n  }\n\n  :global(.tasty-previews) {\n    background-image: url(#{$resourceSrc}/emotes/tastycat/21.png);\n  }\n\n  :global(.ffz-previews) {\n    background-image: url(https://i.imgur.com/DuJfI4T.png);\n  }\n\n  .ac-text {\n    font-size: 0.8em;\n    padding-left: 20px;\n  }\n\n  .ac-image {\n    width: 30px;\n    height: 30px;\n  }\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n  }\n\n  .ac-show {\n    border: 1px solid #202020;\n    border-bottom: 1px solid #878c8e;\n    max-height: 164px;\n    transition: 0.4s;\n  }\n\n  .ac-list-press-enter {\n    flex: 1;\n    text-align: center;\n    font-size: 0.8em;\n  }\n</style>\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","<script>\n  import { onDestroy, onMount } from 'svelte';\n  import { teleport } from '../actions/teleport.js';\n  import { userImage } from '../api.js';\n  import { getDubCount } from '../stores/dubsState.svelte';\n  import { logError } from '../../utils/logger.js';\n  import { t } from '../stores/i18n.svelte.js';\n  import { setgroups } from 'process';\n\n  /**\n   * @typedef {object} DubsInfoProps\n   * @property {\"updub\" | \"downdub\" | \"grab\"} dubType\n   */\n\n  /**\n   * @type {DubsInfoProps}\n   */\n  let { dubType } = $props();\n\n  let dubData = $derived(getDubCount(dubType));\n  let positionRight = $state(0);\n  let positionBottom = $state(0);\n  let display = $state('none');\n\n  function getTarget() {\n    if (dubType === 'updub') {\n      return document.querySelector('.dubup')?.parentElement;\n    } else if (dubType === 'downdub') {\n      return document.querySelector('.dubdown')?.parentElement;\n    } else if (dubType === 'grab') {\n      return document.querySelector('.add-to-playlist');\n    }\n    return null;\n  }\n\n \n  function onHover() {\n    const hoverTarget = getTarget();\n    if (hoverTarget) {\n      const rect = hoverTarget.getBoundingClientRect();\n      positionRight = window.innerWidth - rect.right;\n      positionBottom = rect.height - 2;\n      display = 'block';\n    } else {\n      logError(`Could not find hover target for ${dubType} in onHover`);\n    }\n  }\n\n  /**\n   * @param {MouseEvent} e\n   */\n  function onLeave(e) {\n    if (\n      e.relatedTarget &&\n      /**@type {HTMLDivElement}*/ (e.relatedTarget).closest(\n        '.dubplus-dubs-container',\n      )\n    ) {\n      return;\n    }\n    display = 'none';\n  }\n\n\n\n  onMount(() => {\n    const hoverTarget = getTarget();\n    if (hoverTarget) {\n      hoverTarget.addEventListener('mouseenter', onHover);\n      hoverTarget.addEventListener('mouseleave', onLeave);\n    } else {\n      logError(`Could not find hover target for ${dubType} in onMount`);\n    }\n  });\n\n  onDestroy(() => {\n    const hoverTarget = getTarget();\n    if (hoverTarget) {\n      hoverTarget.removeEventListener('mouseenter', onHover);\n      hoverTarget.removeEventListener('mouseleave', onLeave);\n    } else {\n      logError(`Could not find hover target for ${dubType} in onDestroy`);\n    }\n  });\n\n  /**\n   * @param {string} username\n   */\n  function handleClick(username) {\n    const chatInput = /**@type {HTMLInputElement}*/ (\n      document.querySelector('#chat-txt-message')\n    );\n    chatInput.value = `${chatInput.value}@${username} `.trimStart();\n    chatInput.focus();\n  }\n</script>\n\n<div\n  id={`dubplus-${dubType}s-container`}\n  use:teleport={{ to: 'body' }}\n  class={`dubplus-dubs-container dubplus-${dubType}s-container`}\n  style={`bottom: ${positionBottom}px; right: ${positionRight}px; display: ${display};`}\n  onmouseleave={() => (display = 'none')}\n  role=\"none\"\n>\n  <ul\n    id=\"dubinfo-preview\"\n    class=\"dubinfo-show\"\n    class:dubplus-no-dubs={dubData.length === 0}\n  >\n    {#if dubData.length > 0}\n      {#each dubData as dub}\n        <li class=\"preview-dubinfo-item users-previews\">\n          <div class=\"dubinfo-image\">\n            <img src={userImage(dub.userid)} alt=\"User Avatar\" />\n          </div>\n          <button\n            type=\"button\"\n            onclick={() => handleClick(dub.username)}\n            class=\"dubinfo-text\"\n          >\n            @{dub.username}\n          </button>\n        </li>\n      {/each}\n    {:else}\n      <li>\n        {#if dubType === 'updub' || dubType === 'downdub'}\n          {t('dubs-hover.no-votes', { dubType })}\n        {:else}\n          {t('dubs-hover.no-grabs', { dubType })}\n        {/if}\n      </li>\n    {/if}\n  </ul>\n</div>\n\n<style>\n  .dubplus-dubs-container {\n    position: fixed;\n    overflow-y: auto;\n    overflow-x: visible;\n    height: 150px;\n    width: 180px;\n    z-index: 100001;\n    background-color: rgba(0, 0, 0, 0.9);\n    border: 1px solid white;\n    border-radius: 0.4rem 0.4rem 0 0;\n    border-bottom: none;\n  }\n  :global(.dubplus-updubs-container) {\n    border-color: var(--queup-aqua) !important;\n  }\n  :global(.dubplus-downdubs-container) {\n    border-color: var(--queup-magenta) !important;\n  }\n  :global(.dubplus-grabs-container) {\n    border-color: var(--queup-green) !important;\n  }\n\n  ul {\n    display: block;\n    padding: 0;\n    list-style-type: none;\n    margin: 0;\n    width: 100%;\n    color: white;\n    height: 100%;\n  }\n  .dubplus-no-dubs {\n    display: flex;\n    align-items: center;\n    justify-self: center;\n    text-align: center;\n  }\n  .preview-dubinfo-item {\n    display: flex;\n    align-items: center;\n    padding: 6px 10px;\n  }\n\n  .dubinfo-image {\n    width: 1.4em;\n    border-radius: 10%;\n    overflow: hidden;\n  }\n\n  img {\n    display: block;\n    width: 100%;\n    height: auto;\n  }\n\n  button {\n    appearance: none;\n    background: none;\n    border: none;\n    color: inherit;\n    cursor: pointer;\n    padding: 0;\n    text-align: left;\n    flex: 1;\n\n    font-size: 0.8em;\n    padding-left: 20px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  button:hover {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n</style>\n","/**\n * Pure Snow\n * https://github.com/hyperstown/pure-snow.js\n *\n * With some modifications to work as a Svelte component\n *\n * The snow is done with CSS animations and keyframes.\n *\n */\n\nconst SNOWFLAKES_COUNT = 200;\n\nlet snowflakesCount = SNOWFLAKES_COUNT; // Snowflake count, can be overwritten by attrs\nlet baseCSS = \"\";\n\n/**\n * We always want the snow to be full screen so this will always be 100vh\n */\nconst pageHeightVh = 100;\n\nfunction getSnowConatiner() {\n  return document.getElementById(\"snow-container\");\n}\n\n// get params set in snow div\nfunction getSnowAttributes() {\n  const snowWrapper = getSnowConatiner();\n  snowflakesCount = Number(snowWrapper?.dataset?.count || snowflakesCount);\n}\n\n// Creating snowflakes\nfunction generateSnow(snowDensity = 200) {\n  snowDensity -= 1;\n  const snowWrapper = getSnowConatiner();\n  snowWrapper.innerHTML = \"\";\n  for (let i = 0; i < snowDensity; i++) {\n    let board = document.createElement(\"div\");\n    board.className = \"snowflake\";\n    snowWrapper.appendChild(board);\n  }\n}\n\nfunction getOrCreateCSSElement() {\n  let cssElement = document.getElementById(\"psjs-css\");\n  if (cssElement) return cssElement;\n\n  cssElement = document.createElement(\"style\");\n  cssElement.id = \"psjs-css\";\n  document.head.appendChild(cssElement);\n  return cssElement;\n}\n\n// Append style for each snowflake to the head\nfunction addCSS(rule = \"\") {\n  const cssElement = getOrCreateCSSElement();\n  cssElement.innerHTML = rule; // safe to use innerHTML\n  document.head.appendChild(cssElement);\n}\n\n// Math\nfunction randomInt(value = 100) {\n  return Math.floor(Math.random() * value) + 1;\n}\n/**\n *\n * @param {number} min\n * @param {number} max\n * @returns\n */\nfunction randomIntRange(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n/**\n *\n * @param {number} min\n * @param {number} max\n * @returns\n */\nfunction getRandomArbitrary(min, max) {\n  return Math.random() * (max - min) + min;\n}\n\n// Create style for snowflake\nfunction generateSnowCSS(snowDensity = 200) {\n  let snowflakeName = \"snowflake\";\n  let rule = baseCSS;\n\n  for (let i = 1; i < snowDensity; i++) {\n    let randomX = Math.random() * 100; // vw\n    let randomOffset = Math.random() * 10; // vw;\n    let randomXEnd = randomX + randomOffset;\n    let randomXEndYoyo = randomX + randomOffset / 2;\n    let randomYoyoTime = getRandomArbitrary(0.3, 0.8);\n    let randomYoyoY = randomYoyoTime * pageHeightVh; // vh\n    let randomScale = Math.random();\n    let fallDuration = randomIntRange(10, (pageHeightVh / 10) * 3); // s\n    let fallDelay = randomInt((pageHeightVh / 10) * 3) * -1; // s\n    let opacity = Math.random();\n\n    rule += `\n      .${snowflakeName}:nth-child(${i}) {\n        opacity: ${opacity};\n        transform: translate(${randomX}vw, -10px) scale(${randomScale});\n        animation: fall-${i} ${fallDuration}s ${fallDelay}s linear infinite;\n      }\n      @keyframes fall-${i} {\n        ${randomYoyoTime * 100}% {\n          transform: translate(${randomXEnd}vw, ${randomYoyoY}vh) scale(${randomScale});\n        }\n        to {\n          transform: translate(${randomXEndYoyo}vw, ${pageHeightVh}vh) scale(${randomScale});\n        }\n      }\n    `;\n  }\n  addCSS(rule);\n}\n\n// Load the rules and execute after the DOM loads\nexport function createSnow() {\n  getSnowAttributes();\n  generateSnowCSS(snowflakesCount);\n  generateSnow(snowflakesCount);\n}\n","<script>\n  import { teleport } from \"../actions/teleport\";\n  import { createSnow } from \"../../external/pure-snow\";\n  import { onDestroy, onMount } from \"svelte\";\n\n  onMount(() => {\n    createSnow();\n    window.addEventListener('resize', createSnow);\n  });\n\n  onDestroy(() => {\n    window.removeEventListener('resize', createSnow);\n  });\n\n</script>\n\n<div use:teleport={{to: \"body\"}} id=\"snow-container\"></div>\n\n<style>\n  #snow-container {\n    height: 100vw;\n    width: 100vw;\n  }\n  :global(.snowflake) {\n    position: absolute;\n    width: 10px;\n    height: 10px;\n    background: white;\n    border-radius: 50%;\n    filter: drop-shadow(0 0 10px white);\n  }\n</style>\n","<script>\n  import { onMount } from \"svelte\";\n  import { t } from \"../stores/i18n.svelte\";\n\n  /**\n   * @typedef {object} MenuActionProps\n   * @property {string} id\n   * @property {string} label\n   * @property {string} description\n   * @property {import('svelte').Component} icon An SVG as a .svelte component\n   * @property {() => void} onClick\n   * @property {() => void} [init]\n   */\n\n  /**\n   * @type {MenuActionProps}\n   */\n  let { id, label, description, icon: Icon, onClick, init } = $props();\n\n  onMount(() => {\n    if (init) init();\n  });\n</script>\n\n<li {id} title={t(description)}>\n  <button aria-label={t(description)} type=\"button\" onclick={onClick}>   \n    <Icon />\n    <span class=\"dubplus-menu-label\">{t(label)}</span>\n  </button>\n</li>\n\n<style>\n  li {\n    margin: 10px 0;\n  }\n  button {\n    display: flex;\n    align-items: center;\n    background: none;\n    border: none;\n    padding: 0;\n    cursor: pointer;\n    appearance: none;\n    color:inherit;\n    font-size: inherit;\n  }\n\n  button :global(svg) {\n    width: 29px;\n    height: 18px;\n    fill: var(--dubplus-primary-color);\n  }\n\n  .dubplus-menu-label {\n    flex: 1;\n    padding-left: 11px;\n  }\n</style>\n","<script>\n  import MenuHeader from \"../menu/MenuHeader.svelte\";\n  import MenuSection from \"../menu/MenuSection.svelte\";\n  import MenuItem from \"../menu/MenuSwitch.svelte\";\n  import { saveSetting, settings } from \"../stores/settings.svelte\";\n  import { userInterface } from \"../modules\";\n  import { t } from \"../stores/i18n.svelte\";\n  import MenuAction from \"../menu/MenuAction.svelte\";\n</script>\n\n<MenuHeader settingsId=\"user-interface\" name={t(\"user-interface.title\")} />\n<MenuSection settingsId=\"user-interface\">\n  {#each userInterface as module}\n    {#if module.altIcon}\n      <MenuAction\n        id={module.id}\n        label={module.label}\n        description={module.description}\n        icon={module.altIcon}\n        onClick={module.onClick}\n        init={module.init}\n      />\n    {:else}\n      <MenuItem\n        id={module.id}\n        label={module.label}\n        description={module.description}\n        init={module.init}\n        customize={module.custom}\n        onToggle={(on, onMount) => {\n          if (on) module.turnOn();\n          else module.turnOff();\n\n          if (!onMount) {\n            saveSetting(\"option\", module.id, on);\n          }\n        }}\n      />\n    {/if}\n  {/each}\n</MenuSection>\n","<script>\n  import MenuHeader from \"../menu/MenuHeader.svelte\";\n  import MenuSection from \"../menu/MenuSection.svelte\";\n  import MenuItem from \"../menu/MenuSwitch.svelte\";\n  import { saveSetting, settings } from \"../stores/settings.svelte\";\n  import { settingsModules } from \"../modules\";\n  import { t } from \"../stores/i18n.svelte\";\n\n  settingsModules.forEach((module) => {\n    if (!settings.options[module.id]) {\n      settings.options[module.id] = false;\n    };\n  });\n</script>\n\n<MenuHeader settingsId=\"settings\" name={t(\"settings.title\")} />\n<MenuSection settingsId=\"settings\">\n  {#each settingsModules as module}\n    <MenuItem\n      id={module.id}\n      label={module.label}\n      description={module.description}\n      init={module.init}\n      customize={module.custom}\n      onToggle={(on, onMount) => {\n        if (on) module.turnOn();\n        else module.turnOff();\n\n        if (!onMount) {\n          saveSetting(\"option\", module.id, on);\n        }\n      }}\n    />\n  {/each}\n</MenuSection>\n","<script>\n  import MenuHeader from \"../menu/MenuHeader.svelte\";\n  import MenuSection from \"../menu/MenuSection.svelte\";\n  import MenuSwitch from \"../menu/MenuSwitch.svelte\";\n  import { saveSetting, settings } from \"../stores/settings.svelte\";\n  import { customize } from \"../modules\";\n  import { t } from \"../stores/i18n.svelte\";\n</script>\n\n<MenuHeader settingsId=\"customize\" name={t(\"customize.title\")} />\n<MenuSection settingsId=\"customize\">\n  {#each customize as module}\n    <MenuSwitch\n      id={module.id}\n      label={module.label}\n      description={module.description}\n      init={module.init}\n      customize={module.custom}\n      onToggle={(on, onMount) => {\n        if (on) module.turnOn();\n        else module.turnOff();\n\n        if (!onMount) {\n          saveSetting(\"option\", module.id, on);\n        }\n      }}\n    />\n  {/each}\n</MenuSection>\n","<script>\n  import { onMount } from \"svelte\";\n  import MenuIcon from \"./MenuIcon.svelte\";\n  import Contact from \"../sections/Contact.svelte\";\n  import General from \"../sections/General.svelte\";\n  import Eta from \"../satellites/Eta.svelte\";\n  import Snooze from \"../satellites/Snooze.svelte\";\n  import Modal from \"../Modal.svelte\";\n  import EmojiPreview from \"../emoji/EmojiPreview.svelte\";\n  import { t } from \"../stores/i18n.svelte\";\n  import DubsInfo from \"../satellites/DubsInfo.svelte\";\n  import { settings } from \"../stores/settings.svelte\";\n  import Snow from \"../satellites/Snow.svelte\";\n  import UserInterface from \"../sections/UserInterface.svelte\";\n  import Settings from \"../sections/Settings.svelte\";\n  import Customize from \"../sections/Customize.svelte\";\n\n  onMount(() => {\n    document.querySelector(\"html\").classList.add(\"dubplus\");\n  });\n</script>\n\n<!-- \n  these components are controlled by Svelte but\n  placed outside of the root menu container \n-->\n<Snooze />\n<MenuIcon />\n<Eta />\n{#if settings.options.autocomplete}\n  <EmojiPreview />\n{/if}\n{#if settings.options[\"dubs-hover\"]}\n  <DubsInfo dubType=\"updub\" />\n  <DubsInfo dubType=\"downdub\" />\n  <DubsInfo dubType=\"grab\" />\n{/if}\n{#if settings.options.snow}\n  <Snow />\n{/if}\n\n<!-- this is the main menu -->\n<section class=\"dubplus-menu\">\n  <p class=\"dubplus-menu-header\">{t(\"Menu.title\")}</p>\n  <General />\n  <UserInterface />\n  <Settings />\n  <Customize />\n  <Contact />\n</section>\n\n<!-- One Modal that is controlled via the modalState -->\n<Modal />\n\n<style>\n  /* the main container for the whole menu that slides in */\n  .dubplus-menu {\n    position: fixed;\n    z-index: 999;\n    background-color: rgba(10, 10, 10, 0.98);\n    transition: transform 0.3s;\n    width: var(--dubplus-menu-width);\n    overflow-y: hidden;\n    top: 58px;\n    right: 0;\n    transform: translateX(var(--dubplus-menu-width));\n    box-sizing: border-box;\n    color: var(--dubplus-text-color);\n    font-family: var(--dubplus-font-family);\n    font-size: var(--dubplus-font-size);\n    line-height: 1.4;\n    padding-bottom: 100px;\n    height: calc(100% - 114px);\n    overflow-y: auto;\n    scrollbar-color: #999 transparent;\n    scrollbar-width: thin;\n  }\n\n  .dubplus-menu-header {\n    padding: 12px 15px;\n    line-height: 1;\n    margin: 0;\n    border-bottom: 1px solid #222;\n    font-size: 1.2em;\n    color: #ccc;\n  }\n\n  /* this is toggled in MenuIcon component */\n  .dubplus-menu:global(.dubplus-menu-open) {\n    transform: translate3d(0, 0, 0);\n  }\n</style>\n","<script>\n  import { waitFor } from \"./utils/waitFor\";\n  import Loading from \"./lib/Loading.svelte\";\n  import Modal from \"./lib/Modal.svelte\";\n  import Menu from \"./lib/menu/Menu.svelte\";\n  import { modalState } from \"./lib/stores/modalState.svelte\";\n  import { t, locale, normalizeLocale } from \"./lib/stores/i18n.svelte\";\n  import { onMount, onDestroy } from \"svelte\";\n\n  window.dubplus = window.dubplus || {};\n\n  // @ts-ignore __PKGINFO__ is injected by the build process\n  window.dubplus = Object.assign(window.dubplus, __PKGINFO__);\n\n  /** @type {\"loading\" | \"ready\" | \"loggedout\" | \"error\"} */\n  let status = $state(\"loading\");\n\n  function setLocale() {\n    locale.current = normalizeLocale(navigator.language || \"en\");\n  }\n\n  onMount(() => {\n    setLocale();\n    window.addEventListener(\"languagechange\", setLocale);\n  });\n\n  onDestroy(() => {\n    window.removeEventListener(\"languagechange\", setLocale);\n  });\n\n  const checkList = [\n    \"QueUp.session.id\",\n    \"QueUp.room.chat\",\n    \"QueUp.Events\",\n    \"QueUp.room.player\",\n    \"QueUp.helpers.cookie\",\n    \"QueUp.room.model\",\n    \"QueUp.room.users\",\n  ];\n\n  waitFor(checkList)\n    .then(() => {\n      status = \"ready\";\n    })\n    .catch(() => {\n      if (!window.QueUp?.session?.id) {\n        // user might be logged out\n        status = \"loggedout\";\n      } else {\n        status = \"error\";\n      }\n    });\n\n  /**\n   * @param {string} content\n   */\n  function showErrorModal(content) {\n    modalState.title = t(\"Error.modal.title\");\n    modalState.content = content;\n\n    modalState.onCancel = () => {\n      modalState.open = false;\n    };\n\n    // this must always go last to ensure the data above\n    // is set before the modal is opened\n    modalState.open = true;\n  }\n\n  $effect(() => {\n    if (status === \"loggedout\") {\n      showErrorModal(t(\"Error.modal.loggedout\"));\n    } else if (status === \"error\") {\n      showErrorModal(t(\"Error.unknown\"));\n    }\n  });\n</script>\n\n{#if status === \"loading\"}\n  <Loading />\n{:else if status === \"ready\"}\n  <Menu />\n{:else}\n  <Modal />\n{/if}\n","import './dubplus.css';\nimport { mount, unmount } from 'svelte';\nimport DubPlus from './DubPlus.svelte';\nimport { loadCSS } from './utils/css';\nimport { logError } from './utils/logger';\n\n// TODO: if this was loaded via the exension, we should not load this css\n// we should only be loading this if run as bookmarklet.\n// Have successfully loaded the css file from the extension but the font\n// is not loading.\nif (!import.meta.env.DEV) {\n  loadCSS('/dubplus.css', 'dubplus-css').catch((e) => {\n    logError('Failed to load dubplus.css', e);\n  });\n}\n\nlet container = document.getElementById('dubplus-container');\nif (!container) {\n  // Dub+ has not been loaded yet so we need to create the container\n  container = document.createElement('div');\n  container.id = 'dubplus-container';\n  document.body.appendChild(container);\n}\n\nif (container.children.length > 0) {\n  // Dub+ has already been loaded so we need to unmount it first\n  unmount(container);\n}\n\nconst app = mount(DubPlus, {\n  target: container,\n});\n\nexport default app;\n"],"names":["component","source","e.state_unsafe_mutation","e.state_descriptors_fixed","value","key","e.state_prototype_fixed","derived","e.effect_orphan","e.effect_in_unowned_derived","e.effect_in_teardown","effect","push","teardown","child","sibling","is_micro_task_queued","component_context","root","index","e.effect_update_depth_exceeded","e.state_unsafe_local_read","get","event","t","text","events","unmount","fn","state","i","_a","snippet","action","set","props","defaults","$.proxy","$.template_effect","$.set_text","$.derived_safe_equal","$.user_effect","$.set_attribute","$.bind_value","$.set","on_click","$.action","o","e","MODULE_ID","customMentions","username","link","$.each","$.get","onMount","$.event","handleClick","$$anchor","$.toggle_class","browserModule","noop"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,39,99]}