
/*
     /$$$$$$$            /$$
    | $$__  $$          | $$          /$$
    | $$  | $$ /$$   /$$| $$$$$$$    | $$
    | $$  | $$| $$  | $$| $$__  $$ /$$$$$$$$
    | $$  | $$| $$  | $$| $$  | $$|__  $$__/
    | $$  | $$| $$  | $$| $$  | $$   | $$
    | $$$$$$$/|  $$$$$$/| $$$$$$$/   |__/
    |_______/  ______/ |_______/


    https://github.com/DubPlus/DubPlus

    This source code is licensed under the MIT license
    found here: https://github.com/DubPlus/DubPlus/blob/master/LICENSE

    Copyright (c) 2017-present DubPlus

    more info at https://dub.plus
*/
var DubPlus=function(){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=function(){},i={},m=[],p=[];function f(e,t){var n,o,r,i,a=p;for(i=arguments.length;2<i--;)m.push(arguments[i]);for(t&&null!=t.children&&(m.length||m.push(t.children),delete t.children);m.length;)if((o=m.pop())&&void 0!==o.pop)for(i=o.length;i--;)m.push(o[i]);else"boolean"==typeof o&&(o=null),(r="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(r=!1)),r&&n?a[a.length-1]+=o:a===p?a=[o]:a.push(o),n=r;var s=new h;return s.nodeName=e,s.children=a,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,s}function O(e,t){for(var n in t)e[n]=t[n];return e}function x(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var t="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,b=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,g=[];function v(e){!e._dirty&&(e._dirty=!0)&&1==g.push(e)&&t(_)}function _(){for(var e;e=g.pop();)e._dirty&&F(e)}function S(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function D(e){var t=O({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function N(e){var t=e.parentNode;t&&t.removeChild(e)}function w(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)x(n,null),x(o,e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var i in n)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"==typeof o[i]&&!1===b.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,k,a):e.removeEventListener(t,k,a),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e){try{e[t]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"==t||e.removeAttribute(t)}else{var s=r&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function k(e){return this._listeners[e.type](e)}var E=[],T=0,C=!1,A=!1;function M(){for(var e;e=E.shift();)e.componentDidMount&&e.componentDidMount()}function I(e,t,n,o,r,i){T++||(C=null!=r&&void 0!==r.ownerSVGElement,A=null!=e&&!("__preactattr_"in e));var a=q(e,t,n,o,i);return r&&a.parentNode!==r&&r.appendChild(a),--T||(A=!1,i||M()),a}function q(e,t,n,o,r){var i=e,a=C;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),L(e,!0))),i.__preactattr_=!0,i;var s,u,c=t.nodeName;if("function"==typeof c)return function(e,t,n,o){var r=e&&e._component,i=r,a=e,s=r&&e._componentConstructor===t.nodeName,u=s,c=D(t);for(;r&&!u&&(r=r._parentComponent);)u=r.constructor===t.nodeName;r&&u&&(!o||r._component)?(W(r,c,3,n,o),e=r.base):(i&&!s&&(R(i),e=a=null),r=P(t.nodeName,c,n),e&&!r.nextBase&&(r.nextBase=e,a=null),W(r,c,1,n,o),e=r.base,a&&e!==a&&(a._component=null,L(a,!1)));return e}(e,t,n,o);if(C="svg"===c||"foreignObject"!==c&&C,c=String(c),(!e||!S(e,c))&&(s=c,(u=C?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,i=u,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),L(e,!0)}var l=i.firstChild,d=i.__preactattr_,y=t.children;if(null==d){d=i.__preactattr_={};for(var h=i.attributes,m=h.length;m--;)d[h[m].name]=h[m].value}return!A&&y&&1===y.length&&"string"==typeof y[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=y[0]&&(l.nodeValue=y[0]):(y&&y.length||null!=l)&&function(e,t,n,o,r){var i,a,s,u,c,l=e.childNodes,d=[],y={},h=0,m=0,p=l.length,f=0,x=t?t.length:0;if(0!==p)for(var b=0;b<p;b++){var g=l[b],v=g.__preactattr_,_=x&&v?g._component?g._component.__key:v.key:null;null!=_?(h++,y[_]=g):(v||(void 0!==g.splitText?!r||g.nodeValue.trim():r))&&(d[f++]=g)}if(0!==x)for(var b=0;b<x;b++){u=t[b],c=null;var _=u.key;if(null!=_)h&&void 0!==y[_]&&(c=y[_],y[_]=void 0,h--);else if(m<f)for(i=m;i<f;i++)if(void 0!==d[i]&&(w=a=d[i],C=r,"string"==typeof(k=u)||"number"==typeof k?void 0!==w.splitText:"string"==typeof k.nodeName?!w._componentConstructor&&S(w,k.nodeName):C||w._componentConstructor===k.nodeName)){c=a,d[i]=void 0,i===f-1&&f--,i===m&&m++;break}c=q(c,u,n,o),s=l[b],c&&c!==e&&c!==s&&(null==s?e.appendChild(c):c===s.nextSibling?N(s):e.insertBefore(c,s))}var w,k,C;if(h)for(var b in y)void 0!==y[b]&&L(y[b],!1);for(;m<=f;)void 0!==(c=d[f--])&&L(c,!1)}(i,y,n,o,A||null!=d.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||w(e,o,n[o],n[o]=void 0,C);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||w(e,o,n[o],n[o]=t[o],C)}(i,t.attributes,d),C=a,i}function L(e,t){var n=e._component;n?R(n):(null!=e.__preactattr_&&x(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||N(e),z(e))}function z(e){for(e=e.lastChild;e;){var t=e.previousSibling;L(e,!0),e=t}}var j=[];function P(e,t,n){var o,r=j.length;for(e.prototype&&e.prototype.render?(o=new e(t,n),U.call(o,t,n)):((o=new U(t,n)).constructor=e,o.render=B);r--;)if(j[r].constructor===e)return o.nextBase=j[r].nextBase,j.splice(r,1),o;return o}function B(e,t,n){return this.constructor(e,n)}function W(e,t,n,o,r){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o)),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===i.syncComponentUpdates&&e.base?v(e):F(e,1,r)),x(e.__ref,e))}function F(e,t,n,o){if(!e._disable){var r,i,a,s=e.props,u=e.state,c=e.context,l=e.prevProps||s,d=e.prevState||u,y=e.prevContext||c,h=e.base,m=e.nextBase,p=h||m,f=e._component,x=!1,b=y;if(e.constructor.getDerivedStateFromProps&&(u=O(O({},u),e.constructor.getDerivedStateFromProps(s,u)),e.state=u),h&&(e.props=l,e.state=d,e.context=y,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,u,c)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(s,u,c),e.props=s,e.state=u,e.context=c),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!x){r=e.render(s,u,c),e.getChildContext&&(c=O(O({},c),e.getChildContext())),h&&e.getSnapshotBeforeUpdate&&(b=e.getSnapshotBeforeUpdate(l,d));var g,v,_=r&&r.nodeName;if("function"==typeof _){var w=D(r);(i=f)&&i.constructor===_&&w.key==i.__key?W(i,w,1,c,!1):(g=i,e._component=i=P(_,w,c),i.nextBase=i.nextBase||m,i._parentComponent=e,W(i,w,0,c,!1),F(i,1,n,!0)),v=i.base}else a=p,(g=f)&&(a=e._component=null),(p||1===t)&&(a&&(a._component=null),v=I(a,r,c,n||!h,p&&p.parentNode,!0));if(p&&v!==p&&i!==f){var k=p.parentNode;k&&v!==k&&(k.replaceChild(v,p),g||(p._component=null,L(p,!1)))}if(g&&R(g),(e.base=v)&&!o){for(var C=e,S=e;S=S._parentComponent;)(C=S).base=v;v._component=C,v._componentConstructor=C.constructor}}for(!h||n?E.push(e):x||e.componentDidUpdate&&e.componentDidUpdate(l,d,b);e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);T||o||M()}}function R(e){var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?R(n):t&&(null!=t.__preactattr_&&x(t.__preactattr_.ref,null),N(e.nextBase=t),j.push(e),z(t)),x(e.__ref,null)}function U(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function K(e,t,n){return I(n,e,{},!1,t,!1)}O(U.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=O(O({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),v(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),F(this,2)},render:function(){}});var G={currentVol:50,snoozed:!1},e=function(e){if(e.startTime<2)return G.snoozed&&(Dubtrack.room.player.setVolume(G.currentVol),G.snoozed=!1),!0},V=function(){!G.snoozed&&!Dubtrack.room.player.muted_player&&2<Dubtrack.playerController.volume?(G.currentVol=Dubtrack.playerController.volume,Dubtrack.room.player.mutePlayer(),G.snoozed=!0,Dubtrack.Events.bind("realtime:room_playlist-update",e)):G.snoozed&&(Dubtrack.room.player.setVolume(G.currentVol),Dubtrack.room.player.updateVolumeBar(),G.snoozed=!1)},H={position:"absolute",font:"1rem/1.5 proxima-nova,sans-serif",display:"block",left:"-33px",cursor:"pointer",borderRadius:"1.5rem",padding:"8px 16px",background:"#fff",fontWeight:"700",fontSize:"13.6px",textTransform:"uppercase",color:"#000",opacity:"0.8",textAlign:"center",zIndex:"9"},Y=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{show:!1}),u(l(l(t)),"showTooltip",function(){t.setState({show:!0})}),u(l(l(t)),"hideTooltip",function(){t.setState({show:!1})}),t}return n(i,U),a(i,[{key:"render",value:function(e,t){return f("span",{className:"icon-mute snooze_btn",onClick:V,onMouseOver:this.showTooltip,onMouseOut:this.hideTooltip},t.show&&f("div",{className:"snooze_tooltip",style:H},"Mute current song"))}}]),i}();var J={position:"absolute",font:"1rem/1.5 proxima-nova,sans-serif",display:"block",left:"-33px",cursor:"pointer",borderRadius:"1.5rem",padding:"8px 16px",background:"#fff",fontWeight:"700",fontSize:"13.6px",textTransform:"uppercase",color:"#000",opacity:"0.8",textAlign:"center",zIndex:"9"},X=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{show:!1,booth_time:""}),u(l(l(t)),"showTooltip",function(){var e=t.getEta();t.setState({show:!0,booth_time:e})}),u(l(l(t)),"hideTooltip",function(){t.setState({show:!1})}),t}return n(i,U),a(i,[{key:"getEta",value:function(){var e=parseInt(document.querySelector("#player-controller div.left ul li.infoContainer.display-block div.currentTime span.min").textContent),t=4*parseInt(document.querySelector(".queue-position").textContent)-4+e;return 0<=t?t:"You're not in the queue"}},{key:"render",value:function(e,t){return f("span",{className:"icon-history eta_tooltip_t",onMouseOver:this.showTooltip,onMouseOut:this.hideTooltip},this.state.show&&f("span",{className:"eta_tooltip",style:J},this.state.booth_time))}}]),i}();var $={template:function(e){return e=e.replace(/^:|:$/g,""),emojify.defaultConfig.img_dir+"/"+encodeURI(e)+".png"},find:function(t){var n=this;return emojify.emojiNames.filter(function(e){return 0===e.indexOf(t)}).map(function(e){return{type:"emojify",src:n.template(e),name:e}})}},Q={bowtie:{x:1099,y:896},smile:{x:960,y:1291},laughing:{x:0,y:75},blush:{x:64,y:75},smiley:{x:139,y:0},relaxed:{x:139,y:64},smirk:{x:0,y:139},heart_eyes:{x:64,y:139},kissing_heart:{x:128,y:139},kissing_closed_eyes:{x:203,y:0},flushed:{x:203,y:64},relieved:{x:203,y:128},satisfied:{x:0,y:203},grin:{x:64,y:203},wink:{x:128,y:203},stuck_out_tongue_winking_eye:{x:192,y:203},stuck_out_tongue_closed_eyes:{x:267,y:0},grinning:{x:267,y:64},kissing:{x:267,y:128},kissing_smiling_eyes:{x:267,y:192},stuck_out_tongue:{x:0,y:267},sleeping:{x:64,y:267},worried:{x:128,y:267},frowning:{x:192,y:267},anguished:{x:256,y:267},open_mouth:{x:331,y:0},grimacing:{x:331,y:64},confused:{x:331,y:128},hushed:{x:331,y:192},expressionless:{x:331,y:256},unamused:{x:0,y:331},sweat_smile:{x:64,y:331},sweat:{x:128,y:331},disappointed_relieved:{x:192,y:331},weary:{x:256,y:331},pensive:{x:320,y:331},disappointed:{x:395,y:0},confounded:{x:395,y:64},fearful:{x:395,y:128},cold_sweat:{x:395,y:192},persevere:{x:395,y:256},cry:{x:395,y:320},sob:{x:0,y:395},joy:{x:64,y:395},astonished:{x:128,y:395},scream:{x:192,y:395},neckbeard:{x:256,y:395},tired_face:{x:320,y:395},angry:{x:384,y:395},rage:{x:459,y:0},triumph:{x:459,y:64},sleepy:{x:459,y:128},yum:{x:459,y:192},mask:{x:459,y:256},sunglasses:{x:459,y:320},dizzy_face:{x:459,y:384},imp:{x:0,y:459},smiling_imp:{x:64,y:459},neutral_face:{x:128,y:459},no_mouth:{x:192,y:459},innocent:{x:256,y:459},alien:{x:320,y:459},yellow_heart:{x:384,y:459},blue_heart:{x:448,y:459},purple_heart:{x:523,y:0},heart:{x:523,y:64},green_heart:{x:523,y:128},broken_heart:{x:523,y:192},heartbeat:{x:523,y:256},heartpulse:{x:523,y:320},two_hearts:{x:523,y:384},revolving_hearts:{x:523,y:448},cupid:{x:0,y:523},sparkling_heart:{x:64,y:523},sparkles:{x:128,y:523},star:{x:192,y:523},star2:{x:256,y:523},dizzy:{x:320,y:523},boom:{x:384,y:523},collision:{x:448,y:523},anger:{x:512,y:523},exclamation:{x:587,y:0},question:{x:587,y:64},grey_exclamation:{x:587,y:128},grey_question:{x:587,y:192},zzz:{x:587,y:256},dash:{x:587,y:320},sweat_drops:{x:587,y:384},notes:{x:587,y:448},musical_note:{x:587,y:512},fire:{x:0,y:587},poop:{x:64,y:587},thumbsup:{x:128,y:587},thumbsdown:{x:192,y:587},ok_hand:{x:256,y:587},punch:{x:320,y:587},facepunch:{x:384,y:587},fist:{x:448,y:587},v:{x:512,y:587},wave:{x:576,y:587},hand:{x:651,y:0},raised_hand:{x:651,y:64},open_hands:{x:651,y:128},point_up:{x:651,y:192},point_down:{x:651,y:256},point_left:{x:651,y:320},point_right:{x:651,y:384},raised_hands:{x:651,y:448},pray:{x:651,y:512},point_up_2:{x:651,y:576},clap:{x:0,y:651},muscle:{x:64,y:651},metal:{x:128,y:651},fu:{x:192,y:651},runner:{x:256,y:651},running:{x:320,y:651},couple:{x:384,y:651},family:{x:448,y:651},two_men_holding_hands:{x:512,y:651},two_women_holding_hands:{x:576,y:651},dancer:{x:640,y:651},dancers:{x:715,y:0},ok_woman:{x:715,y:64},no_good:{x:715,y:128},information_desk_person:{x:715,y:192},raising_hand:{x:715,y:256},bride_with_veil:{x:715,y:320},person_with_pouting_face:{x:715,y:384},person_frowning:{x:715,y:448},bow:{x:715,y:512},couplekiss:{x:715,y:576},couple_with_heart:{x:715,y:640},massage:{x:0,y:715},haircut:{x:64,y:715},nail_care:{x:128,y:715},boy:{x:192,y:715},girl:{x:256,y:715},woman:{x:320,y:715},man:{x:384,y:715},baby:{x:448,y:715},older_woman:{x:512,y:715},older_man:{x:576,y:715},person_with_blond_hair:{x:640,y:715},man_with_gua_pi_mao:{x:704,y:715},man_with_turban:{x:779,y:0},construction_worker:{x:779,y:64},cop:{x:779,y:128},angel:{x:779,y:192},princess:{x:779,y:256},smiley_cat:{x:779,y:320},smile_cat:{x:779,y:384},heart_eyes_cat:{x:779,y:448},kissing_cat:{x:779,y:512},smirk_cat:{x:779,y:576},scream_cat:{x:779,y:640},crying_cat_face:{x:779,y:704},joy_cat:{x:0,y:779},pouting_cat:{x:64,y:779},japanese_ogre:{x:128,y:779},japanese_goblin:{x:192,y:779},see_no_evil:{x:256,y:779},hear_no_evil:{x:320,y:779},speak_no_evil:{x:384,y:779},guardsman:{x:448,y:779},skull:{x:512,y:779},feet:{x:576,y:779},lips:{x:640,y:779},kiss:{x:704,y:779},droplet:{x:768,y:779},ear:{x:843,y:0},eyes:{x:843,y:64},nose:{x:843,y:128},tongue:{x:843,y:192},love_letter:{x:843,y:256},bust_in_silhouette:{x:843,y:320},busts_in_silhouette:{x:843,y:384},speech_balloon:{x:843,y:448},thought_balloon:{x:843,y:512},feelsgood:{x:843,y:576},finnadie:{x:843,y:640},goberserk:{x:843,y:704},godmode:{x:843,y:768},hurtrealbad:{x:0,y:843},rage1:{x:64,y:843},rage2:{x:128,y:843},rage3:{x:192,y:843},rage4:{x:256,y:843},suspect:{x:320,y:843},trollface:{x:384,y:843},sunny:{x:448,y:843},umbrella:{x:512,y:843},cloud:{x:576,y:843},snowflake:{x:640,y:843},snowman:{x:704,y:843},zap:{x:768,y:843},cyclone:{x:832,y:843},foggy:{x:907,y:0},ocean:{x:907,y:64},cat:{x:907,y:128},dog:{x:907,y:192},mouse:{x:907,y:256},hamster:{x:907,y:320},rabbit:{x:907,y:384},wolf:{x:907,y:448},frog:{x:907,y:512},tiger:{x:907,y:576},koala:{x:907,y:640},bear:{x:907,y:704},pig:{x:907,y:768},pig_nose:{x:907,y:832},cow:{x:0,y:907},boar:{x:64,y:907},monkey_face:{x:128,y:907},monkey:{x:192,y:907},horse:{x:256,y:907},racehorse:{x:320,y:907},camel:{x:384,y:907},sheep:{x:448,y:907},elephant:{x:512,y:907},panda_face:{x:576,y:907},snake:{x:640,y:907},bird:{x:704,y:907},baby_chick:{x:768,y:907},hatched_chick:{x:832,y:907},hatching_chick:{x:896,y:907},chicken:{x:971,y:0},penguin:{x:971,y:64},turtle:{x:971,y:128},bug:{x:971,y:192},honeybee:{x:971,y:256},ant:{x:971,y:320},beetle:{x:971,y:384},snail:{x:971,y:448},octopus:{x:971,y:512},tropical_fish:{x:971,y:576},fish:{x:971,y:640},whale:{x:971,y:704},whale2:{x:971,y:768},dolphin:{x:971,y:832},cow2:{x:971,y:896},ram:{x:0,y:971},rat:{x:64,y:971},water_buffalo:{x:128,y:971},tiger2:{x:192,y:971},rabbit2:{x:256,y:971},dragon:{x:320,y:971},goat:{x:384,y:971},rooster:{x:448,y:971},dog2:{x:512,y:971},pig2:{x:576,y:971},mouse2:{x:640,y:971},ox:{x:704,y:971},dragon_face:{x:768,y:971},blowfish:{x:832,y:971},crocodile:{x:896,y:971},dromedary_camel:{x:960,y:971},leopard:{x:1035,y:0},cat2:{x:1035,y:64},poodle:{x:1035,y:128},paw_prints:{x:1035,y:192},bouquet:{x:1035,y:256},cherry_blossom:{x:1035,y:320},tulip:{x:1035,y:384},four_leaf_clover:{x:1035,y:448},rose:{x:1035,y:512},sunflower:{x:1035,y:576},hibiscus:{x:1035,y:640},maple_leaf:{x:1035,y:704},leaves:{x:1035,y:768},fallen_leaf:{x:1035,y:832},herb:{x:1035,y:896},mushroom:{x:1035,y:960},cactus:{x:0,y:1035},palm_tree:{x:64,y:1035},evergreen_tree:{x:128,y:1035},deciduous_tree:{x:192,y:1035},chestnut:{x:256,y:1035},seedling:{x:320,y:1035},blossom:{x:384,y:1035},ear_of_rice:{x:448,y:1035},shell:{x:512,y:1035},globe_with_meridians:{x:576,y:1035},sun_with_face:{x:640,y:1035},full_moon_with_face:{x:704,y:1035},new_moon_with_face:{x:768,y:1035},new_moon:{x:832,y:1035},waxing_crescent_moon:{x:896,y:1035},first_quarter_moon:{x:960,y:1035},waxing_gibbous_moon:{x:1024,y:1035},full_moon:{x:1099,y:0},waning_gibbous_moon:{x:1099,y:64},last_quarter_moon:{x:1099,y:128},waning_crescent_moon:{x:1099,y:192},last_quarter_moon_with_face:{x:1099,y:256},first_quarter_moon_with_face:{x:1099,y:320},crescent_moon:{x:1099,y:384},earth_africa:{x:1099,y:448},earth_americas:{x:1099,y:512},earth_asia:{x:1099,y:576},volcano:{x:1099,y:640},milky_way:{x:1099,y:704},partly_sunny:{x:1099,y:768},octocat:{x:1099,y:832},squirrel:{x:0,y:0,width:75,height:75},bamboo:{x:1099,y:960},gift_heart:{x:1099,y:1024},dolls:{x:0,y:1099},school_satchel:{x:64,y:1099},mortar_board:{x:128,y:1099},flags:{x:192,y:1099},fireworks:{x:256,y:1099},sparkler:{x:320,y:1099},wind_chime:{x:384,y:1099},rice_scene:{x:448,y:1099},jack_o_lantern:{x:512,y:1099},ghost:{x:576,y:1099},santa:{x:640,y:1099},christmas_tree:{x:704,y:1099},gift:{x:768,y:1099},bell:{x:832,y:1099},no_bell:{x:896,y:1099},tanabata_tree:{x:960,y:1099},tada:{x:1024,y:1099},confetti_ball:{x:1088,y:1099},balloon:{x:1163,y:0},crystal_ball:{x:1163,y:64},cd:{x:1163,y:128},dvd:{x:1163,y:192},floppy_disk:{x:1163,y:256},camera:{x:1163,y:320},video_camera:{x:1163,y:384},movie_camera:{x:1163,y:448},computer:{x:1163,y:512},tv:{x:1163,y:576},iphone:{x:1163,y:640},phone:{x:1163,y:704},telephone:{x:1163,y:768},telephone_receiver:{x:1163,y:832},pager:{x:1163,y:896},fax:{x:1163,y:960},minidisc:{x:1163,y:1024},vhs:{x:1163,y:1088},sound:{x:0,y:1163},speaker:{x:64,y:1163},mute:{x:128,y:1163},loudspeaker:{x:192,y:1163},mega:{x:256,y:1163},hourglass:{x:320,y:1163},hourglass_flowing_sand:{x:384,y:1163},alarm_clock:{x:448,y:1163},watch:{x:512,y:1163},radio:{x:576,y:1163},satellite:{x:640,y:1163},loop:{x:704,y:1163},mag:{x:768,y:1163},mag_right:{x:832,y:1163},unlock:{x:896,y:1163},lock:{x:960,y:1163},lock_with_ink_pen:{x:1024,y:1163},closed_lock_with_key:{x:1088,y:1163},key:{x:1152,y:1163},bulb:{x:1227,y:0},flashlight:{x:1227,y:64},high_brightness:{x:1227,y:128},low_brightness:{x:1227,y:192},electric_plug:{x:1227,y:256},battery:{x:1227,y:320},calling:{x:1227,y:384},email:{x:1227,y:448},mailbox:{x:1227,y:512},postbox:{x:1227,y:576},bath:{x:1227,y:640},bathtub:{x:1227,y:704},shower:{x:1227,y:768},toilet:{x:1227,y:832},wrench:{x:1227,y:896},nut_and_bolt:{x:1227,y:960},hammer:{x:1227,y:1024},seat:{x:1227,y:1088},moneybag:{x:1227,y:1152},yen:{x:0,y:1227},dollar:{x:64,y:1227},pound:{x:128,y:1227},euro:{x:192,y:1227},credit_card:{x:256,y:1227},money_with_wings:{x:320,y:1227},"e-mail":{x:384,y:1227},inbox_tray:{x:448,y:1227},outbox_tray:{x:512,y:1227},envelope:{x:576,y:1227},incoming_envelope:{x:640,y:1227},postal_horn:{x:704,y:1227},mailbox_closed:{x:768,y:1227},mailbox_with_mail:{x:832,y:1227},mailbox_with_no_mail:{x:896,y:1227},package:{x:960,y:1227},door:{x:1024,y:1227},smoking:{x:1088,y:1227},bomb:{x:1152,y:1227},gun:{x:1216,y:1227},hocho:{x:1291,y:0},pill:{x:1291,y:64},syringe:{x:1291,y:128},page_facing_up:{x:1291,y:192},page_with_curl:{x:1291,y:256},bookmark_tabs:{x:1291,y:320},bar_chart:{x:1291,y:384},chart_with_upwards_trend:{x:1291,y:448},chart_with_downwards_trend:{x:1291,y:512},scroll:{x:1291,y:576},clipboard:{x:1291,y:640},calendar:{x:1291,y:704},date:{x:1291,y:768},card_index:{x:1291,y:832},file_folder:{x:1291,y:896},open_file_folder:{x:1291,y:960},scissors:{x:1291,y:1024},pushpin:{x:1291,y:1088},paperclip:{x:1291,y:1152},black_nib:{x:1291,y:1216},pencil2:{x:0,y:1291},straight_ruler:{x:64,y:1291},triangular_ruler:{x:128,y:1291},closed_book:{x:192,y:1291},green_book:{x:256,y:1291},blue_book:{x:320,y:1291},orange_book:{x:384,y:1291},notebook:{x:448,y:1291},notebook_with_decorative_cover:{x:512,y:1291},ledger:{x:576,y:1291},books:{x:640,y:1291},bookmark:{x:704,y:1291},name_badge:{x:768,y:1291},microscope:{x:832,y:1291},telescope:{x:896,y:1291},newspaper:{x:75,y:0},football:{x:1024,y:1291},basketball:{x:1088,y:1291},soccer:{x:1152,y:1291},baseball:{x:1216,y:1291},tennis:{x:1280,y:1291},"8ball":{x:1355,y:0},rugby_football:{x:1355,y:64},bowling:{x:1355,y:128},golf:{x:1355,y:192},mountain_bicyclist:{x:1355,y:256},bicyclist:{x:1355,y:320},horse_racing:{x:1355,y:384},snowboarder:{x:1355,y:448},swimmer:{x:1355,y:512},surfer:{x:1355,y:576},ski:{x:1355,y:640},spades:{x:1355,y:704},hearts:{x:1355,y:768},clubs:{x:1355,y:832},diamonds:{x:1355,y:896},gem:{x:1355,y:960},ring:{x:1355,y:1024},trophy:{x:1355,y:1088},musical_score:{x:1355,y:1152},musical_keyboard:{x:1355,y:1216},violin:{x:1355,y:1280},space_invader:{x:0,y:1355},video_game:{x:64,y:1355},black_joker:{x:128,y:1355},flower_playing_cards:{x:192,y:1355},game_die:{x:256,y:1355},dart:{x:320,y:1355},mahjong:{x:384,y:1355},clapper:{x:448,y:1355},memo:{x:512,y:1355},pencil:{x:576,y:1355},book:{x:640,y:1355},art:{x:704,y:1355},microphone:{x:768,y:1355},headphones:{x:832,y:1355},trumpet:{x:896,y:1355},saxophone:{x:960,y:1355},guitar:{x:1024,y:1355},shoe:{x:1088,y:1355},sandal:{x:1152,y:1355},high_heel:{x:1216,y:1355},lipstick:{x:1280,y:1355},boot:{x:1344,y:1355},shirt:{x:1419,y:0},tshirt:{x:1419,y:64},necktie:{x:1419,y:128},womans_clothes:{x:1419,y:192},dress:{x:1419,y:256},running_shirt_with_sash:{x:1419,y:320},jeans:{x:1419,y:384},kimono:{x:1419,y:448},bikini:{x:1419,y:512},ribbon:{x:1419,y:576},tophat:{x:1419,y:640},crown:{x:1419,y:704},womans_hat:{x:1419,y:768},mans_shoe:{x:1419,y:832},closed_umbrella:{x:1419,y:896},briefcase:{x:1419,y:960},handbag:{x:1419,y:1024},pouch:{x:1419,y:1088},purse:{x:1419,y:1152},eyeglasses:{x:1419,y:1216},fishing_pole_and_fish:{x:1419,y:1280},coffee:{x:1419,y:1344},tea:{x:0,y:1419},sake:{x:64,y:1419},baby_bottle:{x:128,y:1419},beer:{x:192,y:1419},beers:{x:256,y:1419},cocktail:{x:320,y:1419},tropical_drink:{x:384,y:1419},wine_glass:{x:448,y:1419},fork_and_knife:{x:512,y:1419},pizza:{x:576,y:1419},hamburger:{x:640,y:1419},fries:{x:704,y:1419},poultry_leg:{x:768,y:1419},meat_on_bone:{x:832,y:1419},spaghetti:{x:896,y:1419},curry:{x:960,y:1419},fried_shrimp:{x:1024,y:1419},bento:{x:1088,y:1419},sushi:{x:1152,y:1419},fish_cake:{x:1216,y:1419},rice_ball:{x:1280,y:1419},rice_cracker:{x:1344,y:1419},rice:{x:1408,y:1419},ramen:{x:1483,y:0},stew:{x:1483,y:64},oden:{x:1483,y:128},dango:{x:1483,y:192},egg:{x:1483,y:256},bread:{x:1483,y:320},doughnut:{x:1483,y:384},custard:{x:1483,y:448},icecream:{x:1483,y:512},ice_cream:{x:1483,y:576},shaved_ice:{x:1483,y:640},birthday:{x:1483,y:704},cake:{x:1483,y:768},cookie:{x:1483,y:832},chocolate_bar:{x:1483,y:896},candy:{x:1483,y:960},lollipop:{x:1483,y:1024},honey_pot:{x:1483,y:1088},apple:{x:1483,y:1152},green_apple:{x:1483,y:1216},tangerine:{x:1483,y:1280},lemon:{x:1483,y:1344},cherries:{x:1483,y:1408},grapes:{x:0,y:1483},watermelon:{x:64,y:1483},strawberry:{x:128,y:1483},peach:{x:192,y:1483},melon:{x:256,y:1483},banana:{x:320,y:1483},pear:{x:384,y:1483},pineapple:{x:448,y:1483},sweet_potato:{x:512,y:1483},eggplant:{x:576,y:1483},tomato:{x:640,y:1483},corn:{x:704,y:1483},house:{x:768,y:1483},house_with_garden:{x:832,y:1483},school:{x:896,y:1483},office:{x:960,y:1483},post_office:{x:1024,y:1483},hospital:{x:1088,y:1483},bank:{x:1152,y:1483},convenience_store:{x:1216,y:1483},love_hotel:{x:1280,y:1483},hotel:{x:1344,y:1483},wedding:{x:1408,y:1483},church:{x:1472,y:1483},department_store:{x:1547,y:0},european_post_office:{x:1547,y:64},city_sunrise:{x:1547,y:128},city_sunset:{x:1547,y:192},japanese_castle:{x:1547,y:256},european_castle:{x:1547,y:320},tent:{x:1547,y:384},factory:{x:1547,y:448},tokyo_tower:{x:1547,y:512},japan:{x:1547,y:576},mount_fuji:{x:1547,y:640},sunrise_over_mountains:{x:1547,y:704},sunrise:{x:1547,y:768},stars:{x:1547,y:832},statue_of_liberty:{x:1547,y:896},bridge_at_night:{x:1547,y:960},carousel_horse:{x:1547,y:1024},rainbow:{x:1547,y:1088},ferris_wheel:{x:1547,y:1152},fountain:{x:1547,y:1216},roller_coaster:{x:1547,y:1280},ship:{x:1547,y:1344},speedboat:{x:1547,y:1408},boat:{x:1547,y:1472},sailboat:{x:0,y:1547},rowboat:{x:64,y:1547},anchor:{x:128,y:1547},rocket:{x:192,y:1547},airplane:{x:256,y:1547},helicopter:{x:320,y:1547},steam_locomotive:{x:384,y:1547},tram:{x:448,y:1547},mountain_railway:{x:512,y:1547},bike:{x:576,y:1547},aerial_tramway:{x:640,y:1547},suspension_railway:{x:704,y:1547},mountain_cableway:{x:768,y:1547},tractor:{x:832,y:1547},blue_car:{x:896,y:1547},oncoming_automobile:{x:960,y:1547},car:{x:1024,y:1547},red_car:{x:1088,y:1547},taxi:{x:1152,y:1547},oncoming_taxi:{x:1216,y:1547},articulated_lorry:{x:1280,y:1547},bus:{x:1344,y:1547},oncoming_bus:{x:1408,y:1547},rotating_light:{x:1472,y:1547},police_car:{x:1536,y:1547},oncoming_police_car:{x:1611,y:0},fire_engine:{x:1611,y:64},ambulance:{x:1611,y:128},minibus:{x:1611,y:192},truck:{x:1611,y:256},train:{x:1611,y:320},station:{x:1611,y:384},train2:{x:1611,y:448},bullettrain_front:{x:1611,y:512},bullettrain_side:{x:1611,y:576},light_rail:{x:1611,y:640},monorail:{x:1611,y:704},railway_car:{x:1611,y:768},trolleybus:{x:1611,y:832},ticket:{x:1611,y:896},fuelpump:{x:1611,y:960},vertical_traffic_light:{x:1611,y:1024},traffic_light:{x:1611,y:1088},warning:{x:1611,y:1152},construction:{x:1611,y:1216},beginner:{x:1611,y:1280},atm:{x:1611,y:1344},slot_machine:{x:1611,y:1408},busstop:{x:1611,y:1472},barber:{x:1611,y:1536},hotsprings:{x:0,y:1611},checkered_flag:{x:64,y:1611},crossed_flags:{x:128,y:1611},izakaya_lantern:{x:192,y:1611},moyai:{x:256,y:1611},circus_tent:{x:320,y:1611},performing_arts:{x:384,y:1611},round_pushpin:{x:448,y:1611},triangular_flag_on_post:{x:512,y:1611},jp:{x:576,y:1611},kr:{x:640,y:1611},cn:{x:704,y:1611},us:{x:768,y:1611},fr:{x:832,y:1611},es:{x:896,y:1611},it:{x:960,y:1611},ru:{x:1024,y:1611},gb:{x:1088,y:1611},uk:{x:1152,y:1611},de:{x:1216,y:1611},one:{x:1280,y:1611},two:{x:1344,y:1611},three:{x:1408,y:1611},four:{x:1472,y:1611},five:{x:1536,y:1611},six:{x:1600,y:1611},seven:{x:1675,y:0},eight:{x:1675,y:64},nine:{x:1675,y:128},keycap_ten:{x:1675,y:192},1234:{x:1675,y:256},zero:{x:1675,y:320},hash:{x:1675,y:384},symbols:{x:1675,y:448},arrow_backward:{x:1675,y:512},arrow_down:{x:1675,y:576},arrow_forward:{x:1675,y:640},arrow_left:{x:1675,y:704},capital_abcd:{x:1675,y:768},abcd:{x:1675,y:832},abc:{x:1675,y:896},arrow_lower_left:{x:1675,y:960},arrow_lower_right:{x:1675,y:1024},arrow_right:{x:1675,y:1088},arrow_up:{x:1675,y:1152},arrow_upper_left:{x:1675,y:1216},arrow_upper_right:{x:1675,y:1280},arrow_double_down:{x:1675,y:1344},arrow_double_up:{x:1675,y:1408},arrow_down_small:{x:1675,y:1472},arrow_heading_down:{x:1675,y:1536},arrow_heading_up:{x:1675,y:1600},leftwards_arrow_with_hook:{x:0,y:1675},arrow_right_hook:{x:64,y:1675},left_right_arrow:{x:128,y:1675},arrow_up_down:{x:192,y:1675},arrow_up_small:{x:256,y:1675},arrows_clockwise:{x:320,y:1675},arrows_counterclockwise:{x:384,y:1675},rewind:{x:448,y:1675},fast_forward:{x:512,y:1675},information_source:{x:576,y:1675},ok:{x:640,y:1675},twisted_rightwards_arrows:{x:704,y:1675},repeat:{x:768,y:1675},repeat_one:{x:832,y:1675},new:{x:896,y:1675},top:{x:960,y:1675},up:{x:1024,y:1675},cool:{x:1088,y:1675},free:{x:1152,y:1675},ng:{x:1216,y:1675},cinema:{x:1280,y:1675},koko:{x:1344,y:1675},signal_strength:{x:1408,y:1675},u5272:{x:1472,y:1675},u5408:{x:1536,y:1675},u55b6:{x:1600,y:1675},u6307:{x:1664,y:1675},u6708:{x:1739,y:0},u6709:{x:1739,y:64},u6e80:{x:1739,y:128},u7121:{x:1739,y:192},u7533:{x:1739,y:256},u7a7a:{x:1739,y:320},u7981:{x:1739,y:384},sa:{x:1739,y:448},restroom:{x:1739,y:512},mens:{x:1739,y:576},womens:{x:1739,y:640},baby_symbol:{x:1739,y:704},no_smoking:{x:1739,y:768},parking:{x:1739,y:832},wheelchair:{x:1739,y:896},metro:{x:1739,y:960},baggage_claim:{x:1739,y:1024},accept:{x:1739,y:1088},wc:{x:1739,y:1152},potable_water:{x:1739,y:1216},put_litter_in_its_place:{x:1739,y:1280},secret:{x:1739,y:1344},congratulations:{x:1739,y:1408},m:{x:1739,y:1472},passport_control:{x:1739,y:1536},left_luggage:{x:1739,y:1600},customs:{x:1739,y:1664},ideograph_advantage:{x:0,y:1739},cl:{x:64,y:1739},sos:{x:128,y:1739},id:{x:192,y:1739},no_entry_sign:{x:256,y:1739},underage:{x:320,y:1739},no_mobile_phones:{x:384,y:1739},do_not_litter:{x:448,y:1739},"non-potable_water":{x:512,y:1739},no_bicycles:{x:576,y:1739},no_pedestrians:{x:640,y:1739},children_crossing:{x:704,y:1739},no_entry:{x:768,y:1739},eight_spoked_asterisk:{x:832,y:1739},sparkle:{x:896,y:1739},eight_pointed_black_star:{x:960,y:1739},heart_decoration:{x:1024,y:1739},vs:{x:1088,y:1739},vibration_mode:{x:1152,y:1739},mobile_phone_off:{x:1216,y:1739},chart:{x:1280,y:1739},currency_exchange:{x:1344,y:1739},aries:{x:1408,y:1739},taurus:{x:1472,y:1739},gemini:{x:1536,y:1739},cancer:{x:1600,y:1739},leo:{x:1664,y:1739},virgo:{x:1728,y:1739},libra:{x:1803,y:0},scorpius:{x:1803,y:64},sagittarius:{x:1803,y:128},capricorn:{x:1803,y:192},aquarius:{x:1803,y:256},pisces:{x:1803,y:320},ophiuchus:{x:1803,y:384},six_pointed_star:{x:1803,y:448},negative_squared_cross_mark:{x:1803,y:512},a:{x:1803,y:576},b:{x:1803,y:640},ab:{x:1803,y:704},o2:{x:1803,y:768},diamond_shape_with_a_dot_inside:{x:1803,y:832},recycle:{x:1803,y:896},end:{x:1803,y:960},back:{x:1803,y:1024},on:{x:1803,y:1088},soon:{x:1803,y:1152},clock1:{x:1803,y:1216},clock130:{x:1803,y:1280},clock10:{x:1803,y:1344},clock1030:{x:1803,y:1408},clock11:{x:1803,y:1472},clock1130:{x:1803,y:1536},clock12:{x:1803,y:1600},clock1230:{x:1803,y:1664},clock2:{x:1803,y:1728},clock230:{x:0,y:1803},clock3:{x:64,y:1803},clock330:{x:128,y:1803},clock4:{x:192,y:1803},clock430:{x:256,y:1803},clock5:{x:320,y:1803},clock530:{x:384,y:1803},clock6:{x:448,y:1803},clock630:{x:512,y:1803},clock7:{x:576,y:1803},clock730:{x:640,y:1803},clock8:{x:704,y:1803},clock830:{x:768,y:1803},clock9:{x:832,y:1803},clock930:{x:896,y:1803},heavy_dollar_sign:{x:960,y:1803},copyright:{x:1024,y:1803},registered:{x:1088,y:1803},tm:{x:1152,y:1803},x:{x:1216,y:1803},heavy_exclamation_mark:{x:1280,y:1803},bangbang:{x:1344,y:1803},interrobang:{x:1408,y:1803},o:{x:1472,y:1803},heavy_multiplication_x:{x:1536,y:1803},heavy_plus_sign:{x:1600,y:1803},heavy_minus_sign:{x:1664,y:1803},heavy_division_sign:{x:1728,y:1803},white_flower:{x:1792,y:1803},100:{x:1867,y:0},heavy_check_mark:{x:1867,y:64},ballot_box_with_check:{x:1867,y:128},radio_button:{x:1867,y:192},link:{x:1867,y:256},curly_loop:{x:1867,y:320},wavy_dash:{x:1867,y:384},part_alternation_mark:{x:1867,y:448},trident:{x:1867,y:512},black_small_square:{x:1867,y:576},white_small_square:{x:1867,y:640},black_medium_small_square:{x:1867,y:704},white_medium_small_square:{x:1867,y:768},black_medium_square:{x:1867,y:832},white_medium_square:{x:1867,y:896},white_large_square:{x:1867,y:960},white_check_mark:{x:1867,y:1024},black_square_button:{x:1867,y:1088},white_square_button:{x:1867,y:1152},black_circle:{x:1867,y:1216},white_circle:{x:1867,y:1280},red_circle:{x:1867,y:1344},large_blue_circle:{x:1867,y:1408},large_blue_diamond:{x:1867,y:1472},large_orange_diamond:{x:1867,y:1536},small_blue_diamond:{x:1867,y:1600},small_orange_diamond:{x:1867,y:1664},small_red_triangle:{x:1867,y:1728},small_red_triangle_down:{x:1867,y:1792}},Z=function(e){function t(){return s(this,t),d(this,c(t).apply(this,arguments))}return n(t,U),a(t,[{key:"componentDidUpdate",value:function(e){for(var t in e)if(e[t]!==this.props[t])return setTimeout(this.renderLayer)}},{key:"componentDidMount",value:function(){this.isMounted=!0,this.renderLayer=this.renderLayer.bind(this),this.renderLayer()}},{key:"componentWillUnmount",value:function(){this.renderLayer(!1),this.isMounted=!1,this.remote&&this.remote.parentNode.removeChild(this.remote)}},{key:"findNode",value:function(e){return"string"==typeof e?document.querySelector(e):e}},{key:"renderLayer",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.isMounted&&(this.props.into!==this.intoPointer&&(this.intoPointer=this.props.into,this.into&&this.remote&&(this.remote=K(f(ee,null),this.into,this.remote)),this.into=this.findNode(this.props.into)),this.remote=K(f(ee,{context:this.context},e&&this.props.children||null),this.into,this.remote))}},{key:"render",value:function(){return null}}]),t}(),ee=function(e){function t(){return s(this,t),d(this,c(t).apply(this,arguments))}return n(t,U),a(t,[{key:"getChildContext",value:function(){return this.props.context}},{key:"render",value:function(e){var t=e.children;return t&&t[0]||null}}]),t}(),te=function(e){function i(){var e,n;s(this,i);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return u(l(l(n=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{show:!1}),u(l(l(n)),"toggle",function(){n.setState(function(e){return{show:!e.show}})}),u(l(l(n)),"handleKeyup",function(e){var t="which"in e?e.which:e.keyCode;n.state.show&&27===t&&n.setState({show:!1})}),n}return n(i,U),a(i,[{key:"fillChat",value:function(e){document.getElementById("chat-txt-message").value+=" :".concat(e,":")}},{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.handleKeyup)}},{key:"render",value:function(e,t){var i=this,n=t.show,o=Object.keys(Q).map(function(e){var t=Q[e],n=.46875*t.x,o=.46875*t.y,r={backgroundPosition:"-".concat(n,"px -").concat(o,"px")};return f("span",{key:"emoji-".concat(e),style:r,title:e,onClick:function(){return i.fillChat(e)}})});return f("span",{className:"dp-emoji-picker-icon fa fa-smile-o",onClick:this.toggle},f(Z,{into:".pusher-chat-widget-input"},f("div",{className:"dp-emoji-picker ".concat(n?"show":"")},o)))}}]),i}();var ne={menu:{general:"open","user-interface":"open",settings:"open",customize:"open",contact:"open"},options:{"dubplus-autovote":!1,"dubplus-emotes":!1,"dubplus-autocomplete":!1,mention_notifications:!1,dubplus_pm_notifications:!1,"dj-notification":!1,"dubplus-dubs-hover":!1,"dubplus-downdubs":!1,"dubplus-grabschat":!1,"dubplus-split-chat":!1,"dubplus-show-timestamp":!1,"dubplus-hide-bg":!1,"dubplus-hide-avatars":!1,"dubplus-chat-only":!1,"dubplus-video-only":!1,warn_redirect:!1,"dubplus-comm-theme":!1,"dubplus-afk":!1,"dubplus-snow":!1,"dubplus-custom-css":!1},custom:{customAfkMessage:"",dj_notification:1,css:"",bg:"",notificationSound:""}},oe=new(function(){function n(){s(this,n),u(this,"srcRoot","https://cdn.jsdelivr.net/gh/FranciscoG/DubPlus@preact-version");var e=localStorage.getItem("dubplusUserSettings");if(e)try{var t=JSON.parse(e);this.stored=Object.assign({},ne,t)}catch(e){this.stored=ne}else this.stored=ne}return a(n,[{key:"save",value:function(e,t,n){this.stored[e][t]=n;try{localStorage.setItem("dubplusUserSettings",JSON.stringify(this.stored))}catch(e){console.error("an error occured saving dubplus to localStorage",e)}}}]),n}());function re(e){var t="open"===e.open?"down":"right";return f("div",{id:e.id,onClick:e.onClick,className:"dubplus-menu-section-header"},f("span",{className:"fa fa-angle-".concat(t)}),f("p",null,e.category))}var ie=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"keyUpHandler",function(e){13===e.keyCode&&(t.props.onConfirm(t.textarea.value),t.props.onClose()),27===e.keyCode&&t.props.onClose()}),u(l(l(t)),"confirmClick",function(){t.props.onConfirm(t.textarea.value),t.props.onClose()}),t}return n(i,U),a(i,[{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyUpHandler)}},{key:"componentDidUpdate",value:function(){this.props.open?document.addEventListener("keyup",this.keyUpHandler):document.removeEventListener("keyup",this.keyUpHandler)}},{key:"render",value:function(e){var t=this,n=e.onConfirm?"cancel":"close";return e.open?f(Z,{into:"body"},f("div",{className:"dp-modal"},f("aside",{className:"container"},f("div",{className:"title"},f("h1",null," ",e.title||"Dub+")),f("div",{className:"content"},f("p",null,e.content||""),e.placeholder&&f("textarea",{ref:function(e){return t.textarea=e},placeholder:e.placeholder,maxlength:e.maxlength||999},e.value||"")),f("div",{className:"dp-modal-buttons"},f("button",{id:"dp-modal-cancel",onClick:e.onClose},n),e.onConfirm&&f("button",{id:"dp-modal-confirm",onClick:this.confirmClick},"okay"))))):null}}]),i}(),ae=window.ga||function(){},se=new(function(){function t(e){s(this,t),ae("create",e,"auto","dubplusTracker")}return a(t,[{key:"event",value:function(e,t,n,o){ae("dubplusTracker.send","event",e,t,n,o)}},{key:"menuClick",value:function(e,t,n){this.event(e,"click",t,n)}}]),t}())("UA-116652541-1"),ue=function(e){function i(){var e,n;s(this,i);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return u(l(l(n=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{section:oe.stored.menu[n.props.settingsKey]||"open"}),u(l(l(n)),"toggleSection",function(e){n.setState(function(e){var t="open"===e.section?"closed":"open";return oe.save("menu",n.props.settingsKey,t),{section:t}})}),n}return n(i,U),a(i,[{key:"render",value:function(e,t){var n=["dubplus-menu-section"];return"closed"===t.section&&n.push("dubplus-menu-section-closed"),f("span",null,f(re,{onClick:this.toggleSection,id:e.id,category:e.title,open:t.section}),f("ul",{className:n.join(" ")},e.children))}}]),i}();function ce(e){var t=["dubplus-menu-icon"];return e.className&&t.push(e.className),f("li",{id:e.id,title:e.desc,className:t.join(" "),onClick:e.onClick},f("span",{className:"fa fa-".concat(e.icon)}),f("span",{className:"dubplus-menu-label"},e.menuTitle))}var le=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{open:!1}),u(l(l(t)),"loadModal",function(){t.setState({open:!0}),se.menuClick(t.props.section+" section",t.props.id+" edit")}),u(l(l(t)),"closeModal",function(){console.log("closing dub+ modal"),t.setState({open:!1}),"function"==typeof t.props.onCancel&&t.props.onCancel()}),t}return n(i,U),a(i,[{key:"render",value:function(e,t){return f("span",{onClick:this.loadModal,className:"fa fa-pencil extra-icon"},f(ie,{open:t.open||e.showModal||!1,title:e.title||"Dub+ option",content:e.content||"Please enter a value",placeholder:e.placeholder||"in here",value:e.value,onConfirm:e.onConfirm,onClose:this.closeModal}))}}]),i}(),de=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{on:oe.stored.options[t.props.id]||!1}),u(l(l(t)),"switchOn",function(){t.props.turnOn(),oe.save("options",t.props.id,!0),t.setState({on:!0}),se.menuClick(t.props.section+" section",t.props.id+" on")}),u(l(l(t)),"switchOff",function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];t.props.turnOff(),oe.save("options",t.props.id,!1),t.setState({on:!1}),e||se.menuClick(t.props.section+" section",t.props.id+" off")}),u(l(l(t)),"toggleSwitch",function(){t.state.on?t.switchOff():t.switchOn()}),t}return n(i,U),a(i,[{key:"componentDidMount",value:function(){this.state.on&&this.props.turnOn()}},{key:"render",value:function(e,t){var n=["dubplus-switch"];return t.on&&n.push("dubplus-switch-on"),e.className&&n.push(e.className),f("li",{id:e.id,title:e.desc,className:n.join(" ")},e.children||null,f("div",{onClick:this.toggleSwitch,className:"dubplus-form-control"},f("div",{className:"dubplus-switch-bg"},f("div",{className:"dubplus-switcher"})),f("span",{className:"dubplus-menu-label"},e.menuTitle)))}}]),i}(),ye=function(e){function i(){var e,r;s(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return u(l(l(r=d(this,(e=c(i)).call.apply(e,[this].concat(n))))),"state",{canSend:!0}),u(l(l(r)),"afk_chat_respond",function(e){if(r.state.canSend){var t=e.message,n=Dubtrack.session.get("username");if(-1<t.indexOf("@"+n)&&Dubtrack.session.id!==e.user.userInfo.userid){var o=document.getElementById("chat-txt-message");oe.stored.custom.customAfkMessage?o.value="[AFK] "+oe.stored.custom.customAfkMessage:o.value="[AFK] I'm not here right now.",Dubtrack.room.chat.sendMessage(),r.setState({canSend:!1}),setTimeout(function(){r.setState({canSend:!0})},3e4)}}}),r}return n(i,U),a(i,[{key:"turnOn",value:function(){Dubtrack.Events.bind("realtime:chat-message",this.afk_chat_respond)}},{key:"turnOff",value:function(){Dubtrack.Events.unbind("realtime:chat-message",this.afk_chat_respond)}},{key:"saveAFKmessage",value:function(e){oe.save("custom","customAfkMessage",e)}},{key:"render",value:function(e,t){return f(de,{id:"dubplus-afk",section:"General",menuTitle:"AFK Auto-respond",desc:"Toggle Away from Keyboard and customize AFK message.",turnOn:this.turnOn,turnOff:this.turnOff},f(le,{title:"Custom AFK Message",section:"General",content:"Enter a custom Away From Keyboard [AFK] message here",value:oe.stored.custom.customAfkMessage||"",placeholder:"Be right back!",maxlength:"255",onConfirm:this.saveAFKmessage}))}}]),i}(),he=function(e){function t(){var r;return s(this,t),u(l(l(r=d(this,c(t).call(this)))),"advance_vote",function(){var e=document.createEvent("HTMLEvents");e.initEvent("click",!0,!1),r.dubup.dispatchEvent(e)}),u(l(l(r)),"voteCheck",function(e){e.startTime<2&&r.advance_vote()}),u(l(l(r)),"turnOn",function(e){var t=Dubtrack.room.player.activeSong.get("song"),n=Dubtrack.helpers.cookie.get("dub-"+Dubtrack.room.model.get("_id")),o=Dubtrack.helpers.cookie.get("dub-song");Dubtrack.room&&t&&t.songid===o||(n=!1),r.dubup.classList.contains("voted")||r.dubdown.classList.contains("voted")||n||r.advance_vote(),Dubtrack.Events.bind("realtime:room_playlist-update",r.voteCheck)}),u(l(l(r)),"turnOff",function(e){Dubtrack.Events.unbind("realtime:room_playlist-update",r.voteCheck)}),r.dubup=document.querySelector(".dubup"),r.dubdown=document.querySelector(".dubdown"),r}return n(t,U),a(t,[{key:"render",value:function(e,t){return f(de,{id:"dubplus-autovote",section:"General",menuTitle:"Autovote",desc:"Toggles auto upvoting for every song",turnOn:this.turnOn,turnOff:this.turnOff})}}]),t}(),me=function(e){var t=e.data,n=e.onSelect;return t.header?f("li",{className:"preview-item-header ".concat(t.header.toLowerCase(),"-preview-header")},f("span",null,t.header)):f("li",{className:"preview-item ".concat(t.type,"-previews"),onClick:function(){n(t.name)},"data-name":t.name},f("div",{className:"ac-image"},f("img",{src:t.src,alt:t.name,title:t.name})),f("span",{className:"ac-text"},t.name))},pe=function(e){var t=e.matches,n=e.onSelect;return 0===t.length?f("ul",{id:"autocomplete-preview"}):f("ul",{id:"autocomplete-preview",className:"ac-show"},t.map(function(e,t){return f(me,{data:e,key:e.header?"header-row-".concat(e.header):"".concat(e.type,"-").concat(e.name),onSelect:n})}))};function fe(r){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(t,n){var o=new XMLHttpRequest;for(var e in o.onload=function(){try{var e=JSON.parse(o.responseText);t(e)}catch(e){n(e)}},o.onerror=function(){n()},o.open("GET",r),i)i.hasOwnProperty(e)&&o.setRequestHeader(e,i[e]);o.send()})}var xe=new function(){var a,e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(!e)return console.error("indexDB not supported");var s=50,t=e.open("d2",1);return t.onsuccess=function(e){a=this.result},t.onerror=function(e){console.error("indexedDB request error",e)},t.onupgradeneeded=function(e){(a=this.result).createObjectStore("s",{keyPath:"k"}),a.transaction.oncomplete=function(e){a=e.target.db}},{get:function e(t,n){if(!a&&0<=s)return setTimeout(function(){e(t,n)},100),void s--;s=30;try{var o=a.transaction("s");o.onerror=function(e){n(null,e)};var r=o.objectStore("s");r.onerror=function(e){n(null,e)};var i=r.get(t);i.onsuccess=function(e){var t=e.target.result&&e.target.result.v||null;n(t)},i.onerror=function(e){n(null,e)}}catch(e){n(null,e.message)}},set:function e(t,n){if(!a&&0<=s)return setTimeout(function(){e(t,n)},100),void s--;s=30;var o={k:t,v:n};a.transaction("s","readwrite").objectStore("s").put(o)}}};function be(a){return new Promise(function(r,i){xe.get(a+"_api",function(e,t){if(t)return i(t);if(e)try{void 0!==JSON.parse(e).error&&r(!0)}catch(e){r(!0)}else r(!0);var n=Date.now(),o=parseInt(localStorage.getItem(a+"_api_timestamp"));r(isNaN(o)||6048e5<n-o)})})}var ge=new(function(){function e(){var n=this;s(this,e),u(this,"specialEmotes",[]),u(this,"emotes",{}),u(this,"sortedKeys",{nonAlpha:[]}),u(this,"loaded",!1),u(this,"addKeyToSorted",function(e){var t=e.charAt(0);/[a-z]/i.test(t)?n.sortedKeys[t]?n.sortedKeys[t].push(e):n.sortedKeys[t]=[e]:n.sortedKeys.nonAlpha.push(e)})}return a(e,[{key:"load",value:function(){var t=this;return be("twitch").then(function(e){return e?t.updateFromApi():t.grabFromDb()}).catch(function(e){console.error(e),t.updateFromApi()})}},{key:"done",value:function(e){this.doneCB=e}},{key:"error",value:function(e){this.errorCB=e}},{key:"grabFromDb",value:function(){var o=this;return new Promise(function(n,t){try{xe.get("twitch_api",function(e){console.log("dub+","twitch","loading from IndexedDB");var t=JSON.parse(e);o.processViaWebWorker(t),o.loaded="from db",t=null,n()})}catch(e){t(e)}})}},{key:"updateFromApi",value:function(){var n=this;return console.log("dub+","twitch","loading from api"),fe("https://api.twitch.tv/kraken/chat/emoticon_images",{Accept:"application/vnd.twitchtv.v5+json","Client-ID":"z5bpa7x6y717dsw28qnmcooolzm2js"}).then(function(e){var t={};e.emoticons.forEach(function(e){t[e.code]&&null!==e.emoticon_set||(t[e.code]=e.id)}),localStorage.setItem("twitch_api_timestamp",Date.now().toString()),xe.set("twitch_api",JSON.stringify(t)),n.processViaWebWorker(t),n.loaded="from api"}).catch(function(e){"function"==typeof n.errorCB&&n.errorCB(e)})}},{key:"template",value:function(e){return"//static-cdn.jtvnw.net/emoticons/v1/".concat(e,"/3.0")}},{key:"find",value:function(t){var n=this,e=t.charAt(0);return(/[a-z]/i.test(e)?this.sortedKeys[e]||[]:this.sortedKeys.nonAlpha).filter(function(e){return 0===e.indexOf(t)}).map(function(e){return{type:"twitch",src:n.template(n.emotes[e]),name:e}})}},{key:"processEmotes",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=t.toLowerCase();if(0<=t.indexOf("\\")){this.specialEmotes.push([t,e[t]]);continue}if(0<=emojify.emojiNames.indexOf(n))continue;this.emotes[n]||(this.emotes[n]=e[t],this.addKeyToSorted(n))}this.loaded=!0,this.doneCB()}},{key:"processViaWebWorker",value:function(e){var t=this;window.URL=window.URL||window.webkitURL;var n,o="\n      var emotes = {};\n      var sortedKeys = {\n        'nonAlpha' : []\n      };\n\n      function addKeyToSorted(key) {\n        let first = key.charAt(0);\n    \n        // all numbers and symbols get stored in one 'nonAlpha' array\n        if (!/[a-z]/i.test(first)) {\n          sortedKeys.nonAlpha.push(key);\n          return;\n        }\n    \n        if (!sortedKeys[first]) {\n          sortedKeys[first] = [key];\n          return\n        }\n    \n        sortedKeys[first].push(key);\n      }\n\n      self.addEventListener('message', function(e) {\n        var emojiNames = e.data.emojiNames;\n        var data = e.data.data;\n\n        for (var code in data) {\n          if (data.hasOwnProperty(code)) {\n            var _key = code.toLowerCase();\n      \n            // not doing anything with non-named emojis\n            if (/\\\\/g.test(code)) {\n              continue;\n            }\n      \n            if (emojiNames.indexOf(_key) >= 0) {\n              continue; // don't override regular emojis handled by emojify\n            }\n      \n            if (!emotes[_key]) {\n              // if emote doesn't exist, add it\n              emotes[_key] = data[code];\n              addKeyToSorted(_key);\n            }\n          }\n        }\n\n        self.postMessage({\n          emotes: emotes,\n          sortedKeys: sortedKeys\n        });\n        close();\n      }, false);\n    ";try{n=new Blob([o],{type:"application/javascript"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(n=new BlobBuilder).append(o),n=n.getBlob()}var r=new Worker(URL.createObjectURL(n));r.addEventListener("message",function(e){t.emotes=e.data.emotes,t.sortedKeys=e.data.sortedKeys,t.loaded=!0,t.doneCB()}),r.postMessage({data:e,emojiNames:emojify.emojiNames})}}]),e}()),ve=new(function(){function e(){var n=this;s(this,e),u(this,"emotes",{}),u(this,"sortedKeys",{nonAlpha:[]}),u(this,"loaded",!1),u(this,"headers",{}),u(this,"addKeyToSorted",function(e){var t=e.charAt(0);/[a-z]/i.test(t)?(n.sortedKeys[t]||(n.sortedKeys[t]=[]),n.sortedKeys[t].push(e)):n.sortedKeys.nonAlpha.push(e)})}return a(e,[{key:"optionalSetHeaders",value:function(e){this.headers=e}},{key:"load",value:function(){var t=this;return be("bttv").then(function(e){return e?t.updateFromAPI():t.loadFromDB()})}},{key:"loadFromDB",value:function(){var o=this;return new Promise(function(n,t){try{xe.get("bttv_api",function(e){console.log("dub+","bttv","loading from IndexedDB");var t=JSON.parse(e);o.processEmotes(t),t=null,n()})}catch(e){t(e)}})}},{key:"updateFromAPI",value:function(){var n=this;return console.log("dub+","bttv","loading from api"),fe("https://api.betterttv.net/2/emotes",this.headers).then(function(e){var t={};e.emotes.forEach(function(e){t[e.code]||(t[e.code]=e.id)}),localStorage.setItem("bttv_api_timestamp",Date.now().toString()),xe.set("bttv_api",JSON.stringify(t)),n.processEmotes(t)})}},{key:"template",value:function(e){return"//cdn.betterttv.net/emote/".concat(e,"/3x")}},{key:"find",value:function(t){var n=this,e=t.charAt(0);return(/[a-z]/i.test(e)?this.sortedKeys[e]||[]:this.sortedKeys.nonAlpha).filter(function(e){return 0===e.indexOf(t)}).map(function(e){return{type:"bttv",src:n.template(n.emotes[e]),name:e}})}},{key:"processEmotes",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=t.toLowerCase();if(0<=t.indexOf(":"))continue;if(0<=emojify.emojiNames.indexOf(n))continue;0<=t.indexOf("(")&&(n=n.replace(/([()])/g,"")),this.emotes[n]=e[t],this.addKeyToSorted(n)}this.loaded=!0}}]),e}()),_e=38,we=40,ke=13,Ce=27,Se=9,Oe=[_e,we,37,39,Ce,ke],De=function(e){function r(){var e,a;s(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return u(l(l(a=d(this,(e=c(r)).call.apply(e,[this].concat(n))))),"state",{isOn:!1,matches:[]}),u(l(l(a)),"renderTo",document.querySelector(".pusher-chat-widget-input")),u(l(l(a)),"chatInput",document.getElementById("chat-txt-message")),u(l(l(a)),"selectedItem",null),u(l(l(a)),"checkInput",function(e){var t="which"in e?e.which:e.keyCode;if(!(0<=Oe.indexOf(t))){var n=e.target.value.split(" ");if(0!==n.length){var o=n[n.length-1],r=o.charAt(o.length-1);if(":"===o.charAt(0)&&3<o.length&&":"!==r){var i=a.getMatches(o);a.chunkLoadMatches(i)}else 0!==a.state.matches.length&&a.closePreview()}}}),u(l(l(a)),"updateChatInput",function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=a.chatInput.value.split(" ");n.pop(),n.push(":".concat(e,":")),a.chatInput.value=n.join(" "),t&&(a.chatInput.focus(),a.closePreview())}),u(l(l(a)),"keyboardNav",function(e){if(0===a.state.matches.length)return!0;switch("which"in e?e.which:e.keyCode){case we:case Se:e.preventDefault(),e.stopImmediatePropagation(),a.navDown();break;case _e:e.preventDefault(),e.stopImmediatePropagation(),a.navUp();break;case Ce:a.closePreview(),a.chatInput.focus();break;case ke:a.closePreview();break;default:return!0}}),u(l(l(a)),"turnOn",function(e){a.setState({isOn:!0}),a.debouncedCheckInput=window._.debounce(a.checkInput,100),a.debouncedNav=window._.debounce(a.keyboardNav,100),a.chatInput.addEventListener("keydown",a.debouncedNav),a.chatInput.addEventListener("keyup",a.debouncedCheckInput)}),u(l(l(a)),"turnOff",function(e){a.setState({isOn:!1}),a.chatInput.removeEventListener("keydown",a.debouncedNav),a.chatInput.removeEventListener("keyup",a.debouncedCheckInput)}),a}return n(r,U),a(r,[{key:"chunkLoadMatches",value:function(e){var t=this;if(e.length<51)this.setState({matches:e});else{var n=e.slice(0,50);this.setState({matches:n}),setTimeout(function(){t.setState({matches:e})},250)}}},{key:"getMatches",value:function(e){e=e.replace(/^:/,"");var t=$.find(e);0<t.length&&t.unshift({header:"Emoji"});var n=ve.find(e);0<n.length&&n.unshift({header:"BetterTTV"});var o=ge.find(e);return 0<o.length&&o.unshift({header:"Twitch"}),t.concat(n,o)}},{key:"closePreview",value:function(){this.setState({matches:[]}),this.selectedItem=null}},{key:"isElementInView",value:function(e){var t=document.querySelector("#autocomplete-preview"),n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return n.top>=o.top&&n.bottom<=o.bottom}},{key:"navDown",value:function(){var e;this.selectedItem&&(this.selectedItem.classList.remove("selected"),e=this.selectedItem.nextSibling),e||(e=document.querySelector(".preview-item")),e.classList.contains("preview-item-header")&&(e=e.nextSibling),e.classList.add("selected"),this.isElementInView(e)||e.scrollIntoView(!1),this.selectedItem=e,this.updateChatInput(e.dataset.name,!1)}},{key:"navUp",value:function(){var e;this.selectedItem&&(this.selectedItem.classList.remove("selected"),e=this.selectedItem.previousSibling),e||(e=[].slice.call(document.querySelectorAll(".preview-item")).pop()),e.classList.contains("preview-item-header")&&(e=e.previousSibling),e||(e=[].slice.call(document.querySelectorAll(".preview-item")).pop()),e.classList.add("selected"),this.isElementInView(e)||e.scrollIntoView(!0),this.selectedItem=e,this.updateChatInput(e.dataset.name,!1)}},{key:"render",value:function(e,t){var n=t.isOn,o=t.matches;return f(de,{id:"dubplus-emotes",section:"General",menuTitle:"Autocomplete Emoji",desc:"Quick find and insert emojis and emotes while typing in the chat input",turnOn:this.turnOn,turnOff:this.turnOff},n?f(Z,{into:this.renderTo},f(pe,{onSelect:this.updateChatInput,matches:o})):null)}}]),r}();function Ne(e,t){var n=e.parentNode,r=e.nodeValue.trim(),l=document.createDocumentFragment(),i="-0wrap__emote0-";t.forEach(function(e){var t,n=(t=e.replace(/^:|:$/g,""),ge.emotes[t]?{type:"twitch",src:ge.template(ge.emotes[t]),name:t}:!!ve.emotes[t]&&{type:"bttv",src:ve.template(ve.emotes[t]),name:t});if(n){var o=JSON.stringify(n);r=r.replace(e,"".concat(i).concat(o).concat(i))}}),r.split(i).forEach(function(t){try{var e=JSON.parse(t),n=(r=(o=e).type,i=o.src,a=o.name,s=o.w,u=o.h,c=document.createElement("img"),s&&(c.width=s),u&&(c.height=u),c.className="emoji ".concat(r,"-emote"),c.title=a,c.alt=a,c.src=i,c);l.appendChild(n)}catch(e){l.appendChild(document.createTextNode(t))}var o,r,i,a,s,u,c}),n.replaceChild(l,e)}function Ee(e){var t;(e.nodeType||(e=0<(t=document.querySelectorAll(".chat-main .text")).length?t[t.length-1]:null),e)&&function(e){for(var t,n=[],o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=o.nextNode();)n.push(t);return n}(e).forEach(function(e){var t=e.nodeValue.trim();if(""!==t){var n=function(e){var t=[],n="",o=!1,r=0;function i(){n="",o=!1}function a(e){n+=e}for(;r<e.length;){var s=e.charAt(r);if(o||":"!==s){if(o){if(":"===s){a(s),"::"!==n&&t.push(n),i(),r++;continue}if(" "===s){i(),r++;continue}a(s)}r++}else o=!0,a(s),r++}return t}(t);0!==n.length&&Ne(e,n)}})}var Te=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"turnOn",function(){if(document.body.classList.add("dubplus-icon-spinning"),ve.loaded||ve.load(),!ge.loaded)return ge.error(t.begin),ge.done(t.begin),void ge.load();t.begin()}),u(l(l(t)),"turnOff",function(e){Dubtrack.Events.unbind("realtime:chat-message",Ee)}),t}return n(i,U),a(i,[{key:"begin",value:function(){document.body.classList.remove("dubplus-icon-spinning"),Ee(document.querySelector(".chat-main")),Dubtrack.Events.bind("realtime:chat-message",Ee)}},{key:"render",value:function(e,t){return f(de,{id:"dubplus-emotes",section:"General",menuTitle:"Emotes",desc:"Adds twitch and bttv emotes in chat.",turnOn:this.turnOn,turnOff:this.turnOff})}}]),i}(),Ae=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"customMentionCheck",function(e){var t=e.message;if(oe.custom.custom_mentions){var n=oe.custom.custom_mentions.split(",").some(function(e){return new RegExp("\\b"+e.trim()+"\\b","i").test(t)});Dubtrack.session.id!==e.user.userInfo.userid&&n&&Dubtrack.room.chat.mentionChatSound.play()}}),u(l(l(t)),"saveCustomMentions",function(e){oe.save("custom","custom_mentions",e)}),t}return n(i,U),a(i,[{key:"turnOn",value:function(){Dubtrack.Events.bind("realtime:chat-message",this.customMentionCheck)}},{key:"turnOff",value:function(){Dubtrack.Events.unbind("realtime:chat-message",this.customMentionCheck)}},{key:"render",value:function(e,t){return f(de,{id:"custom_mentions",section:"General",menuTitle:"Custom Mentions",desc:"Toggle using custom mentions to trigger sounds in chat",turnOn:this.turnOn,turnOff:this.turnOff},f(le,{title:"Custom AFK Message",section:"General",content:"Add your custom mention triggers here (separate by comma)",value:oe.stored.custom.custom_mentions||"",placeholder:"separate, custom triggers, by, comma, :heart:",maxlength:"255",onConfirm:this.saveCustomMentions}))}}]),i}(),Me=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"chatCleanerCheck",function(e){var t=Array.from(document.querySelectorAll("ul.chat-main > li")),n=parseInt(oe.stored.custom.chat_cleaner,10);if(!(isNaN(t.length)||isNaN(n)||!t.length||t.length<n)){var o=t[0].parentElement,r=t.length-n;0<r&&t.splice(0,r).forEach(function(e){o.removeChild(e)})}}),u(l(l(t)),"saveAmount",function(e){var t=parseInt(e,10),n=isNaN(t)?500:t;oe.save("custom","chat_cleaner",n)}),u(l(l(t)),"turnOn",function(){Dubtrack.Events.bind("realtime:chat-message",t.chatCleanerCheck)}),u(l(l(t)),"turnOff",function(){Dubtrack.Events.unbind("realtime:chat-message",t.chatCleanerCheck)}),t}return n(i,U),a(i,[{key:"render",value:function(){return f(de,{id:"chat-cleaner",section:"General",menuTitle:"Chat Cleaner",desc:"Automatically only keep a designated chatItems of chat items while clearing older ones, keeping CPU stress down",turnOn:this.turnOn,turnOff:this.turnOff},f(le,{title:"Chat Cleaner",section:"General",content:"Please specify the number of most recent chat items that will remain in your chat history",value:oe.stored.custom.chat_cleaner||"",placeholder:"500",maxlength:"5",onConfirm:this.saveAmount}))}}]),i}(),Ie=!0,qe={denyDismiss:{title:"Desktop Notifications",content:"You have dismissed or chosen to deny the request to allow desktop notifications. Reset this choice by clearing your cache for the site."},noSupport:{title:"Desktop Notifications",content:"Sorry this browser does not support desktop notifications.  Please use the latest version of Chrome or FireFox"}};function Le(e){var t="function"==typeof e?e:function(){};return"Notification"in window?"granted"===Notification.permission?t(!0,"granted"):"denied"===Notification.permission?t(!1,qe.denyDismiss):void Notification.requestPermission().then(function(e){if("denied"!==e&&"default"!==e)return t(!0,"granted");t(!1,qe.denyDismiss)}):t(!1,qe.noSupport)}function ze(e){var t=Object.assign({},{title:"New Message",content:"",ignoreActiveTab:!1,callback:null,wait:5e3},e);if(!0!==Ie||t.ignoreActiveTab){var n={body:t.content,icon:"https://res.cloudinary.com/hhberclba/image/upload/c_lpad,h_100,w_100/v1400351432/dubtrack_new_logo_fvpxa6.png"},o=new Notification(t.title,n);o.onclick=function(){window.focus(),"function"==typeof t.callback&&t.callback(),o.close()},setTimeout(o.close.bind(o),t.wait)}}window.onfocus=function(){Ie=!0},window.onblur=function(){Ie=!1};var je=function(e){function i(){var e,n;s(this,i);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return u(l(l(n=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{showWarning:!1,warnTitle:"",warnContent:""}),u(l(l(n)),"turnOn",function(){Le(function(e,t){!0===e?Dubtrack.Events.bind("realtime:chat-message",n.notifyOnMention):(n.switchRef.switchOff(!0),n.setState({showWarning:!0,warnTitle:t.title,warnContent:t.content}))})}),u(l(l(n)),"closeModal",function(){n.setState({showWarning:!1})}),u(l(l(n)),"turnOff",function(){Dubtrack.Events.unbind("realtime:chat-message",n.notifyOnMention)}),n}return n(i,U),a(i,[{key:"notifyOnMention",value:function(e){var t=e.message,n=["@"+Dubtrack.session.get("username").toLowerCase()];oe.stored.options.custom_mentions&&oe.stored.custom.custom_mentions&&(n=n.concat(oe.stored.custom.custom_mentions.split(","))),n.some(function(e){return new RegExp("\\b"+e.trim()+"\\b","i").test(t)})&&!this.isActiveTab&&Dubtrack.session.id!==e.user.userInfo.userid&&ze({title:"Message from ".concat(e.user.username),content:t})}},{key:"render",value:function(e,t){var n=this;return f(de,{ref:function(e){return n.switchRef=e},id:"mention_notifications",section:"General",menuTitle:"Notification on Mentions",desc:"Enable desktop notifications when a user mentions you in chat",turnOn:this.turnOn,turnOff:this.turnOff},f(ie,{open:t.showWarning,title:t.warnTitle,content:t.warnContent,onClose:this.closeModal}))}}]),i}(),Pe=function(e){function i(){var e,n;s(this,i);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return u(l(l(n=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{showWarning:!1,warnTitle:"",warnContent:""}),u(l(l(n)),"turnOn",function(){Le(function(e,t){!0===e?Dubtrack.Events.bind("realtime:new-message",n.notify):(n.switchRef.switchOff(!0),n.setState({showWarning:!0,warnTitle:t.title,warnContent:t.content}))})}),u(l(l(n)),"closeModal",function(){n.setState({showWarning:!1})}),u(l(l(n)),"turnOff",function(){Dubtrack.Events.unbind("realtime:new-message",n.notify)}),n}return n(i,U),a(i,[{key:"notify",value:function(e){Dubtrack.session.get("_id")!==e.userid&&ze({title:"You have a new PM",ignoreActiveTab:!0,callback:function(){document.querySelector(".user-messages").click(),setTimeout(function(){document.querySelector('.message-item[data-messageid="'.concat(e.messageid,'"]')).click()},500)},wait:1e4})}},{key:"render",value:function(e,t){var n=this;return f(de,{ref:function(e){return n.switchRef=e},id:"dubplus_pm_notifications",section:"General",menuTitle:"Notification on PM",desc:"Enable desktop notifications when a user receives a private message",turnOn:this.turnOn,turnOff:this.turnOff},f(ie,{open:t.showWarning,title:t.warnTitle,content:t.warnContent,onClose:this.closeModal}))}}]),i}(),Be=function(e){function i(){var e,r;s(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return u(l(l(r=d(this,(e=c(i)).call.apply(e,[this].concat(n))))),"state",{canNotify:!1}),u(l(l(r)),"savePosition",function(e){var t=parseInt(e,10),n=isNaN(t)?2:t;oe.save("custom","dj_notification",n)}),u(l(l(r)),"djNotificationCheck",function(e){if(!(2<e.startTime)){var t=document.querySelector(".queue-position").textContent,n=parseInt(t,10),o=e.startTime<0&&!isNaN(n)?n-1:n;isNaN(n)||o!==oe.stored.custom.dj_notification||(r.canNotify&&ze({title:"DJ Alert!",content:"You will be DJing shortly! Make sure your song is set!",ignoreActiveTab:!0,wait:1e4}),Dubtrack.room.chat.mentionChatSound.play())}}),u(l(l(r)),"turnOn",function(){Le(function(e,t){!0===e&&r.setState({canNotify:!0})}),Dubtrack.Events.bind("realtime:room_playlist-update",r.djNotificationCheck)}),u(l(l(r)),"turnOff",function(){Dubtrack.Events.unbind("realtime:room_playlist-update",r.djNotificationCheck)}),r}return n(i,U),a(i,[{key:"render",value:function(e,t){var n=this;return f(de,{ref:function(e){return n.switchRef=e},id:"dj-notification",section:"General",menuTitle:"DJ Notification",desc:"Notification when you are coming up to be the DJ",turnOn:this.turnOn,turnOff:this.turnOff},f(le,{title:"DJ Notification",section:"General",content:"Please specify the position in queue you want to be notified at",value:oe.stored.custom.dj_notification||"",placeholder:"2",maxlength:"2",onConfirm:this.savePosition}))}}]),i}();Date.now||(Date.now=function(){return(new Date).getTime()}),function(){for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var o=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(o+16,t);return setTimeout(function(){e(o=n)},n-t)},window.cancelAnimationFrame=clearTimeout}}();var We=function(){function o(){var r={flakeCount:35,flakeColor:"#ffffff",flakeIndex:999999,flakePosition:"absolute",minSize:1,maxSize:2,minSpeed:1,maxSpeed:5,round:!1,shadow:!1,collection:!1,image:!1,collectionHeight:40},o=[],i={},a=0,s=0,u=0,c=0,l=function(e,t){return Math.round(e+Math.random()*(t-e))},d=function(e,t){for(var n in t)e.style[n]=t[n]+("width"==n||"height"==n?"px":"")},y=function(e,t,n){this.x=l(u,s-u),this.y=l(0,a),this.size=t,this.speed=n,this.step=0,this.stepSize=l(1,10)/100,r.collection&&(this.target=canvasCollection[l(0,canvasCollection.length-1)]);var o=null;r.image?(o=new Image).src=r.image:(o=document.createElement("div"),d(o,{background:r.flakeColor})),o.className="snowfall-flakes",d(o,{width:this.size,height:this.size,position:r.flakePosition,top:0,left:0,"will-change":"transform",fontSize:0,zIndex:r.flakeIndex}),r.round&&d(o,{"-moz-border-radius":~~r.maxSize+"px","-webkit-border-radius":~~r.maxSize+"px",borderRadius:~~r.maxSize+"px"}),r.shadow&&d(o,{"-moz-box-shadow":"1px 1px 1px #555","-webkit-box-shadow":"1px 1px 1px #555",boxShadow:"1px 1px 1px #555"}),e.tagName===document.body.tagName?document.body.appendChild(o):e.appendChild(o),this.element=o,this.update=function(){var e,t;this.y+=this.speed,this.y>a-(this.size+6)&&this.reset(),e=this.element,t="translateY("+this.y+"px) translateX("+this.x+"px)",e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t,e.style.transform=t,this.step+=this.stepSize,this.x+=Math.cos(this.step),(this.x+this.size>s-u||this.x<u)&&this.reset()},this.reset=function(){this.y=0,this.x=l(u,s-u),this.stepSize=l(1,10)/100,this.size=l(100*r.minSize,100*r.maxSize)/100,this.element.style.width=this.size+"px",this.element.style.height=this.size+"px",this.speed=l(r.minSpeed,r.maxSpeed)}};return{snow:function(e,t){!function(e,t){for(var n in t)e.hasOwnProperty(n)&&(e[n]=t[n])}(r,t),a=(i=e).offsetHeight,s=i.offsetWidth,i.snow=this,"body"===i.tagName.toLowerCase()&&(u=25),window.addEventListener("resize",function(){a=i.clientHeight,s=i.offsetWidth},!0);for(var n=0;n<r.flakeCount;n+=1)o.push(new y(i,l(100*r.minSize,100*r.maxSize)/100,l(r.minSpeed,r.maxSpeed)));!function e(){for(var t=0;t<o.length;t+=1)o[t].update();c=requestAnimationFrame(function(){e()})}()},clear:function(){for(var e=null,t=(e=i.getElementsByClassName?i.getElementsByClassName("snowfall-flakes"):i.querySelectorAll(".snowfall-flakes")).length;t--;)e[t].parentNode===i&&i.removeChild(e[t]);cancelAnimationFrame(c)}}}return{snow:function(e,t){if("string"==typeof t)if(0<e.length)for(var n=0;n<e.length;n++)e[n].snow&&e[n].snow.clear();else e.snow.clear();else if(0<e.length)for(n=0;n<e.length;n++)(new o).snow(e[n],t);else(new o).snow(e,t)}}}(),Fe={round:!0,shadow:!0,flakeCount:50,minSize:1,maxSize:5,minSpeed:5,maxSpeed:5},Re=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"turnOn",function(){document.getElementById("snow-container")||t.makeContainer(),We.snow(document.getElementById("snow-container"),Fe)}),u(l(l(t)),"turnOff",function(){var e=document.getElementById("snow-container");e&&e.remove()}),t}return n(i,U),a(i,[{key:"makeContainer",value:function(){var e=document.createElement("div");e.id="snow-container",e.style.cssText="\n      position:absolute;\n      top:0;\n      left:0;\n      width: 100%;\n      height: 100%;\n    ",document.body.appendChild(e)}},{key:"render",value:function(){var t=this;return f(de,{ref:function(e){return t.switchRef=e},id:"dubplus-snow",section:"General",menuTitle:"Snow",desc:"Make it snow!",turnOn:this.turnOn,turnOff:this.turnOff})}}]),i}(),Ue={particles:[],drops:[],numbase:5,numb:2,height:0,controls:{rain:2,alpha:1,color:200,opacity:1,saturation:100,lightness:50,back:0,multi:!1,speed:1},init:function(){var e=document.createElement("canvas");e.id="dubPlusRainCanvas",e.style.cssText="position : fixed; top : 0px; left : 0px; z-index: 100; pointer-events:none;",document.body.insertBefore(e,document.body.childNodes[0]),this.bindCanvas()},destroy:function(){document.body.removeChild(document.getElementById("dubPlusRainCanvas")),this.unbindCanvas()},bindCanvas:function(){this.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var e=document.getElementById("dubPlusRainCanvas");if(e){var t=e.getContext("2d");this.width,this.height=0,window.onresize=function(){this.width=e.width=window.innerWidth,this.height=e.height=window.innerHeight},window.onresize(),this.particles,this.drops=[],this.numbase=5,this.numb=2;var n=this;!function e(){n.requestAnimFrame(e),n.update(),n.rendu(t)}()}},buildRainParticle:function(e,t,n){for(n||(n=this.numb);n--;)this.particles.push({speedX:.25*Math.random(),speedY:9*Math.random()+1,X:e,Y:t,alpha:1,color:"hsla("+this.controls.color+","+this.controls.saturation+"%, "+this.controls.lightness+"%,"+this.controls.opacity+")"})},explosion:function(e,t,n,o){for(o||(o=this.numbase);o--;)this.drops.push({speedX:4*Math.random()-2,speedY:-4*Math.random(),X:e,Y:t,radius:.65+Math.floor(1.6*Math.random()),alpha:1,color:n})},rendu:function(e){1==this.controls.multi&&(this.controls.color=360*Math.random()),e.save(),e.clearRect(0,0,width,height);for(var t,n=this.particles,o=this.drops,r=2*Math.PI,i=0;t=n[i];i++)e.globalAlpha=t.alpha,e.fillStyle=t.color,e.fillRect(t.X,t.Y,t.speedY/4,t.speedY);var a;for(i=0;a=o[i];i++)e.globalAlpha=a.alpha,e.fillStyle=a.color,e.beginPath(),e.arc(a.X,a.Y,a.radius,0,r),e.fill();e.strokeStyle="white",e.lineWidth=2,e.restore()},update:function(){for(var e,t=this.particles,n=this.drops,o=0;e=t[o];o++)e.X+=e.speedX,e.Y+=e.speedY+5,e.Y>height-15&&(t.splice(o--,1),this.explosion(e.X,e.Y,e.color));var r;for(o=0;r=n[o];o++)r.X+=r.speedX,r.Y+=r.speedY,r.radius-=.075,0<r.alpha?r.alpha-=.005:r.alpha=0,r.radius<0&&n.splice(o--,1);for(o=this.controls.rain;o--;)this.buildRainParticle(Math.floor(Math.random()*width),-15)},unbindCanvas:function(){this.requestAnimFrame=function(){}}},Ke=function(e){function t(){return s(this,t),d(this,c(t).apply(this,arguments))}return n(t,U),a(t,[{key:"turnOn",value:function(){Ue.init()}},{key:"turnOff",value:function(){Ue.destroy()}},{key:"render",value:function(e,t){return f(de,{id:"dubplus-rain",section:"General",menuTitle:"Rain",desc:"Make it rain!",turnOn:this.turnOn,turnOff:this.turnOff})}}]),t}();function Ge(e){return Dubtrack.helpers.isDubtrackAdmin(e)||Dubtrack.room.users.getIfOwner(e)||Dubtrack.room.users.getIfManager(e)||Dubtrack.room.users.getIfMod(e)}var Ve=function(e){var t=e.data,n=e.click;return f("li",{onClick:function(){return n("@"+t.username+" ")},className:"dubinfo-preview-item"},f("div",{className:"dubinfo-image"},f("img",{src:"https://api.dubtrack.fm/user/".concat(t.userid,"/image")})),f("span",{className:"dubinfo-text"},"@",t.username))},He=function(e){function t(){return s(this,t),d(this,c(t).apply(this,arguments))}return n(t,U),a(t,[{key:"getBgColor",value:function(){var e,t=this.props.type.replace("dubs","");if("up"===t)e=document.querySelector(".dubup");else{if("down"!==t)return;e=document.querySelector(".dubdown")}return e.classList.contains("voted")?window.getComputedStyle(e).backgroundColor:window.getComputedStyle(e.querySelector(".icon-".concat(t,"vote"))).color}},{key:"updateChat",value:function(e){var t=document.getElementById("chat-txt-message");t.value=e,t.focus()}},{key:"makeList",value:function(){var n=this;return this.props.dubs.map(function(e,t){return f(Ve,{data:e,click:n.updateChat,key:"info-".concat(n.props.type,"-").concat(t)})})}},{key:"render",value:function(e){var t=e.type,n=e.isMod,o="No ".concat(t," have been casted yet!");"grabs"===t&&(o="This song hasn't been grabbed yet!");var r=this.makeList(),i=["dubinfo-preview","dubinfo-".concat(t)];return 0===r.length&&(r=f("li",{className:"dubinfo-preview-none"},o),i.push("dubinfo-no-dubs")),"downdubs"!==t||n||i.push("dubinfo-unauthorized"),f("ul",{style:{borderColor:this.getBgColor()},className:i.join(" ")},r)}}]),t}(),Ye=function(e){function r(){var e,i;s(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return u(l(l(i=d(this,(e=c(r)).call.apply(e,[this].concat(n))))),"state",{isOn:!1,showWarning:!1,upDubs:[],downDubs:[],grabs:[]}),u(l(l(i)),"userIsMod",Ge(Dubtrack.session.id)),u(l(l(i)),"turnOn",function(){i.setState({isOn:!0},i.resetDubs),Dubtrack.Events.bind("realtime:room_playlist-dub",i.dubWatcher),Dubtrack.Events.bind("realtime:room_playlist-queue-update-grabs",i.grabWatcher),Dubtrack.Events.bind("realtime:user-leave",i.dubUserLeaveWatcher),Dubtrack.Events.bind("realtime:room_playlist-update",i.resetDubs),Dubtrack.Events.bind("realtime:room_playlist-update",i.resetGrabs)}),u(l(l(i)),"turnOff",function(){i.setState({isOn:!1}),Dubtrack.Events.unbind("realtime:room_playlist-dub",i.dubWatcher),Dubtrack.Events.unbind("realtime:room_playlist-queue-update-grabs",i.grabWatcher),Dubtrack.Events.unbind("realtime:user-leave",i.dubUserLeaveWatcher),Dubtrack.Events.unbind("realtime:room_playlist-update",i.resetDubs),Dubtrack.Events.unbind("realtime:room_playlist-update",i.resetGrabs)}),u(l(l(i)),"closeModal",function(){i.setState({showWarning:!1})}),u(l(l(i)),"dubWatcher",function(t){var e=i.state,n=e.upDubs,o=e.downDubs,r={userid:t.user._id,username:t.user.username};"updub"===t.dubtype&&(0===n.filter(function(e){return e.userid===t.user._id}).length&&i.setState(function(e){return{upDubs:[].concat(y(e.upDubs),[r])}}),0<o.filter(function(e){return e.userid===t.user._id}).length&&i.setState(function(e){return{downDubs:e.downDubs.filter(function(e){return e.userid!==t.user._id})}}));"downdub"===t.dubtype&&(0===o.filter(function(e){return e.userid===t.user._id}).length&&i.userIsMod&&i.setState(function(e){return{downDubs:[].concat(y(e.downDubs),[r])}}),0<n.filter(function(e){return e.userid===t.user._id}).length&&i.setState(function(e){return{upDubs:e.upDubs.filter(function(e){return e.userid!==t.user._id})}}))}),u(l(l(i)),"grabWatcher",function(t){if(i.state.grabs.filter(function(e){return e.userid===t.user._id}).length<=0){var n={userid:t.user._id,username:t.user.username};i.setState(function(e){return{grabs:[].concat(y(e.grabs),[n])}})}}),u(l(l(i)),"dubUserLeaveWatcher",function(t){var e=i.state.upDubs.filter(function(e){return e.userid!==t.user._id}),n=i.state.downDubs.filter(function(e){return e.userid!==t.user._id}),o=i.state.grabs.filter(function(e){return e.userid!==t.user._id});i.setState({upDubs:e,downDubs:n,grabs:o})}),u(l(l(i)),"resetDubs",function(){i.setState({upDubs:[],downDubs:[]},i.handleReset)}),u(l(l(i)),"resetGrabs",function(){i.setState({grabs:[]})}),i}return n(r,U),a(r,[{key:"handleReset",value:function(){var r=this;fe("https://api.dubtrack.fm/room/".concat(Dubtrack.room.model.id,"/playlist/active/dubs")).then(function(e){e.data&&e.data.upDubs&&e.data.upDubs.forEach(function(o){if(!(0<r.state.upDubs.filter(function(e){return e.userid===o.userid}).length)){var e=Dubtrack.room.users.collection.findWhere({userid:o.userid});if(e&&e.attributes){if(e.attributes._user.username){var t={userid:o.userid,username:e.attributes._user.username};r.setState(function(e){return{upDubs:[].concat(y(e.upDubs),[t])}})}}else fe("https://api.dubtrack.fm/user/"+o.userid).then(function(e){var t=e.data;if(t&&t.userinfo&&t.userinfo.username){var n={userid:o.userid,username:t.userinfo.username};r.setState(function(e){return{upDubs:[].concat(y(e.upDubs),[n])}})}})}}),e.data&&e.data.downDubs&&r.userIsMod&&e.data.downDubs.forEach(function(o){if(!(0<r.state.downDubs.filter(function(e){return e.userid===o.userid}).length)){var e=Dubtrack.room.users.collection.findWhere({userid:o.userid});if(e&&e.attributes){if(e.attributes._user.username){var t={userid:o.userid,username:e.attributes._user.username};r.setState(function(e){return{downDubs:[].concat(y(e.downDubs),[t])}})}}else fe("https://api.dubtrack.fm/user/"+o.userid).then(function(e){var t=e.data;if(t&&t.userinfo&&t.userinfo.username){var n={userid:o.userid,username:t.userinfo.username};r.setState(function(e){return{downDubs:[].concat(y(e.downDubs),[n])}})}})}})})}},{key:"componentWillMount",value:function(){this.upElem=document.querySelector(".dubup").parentElement,this.upElem.classList.add("dubplus-updub-btn"),this.downElem=document.querySelector(".dubdown").parentElement,this.downElem.classList.add("dubplus-downdub-btn"),this.grabElem=document.querySelector(".add-to-playlist-button").parentElement,this.grabElem.classList.add("dubplus-grab-btn")}},{key:"render",value:function(e,t){return f(de,{id:"dubplus-dubs-hover",section:"General",menuTitle:"Show Dub info on Hover",desc:"Show Dub info on Hover.",turnOn:this.turnOn,turnOff:this.turnOff},f(ie,{open:t.showWarning,title:"Vote & Grab Info",content:"Please note that this feature is currently still in development. We are waiting on the ability to pull grab vote information from Dubtrack on load. Until then the only grabs you will be able to see are those you are present in the room for.",onClose:this.closeModal}),t.isOn?f("span",null,f(Z,{into:this.upElem},f(He,{type:"updubs",dubs:t.upDubs})),f(Z,{into:this.downElem},f(He,{type:"downdubs",isMod:this.userIsMod,dubs:t.downDubs})),f(Z,{into:this.grabElem},f(He,{type:"grabs",dubs:t.grabs}))):null)}}]),r}();var Je=function(e){function t(){return s(this,t),d(this,c(t).apply(this,arguments))}return n(t,U),a(t,[{key:"turnOn",value:function(){Ge(Dubtrack.session.id)&&Dubtrack.Events.bind("realtime:room_playlist-dub",this.downdubWatcher)}},{key:"turnOff",value:function(){Dubtrack.Events.unbind("realtime:room_playlist-dub",this.downdubWatcher)}},{key:"downdubWatcher",value:function(e){if(Dubtrack.session.get("username")===Dubtrack.room.users.collection.findWhere({userid:Dubtrack.room.player.activeSong.attributes.song.userid}).attributes._user.username&&"downdub"===e.dubtype){var t=function(e,t){var n=document.createElement("li");n.className="dubplus-chat-system dubplus-chat-system-downdub";var o=document.createElement("div");o.className="chatDelete",o.onclick=function(e){return e.currentTarget.parentElement.remove()};var r=document.createElement("span");r.className="icon-close";var i=document.createElement("div");return i.className="text",i.textContent="@".concat(e," has downdubbed your song ").concat(t),o.appendChild(r),n.appendChild(o),n.appendChild(i),n}(e.user.username,Dubtrack.room.player.activeSong.attributes.songInfo.name);document.querySelector("ul.chat-main").appendChild(t)}}},{key:"render",value:function(){return f(de,{id:"dubplus-downdubs",section:"General",menuTitle:"Downdubs in Chat (mods only)",desc:"Toggle showing downdubs in the chat box (mods only)",turnOn:this.turnOn,turnOff:this.turnOff})}}]),t}();var Xe=function(e){function t(){return s(this,t),d(this,c(t).apply(this,arguments))}return n(t,U),a(t,[{key:"turnOn",value:function(){Dubtrack.Events.bind("realtime:room_playlist-dub",this.updubWatcher)}},{key:"turnOff",value:function(){Dubtrack.Events.unbind("realtime:room_playlist-dub",this.updubWatcher)}},{key:"updubWatcher",value:function(e){if(Dubtrack.session.get("username")===Dubtrack.room.users.collection.findWhere({userid:Dubtrack.room.player.activeSong.attributes.song.userid}).attributes._user.username&&"updub"===e.dubtype){var t=function(e,t){var n=document.createElement("li");n.className="dubplus-chat-system dubplus-chat-system-updub";var o=document.createElement("div");o.className="chatDelete",o.onclick=function(e){return e.currentTarget.parentElement.remove()};var r=document.createElement("span");r.className="icon-close";var i=document.createElement("div");return i.className="text",i.textContent="@".concat(e," has updubbed your song ").concat(t),o.appendChild(r),n.appendChild(o),n.appendChild(i),n}(e.user.username,Dubtrack.room.player.activeSong.attributes.songInfo.name);document.querySelector("ul.chat-main").appendChild(t)}}},{key:"render",value:function(){return f(de,{id:"dubplus-updubs",section:"General",menuTitle:"Updubs in Chat",desc:"Toggle showing updubs in the chat box",turnOn:this.turnOn,turnOff:this.turnOff})}}]),t}();var $e=function(e){function t(){return s(this,t),d(this,c(t).apply(this,arguments))}return n(t,U),a(t,[{key:"turnOn",value:function(){Dubtrack.Events.bind("realtime:room_playlist-queue-update-grabs",this.grabChatWatcher)}},{key:"turnOff",value:function(){Dubtrack.Events.unbind("realtime:room_playlist-queue-update-grabs",this.grabChatWatcher)}},{key:"grabChatWatcher",value:function(e){if(Dubtrack.session.get("username")===Dubtrack.room.users.collection.findWhere({userid:Dubtrack.room.player.activeSong.attributes.song.userid}).attributes._user.username&&!Dubtrack.room.model.get("displayUserGrab")){var t=function(e,t){var n=document.createElement("li");n.className="dubplus-chat-system dubplus-chat-system-grab";var o=document.createElement("div");o.className="chatDelete",o.onclick=function(e){return e.currentTarget.parentElement.remove()};var r=document.createElement("span");r.className="icon-close";var i=document.createElement("div");return i.className="text",i.textContent="@".concat(e," has grabbed your song ").concat(t),o.appendChild(r),n.appendChild(o),n.appendChild(i),n}(e.user.username,Dubtrack.room.player.activeSong.attributes.songInfo.name);document.querySelector("ul.chat-main").appendChild(t)}}},{key:"render",value:function(){return f(de,{id:"dubplus-grabschat",section:"General",menuTitle:"Grabs in Chat",desc:"Toggle showing grabs in the chat box",turnOn:this.turnOn,turnOff:this.turnOff})}}]),t}(),Qe=function(){return f(ue,{id:"dubplus-general",title:"General",settingsKey:"general"},f(he,null),f(ye,null),f(De,null),f(Te,null),f(Ae,null),f(Me,null),f(je,null),f(Pe,null),f(Be,null),f(Ye,null),f(Je,null),f(Xe,null),f($e,null),f(Re,null),f(Ke,null))};function Ze(){var e=document.querySelector("#room-main-player-container");e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}var et=function(){return f(ce,{id:"dubplus-fullscreen",section:"User Interface",menuTitle:"Fullscreen Video",desc:"Toggle fullscreen video mode",icon:"arrows-alt",onClick:Ze})};function tt(){document.body.classList.add("dubplus-split-chat")}function nt(){document.body.classList.remove("dubplus-split-chat")}var ot=function(){return f(de,{id:"dubplus-split-chat",section:"User Interface",menuTitle:"Split Chat",desc:"Toggle Split Chat UI enhancement",turnOn:tt,turnOff:nt})};function rt(){document.body.classList.add("dubplus-video-only")}function it(){document.body.classList.remove("dubplus-video-only")}var at=function(){return f(de,{id:"dubplus-video-only",section:"User Interface",menuTitle:"Hide Chat",desc:"Toggles hiding the chat box",turnOn:rt,turnOff:it})};function st(){document.body.classList.add("dubplus-chat-only")}function ut(){document.body.classList.remove("dubplus-chat-only")}var ct=function(){return f(de,{id:"dubplus-chat-only",section:"User Interface",menuTitle:"Hide Video",desc:"Toggles hiding the video box",turnOn:st,turnOff:ut})};function lt(){document.body.classList.add("dubplus-hide-avatars")}function dt(){document.body.classList.remove("dubplus-hide-avatars")}var yt=function(){return f(de,{id:"dubplus-hide-avatars",section:"User Interface",menuTitle:"Hide Avatars",desc:"Toggle hiding user avatars in the chat box.",turnOn:lt,turnOff:dt})};function ht(){document.body.classList.add("dubplus-hide-bg")}function mt(){document.body.classList.remove("dubplus-hide-bg")}var pt=function(){return f(de,{id:"dubplus-hide-bg",section:"User Interface",menuTitle:"Hide Background",desc:"Toggle hiding background image.",turnOn:ht,turnOff:mt})};function ft(){document.body.classList.add("dubplus-show-timestamp")}function xt(){document.body.classList.remove("dubplus-show-timestamp")}var bt=function(){return f(de,{id:"dubplus-show-timestamp",section:"User Interface",menuTitle:"Show Timestamps",desc:"Toggle always showing chat message timestamps.",turnOn:ft,turnOff:xt})},gt=function(){return f(ue,{id:"dubplus-ui",title:"UI",settingsKey:"user-interface"},f(et,null),f(ot,null),f(at,null),f(ct,null),f(yt,null),f(pt,null),f(bt,null))};function vt(e){if(32===(e.keyCode||e.which)){var t=event.target.tagName.toLowerCase();"input"!==t&&"textarea"!==t&&Dubtrack.room.player.mutePlayer()}}function _t(){document.addEventListener("keyup",vt)}function wt(){document.removeEventListener("keyup",vt)}var kt=function(){return f(de,{id:"dubplus-spacebar-mute",section:"Settings",menuTitle:"Spacebar Mute",desc:"Turn on/off the ability to mute current song with the spacebar.",turnOn:_t,turnOff:wt})};function Ct(e){return e.returnValue=""}function St(){window.addEventListener("beforeunload",Ct)}function Ot(){window.removeEventListener("beforeunload",Ct)}var Dt=function(){return f(de,{id:"warn_redirect",section:"Settings",menuTitle:"Warn On Navigation",desc:"Warns you when accidentally clicking on a link that takes you out of dubtrack.",turnOn:St,turnOff:Ot})},Nt=function(){return f(ue,{id:"dubplus-settings",title:"Settings",settingsKey:"settings"},f(kt,null),f(Dt,null))},Et=function(e,t){var n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.className=e||"",n.href=t,n};var Tt={load:function(e,t){if(e){var n=Et(t,oe.srcRoot+e+"?1549341988016");document.head.appendChild(n)}},loadExternal:function(e,t){if(e){var n=Et(t,e);document.head.appendChild(n)}}};function At(){fe("https://api.dubtrack.fm/room/"+Dubtrack.room.model.get("roomUrl")).then(function(e){var t=e.data.description,n=new RegExp(/(@dub(x|plus|\+)=)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/,"i"),r=null;t.replace(n,function(e,t,n,o){console.log("loading community css theme:",o),r=o}),r&&Tt.loadExternal(r,"dubplus-comm-theme")})}function Mt(){var e=document.querySelector(".dubplus-comm-theme");e&&e.remove()}var It=function(){return f(de,{id:"dubplus-comm-theme",section:"Customize",menuTitle:"Community Theme",desc:"Toggle Community CSS theme.",turnOn:At,turnOff:Mt})},qt=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"isOn",!1),u(l(l(t)),"state",{showModal:!1}),u(l(l(t)),"turnOn",function(){t.isOn=!0,oe.stored.custom.css?Tt.loadExternal(oe.stored.custom.css,"dubplus-custom-css"):t.setState({showModal:!0})}),u(l(l(t)),"turnOff",function(){t.isOn=!1,document.querySelector(".dubplus-custom-css").remove()}),u(l(l(t)),"save",function(e){oe.save("custom","css",e),t.isOn&&""!==e&&Tt.loadExternal(oe.stored.custom.css,"dubplus-custom-css"),t.setState({showModal:!1})}),t}return n(i,U),a(i,[{key:"render",value:function(e,t){return f(de,{id:"dubplus-custom-css",section:"Customize",menuTitle:"Custom CSS",desc:"Add your own custom CSS.",turnOn:this.turnOn,turnOff:this.turnOff},f(le,{showModal:t.showModal,title:"Custom CSS",section:"Customize",content:"Enter a url location for your custom css",value:oe.stored.custom.css||"",placeholder:"https://example.com/example.css",maxlength:"500",onConfirm:this.save}))}}]),i}(),Lt=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"isOn",!1),u(l(l(t)),"state",{showModal:!1}),u(l(l(t)),"turnOn",function(){t.isOn=!0,oe.stored.custom.bg?t.addCustomBG(oe.stored.custom.bg):t.setState({showModal:!0})}),u(l(l(t)),"turnOff",function(){t.isOn=!1,t.revertBG()}),u(l(l(t)),"save",function(e){oe.save("custom","bg",e),t.isOn&&""!==e&&t.addCustomBG(e),t.setState({showModal:!1})}),t}return n(i,U),a(i,[{key:"addCustomBG",value:function(e){var t=document.querySelector(".backstretch-item img");this.saveSrc=t.src,t.src=e}},{key:"revertBG",value:function(){document.querySelector(".backstretch-item img").src=this.saveSrc}},{key:"render",value:function(e,t){return f(de,{id:"dubplus-custom-bg",section:"Customize",menuTitle:"Custom Background Image",desc:"Add your own custom Background.",turnOn:this.turnOn,turnOff:this.turnOff},f(le,{showModal:t.showModal,title:"Custom Background Image",section:"Customize",content:"Enter the full URL of an image. We recommend using a .jpg file. Leave blank to remove the current background image",value:oe.stored.custom.bg||"",placeholder:"https://example.com/big-image.jpg",maxlength:"500",onConfirm:this.save}))}}]),i}(),zt="Enter the full URL of a sound file. We recommend using an .mp3 file. Leave blank to go back to Dubtrack's default sound",jt=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"isOn",!1),u(l(l(t)),"state",{showModal:!1,modalMessage:zt}),u(l(l(t)),"turnOn",function(){t.isOn=!0,oe.stored.custom.notificationSound?Dubtrack.room.chat.mentionChatSound.url=oe.stored.custom.notificationSound:t.setState({showModal:!0,modalMessage:zt})}),u(l(l(t)),"turnOff",function(){t.isOn=!1,Dubtrack.room.chat.mentionChatSound.url="/assets/music/user_ping.mp3",t.setState({showModal:!1})}),u(l(l(t)),"save",function(e){soundManager.canPlayURL(e)?(oe.save("custom","notificationSound",e),t.isOn&&(Dubtrack.room.chat.mentionChatSound.url=e),t.setState({showModal:!1})):t.setState({modalMessage:"You've entered an invalid sound url! Please make sure you are entering the full, direct url to the file. IE: https://example.com/sweet-sound.mp3",showModal:!0})}),u(l(l(t)),"onCancel",function(){oe.stored.custom.notificationSound||t.turnOff()}),t}return n(i,U),a(i,[{key:"render",value:function(e,t){return f(de,{id:"dubplus-custom-notification-sound",section:"Customize",menuTitle:"Custom Notification Sound",desc:"Change the notification sound to a custom one.",turnOn:this.turnOn,turnOff:this.turnOff},f(le,{showModal:t.showModal,title:"Custom Notification Sound",section:"Customize",content:t.modalMessage,value:oe.stored.custom.notificationSound||"",placeholder:"https://example.com/sweet-sound.mp3",maxlength:"500",onConfirm:this.save,onCancel:this.onCancel}))}}]),i}(),Pt=function(){return f(ue,{id:"dubplus-customize",title:"Customize",settingsKey:"customize"},f(It,null),f(qt,null),f(Lt,null),f(jt,null))},Bt=function(){return setTimeout(function(){K(f(Y,null),document.querySelector(".player_sharing")),K(f(X,null),document.querySelector(".player_sharing")),K(f(te,null),document.querySelector(".chat-text-box-icons"))},10),f("section",{className:"dubplus-menu"},f("p",{className:"dubplus-menu-header"},"Dub+ Options"),f(Qe,null),f(gt,null),f(Nt,null),f(Pt,null),f(ue,{id:"dubplus-contacts",title:"Contacts",settingsKey:"contact"},f("li",{class:"dubplus-menu-icon"},f("span",{class:"fa fa-bug"}),f("a",{href:"https://discord.gg/XUkG3Qy",class:"dubplus-menu-label",target:"_blank"},"Report bugs on Discord")),f("li",{class:"dubplus-menu-icon"},f("span",{class:"fa fa-reddit-alien"}),f("a",{href:"https://www.reddit.com/r/DubPlus/",class:"dubplus-menu-label",target:"_blank"},"Reddit")),f("li",{class:"dubplus-menu-icon"},f("span",{class:"fa fa-facebook"}),f("a",{href:"https://facebook.com/DubPlusScript",class:"dubplus-menu-label",target:"_blank"},"Facebook")),f("li",{class:"dubplus-menu-icon"},f("span",{class:"fa fa-twitter"}),f("a",{href:"https://twitter.com/DubPlusScript",class:"dubplus-menu-label",target:"_blank"},"Twitter"))))};function Wt(e,t){for(var n=e.split("."),o=n.length,r=t||window,i=0;i<o;i++){if(void 0===r[n[i]])return!1;r=r[n[i]]}return!0}function Ft(e,t){for(var n=e.length,o=t||window,r=0;r<n;r++)if(!Wt(e[r],o))return console.log(e[r],"is not found yet"),!1;return!0}function Rt(t,e){if("string"==typeof t||Array.isArray(t)){var n=function(){},o=function(){},r=Object.assign({},{interval:500,seconds:15,isNode:!1},e),i=Array.isArray(t)?Ft:Wt;r.isNode&&(i=function(e){return null!==typeof document.querySelector(e)});var a=0,s=1e3*r.seconds/r.interval,u=function e(){return a++,i(t)?n():a<s?void window.setTimeout(e,r.interval):o()};return{then:function(e){return"function"==typeof e&&(n=e),window.setTimeout(u,r.interval),this},fail:function(e){return"function"==typeof e&&(o=e),this}}}console.warn("WaitFor: invalid first argument")}var Ut,Kt,Gt,Vt,Ht={fontFamily:"'Trebuchet MS', Helvetica, sans-serif",zIndex:"2147483647",color:"white",position:"fixed",top:"69px",right:"-250px",background:"#222",padding:"10px",lineHeight:1,boxShadow:"0px 0px 5px 0px rgba(0,0,0,0.75)",borderRadius:"5px",overflow:"hidden",width:"230px",transition:"right 200ms",cursor:"pointer"},Yt={float:"left",width:"26px",marginRight:"5px"},Jt={display:"table-cell",width:"10000px",paddingTop:"5px"},Xt=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{mainStyles:Ht}),u(l(l(t)),"dismiss",function(){t.setState(function(e,t){return{mainStyles:Object.assign({},e.mainStyles,{right:"-250px"})}})}),t}return n(i,U),a(i,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState(function(e,t){return{mainStyles:Object.assign({},e.mainStyles,{right:"13px"})}})},200)}},{key:"componentWillUnmount",value:function(){this.dismiss()}},{key:"render",value:function(e,t){return f("div",{style:t.mainStyles,onClick:this.dismiss},f("div",{style:Yt},f("img",{src:oe.srcRoot+"/images/dubplus.svg",alt:"DubPlus icon"})),f("span",{style:Jt},e.text||"Waiting for Dubtrack..."))}}]),i}(),$t=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{open:!1}),u(l(l(t)),"toggle",function(){var e=document.querySelector(".dubplus-menu");t.state.open?(e.classList.remove("dubplus-menu-open"),t.setState({open:!1})):(e.classList.add("dubplus-menu-open"),t.setState({open:!0}))}),t}return n(i,U),a(i,[{key:"render",value:function(e,t){return f("div",{className:"dubplus-icon",onClick:this.toggle},f("img",{src:"".concat(oe.srcRoot,"/images/dubplus.svg"),alt:"DubPlus Icon"}))}}]),i}();[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),"undefined"==typeof Promise&&(Ut="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js",Gt=document.createElement("script"),Vt=document.getElementsByTagName("script")[0],Gt.async=1,Gt.onload=Gt.onreadystatechange=function(e,t){(t||!Gt.readyState||/loaded|complete/.test(Gt.readyState))&&(Gt.onload=Gt.onreadystatechange=null,Gt=void 0,t||Kt&&Kt())},Gt.onerror=function(e){Kt&&Kt(e)},Gt.src=Ut,Vt.parentNode.insertBefore(Gt,Vt)),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),document.getElementById("dubplus-script-ext")||setTimeout(function(){Tt.loadExternal("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"),Tt.load("/css/dubplus.css")},1),K(f(function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return u(l(l(t=d(this,(e=c(i)).call.apply(e,[this].concat(o))))),"state",{loading:!0,error:!1,errorMsg:"",failed:!1}),t}return n(i,U),a(i,[{key:"componentDidMount",value:function(){var e=this;if(window.DubPlus)Dubtrack.session.id?this.showError("Dub+ is already loaded"):this.showError("You're not logged in. Please login to use Dub+.");else{new Rt(["Dubtrack.session.id","Dubtrack.room.chat","Dubtrack.Events","Dubtrack.room.player","Dubtrack.helpers.cookie","Dubtrack.room.model","Dubtrack.room.users"],{seconds:120}).then(function(){e.setState({loading:!1,error:!1})}).fail(function(){Dubtrack.session.id?(e.showError("Something happed, refresh and try again"),se.event("Dub+ lib","load","failed")):e.showError("You're not logged in. Please login to use Dub+.")})}}},{key:"showError",value:function(e){this.setState({loading:!1,error:!0,errorMsg:e})}},{key:"render",value:function(e,t){var n=this;return t.loading?f(Xt,null):t.error?f(ie,{title:"Dub+ Error",onClose:function(){n.setState({failed:!0,error:!1})},content:t.errorMsg}):t.failed?null:(document.querySelector("html").classList.add("dubplus"),f(Bt,null))}}]),i}(),null),document.body),new Rt(".header-right-navigation .user-messages",{seconds:60,isNode:!0}).then(function(){K(f($t,null),document.querySelector(".header-right-navigation"))});return{version:"2.0.0",description:"Dub+ - A simple script/extension for Dubtrack.fm",license:"MIT",bugs:"https://github.com/DubPlus/DubPlus/issues"}}();
