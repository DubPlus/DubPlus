var DubPlus=function(){"use strict";/*!
     /#######            /##                
    | ##__  ##          | ##          /##   
    | ##  \ ## /##   /##| #######    | ##   
    | ##  | ##| ##  | ##| ##__  ## /########
    | ##  | ##| ##  | ##| ##  \ ##|__  ##__/
    | ##  | ##| ##  | ##| ##  | ##   | ##   
    | #######/|  ######/| #######/   |__/   
    |_______/  ______/ |_______/           
                                            
                                            
    https://github.com/DubPlus/DubPlus

    MIT License 

    Copyright (c) 2024 DubPlus

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.
*/var Se=Array.isArray,Ao=Array.from,tn=Object.isFrozen,nn=Object.defineProperty,on=Object.getOwnPropertyDescriptor,Qo=Object.getOwnPropertyDescriptors,zo=Object.prototype,Fo=Array.prototype,rn=Object.getPrototypeOf;const he=2,sn=4,xe=8,an=16,ee=32,_t=64,le=128,Xe=256,Z=512,te=1024,ve=2048,ge=4096,Ce=8192,Po=16384,Ze=32768,Y=Symbol("$state"),jo=Symbol("$state.frozen"),Ro=Symbol("");function un(e){return e===this.v}function qo(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ln(e){return!qo(e,this.v)}const je=1,yt=2,Bo=4,cn=8,Jo=16,Et=64,Yo=1,Ko=2,Oe=Symbol(),dn=["touchstart","touchmove","touchend"];function Wo(e){throw new Error("effect_in_teardown")}function Vo(){throw new Error("effect_in_unowned_derived")}function $o(e){throw new Error("effect_orphan")}function Ho(){throw new Error("effect_update_depth_exceeded")}function Go(){throw new Error("state_unsafe_mutation")}function K(e){return{f:0,reactions:null,equals:un,v:e,version:0}}function kt(e){var n;const t=K(e);return t.equals=ln,A!==null&&A.l!==null&&((n=A.l).s??(n.s=[])).push(t),t}function U(e,t){var n=e.v!==Oe;return!ne&&n&&W!==null&&Mt()&&W.f&he&&Go(),e.equals(t)||(e.v=t,e.version++,Mt()&&n&&N!==null&&N.f&Z&&!(N.f&ee)&&(R!==null&&R.includes(e)?(X(N,te),at(N)):ce===null?ui([e]):ce.push(e)),Lt(e,te,!0)),t}function Xo(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Zo(e){if(Se(e))for(var t=0;t<e.length;t++){var n=e[t];n.isConnected&&n.remove()}else e.isConnected&&e.remove()}function fn(e){N===null&&W===null&&$o(),Dt&&Wo()}function mn(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Te(e,t,n){var o=(e&_t)!==0,i={ctx:A,deps:null,dom:null,f:e|te,first:null,fn:t,last:null,next:null,parent:o?null:N,prev:null,teardown:null,transitions:null};if(n){var r=Me;try{xn(!0),st(i),i.f|=Po}finally{xn(r)}}else t!==null&&at(i);var s=n&&i.deps===null&&i.first===null&&i.dom===null&&i.teardown===null;if(!s&&W!==null&&!o){var l=W.f;l&he&&(l&le&&Vo(),N!==null&&mn(i,N)),mn(i,W)}return i}function ei(e){const t=Te(xe,null,!1);return X(t,Z),t.teardown=e,t}function be(e){fn();var t=N!==null&&(N.f&xe)!==0&&A!==null&&!A.m;if(t){var n=A;(n.e??(n.e=[])).push(e)}else{var o=St(e);return o}}function ti(e){return fn(),et(e)}function ni(e){const t=Te(_t,e,!0);return()=>{Re(t)}}function St(e){return Te(sn,e,!1)}function et(e){return Te(xe,e,!0)}function D(e){return et(e)}function xt(e,t=0){return Te(xe|an|t,e,!0)}function Ue(e){return Te(xe|ee,e,!0)}function pn(e){var t=e.teardown;if(t!==null){const n=Dt,o=ne;Cn(!0),On(!0);try{t.call(null)}finally{Cn(n),On(o)}}}function Re(e,t=!0){var n=e.dom;if(n!==null&&t&&Zo(n),It(e,t),rt(e,0),X(e,Ce),e.transitions)for(const i of e.transitions)i.stop();pn(e);var o=e.parent;o!==null&&e.f&ee&&o.first!==null&&hn(e),e.next=e.prev=e.teardown=e.ctx=e.dom=e.deps=e.parent=e.fn=null}function hn(e){var t=e.parent,n=e.prev,o=e.next;n!==null&&(n.next=o),o!==null&&(o.prev=n),t!==null&&(t.first===e&&(t.first=o),t.last===e&&(t.last=n))}function Ct(e,t){var n=[];Ot(e,n,!0),vn(n,()=>{Re(e),t&&t()})}function vn(e,t){var n=e.length;if(n>0){var o=()=>--n||t();for(var i of e)i.out(o)}else t()}function Ot(e,t,n){if(!(e.f&ge)){if(e.f^=ge,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var o=e.first;o!==null;){var i=o.next,r=(o.f&Ze)!==0||(o.f&ee)!==0;Ot(o,t,r?n:!1),o=i}}}function tt(e){gn(e,!0)}function gn(e,t){if(e.f&ge){e.f^=ge,Be(e)&&st(e);for(var n=e.first;n!==null;){var o=n.next,i=(n.f&Ze)!==0||(n.f&ee)!==0;gn(n,i?t:!1),n=o}if(e.transitions!==null)for(const r of e.transitions)(r.is_global||t)&&r.in()}}function H(e,t=!0,n=null,o){if(typeof e=="object"&&e!=null&&!tn(e)&&!(jo in e)){if(Y in e){const r=e[Y];if(r.t===e||r.p===e)return r.p}const i=rn(e);if(i===zo||i===Fo){const r=new Proxy(e,oi);return nn(e,Y,{value:{s:new Map,v:K(0),a:Se(e),i:t,p:r,t:e},writable:!0,enumerable:!1}),r}}return e}function bn(e,t=1){U(e,e.v+t)}const oi={defineProperty(e,t,n){if(n.value){const o=e[Y],i=o.s.get(t);i!==void 0&&U(i,H(n.value,o.i,o))}return Reflect.defineProperty(e,t,n)},deleteProperty(e,t){const n=e[Y],o=n.s.get(t),i=n.a,r=delete e[t];if(i&&r){const s=n.s.get("length"),l=e.length-1;s!==void 0&&s.v!==l&&U(s,l)}return o!==void 0&&U(o,Oe),r&&bn(n.v),r},get(e,t,n){var r;if(t===Y)return Reflect.get(e,Y);const o=e[Y];let i=o.s.get(t);if(i===void 0&&(!(t in e)||(r=on(e,t))!=null&&r.writable)&&(i=(o.i?K:kt)(H(e[t],o.i,o)),o.s.set(t,i)),i!==void 0){const s=S(i);return s===Oe?void 0:s}return Reflect.get(e,t,n)},getOwnPropertyDescriptor(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);if(n&&"value"in n){const i=e[Y].s.get(t);i&&(n.value=S(i))}return n},has(e,t){var r;if(t===Y)return!0;const n=e[Y],o=Reflect.has(e,t);let i=n.s.get(t);return(i!==void 0||N!==null&&(!o||(r=on(e,t))!=null&&r.writable))&&(i===void 0&&(i=(n.i?K:kt)(o?H(e[t],n.i,n):Oe),n.s.set(t,i)),S(i)===Oe)?!1:o},set(e,t,n,o){const i=e[Y];let r=i.s.get(t);r===void 0&&(Je(()=>o[t]),r=i.s.get(t)),r!==void 0&&U(r,H(n,i.i,i));const s=i.a,l=!(t in e);if(s&&t==="length")for(let a=n;a<e.length;a+=1){const c=i.s.get(a+"");c!==void 0&&U(c,Oe)}if(e[t]=n,l){if(s){const a=i.s.get("length"),c=e.length;a!==void 0&&a.v!==c&&U(a,c)}bn(i.v)}return!0},ownKeys(e){const t=e[Y];return S(t.v),Reflect.ownKeys(e)}};function ii(e){return e()}function Tt(e){for(var t=0;t<e.length;t++)e[t]()}let nt=!1,Ut=[];function wn(){nt=!1;const e=Ut.slice();Ut=[],Tt(e)}function _n(e){nt||(nt=!0,queueMicrotask(wn)),Ut.push(e)}function ri(){nt&&wn()}function ot(e){let t=he|te;N===null&&(t|=le);const n={deps:null,deriveds:null,equals:un,f:t,first:null,fn:e,last:null,reactions:null,v:null,version:0};if(W!==null&&W.f&he){var o=W;o.deriveds===null?o.deriveds=[n]:o.deriveds.push(n)}return n}function De(e){const t=ot(e);return t.equals=ln,t}function yn(e){It(e);var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)si(t[n])}}function En(e,t){yn(e);var n=Tn(e),o=(Le||e.f&le)&&e.deps!==null?ve:Z;X(e,o);var i=e.equals(n);return i||(e.v=n,Lt(e,te,t)),i}function si(e){yn(e),rt(e,0),X(e,Ce),e.first=e.last=e.deps=e.reactions=e.fn=null}function kn(e){throw new Error("lifecycle_outside_component")}const Sn=0,ai=1;let it=Sn,qe=!1,Me=!1,Dt=!1;function xn(e){Me=e}function Cn(e){Dt=e}function On(e){ne=e}let we=[],Ie=0,W=null,N=null,R=null,q=0,ce=null;function ui(e){ce=e}let ne=!1,Le=!1,A=null;function Mt(){return A!==null&&A.l===null}function Be(e){var b;var t=e.f,n=(t&te)!==0,o=(t&le)!==0;if(n&&!o)return!0;var i=(t&Xe)!==0;if(t&ve||n&&o){var r=e.deps;if(r!==null)for(var s=r.length,l,a,c=0;c<s;c++){var f=r[c];!n&&Be(f)&&(l=En(f,!0));var u=f.version;if(o){if(u>e.version)return e.version=u,!l;!Le&&!((b=f==null?void 0:f.reactions)!=null&&b.includes(e))&&(a=f.reactions,a===null?f.reactions=[e]:a.push(e))}else{if(e.f&te)return!0;i&&(u>e.version&&(e.version=u,n=!0),a=f.reactions,a===null?f.reactions=[e]:a.includes(e)||a.push(e))}}o||X(e,Z),i&&(e.f^=Xe)}return n}function li(e,t,n){throw e}function Tn(e){const t=R,n=q,o=ce,i=W,r=Le,s=ne;R=null,q=0,ce=null,W=e,Le=!Me&&(e.f&le)!==0,ne=!1;try{let l=(0,e.fn)(),a=e.deps;if(R!==null){let c;if(a!==null){const f=a.length,u=q===0?R:a.slice(0,q).concat(R),d=u.length>16&&f-q>1?new Set(u):null;for(c=q;c<f;c++){const v=a[c];(d!==null?!d.has(v):!u.includes(v))&&Un(e,v)}}if(a!==null&&q>0)for(a.length=q+R.length,c=0;c<R.length;c++)a[q+c]=R[c];else e.deps=a=R;if(!Le)for(c=q;c<a.length;c++){const f=a[c],u=f.reactions;u===null?f.reactions=[e]:u[u.length-1]!==e&&u.push(e)}}else a!==null&&q<a.length&&(rt(e,q),a.length=q);return l}finally{R=t,q=n,ce=o,W=i,Le=r,ne=s}}function Un(e,t){const n=t.reactions;let o=0;if(n!==null){o=n.length-1;const i=n.indexOf(e);i!==-1&&(o===0?t.reactions=null:(n[i]=n[o],n.pop()))}o===0&&t.f&he&&(X(t,ve),t.f&(le|Xe)||(t.f^=Xe),rt(t,0))}function rt(e,t){const n=e.deps;if(n!==null){const o=t===0?null:n.slice(0,t);let i;for(i=t;i<n.length;i++){const r=n[i];(o===null||!o.includes(r))&&Un(e,r)}}}function It(e,t=!0){let n=e.first;e.first=null,e.last=null;for(var o;n!==null;)o=n.next,Re(n,t),n=o}function st(e){var t=e.f;if(!(t&Ce)){X(e,Z);var n=e.ctx,o=N,i=A;N=e,A=n;try{t&an||It(e),pn(e);var r=Tn(e);e.teardown=typeof r=="function"?r:null}catch(s){li(s)}finally{N=o,A=i}}}function Dn(){Ie>1e3&&(Ie=0,Ho()),Ie++}function Mn(e){var t=e.length;if(t!==0){Dn();var n=Me;Me=!0;try{for(var o=0;o<t;o++){var i=e[o];if(i.first===null&&!(i.f&ee))In([i]);else{var r=[];Ln(i,r),In(r)}}}finally{Me=n}}}function In(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var o=e[n];!(o.f&(Ce|ge))&&Be(o)&&(st(o),o.deps===null&&o.first===null&&o.dom===null&&(o.teardown===null?hn(o):o.fn=null))}}function ci(){if(qe=!1,Ie>1001)return;const e=we;we=[],Mn(e),qe||(Ie=0)}function at(e){it===Sn&&(qe||(qe=!0,queueMicrotask(ci)));for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&ee){if(!(n&Z))return;X(t,ve)}}we.push(t)}function Ln(e,t){var n=e.first,o=[];e:for(;n!==null;){var i=n.f,r=(i&(Ce|ge))===0,s=i&ee,l=(i&Z)!==0,a=n.first;if(r&&(!s||!l)){if(s&&X(n,Z),i&xe){if(!s&&Be(n)&&(st(n),a=n.first),a!==null){n=a;continue}}else if(i&sn)if(s||l){if(a!==null){n=a;continue}}else o.push(n)}var c=n.next;if(c===null){let b=n.parent;for(;b!==null;){if(e===b)break e;var f=b.next;if(f!==null){n=f;continue e}b=b.parent}}n=c}for(var u=0;u<o.length;u++)a=o[u],t.push(a),Ln(a,t)}function Nn(e,t=!0){var n=it,o=we;try{Dn();const r=[];it=ai,we=r,qe=!1,t&&Mn(o);var i=e==null?void 0:e();return ri(),(we.length>0||r.length>0)&&Nn(),Ie=0,i}finally{it=n,we=o}}function S(e){const t=e.f;if(t&Ce)return e.v;if(W!==null&&!(W.f&(ee|_t))&&!ne){const n=(W.f&le)!==0,o=W.deps;R===null&&o!==null&&o[q]===e&&!(n&&N!==null)?q++:(o===null||q===0||o[q-1]!==e)&&(R===null?R=[e]:R[R.length-1]!==e&&R.push(e)),ce!==null&&N!==null&&N.f&Z&&!(N.f&ee)&&ce.includes(e)&&(X(N,te),at(N))}return t&he&&Be(e)&&En(e,!1),e.v}function Lt(e,t,n){var o=e.reactions;if(o!==null)for(var i=Mt(),r=o.length,s=0;s<r;s++){var l=o[s],a=l.f;if(!(a&te||(!n||!i)&&l===N)){X(l,t);var c=(a&ve)!==0,f=(a&le)!==0;(a&Z||c&&f)&&(l.f&he?Lt(l,ve,n):at(l))}}}function Je(e){const t=ne;try{return ne=!0,e()}finally{ne=t}}const di=~(te|ve|Z);function X(e,t){e.f=e.f&di|t}function fi(e){return typeof e=="object"&&e!==null&&typeof e.f=="number"}function z(e,t=!1,n){A={p:A,c:null,e:null,m:!1,s:e,x:null,l:null},t||(A.l={s:null,u:null,r1:[],r2:K(!1)})}function F(e){const t=A;if(t!==null){const o=t.e;if(o!==null){t.e=null;for(var n=0;n<o.length;n++)St(o[n])}A=t.p,t.m=!0}return{}}function An(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Y in e)Nt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Y in n&&Nt(n)}}}function Nt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let o in e)try{Nt(e[o],t)}catch{}const n=rn(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const o=Qo(n);for(let i in o){const r=o[i].get;if(r)try{r.call(e)}catch{}}}}}function p(e){return fi(e)?S(e):e}let mi=!1;var Qn;function pi(){if(Qn===void 0){Qn=window;var e=Element.prototype;e.__click=void 0,e.__className="",e.__attributes=null,e.__e=void 0,Text.prototype.__t=void 0}}function Ye(){return document.createTextNode("")}function k(e){return e.firstChild}function I(e,t){return e.firstChild}function m(e,t=!1){var n=e.nextSibling;return n}function hi(e){e.textContent=""}function vi(e,t,n,o){function i(r){if(o.capture||At(t,r),!r.cancelBubble)return n.call(this,r)}return e.startsWith("pointer")||e==="wheel"?_n(()=>{t.addEventListener(e,i,o)}):t.addEventListener(e,i,o),i}function zn(e,t,n,o,i){var r={capture:o,passive:i},s=vi(e,t,n,r);(t===document.body||t===window||t===document)&&ei(()=>{t.removeEventListener(e,s,r)})}function re(e){for(var t=0;t<e.length;t++)Fn.add(e[t]);for(var n of Qt)n(e)}function At(e,t){var y;var n=e.ownerDocument,o=t.type,i=((y=t.composedPath)==null?void 0:y.call(t))||[],r=i[0]||t.target,s=0,l=t.__root;if(l){var a=i.indexOf(l);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var c=i.indexOf(e);if(c===-1)return;a<=c&&(s=a+1)}r=i[s]||t.target,nn(t,"currentTarget",{configurable:!0,get(){return r||n}});try{for(var f,u=[];r!==null;){var b=r.parentNode||r.host||null;try{var d=r["__"+o];if(d!==void 0&&!r.disabled)if(Se(d)){var[v,...h]=d;v.apply(r,[t,...h])}else d.call(r,t)}catch(T){f?u.push(T):f=T}if(t.cancelBubble||b===e||b===null||r===e)break;r=b}if(f){for(let T of u)queueMicrotask(()=>{throw T});throw f}}finally{t.__root=e,r=e}}const Fn=new Set,Qt=new Set;function B(e,t){(e.__t??(e.__t=e.nodeValue))!==t&&(e.nodeValue=e.__t=t)}function gi(e,t){const n=t.anchor??t.target.appendChild(Ye());return Nn(()=>bi(e,{...t,anchor:n}),!1)}function bi(e,{target:t,anchor:n,props:o={},events:i,context:r,intro:s=!1}){pi();const l=new Set,a=At.bind(null,t),c=At.bind(null,document),f=d=>{for(let v=0;v<d.length;v++){const h=d[v];l.has(h)||(l.add(h),t.addEventListener(h,a,dn.includes(h)?{passive:!0}:void 0),document.addEventListener(h,c,dn.includes(h)?{passive:!0}:void 0))}};f(Ao(Fn)),Qt.add(f);let u;const b=ni(()=>(Ue(()=>{if(r){z({});var d=A;d.c=r}i&&(o.$$events=i),u=e(n,o)||{},r&&F()}),()=>{for(const d of l)t.removeEventListener(d,a);Qt.delete(f),Pn.delete(u)}));return Pn.set(u,b),u}let Pn=new WeakMap;function G(e,t,n,o=null,i=!1){var r=null,s=null,l=null,a=i?Ze:0;xt(()=>{l!==(l=!!t())&&(l?(r?tt(r):r=Ue(()=>n(e)),s&&Ct(s,()=>{s=null})):(s?tt(s):o&&(s=Ue(()=>o(e))),r&&Ct(r,()=>{r=null})))},a)}let zt=null;function Ke(e,t){return t}function wi(e,t,n){for(var o=[],i=e.length,r=0;r<i;r++)Ot(e[r].e,o,!0);var s=i>0&&o.length===0&&t!==null;if(s){var l=t.parentNode;hi(l),l.append(t),n.clear(),de(e[0].prev,e[i-1].next)}vn(o,()=>{for(var a=0;a<i;a++){var c=e[a];s||(n.delete(c.k),c.o.remove(),de(c.prev,c.next)),Re(c.e,!s)}})}function Ne(e,t,n,o,i,r=null){var s={flags:t,items:new Map,next:null},l=(t&cn)!==0;if(l){var a=e;e=a.appendChild(Ye())}var c=null;xt(()=>{var f=n(),u=Se(f)?f:f==null?[]:Array.from(f),b=u.length,d=s.flags;d&Et&&!tn(u)&&!(Y in u)&&(d^=Et,d&Bo&&!(d&je)&&(d^=je)),_i(u,s,e,i,d,o),r!==null&&(b===0?c?tt(c):c=Ue(()=>r(e)):c!==null&&Ct(c,()=>{c=null}))})}function _i(e,t,n,o,i,r){var Do,Mo,Io,Lo;var s=(i&Jo)!==0,l=(i&(je|yt))!==0,a=e.length,c=t.items,f=t.next,u=f,b=new Set,d=t,v=new Set,h=[],y=[],T,Q,_,C;if(s)for(C=0;C<a;C+=1)T=e[C],Q=r(T,C),_=c.get(Q),_!==void 0&&((Do=_.a)==null||Do.measure(),v.add(_));for(C=0;C<a;C+=1){if(T=e[C],Q=r(T,C),_=c.get(Q),_===void 0){var Ee=Ye(),ke=u?u.o:n;ke.before(Ee),d=Ei(Ee,ke,d,d.next,T,Q,C,o,i),c.set(Q,d),h=[],y=[],u=d.next;continue}if(l&&yi(_,T,C,i),_.e.f&ge&&(tt(_.e),s&&((Mo=_.a)==null||Mo.unfix(),v.delete(_))),_!==u){if(b.has(_)){if(h.length<y.length){var Pe=y[0],pe;d=Pe.prev;var Uo=h[0],Zt=h[h.length-1];for(pe=0;pe<h.length;pe+=1)jn(h[pe],Pe,n);for(pe=0;pe<y.length;pe+=1)b.delete(y[pe]);de(Uo.prev,Zt.next),de(d,Uo),de(Zt,Pe),u=Pe,d=Zt,C-=1,h=[],y=[]}else b.delete(_),jn(_,u,n),de(_.prev,_.next),de(_,d.next),de(d,_),d=_;continue}for(h=[],y=[];u!==null&&u.k!==Q;)b.add(u),y.push(u),u=u.next;if(u===null)continue;_=u}h.push(_),d=_,u=_.next}const Ge=Array.from(b);for(;u!==null;)Ge.push(u),u=u.next;var en=Ge.length;if(en>0){var js=i&cn&&a===0?n:null;if(s){for(C=0;C<en;C+=1)(Io=Ge[C].a)==null||Io.measure();for(C=0;C<en;C+=1)(Lo=Ge[C].a)==null||Lo.fix()}wi(Ge,js,c)}s&&_n(()=>{var No;for(_ of v)(No=_.a)==null||No.apply()})}function yi(e,t,n,o){o&je&&U(e.v,t),o&yt?U(e.i,n):e.i=n}function Ei(e,t,n,o,i,r,s,l,a){var c=zt;try{var f=(a&je)!==0,u=(a&Et)===0,b=f?u?kt(i):K(i):i,d=a&yt?K(s):s,v={i:d,v:b,k:r,a:null,e:null,o:e,prev:n,next:o};return n.next=v,o!==null&&(o.prev=v),zt=v,v.e=Ue(()=>l(t,b,d)),v}finally{zt=c}}function jn(e,t,n){for(var o=e.next?e.next.o:n,i=t?t.o:n,r=e.o;r!==o;){var s=r.nextSibling;i.before(r),r=s}}function de(e,t){e.next=t,t!==null&&(t.prev=e)}function ut(e,t=N){var n=t.dom;return n===null?t.dom=e:(Se(n)||(n=t.dom=[n]),Se(e)?n.push(...e):n.push(e)),e}function O(e,t){var n=(t&Yo)!==0,o=(t&Ko)!==0,i;return()=>{i||(i=Xo(e),n||(i=i.firstChild));var r=o?document.importNode(i,!0):i.cloneNode(!0);return ut(n?[...r.childNodes]:r),r}}function ki(e,t,n="svg"){var o=O(`<${n}>${e}</${n}>`,0),i;return()=>{if(!i){var r=o();i=r.firstChild}var s=i.cloneNode(!0);return ut(s),s}}function Rn(e){return ut(Ye())}function J(){var e=document.createDocumentFragment(),t=Ye();return e.append(t),ut([t]),e}function g(e,t){e.before(t)}function Si(e,t,...n){var o,i;xt(()=>{o!==(o=e())&&(i&&(Re(i),i=null),o&&(i=Ue(()=>o(t,...n))))},Ze)}function Ae(e,t,n){St(()=>{var o=Je(()=>t(e,n==null?void 0:n())||{});if(n&&(o!=null&&o.update)){var i=!1;et(()=>{var r=n();An(r),i&&o.update(r)}),i=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}let qn=!1;function xi(){qn||(qn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function P(e,t,n){n=n==null?null:n+"";var o=e.__attributes??(e.__attributes={});o[t]!==(o[t]=n)&&(t==="loading"&&(e[Ro]=n),n===null?e.removeAttribute(t):e.setAttribute(t,n))}function _e(e,t){var n=e.__className,o=Ci(t);(n!==o||mi)&&(t==null?e.removeAttribute("class"):e.className=o,e.__className=o)}function Ci(e){return e??""}function lt(e,t,n){n?e.classList.add(t):e.classList.remove(t)}function Oi(e,t,n,o=n){e.addEventListener(t,n);const i=e.__on_r;i?e.__on_r=()=>{i(),o()}:e.__on_r=o,xi()}function Ti(e,t,n){Oi(e,"input",()=>{n(Bn(e)?Jn(e.value):e.value)}),et(()=>{var o=t();Bn(e)&&o===Jn(e.value)||e.type==="date"&&!o&&!e.value||(e.value=o??"")})}function Bn(e){var t=e.type;return t==="number"||t==="range"}function Jn(e){return e===""?null:+e}function oe(){const e=A,t=e.l.u;t&&(t.b.length&&ti(()=>{Yn(e),Tt(t.b)}),be(()=>{const n=Je(()=>t.m.map(ii));return()=>{for(const o of n)typeof o=="function"&&o()}}),t.a.length&&be(()=>{Yn(e),Tt(t.a)}))}function Yn(e){if(e.l.s)for(const t of e.l.s)S(t);An(e.s)}function fe(e){A===null&&kn(),A.l!==null?Ui(A).m.push(e):be(()=>{const t=Je(e);if(typeof t=="function")return t})}function Ft(e){A===null&&kn(),fe(()=>()=>Je(e))}function Ui(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Di="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Di);const Kn="Dub+";function Wn(){return new Date().toLocaleTimeString()}function V(...e){console.log(`[${Wn()}] ${Kn}:`,...e)}function $(...e){console.error(`[${Wn()}] ${Kn}:`,...e)}function Mi(e,t=window){const n=e.split(".");let o=t;for(let i=0;i<n.length;i++){if(typeof o[n[i]]>"u")return!1;o=o[n[i]]}return!0}function Ii(e,t=window){const n=t;for(let o=0;o<e.length;o++)if(!Mi(e[o],n))return V(e[o],"is not found yet"),!1;return!0}function Li(e,t={}){const o=Object.assign({},{interval:500,seconds:5},t);return new Promise((i,r)=>{let s=0;const l=o.seconds*1e3/o.interval,a=()=>{s++,Ii(e)?i():s<l?window.setTimeout(a,o.interval):r()};a()})}var Ni=ki('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="0 0 2078.496 2083.914" enable-background="new 0 0 2078.496 2083.914" xml:space="preserve"><rect x="769.659" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#660078" width="539.178" height="539.178"></rect><g><rect x="1308.837" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#EB008B" width="537.488" height="539.178"></rect><polygon fill="#EB008B" points="2045.015,1042.035 1845.324,1311.625 1845.324,772.446 	"></polygon></g><g><rect x="232.172" y="772.445" fill-rule="evenodd" clip-rule="evenodd" fill="#EB008B" width="537.487" height="539.178"></rect><polygon fill="#EB008B" points="33.481,1042.034 233.172,772.445 233.172,1311.623 	"></polygon></g><g><rect x="769.659" y="1311.624" fill-rule="evenodd" clip-rule="evenodd" fill="#6FCBDC" width="539.178" height="537.487"></rect><polygon fill="#6FCBDC" points="1039.248,2047.802 769.659,1848.111 1308.837,1848.111 	"></polygon></g><g><rect x="769.659" y="234.958" fill-rule="evenodd" clip-rule="evenodd" fill="#6FCBDC" width="539.178" height="537.487"></rect><polygon fill="#6FCBDC" points="1039.249,35.268 1308.837,235.958 769.659,235.958 	"></polygon></g></svg>');function Vn(e){var t=Ni();g(e,t)}const $n={en:{"Modal.confirm":"okay","Modal.cancel":"cancel","Modal.close":"close","Error.modal.title":"Dub+ Error","Error.modal.loggedout":"You're not logged in. Please login to use Dub+.","Error.unknown":"Something went wrong starting Dub+. Please refresh and try again.","Loading.text":"Waiting for QueUp...","Eta.tooltip.notInQueue":"You're not in the queue","Eta.tootltip":"ETA: {{minutes}} minutes","Snooze.tooltip":"Mute current song","Notifcation.permission.title":"Desktop Notification","Notification.permission.denied":"You have dismissed or chosen to deny the request to allow desktop notifications. Reset this choice by clearing your cache for the site.","Notification.permission.notSupported":"Sorry this browser does not support desktop notifications.  Please update your browser to the lastest version","Menu.title":"Dub+ Options","general.title":"General","user-interface.title":"User Interface","settings.title":"Settings","customize.title":"Customize","contact.title":"Contact","contact.bugs":"Report bugs on Discord","Switch.on":"On","Switch.off":"Off","MenuItem.edit":"Edit","autovote.label":"Autovote","autovote.description":"Toggles auto upvoting for every song","afk.label":"AFK Auto-respond","afk.description":"Toggle Away from Keyboard and customize AFK message.","afk.modal.title":"Custom AFK Message","afk.modal.content":"Enter a custom Away From Keyboard [AFK] message here. Message will be prefixed with '[AFK]'","afk.modal.placeholder":"Be right back!","emotes.label":"Emotes","emotes.description":"Adds Twitch, Bttv, and FrankerFacez emotes in chat.","autocomplete.label":"Autocomplete Emoji","autocomplete.description":"Toggle autocompleting emojis and emotes. Shows a preview box in the chat","autocomplete.preview.select":"press enter or tab to select","custom-mentions.label":"Custom Mentions","custom-mentions.description":"Toggle using custom mentions to trigger sounds in chat","custom-mentions.modal.title":"Custom Mentions","custom-mentions.modal.content":"Add your custom mention triggers here (separate by comma)","custom-mentions.modal.placeholder":"separate, custom mentions, by, comma, :heart:","chat-cleaner.label":"Chat Cleaner","chat-cleaner.description":"Help keep CPU stress down by setting a limit of how many chat messages to keep in the chat box, deleting older messages.","chat-cleaner.modal.title":"Chat Cleaner","chat-cleaner.modal.content":"Please specify the number of most recent chat items that will remain in your chat history","chat-cleaner.modal.validation":"Please enter a valid number","chat-cleaner.modal.placeholder":"500","mention-notifications.label":"Notification on Mentions","mention-notifications.description":"Enable desktop notifications when a user mentions you in chat","pm-notifications.label":"Notification on PM","pm-notifications.description":"Enable desktop notifications when a user receives a private message","pm-notifications.notification.title":"You have a new PM","dj-notification.label":"DJ Notification","dj-notification.description":"Get a notification when you are coming up to be the DJ","dj-notification.modal.title":"DJ Notification","dj-notification.modal.content":"Please specify the position in queue you want to be notified at","dj-notification.notification.title":"DJ Alert!","dj-notification.notification.content":"You will be DJing shortly! Make sure your song is set!","dj-notification.modal.validation":"Please enter a valid number","dubs-hover.label":"Show Dubs on Hover","dubs-hover.description":"Show who dubs a song when hovering over the dubs count","dubs-hover.no-votes":"No {{dubType}}s have been casted yet!","dubs-hover.no-grabs":"No one has grabbed this song yet!","downdubs-in-chat.label":"Downdubs in Chat (mods only)","downdubs-in-chat.description":"Toggle showing downdubs in the chat box (mods only)","downdubs-in-chat.chat-message":"@{{username}} has downdubbed your song {{song_name}}","updubs-in-chat.label":"Updubs in Chat","updubs-in-chat.description":"Toggle showing updubs in the chat box","updubs-in-chat.chat-message":"@{{username}} has updubbed your song {{song_name}}","grabs-in-chat.label":"Grabs in Chat","grabs-in-chat.description":"Toggle showing grabs in the chat box","grabs-in-chat.chat-message":"@{{username}} has grabbed your song {{song_name}}","snow.label":"Snow","snow.description":"Make it snow!","rain.label":"Rain","rain.description":"Make it rain!","fullscreen.label":"Fullscreen","fullscreen.description":"Toggle fullscreen video mode","split-chat.label":"Split Chat","split-chat.description":"Toggle Split Chat UI enhancement","hide-chat.label":"Hide Chat","hide-chat.description":"Toggles hiding the chat box","hide-video.label":"Hide Video","hide-video.description":"Toggles hiding the video box","hide-avatars.label":"Hide Avatars","hide-avatars.description":"Toggle hiding user avatars in the chat box","hide-bg.label":"Hide Background","hide-bg.description":"Toggle hiding background image","show-timestamps.label":"Show Timestamps","show-timestamps.description":"Toggle always showing chat message timestamps","spacebar-mute.label":"Spacebar Mute","spacebar-mute.description":"Turn on/off the ability to mute current song with the spacebar","warn-redirect.label":"Warn on Navigation","warn-redirect.description":"Warns you when accidentally clicking on a link that takes you out of QueUp","community-theme.label":"Community Theme","community-theme.description":"Toggle Community CSS theme","custom-css.label":"Custom CSS","custom-css.description":"Add your own custom CSS.","custom-css.modal.title":"Custom CSS","custom-css.modal.content":"Enter a url location for your custom css","custom-css.modal.placeholder":"https://example.com/example.css","custom-css.modal.validation":"Invalid URL","custom-bg.label":"Custom Background","custom-bg.description":"Add your own custom background.","custom-bg.modal.title":"Custom Background Image","custom-bg.modal.content":"Enter the full URL of an image. We recommend using a .jpg file. Leave blank to remove the current background image","custom-bg.modal.placeholder":"https://example.com/big-image.jpg","custom-notification-sound.label":"Custom Notification Sound","custom-notification-sound.description":"Change the notification sound to a custom one.","custom-notification-sound.modal.title":"Custom Notification Sound","custom-notification-sound.modal.content":"Enter the full URL of a sound file. We recommend using an .mp3 file. Leave blank to go back to QueUp's default sound","custom-notification-sound.modal.placeholder":"https://example.com/sweet-sound.mp3","custom-notification-sound.modal.validation":"Can't play sound from this URL. Please enter a valid URL to an MP3 file."}},Hn=H({current:"en"});function Ai(e,t,n){let o=$n[e][t];return!o&&e!=="en"&&(o=$n.en[t]),o?(Object.keys(n).forEach(i=>{const r=new RegExp(`{{${i}}}`,"g");o=o.replace(r,n[i])}),o):($(`No translation found for ${e}.${t}`),t)}function w(e,t={}){return Ai(Hn.current,e,t)}function Qi(e){return e.startsWith("en")?"en":e.startsWith("es")?"es":e}var zi=O('<div class="dubplus-waiting svelte-1m63uxu"><div style="width: 26px; margin-right:5px"><!></div> <span style="flex: 1;"> </span></div>');function Fi(e,t){z(t,!1),oe();var n=zi(),o=k(n),i=k(o);Vn(i);var r=m(m(o,!0)),s=k(r);D(()=>B(s,w("Loading.text"))),g(e,n),F()}const x=H({id:"",open:!1,title:"Dub+",content:"",value:"",placeholder:"",maxlength:999,validation:()=>!0,onConfirm:()=>!0,onCancel:()=>{}});function Pt(e){x.open=e.open??!1,x.title=e.title||"Dub+",x.content=e.content||"",x.value=e.value||"",x.placeholder=e.placeholder||"",x.maxlength=e.maxlength||999,x.onConfirm=e.onConfirm||(()=>!0),x.onCancel=e.onCancel||(()=>{}),x.validation=e.validation||(()=>!0)}var Pi=O(`<textarea class="svelte-1r2cx79">
      </textarea>`),ji=O('<p class="dp-modal--error svelte-1r2cx79"> </p>'),Ri=O('<button class="dp-modal--cancel cancel svelte-1r2cx79"> </button> <button class="dp-modal--confirm confirm svelte-1r2cx79"> </button>',1),qi=O('<button class="dp-modal--cancel cancel svelte-1r2cx79"> </button>'),Bi=O('<dialog id="dubplus-dialog" class="dp-modal svelte-1r2cx79"><h1 class="svelte-1r2cx79"> </h1> <div class="dp-modal--content content svelte-1r2cx79"><p class="svelte-1r2cx79"> </p> <!> <!></div> <div class="dp-modal--buttons buttons svelte-1r2cx79"><!></div></dialog>');function Gn(e,t){z(t,!0);let n=K(""),o;fe(()=>{o=document.getElementById("dubplus-dialog"),o.addEventListener("close",()=>{x.open=!1})}),be(()=>{x.open&&o&&!o.open&&o.showModal()});var i=Bi(),r=k(i),s=k(r),l=m(m(r,!0)),a=k(l),c=k(a),f=m(m(a,!0));G(f,()=>x.placeholder||x.value,v=>{var h=Pi();D(()=>{P(h,"placeholder",x.placeholder),P(h,"maxlength",x.maxlength<999?x.maxlength:999)}),Ti(h,()=>x.value,y=>x.value=y),g(v,h)});var u=m(m(f,!0));G(u,()=>S(n),v=>{var h=ji(),y=k(h);D(()=>B(y,S(n))),g(v,h)});var b=m(m(l,!0)),d=k(b);G(d,()=>typeof x.onConfirm=="function",v=>{var h=Ri(),y=I(h);y.__click=()=>{o.close(),x.open=!1,U(n,"")};var T=k(y);D(()=>B(T,w("Modal.cancel")));var Q=m(m(y,!0));Q.__click=()=>{const C=x.validation(x.value);C===!0?(o.close(),x.open=!1,x.onConfirm(x.value),U(n,"")):U(n,H(C))};var _=k(Q);D(()=>B(_,w("Modal.confirm"))),g(v,h)},v=>{var h=qi();h.__click=()=>{o.close(),x.open=!1,U(n,"")};var y=k(h);D(()=>B(y,w("Modal.close"))),g(v,h)}),D(()=>{B(s,x.title),B(c,x.content)}),g(e,i),F()}re(["click"]);function Qe(e,{to:t,position:n="append"}){const o=document.querySelector(t);if(!o)throw new Error(`teleport container not found: ${t}`);return n==="append"?o.appendChild(e):o.prepend(e),{destroy(){e.remove()}}}var Ji=()=>{document.querySelector(".dubplus-menu").classList.toggle("dubplus-menu-open")},Yi=O('<button type="button" class="dubplus-icon svelte-edw2as"><!></button>');function Ki(e,t){z(t,!1),oe();var n=Yi();n.__click=[Ji];var o=k(n);Vn(o),Ae(n,(i,r)=>Qe(i,r),()=>({to:".header-right-navigation"})),g(e,n),F()}re(["click"]);const Xn=function(e,t){const n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.className=e,n.href=t,n};function Wi(e,t){return new Promise((n,o)=>{if(document.querySelector(`link.${t}`)){n();return}const i=Xn(t,`https://cdn.jsdelivr.net/gh/DubPlus/DubPlus${e}?1719549750298`);i.onload=r=>n(),i.onerror=o,document.head.appendChild(i)})}function ct(e,t){if(document.querySelector(`link.${t}`))return;const n=Xn(t,e);document.head.appendChild(n)}const se={"dubplus-autovote":"autovote","dubplus-afk":"afk","dubplus-emotes":"emotes","dubplus-autocomplete":"autocomplete",custom_mentions:"custom-mentions","chat-cleaner":"chat-cleaner",mention_notifications:"mention-notifications",dubplus_pm_notifications:"pm-notifications",dj_notification:"dj-notification","dubplus-dubs-hover":"dubs-hover","dubplus-downdubs":"downdubs-in-chat","dubplus-updubs":"updubs-in-chat","dubplus-grabschat":"grabs-in-chat","dubplus-snow":"snow","dubplus-rain":"rain","dubplus-fullscreen":"fullscreen","dubplus-split-chat":"split-chat","dubplus-video-only":"hide-chat","dubplus-chat-only":"hide-video","dubplus-hide-avatars":"hide-avatars","dubplus-hide-bg":"hide-bg","dubplus-show-timestamp":"show-timestamps","dubplus-spacebar-mute":"spacebar-mute",warn_redirect:"warn-redirect","dubplus-comm-theme":"community-theme","dubplus-custom-css":"custom-css","dubplus-custom-bg":"custom-bg","dubplus-custom-notification-sound":"custom-notification-sound"},Vi={customAfkMessage:se["dubplus-afk"],custom_mentions:se.custom_mentions,chat_cleaner:se["chat-cleaner"],dj_notification:se.dj_notification,css:se["dubplus-custom-css"],bg:se["dubplus-custom-bg"],notificationSound:se["dubplus-custom-notification-sound"],"dubplus-custom-notification-sound":se["dubplus-custom-notification-sound"]};function $i(e){V("Old Settings",e);const t={options:{},menu:{...e.menu},custom:{}};for(const[n,o]of Object.entries(e.options)){const i=se[n];try{t.options[i]=o}catch(r){$("Error converting options",r.message,n,i,o)}}for(const[n,o]of Object.entries(e.custom)){const i=Vi[n];try{t.custom[i]=o}catch(r){$("Error converting custom",r.message,n,i,o)}}return t}const Hi="dubplusUserSettings",Zn="dubplusUserSettingsV2",Gi={options:{},menu:{general:"open","user-interface":"open",settings:"open",customize:"open",contact:"open"},custom:{}};function Xi(){try{const e=JSON.parse(localStorage.getItem(Zn));if(e)return e}catch(e){V("Error loading v2 settings, trying old settings. Error:",e)}try{const e=JSON.parse(localStorage.getItem(Hi));if(e)return $i(e)}catch(e){V("Error loading old settings:",e)}return{}}const eo=Object.assign({},Gi,Xi());console.log("intialSettings",structuredClone(eo));let E=H(eo);console.log("settings",E);function jt(){try{localStorage.setItem(Zn,JSON.stringify(E))}catch(e){$("Error saving user settings:",e)}}function ze(e,t,n){if(e==="option"){E.options[t]=n,jt();return}if(e==="custom"){E.custom[t]=n,jt();return}if(e==="menu"){E.menu[t]=n,jt();return}throw new Error(`Invalid section: "${e}"`)}var Zi=O('<button type="button" class="dubplus-menu-section-header svelte-31yg9a"><span></span> <p class="svelte-31yg9a"> </p></button>');function We(e,t){z(t,!0);let n=K("down"),o=K(!0);be(()=>{E.menu[t.settingsId]==="closed"?(U(n,"right"),U(o,!1)):(U(n,"down"),U(o,!0))});function i(){E.menu[t.settingsId]=E.menu[t.settingsId]==="closed"?"open":"closed",ze("menu",t.settingsId,E.menu[t.settingsId])}var r=Zi();r.__click=i;var s=k(r),l=m(m(s,!0)),a=k(l);D(()=>{P(r,"id",`dubplus-menu-section-header-${t.settingsId}`),P(r,"aria-expanded",S(o)),P(r,"aria-controls",`dubplus-menu-section-${t.settingsId}`),_e(s,`fa fa-angle-${S(n)??""} svelte-31yg9a`),B(a,t.name)}),g(e,r),F()}re(["click"]);var er=O('<ul class="dubplus-menu-section svelte-nowxlp" role="region"><!></ul>');function Ve(e,t){z(t,!0);var n=er(),o=k(n);Si(()=>t.children,o),D(()=>{P(n,"id",`dubplus-menu-section-${t.settingsId}`),P(n,"aria-labelledby",`dubplus-menu-section-header-${t.settingsId}`)}),g(e,n),F()}var tr=O('<li class="dubplus-menu-icon svelte-uwa6b6"><span></span> <a class="dubplus-menu-label svelte-uwa6b6" target="_blank"> </a></li>');function dt(e,t){var n=tr(),o=k(n),i=m(m(o,!0)),r=k(i);D(()=>{_e(o,`fa fa-${t.icon??""} svelte-uwa6b6`),P(i,"href",t.href),B(r,t.text)}),g(e,n)}var nr=O("<!> <!> <!> <!>",1),or=O("<!> <!>",1);function ir(e,t){z(t,!1),oe();var n=or(),o=I(n),i=De(()=>w("contact.title"));We(o,{settingsId:"contact",get name(){return S(i)}});var r=m(m(o,!0));Ve(r,{settingsId:"contact",children:(s,l)=>{var a=nr(),c=I(a),f=De(()=>w("contact.bugs"));dt(c,{icon:"bug",href:"https://discord.gg/XUkG3Qy",get text(){return S(f)}});var u=m(m(c,!0));dt(u,{icon:"reddit-alien",href:"https://www.reddit.com/r/DubPlus/",text:"Reddit"});var b=m(m(u,!0));dt(b,{icon:"facebook",href:"https://facebook.com/DubPlusScript",text:"Facebook"});var d=m(m(b,!0));dt(d,{icon:"twitter",href:"https://twitter.com/DubPlusScript",text:"Twitter"}),g(s,a)},$$slots:{default:!0}}),g(e,n),F()}function rr(e,t,n){t.disabled||(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),U(n,!S(n)),t.onToggle(S(n)))}function sr(e,t,n){t.disabled||(U(n,!S(n)),t.onToggle(S(n)))}var ar=O('<div role="switch" tabindex="0" class="svelte-dbnfh0"><span class="dubplus-switch svelte-dbnfh0"><span class="svelte-dbnfh0"></span></span> <span class="dubplus-switch-label svelte-dbnfh0"> </span></div>');function ur(e,t){z(t,!0);let n=K(H(t.disabled?!1:t.isOn));var o=ar();o.__click=[sr,t,n],o.__keydown=[rr,t,n];var i=k(o),r=m(m(i,!0)),s=k(r);D(()=>{P(o,"aria-checked",S(n)),B(s,t.label)}),g(e,o),F()}re(["click","keydown"]);function ye(e){return window.QueUp.helpers.isSiteAdmin(e)||window.QueUp.room.users.getIfOwner(e)||window.QueUp.room.users.getIfManager(e)||window.QueUp.room.users.getIfMod(e)}var lr=O('<button type="button" class="fa fa-pencil svelte-izs1xx"><span class="sr-only"> </span></button>'),cr=O('<li class="svelte-izs1xx"><!> <!></li>');function ft(e,t){z(t,!0),fe(()=>{if(t.init&&t.init(),E.options[t.id]){const a=t.modOnly?ye(window.QueUp.session.id):!0;t.onToggle(a,!0)}});function n(){console.log("openEditModal",E.options[t.id]),Pt({title:w(t.customize.title),content:w(t.customize.content),placeholder:w(t.customize.placeholder),maxlength:t.customize.maxlength,value:E.custom[t.id]||"",validation:t.customize.validation,onConfirm:a=>{ze("custom",t.id,a),typeof t.customize.onConfirm=="function"&&t.customize.onConfirm(a)},onCancel:()=>{typeof t.customize.onCancel=="function"&&t.customize.onCancel()}}),x.open=!0}var o=cr();D(()=>P(o,"title",w(t.description)));var i=k(o),r=ot(()=>t.modOnly&&!ye(window.QueUp.session.id)),s=ot(()=>w(t.label));ur(i,{get disabled(){return S(r)},get label(){return S(s)},onToggle:a=>{if(t.customize&&a===!0&&!E.custom[t.id]){n();return}t.onToggle(a)},get isOn(){return E.options[t.id]}});var l=m(m(i,!0));G(l,()=>t.customize,a=>{var c=lr();c.__click=n;var f=k(c),u=k(f);D(()=>B(u,w("MenuItem.edit"))),g(a,c)}),D(()=>{P(o,"id",t.id),lt(o,"disabled",t.modOnly&&!ye(window.QueUp.session.id))}),g(e,o),F()}re(["click"]);const to="realtime:room_playlist-dub",no="realtime:room_playlist-queue-update-grabs",oo="realtime:user-leave",Fe="realtime:room_playlist-update",ie="realtime:chat-message",io="realtime:new-message";function Rt(){var e,t,n;(n=(t=(e=window.QueUp)==null?void 0:e.playerController)==null?void 0:t.voteUp)==null||n.click()}const dr={id:"autovote",label:"autovote.label",description:"autovote.description",category:"general",turnOff(){window.QueUp.Events.unbind(Fe,Rt)},turnOn(){Rt(),window.QueUp.Events.bind(Fe,Rt)}};let qt=!0;function ro(e){if(!qt)return;const t=e.message,n=window.QueUp.session.get("username");if(t.includes(`@${n}`)&&window.QueUp.session.id!==e.user.userInfo.userid){const o=document.querySelector("#chat-txt-message");E.custom.afk?o.value=`[AFK] ${E.custom.afk}`:o.value=`[AFK] ${w("afk.modal.placeholder")}`,window.QueUp.room.chat.sendMessage(),qt=!1,setTimeout(()=>{qt=!0},3e4)}}const fr={id:"afk",label:"afk.label",description:"afk.description",category:"general",turnOn(){window.QueUp.Events.bind(ie,ro)},turnOff(){window.QueUp.Events.unbind(ie,ro)},custom:{title:"afk.modal.title",content:"afk.modal.content",placeholder:"afk.modal.placeholder",maxlength:255}};(function(){function e(r,s){return n?void(n.transaction("s").objectStore("s").get(r).onsuccess=function(l){var a=l.target.result&&l.target.result.v||null;s(a)}):void setTimeout(function(){e(r,s)},100)}var t=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(!t)return void console.error("indexDB not supported");var n,o={k:"",v:""},i=t.open("d2",1);i.onsuccess=function(r){n=this.result},i.onerror=function(r){console.error("indexedDB request error"),console.log(r)},i.onupgradeneeded=function(r){n=null;var s=r.target.result.createObjectStore("s",{keyPath:"k"});s.transaction.oncomplete=function(l){n=l.target.db}},window.ldb={get:e,set:function(r,s){o.k=r,o.v=s,n.transaction("s","readwrite").objectStore("s").put(o)}}})();function mt(e){return new Promise(t=>{window.ldb.get(e,function(n){t(n)})})}function mr(){return fetch("//cdn.jsdelivr.net/gh/Jiiks/BetterDiscordApp/data/emotedata_twitch_global.json").then(e=>e.json())}function pr(){return fetch("//api.betterttv.net/3/cached/emotes/global").then(e=>e.json())}function hr(){return fetch("//api.frankerfacez.com/v1/emoticons?per_page=200&private=off&sort=count-desc").then(e=>e.json())}const L={emoji:{template(e){return e=e.replace(/:/g,""),`${window.emojify.defaultConfig.img_dir}/${encodeURI(e)}.png`}},twitchJSONSLoaded:!1,bttvJSONSLoaded:!1,tastyJSONLoaded:!1,frankerfacezJSONLoaded:!1,twitch:{template(e){return`//static-cdn.jtvnw.net/emoticons/v1/${e}/3.0`},emotesMap:new Map,chatRegex:new RegExp(":([-_a-z0-9]+):","ig")},bttv:{template(e){return`//cdn.betterttv.net/emote/${e}/3x`},emotesMap:new Map,chatRegex:new RegExp(":([&!()\\-_a-z0-9]+):","ig")},tasty:{template(e){return this.emotesMap.get(e).url},emotesMap:new Map},frankerFacez:{template(e){return`//cdn.frankerfacez.com/emoticon/${e}/1`},emotesMap:new Map,chatRegex:new RegExp(":([-_a-z0-9]+):","ig")},shouldUpdateAPIs(e){return mt(`${e}_api`).then(n=>{if(n)try{if(typeof JSON.parse(n).error<"u")return!0}catch{return!0}const o=Date.now(),i=parseInt(localStorage.getItem(`${e}_api_timestamp`));return isNaN(i)||o-i>864e5*5||!n})},loadTwitchEmotes(){return this.twitchJSONSLoaded?Promise.resolve():this.shouldUpdateAPIs("twitch").then(e=>e?(V("twitch","loading from api"),mr().then(t=>{const n={};for(const o in t.emotes)n[o]||(n[o]=t.emotes[o].image_id);localStorage.setItem("twitch_api_timestamp",Date.now().toString()),window.ldb.set("twitch_api",JSON.stringify(n)),L.processTwitchEmotes(n)}).catch(t=>$(t))):mt("twitch_api").then(t=>{V("twitch","loading from IndexedDB");const n=JSON.parse(t);L.processTwitchEmotes(n)}))},loadBTTVEmotes(){return this.bttvJSONSLoaded?Promise.resolve():this.shouldUpdateAPIs("bttv").then(e=>e?(V("bttv","loading from api"),pr().then(t=>{const n={};t.forEach(o=>{n[o.code]||(n[o.code]=o.id)}),localStorage.setItem("bttv_api_timestamp",Date.now().toString()),window.ldb.set("bttv_api",JSON.stringify(n)),L.processBTTVEmotes(n)}).catch(t=>$(t))):mt("bttv_api").then(t=>{V("bttv","loading from IndexedDB");const n=JSON.parse(t);L.processBTTVEmotes(n)}))},loadTastyEmotes(){return this.tastyJSONLoaded?Promise.resolve():(V("tasty","loading from api"),fetch("https://cdn.jsdelivr.net/gh/DubPlus/DubPlus/emotes/tastyemotes.json").then(e=>e.json()).then(e=>{window.ldb.set("tasty_api",JSON.stringify(e)),L.processTastyEmotes(e)}).catch(e=>$(e)))},loadFrankerFacez(){return this.frankerfacezJSONLoaded?Promise.resolve():this.shouldUpdateAPIs("frankerfacez").then(e=>e?(V("frankerfacez","loading from api"),hr().then(t=>{const n=t;localStorage.setItem("frankerfacez_api_timestamp",Date.now().toString()),window.ldb.set("frankerfacez_api",JSON.stringify(n)),L.processFrankerFacez(n)}).catch(t=>$(t))):mt("frankerfacez_api").then(t=>{V("frankerfacez","loading from IndexedDB");const n=JSON.parse(t);L.processFrankerFacez(n)}))},processTwitchEmotes(e){for(const t in e)if(Object.hasOwn(e,t)){const n=t.toLowerCase();if(window.emojify.emojiNames.includes(n))continue;this.twitch.emotesMap.set(n,e[t])}this.twitchJSONSLoaded=!0},processBTTVEmotes(e){for(const t in e)if(Object.hasOwn(e,t)){const n=t.toLowerCase();if(t.indexOf(":")>=0||window.emojify.emojiNames.indexOf(n)>=0)continue;this.twitch.emotesMap.has(n)||this.bttv.emotesMap.set(n,e[t])}this.bttvJSONSLoaded=!0},processTastyEmotes(e){this.tasty.emotes=e.emotes,this.tastyJSONLoaded=!0,Object.keys(this.tasty.emotes).forEach(t=>{this.tasty.emotesMap.set(t,e[t])})},processFrankerFacez(e){for(const t of e.emoticons){const n=t.name,o=n.toLowerCase();n.indexOf(":")>=0||window.emojify.emojiNames.includes(o)||!this.twitch.emotesMap.has(o)&&!this.bttv.emotesMap.has(o)&&this.frankerFacez.emotesMap.set(o,t.id)}this.frankerfacezJSONLoaded=!0},findMatchingEmotes(e,t=!1){const n=[];return window.emojify.emojiNames.forEach(o=>{o.includes(e)&&n.push({src:this.emoji.template(o),text:o,alt:o,platform:"emojify"})}),t&&(Array.from(this.twitch.emotesMap.keys()).forEach(o=>{o.includes(e)&&n.push({src:this.twitch.template(this.twitch.emotesMap.get(o)),text:o,alt:o,platform:"twitch"})}),Array.from(this.bttv.emotesMap.keys()).forEach(o=>{o.includes(e)&&n.push({src:this.bttv.template(this.bttv.emotesMap.get(o)),text:o,alt:o,platform:"bttv"})}),Array.from(this.frankerFacez.emotesMap.keys()).forEach(o=>{o.includes(e)&&n.push({src:this.frankerFacez.template(this.frankerFacez.emotesMap.get(o)),text:o,alt:o,platform:"ffz"})})),n}};function Bt(e,t,n,o,i){return`<img class="emoji ${e}-emote"   title="${n}" alt="${n}" src="${t}" />`}function vr(e){if(!L.twitchJSONSLoaded)return e;const t=L.twitch.chatRegex;return e.replace(t,function(o,i){const r=i.toLowerCase();if(L.twitch.emotesMap.has(r)){const s=L.twitch.emotesMap.get(r),l=L.twitch.template(s);return Bt("twitch",l,r)}else return o})}function gr(e){if(!L.bttvJSONSLoaded)return e;const t=L.bttv.chatRegex;return e.replace(t,function(o,i){const r=i.toLowerCase();if(L.bttv.emotesMap.has(r)){const s=L.bttv.emotesMap.get(r),l=L.bttv.template(s);return Bt("bttv",l,r)}else return o})}function br(e){if(!L.frankerfacezJSONLoaded)return e;const t=L.frankerFacez.chatRegex;return e.replace(t,function(o,i){const r=i.toLowerCase();if(L.frankerFacez.emotesMap.has(r)){const s=L.frankerFacez.emotesMap.get(r),l=L.frankerFacez.template(s);return Bt("frankerFacez",l,r)}else return o})}function Jt(){const e=document.querySelectorAll(".chat-main li:not([data-emote-processed])");e!=null&&e.length&&e.forEach(t=>{t.setAttribute("data-emote-processed","true");const n=t.querySelector(".text");if(n!=null&&n.innerHTML){let o=vr(n.innerHTML);o=gr(o),o=br(o),n.innerHTML=o}})}const wr={id:"emotes",label:"emotes.label",description:"emotes.description",category:"general",turnOn(){L.loadTwitchEmotes().then(()=>L.loadBTTVEmotes()).then(()=>L.loadFrankerFacez()).then(()=>{Jt(),window.QueUp.Events.bind(ie,Jt)})},turnOff(){window.QueUp.Events.unbind(ie,Jt)}},j=H({selectedIndex:0,emojiList:[]});function pt(){j.selectedIndex=0,j.emojiList=[]}function _r(e){j.emojiList=e}function yr(){j.selectedIndex>0?j.selectedIndex-=1:j.selectedIndex=j.emojiList.length-1}function Er(){j.selectedIndex<j.emojiList.length-1?j.selectedIndex+=1:j.selectedIndex=0}const ae={up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",enter:"Enter",esc:"Escape",tab:"Tab",backspace:"Backspace",del:"Delete",space:" "},kr=3;let Yt=document.querySelector("#autocomplete-preview");function Sr(e){const t=e.value,n=e.selectionStart;let o=n-1;for(;t[o]!==" "&&o>0;)o--;o>0&&t[o]===" "&&(o+=1);let i=n;for(;t[i]!==" "&&i<t.length;)i++;return i!==t.length&&t[i]===" "&&(i-=1),[o,i]}function so(e,t){const n=j.emojiList[t],[o,i]=Sr(e),r=e.value.substring(o,i);e.value=e.value.replace(r,`:${n.text}:`),pt()}function Kt(e){const t=e.target,n=t.value,o=t.selectionStart;let i="",r=o-1;for(;n[r]!==" "&&r>=0;)i=n[r]+i,r--;let s=o;for(;n[s]!==" "&&s<n.length;)i=i+n[s],s++;if(i.startsWith(":")&&i.length>=kr&&!i.endsWith(":")){const l=L.findMatchingEmotes(i.substring(1).trim(),E.options.autocomplete);_r(l)}else pt()}function ao(e){const t=Yt.children.length>0;if(e.key===ae.up&&t){e.preventDefault(),yr();return}if(e.key===ae.down&&t){e.preventDefault(),Er();return}if((e.key===ae.enter||e.key===ae.tab)&&t){e.preventDefault(),e.stopImmediatePropagation();const n=e.target;so(n,j.selectedIndex);return}if(e.key===ae.esc&&t){pt();return}Kt(e)}function uo(e){const t=Yt.children.length===0,n=[ae.tab,ae.enter,ae.up,ae.down].includes(e.key);if(n&&t)return window.QueUp.room.chat.ncKeyDown({which:e.keyCode});n&&!t&&e.preventDefault()}const xr={id:"autocomplete",label:"autocomplete.label",category:"general",description:"autocomplete.description",turnOn(){Yt=document.querySelector("#autocomplete-preview"),pt();const e=structuredClone(window.QueUp.room.chat.events);delete e["keydown #chat-txt-message"],window.QueUp.room.chat.delegateEvents(e);const t=document.getElementById("chat-txt-message");t.addEventListener("keydown",uo),t.addEventListener("keyup",ao),t.addEventListener("click",Kt)},turnOff(){window.QueUp.room.chat.delegateEvents(window.QueUp.room.chat.events);const e=document.getElementById("chat-txt-message");e.removeEventListener("keydown",uo),e.removeEventListener("keyup",ao),e.removeEventListener("click",Kt)}},me="custom-mentions";function lo(e){const t=E.options[me],n=E.custom[me];t&&window.QueUp.session.id!==e.user.userInfo.userid&&n.split(",").some(function(r){return new RegExp("\\b"+r.trim()+"\\b","i").test(e.message)})&&window.QueUp.room.chat.mentionChatSound.play()}const Cr={id:me,label:`${me}.label`,description:`${me}.description`,category:"general",custom:{title:`${me}.modal.title`,content:`${me}.modal.content`,placeholder:`${me}.modal.placeholder`,maxlength:255},turnOn(){window.QueUp.Events.bind(ie,lo)},turnOff(){window.QueUp.Events.unbind(ie,lo)}},ue="chat-cleaner";function ht(e){const t=document.querySelectorAll("ul.chat-main > li"),n=parseInt(e??E.custom[ue],10);if(!(!(t!=null&&t.length)||isNaN(n)||t.length<n))for(let o=0;o<t.length-n;o++)t[o].remove()}const Or={id:ue,label:`${ue}.label`,description:`${ue}.description`,category:"general",custom:{title:`${ue}.modal.title`,content:`${ue}.modal.content`,placeholder:`${ue}.modal.placeholder`,maxlength:5,validation(e){return/[^0-9]+/g.test(e)?w(`${ue}.modal.validation`):!0},onConfirm:e=>{E.options[ue]&&ht(e)}},turnOn(){ht(void 0),window.QueUp.Events.bind(ie,ht)},turnOff(){window.QueUp.Events.unbind(ie,ht)}},vt=H({isActive:!0});window.onfocus=function(){vt.isActive=!0},window.onblur=function(){vt.isActive=!1};function co(){Pt({title:w("Notifcation.permission.title"),content:w("Notification.permission.denied"),open:!0})}function fo(){return new Promise((e,t)=>{if(!("Notification"in window)){Pt({open:!0,title:w("Notifcation.permission.title"),content:w("Notification.permission.notSupported")}),t(!1);return}if(Notification.permission==="granted"){e();return}if(Notification.permission==="denied"){co(),t();return}Notification.requestPermission().then(function(n){if(n==="denied"||n==="default"){co(),t();return}e()})})}function Wt(e){const n=Object.assign({},{content:"",ignoreActiveTab:!1,callback:null,wait:1e4},e);if(vt.isActive&&!n.ignoreActiveTab)return;const o={body:n.content,icon:"https://cdn.jsdelivr.net/gh/DubPlus/DubPlus/images/dubplus.svg"},i=new Notification(n.title,o);i.onclick=function(){window.focus(),typeof n.callback=="function"&&n.callback(),i.close()},setTimeout(i.close.bind(i),n.wait)}function mo(e){const t=e.message;let o=["@"+window.QueUp.session.get("username").toLowerCase()];E.options["custom-mentions"]&&E.custom["custom-mentions"]&&(o=o.concat(E.custom["custom-mentions"].split(",")).map(r=>r.trim())),o.some(function(r){return new RegExp("\\b"+r+"\\b","i").test(t)})&&!vt.isActive&&window.QueUp.session.id!==e.user.userInfo.userid&&Wt({title:`Message from ${e.user.username}`,content:t})}const Tr={id:"mention-notifications",label:"mention-notifications.label",description:"mention-notifications.description",category:"general",turnOn(){fo().then(()=>{window.QueUp.Events.bind(ie,mo)}).catch(()=>{E.options[this.id]=!1})},turnOff(){window.QueUp.Events.unbind(ie,mo)}};function po(e){window.QueUp.session.id!==e.userid&&Wt({title:w("pm-notifications.notification.title"),ignoreActiveTab:!0,callback:function(){const t=document.querySelector(".user-messages");t==null||t.click(),setTimeout(function(){const n=document.querySelector(`.message-item[data-messageid="${e.messageid}"]`);n==null||n.click()},500)},wait:1e4})}const Ur={id:"pm-notifications",label:"pm-notifications.label",description:"pm-notifications.description",category:"general",turnOn(){fo().then(()=>{window.QueUp.Events.bind(io,po)}).catch(e=>{E.options[this.id]=!1})},turnOff(){window.QueUp.Events.unbind(io,po)}};function ho(e){var o;const t=parseInt((o=document.querySelector(".queue-position"))==null?void 0:o.textContent,10);if(isNaN(t)){$("dj-notification","Could not parse current position:",t);return}let n=parseInt(E.custom["dj-notification"],10);isNaN(n)&&(n=2,V("djNotification","Could not parse setting, defaulting to 2")),t<=n&&(Wt({title:w("dj-notification.notification.title"),content:w("dj-notification.notification.content"),ignoreActiveTab:!0,wait:1e4}),window.QueUp.room.chat.mentionChatSound.play())}const Dr={id:"dj-notification",label:"dj-notification.label",description:"dj-notification.description",category:"general",custom:{title:"dj-notification.modal.title",content:"dj-notification.modal.content",placeholder:"2",maxlength:2,onConfirm:e=>/[^0-9]+/.test(e.trim())?(window.alert(w("dj-notification.modal.validation")),!1):!0},turnOn(){window.QueUp.Events.bind(Fe,ho)},turnOff(){window.QueUp.Events.unbind(Fe,ho)}},M=H({upDubs:[],downDubs:[],grabs:[]});function Mr(e){return e==="updub"?M.upDubs:e==="downdub"?M.downDubs:e==="grab"?M.grabs:[]}function Ir(e){return`https://api.queup.net/user/${e}`}function Lr(e){return`https://api.queup.net/room/${e}/playlist/active/dubs`}function Nr(e){return`https://api.queup.net/user/${e}/image`}function vo(e){return new Promise((t,n)=>{var i,r,s;const o=(s=(r=(i=window.QueUp.room.users.collection.findWhere({userid:e}))==null?void 0:i.attributes)==null?void 0:r._user)==null?void 0:s.username;if(o){t(o);return}fetch(Ir(e)).then(l=>l.json()).then(l=>{var a;if((a=l==null?void 0:l.userinfo)!=null&&a.username){const{username:c}=l.userinfo;t(c)}else n("Failed to get username from API")}).catch(n)})}function Ar(e){e.forEach(t=>{M.upDubs.find(n=>n.userid===t.userid)||vo(t.userid).then(n=>{M.upDubs.push({userid:t.userid,username:n})}).catch(n=>$("Failed to get username for upDubs",n))})}function Qr(e){e.forEach(t=>{M.downDubs.find(n=>n.userid===t.userid)||vo(t.userid).then(n=>{M.downDubs.push({userid:t.userid,username:n})}).catch(n=>$("Failed to get username for downDubs",n))})}function $e(){M.downDubs=[],M.upDubs=[],M.grabs=[];const e=Lr(window.QueUp.room.model.id);fetch(e).then(t=>t.json()).then(t=>{Ar(t.data.upDubs),ye(window.QueUp.session.id)&&Qr(t.data.downDubs)}).catch(t=>$("Failed to fetch dubs data from API.",t))}function go(e){e.dubtype==="updub"?(M.upDubs.find(n=>n.userid===e.user._id)||M.upDubs.push({userid:e.user._id,username:e.user.username}),M.downDubs=M.downDubs.filter(n=>n.userid!==e.user._id)):e.dubtype==="downdub"&&ye(window.QueUp.session.id)&&(M.downDubs.find(n=>n.userid===e.user._id)||M.downDubs.push({userid:e.user._id,username:e.user.username}),M.upDubs=M.upDubs.filter(n=>n.userid!==e.user._id)),!(Date.now()-window.QueUp.room.player.activeSong.attributes.song.played<1e3)&&(M.upDubs.length!==window.QueUp.room.player.activeSong.attributes.song.updubs||ye(window.QueUp.session.id)&&M.downDubs.length!==window.QueUp.room.player.activeSong.attributes.song.downdubs)&&$e()}function bo(e){M.grabs.find(t=>t.userid===e.user._id)||M.grabs.push({userid:e.user._id,username:e.user.username})}function wo(e){M.upDubs=M.upDubs.filter(t=>t.userid!==e.user._id),M.downDubs=M.downDubs.filter(t=>t.userid!==e.user._id),M.grabs=M.grabs.filter(t=>t.userid!==e.user._id)}const zr={id:"dubs-hover",label:"dubs-hover.label",description:"dubs-hover.description",category:"general",turnOn(){$e(),window.QueUp.Events.bind(to,go),window.QueUp.Events.bind(no,bo),window.QueUp.Events.bind(oo,wo),window.QueUp.Events.bind(Fe,$e)},turnOff(){window.QueUp.Events.unbind(to,go),window.QueUp.Events.unbind(no,bo),window.QueUp.Events.unbind(oo,wo),window.QueUp.Events.unbind(Fe,$e)}};function Vt(e,t){const n=document.createElement("li");n.className=`dubplus-chat-system ${e}`;const o=document.createElement("div");o.className="chatDelete",o.onclick=function(s){s.target.parentElement.remove()};const i=document.createElement("span");i.className="icon-close",o.appendChild(i),n.appendChild(o);const r=document.createElement("div");r.className="text",r.textContent=t,n.appendChild(r),document.querySelector("ul.chat-main").appendChild(n)}function _o(e){window.QueUp.session.id===window.QueUp.room.player.activeSong.attributes.song.userid&&e.dubtype==="downdub"&&Vt("dubplus-chat-system-downdub",w("downdubs-in-chat.chat-message",{username:e.user.username,song_name:window.QueUp.room.player.activeSong.attributes.songInfo.name}))}const Fr={id:"downdubs-in-chat",label:"downdubs-in-chat.label",description:"downdubs-in-chat.description",category:"general",modOnly:!0,turnOn(){ye(window.QueUp.session.id)&&window.QueUp.Events.bind("realtime:room_playlist-dub",_o)},turnOff(){window.QueUp.Events.unbind("realtime:room_playlist-dub",_o)}};function yo(e){window.QueUp.session.id===window.QueUp.room.player.activeSong.attributes.song.userid&&e.dubtype==="updub"&&Vt("dubplus-chat-system-updub",w("updubs-in-chat.chat-message",{username:e.user.username,song_name:window.QueUp.room.player.activeSong.attributes.songInfo.name}))}const Pr={id:"updubs-in-chat",label:"updubs-in-chat.label",description:"updubs-in-chat.description",category:"general",turnOn(){window.QueUp.Events.bind("realtime:room_playlist-dub",yo)},turnOff(){window.QueUp.Events.unbind("realtime:room_playlist-dub",yo)}};function Eo(e){window.QueUp.session.id===window.QueUp.room.player.activeSong.attributes.song.userid&&!window.QueUp.room.model.get("displayUserGrab")&&Vt("dubplus-chat-system-updub",w("grabs-in-chat.chat-message",{username:e.user.username,song_name:window.QueUp.room.player.activeSong.attributes.songInfo.name}))}const jr={id:"grabs-in-chat",label:"grabs-in-chat.label",description:"grabs-in-chat.description",category:"general",turnOn(){window.QueUp.Events.bind("realtime:room_playlist-queue-update-grabs",Eo)},turnOff(){window.QueUp.Events.unbind("realtime:room_playlist-queue-update-grabs",Eo)}},Rr={id:"snow",label:"snow.label",description:"snow.description",category:"general",turnOn(){},turnOff(){}};class qr{constructor(){this.particles=[],this.drops=[],this.numbase=5,this.numb=2,this.width=0,this.height=0,this.controls={rain:2,alpha:1,color:200,opacity:1,saturation:100,lightness:50,back:0,multi:!1,speed:1},this.requestAnimFrame=null,this.canvas=null}makeCanvas(){this.canvas=document.createElement("canvas"),this.canvas.id="dubPlusRainCanvas",this.canvas.style.position="fixed",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.zIndex="100",this.canvas.style.pointerEvents="none",document.body.prepend(this.canvas)}start(){this.makeCanvas(),this.startAnimation()}stop(){var t;this.stopAnimation(),(t=this.canvas)==null||t.remove()}onWindowResize(){this.width=this.canvas.width=window.innerWidth,this.height=this.canvas.height=window.innerHeight}startAnimation(){const t=window.requestAnimationFrame;if(this.requestAnimFrame=t?t.bind(window):null,!this.canvas)return;const n=this.canvas.getContext("2d");this.width,this.height=0,this.onWindowResize(),window.onresize=this.onWindowResize.bind(this),this.particles=[],this.drops=[],this.numbase=5,this.numb=2;let o=this;(function i(){o.requestAnimFrame(i),o.update(),o.rendu(n)})()}buildRainParticle(t,n,o){for(o||(o=this.numb);o--;)this.particles.push({speedX:Math.random()*.25,speedY:Math.random()*9+1,X:t,Y:n,alpha:1,color:"hsla("+this.controls.color+","+this.controls.saturation+"%, "+this.controls.lightness+"%,"+this.controls.opacity+")"})}explosion(t,n,o,i){for(i||(i=this.numbase);i--;)this.drops.push({speedX:Math.random()*4-2,speedY:Math.random()*-4,X:t,Y:n,radius:.65+Math.floor(Math.random()*1.6),alpha:1,color:o})}rendu(t){this.controls.multi&&(this.controls.color=Math.random()*360),t.save(),t.clearRect(0,0,this.width,this.height);const n=this.particles,o=this.drops,i=Math.PI*2;for(let r=0,s;s=n[r];r++)t.globalAlpha=s.alpha,t.fillStyle=s.color,t.fillRect(s.X,s.Y,s.speedY/4,s.speedY);for(let r=0,s;s=o[r];r++)t.globalAlpha=s.alpha,t.fillStyle=s.color,t.beginPath(),t.arc(s.X,s.Y,s.radius,0,i),t.fill();t.strokeStyle="white",t.lineWidth=2,t.restore()}update(){const t=this.particles,n=this.drops;for(let i=0,r;r=t[i];i++)r.X+=r.speedX,r.Y+=r.speedY+5,r.Y>this.height-15&&(t.splice(i--,1),this.explosion(r.X,r.Y,r.color));for(let i=0,r;r=n[i];i++)r.X+=r.speedX,r.Y+=r.speedY,r.radius-=.075,r.alpha>0?r.alpha-=.005:r.alpha=0,r.radius<0&&n.splice(i--,1);let o=this.controls.rain;for(;o--;)this.buildRainParticle(Math.floor(Math.random()*this.width),-15)}stopAnimation(){this.requestAnimFrame=function(){}}}const Br={id:"rain",label:"rain.label",description:"rain.description",category:"general",turnOn(){this.rainEffect=new qr,this.rainEffect.start()},turnOff(){this.rainEffect.stop(),delete this.rainEffect}},Jr={id:"fullscreen",label:"fullscreen.label",description:"fullscreen.description",category:"user-interface",altIcon:"arrows-alt",onClick(){const e=document.querySelector(".player_container iframe");if(!e){V("Fullscreen: No video element found");return}e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}},Yr={id:"split-chat",label:"split-chat.label",description:"split-chat.description",category:"user-interface",turnOn(){document.body.classList.add("dubplus-split-chat")},turnOff(){document.body.classList.remove("dubplus-split-chat")}},Kr={id:"hide-chat",label:"hide-chat.label",description:"hide-chat.description",category:"user-interface",turnOn(){document.body.classList.add("dubplus-video-only")},turnOff(){document.body.classList.remove("dubplus-video-only")}},Wr={id:"hide-video",label:"hide-video.label",description:"hide-video.description",category:"user-interface",turnOn(){document.body.classList.add("dubplus-chat-only")},turnOff(){document.body.classList.remove("dubplus-chat-only")}},Vr={id:"hide-avatars",label:"hide-avatars.label",description:"hide-avatars.description",category:"user-interface",turnOn(){document.body.classList.add("dubplus-hide-avatars")},turnOff(){document.body.classList.remove("dubplus-hide-avatars")}},$r={id:"hide-bg",label:"hide-bg.label",description:"hide-bg.description",category:"user-interface",turnOn(){document.body.classList.add("dubplus-hide-bg")},turnOff(){document.body.classList.remove("dubplus-hide-bg")}},Hr={id:"show-timestamps",label:"show-timestamps.label",description:"show-timestamps.description",category:"user-interface",turnOn(){document.body.classList.add("dubplus-show-timestamp")},turnOff(){document.body.classList.remove("dubplus-show-timestamp")}};function ko(e){const t=e.target.tagName.toLowerCase();e.key===" "&&t!=="input"&&t!=="textarea"&&window.QueUp.room.player.mutePlayer()}const Gr={id:"spacebar-mute",label:"spacebar-mute.label",description:"spacebar-mute.description",category:"settings",turnOn(){document.addEventListener("keypress",ko)},turnOff(){document.removeEventListener("keypress",ko)}};function So(e){let t="You are leaving";return e.returnValue=t,t}const Xr={id:"warn-redirect",label:"warn-redirect.label",description:"warn-redirect.description",category:"settings",turnOn(){window.addEventListener("beforeunload",So)},turnOff(){window.removeEventListener("beforeunload",So)}},Zr={id:"community-theme",label:"community-theme.label",description:"community-theme.description",category:"customize",turnOn(){const e=window.QueUp.room.model.get("roomUrl");fetch(`https://api.queup.net/room/${e}`).then(t=>t.json()).then(t=>{const n=t.data.description,o=new RegExp(/(@dub(x|plus|\+)=)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/,"i");let i=null;if(n.replace(o,function(r,s,l,a){i=a}),!i){V("No community CSS theme found");return}V("loading community css theme:",i),ct(i,this.id)}).catch(t=>{$("Community CSS: Failed to load room info",t)})},turnOff(){var e;(e=document.querySelector(`.${this.id}`))==null||e.remove()}},gt={id:"custom-css",label:"custom-css.label",description:"custom-css.description",category:"customize",custom:{title:"custom-css.modal.title",content:"custom-css.modal.content",placeholder:"custom-css.modal.placeholder",maxlength:500,validation(e){return e?/^http.+\.css$/.test(e)?!0:w("custom-css.modal.validation"):!0},onConfirm(e){var t;if((t=document.querySelector(`.${gt.id}`))==null||t.remove(),!e){E.options[gt.id]=!1;return}ct(e,gt.id)}},turnOn(){E.custom[this.id]&&ct(E.custom[this.id],this.id)},turnOff(){var e;(e=document.querySelector(`.${this.id}`))==null||e.remove()}};function xo(e,t){const n=document.createElement("div");return n.className=t,n.style.backgroundImage=`url(${e})`,n}const $t={id:"custom-bg",label:"custom-bg.label",description:"custom-bg.description",category:"customize",custom:{title:"custom-bg.modal.title",content:"custom-bg.modal.content",placeholder:"custom-bg.modal.placeholder",maxlength:500,validation(e){return e?e.startsWith("http")?!0:w("custom-bg.modal.validation"):!0},onConfirm(e){var t;(t=document.querySelector(`.${$t.id}`))==null||t.remove(),e&&document.body.appendChild(xo(e,$t.id))}},turnOn(){var t;(t=document.querySelector(`.${this.id}`))==null||t.remove();const e=E.custom[this.id];e&&document.body.appendChild(xo(e,this.id))},turnOff(){var e;(e=document.querySelector(`.${this.id}`))==null||e.remove()}};let Ht;const Co={id:"custom-notification-sound",label:"custom-notification-sound.label",description:"custom-notification-sound.description",category:"customize",custom:{title:"custom-notification-sound.modal.title",content:"custom-notification-sound.modal.content",placeholder:"custom-notification-sound.modal.placeholder",maxlength:500,validation(e){return e?window.soundManager.canPlayURL(e)?!0:w("custom-notification-sound.modal.validation"):!0},onConfirm(e){e?window.QueUp.room.chat.mentionChatSound.url=e:(window.QueUp.room.chat.mentionChatSound.url=Ht,E.options[Co.id]=!1)}},turnOn(){Ht=window.QueUp.room.chat.mentionChatSound.url,E.custom[this.id]&&(window.QueUp.room.chat.mentionChatSound.url=E.custom[this.id])},turnOff(){window.QueUp.room.chat.mentionChatSound.url=Ht}},es=[dr,fr,wr,xr,Cr,Or,Tr,Ur,Dr,zr,Fr,Pr,jr,Rr,Br],ts=[Jr,Yr,Kr,Wr,Vr,$r,Hr],Oo=[Gr,Xr],ns=[Zr,gt,$t,Co];var os=O("<!> <!>",1);function is(e,t){z(t,!1),oe();var n=os(),o=I(n),i=De(()=>w("general.title"));We(o,{settingsId:"general",get name(){return S(i)}});var r=m(m(o,!0));Ve(r,{settingsId:"general",children:(s,l)=>{var a=J(),c=I(a);Ne(c,1,()=>es,Ke,(f,u,b)=>{var d=J(),v=I(d);ft(v,{get id(){return p(u).id},get label(){return p(u).label},get description(){return p(u).description},get init(){return p(u).init},get customize(){return p(u).custom},get modOnly(){return p(u).modOnly},onToggle:(h,y)=>{h?p(u).turnOn():p(u).turnOff(),y||ze("option",p(u).id,h)}}),g(f,d)}),g(s,a)},$$slots:{default:!0}}),g(e,n),F()}var rs=O('<button type="button" class="icon-history eta_tooltip_t dubplus-btn-player"></button>');function ss(e,t){z(t,!0);let n=K("ETA");function o(){var f,u;const r=(f=document.querySelector(".queue-position"))==null?void 0:f.textContent;if(!r)return w("Eta.tooltip.notInQueue");const s=4,l=parseInt((u=document.querySelector("#player-controller div.left ul li.infoContainer.display-block div.currentTime span.min"))==null?void 0:u.textContent),c=parseInt(r)*s-s+l;return c>=0?w("Eta.tootltip",{minutes:c}):w("Eta.tooltip.notInQueue")}var i=rs();D(()=>P(i,"data-dp-tooltip",S(n))),Ae(i,(r,s)=>Qe(r,s),()=>({to:".player_sharing"})),zn("mouseenter",i,()=>{U(n,H(o()))},!1),g(e,i),F()}var as=O('<button type="button" class="icon-mute snooze_btn dubplus-btn-player"><span class="svelte-1a6zdj2">1</span></button>');function us(e,t){z(t,!1);const n={currentVol:50,snoozed:!1};function o(s){if(s.startTime<2)return n.snoozed&&(window.QueUp.room.player.setVolume(n.currentVol),n.snoozed=!1),!0}function i(){!n.snoozed&&!window.QueUp.room.player.muted_player&&window.QueUp.playerController.volume>2?(n.currentVol=window.QueUp.playerController.volume,window.QueUp.room.player.mutePlayer(),n.snoozed=!0,window.QueUp.Events.once("realtime:room_playlist-update",o)):n.snoozed&&(window.QueUp.room.player.setVolume(n.currentVol),window.QueUp.room.player.updateVolumeBar(),n.snoozed=!1)}oe();var r=as();D(()=>P(r,"data-dp-tooltip",w("Snooze.tooltip"))),r.__click=i,Ae(r,(s,l)=>Qe(s,l),()=>({to:".player_sharing"})),g(e,r),F()}re(["click"]);var ls=O('<span class="ac-list-press-enter svelte-2x4f0c"> </span>'),cs=O('<li><div class="ac-image svelte-2x4f0c"><img class="svelte-2x4f0c"></div> <span class="ac-text svelte-2x4f0c"> </span> <!></li>'),ds=O('<ul id="autocomplete-preview" class="svelte-2x4f0c"></ul>');function fs(e,t){z(t,!0),be(()=>{if(j.emojiList.length>0&&typeof j.selectedIndex=="number"){const i=document.querySelector(".preview-item.selected");i&&i.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})}});function n(i){const r=document.getElementById("chat-txt-message");so(r,i),r.focus()}var o=ds();Ne(o,79,()=>j.emojiList,(i,r)=>p(p(i)).src,(i,r,s)=>{let l=()=>p(p(r)).src,a=()=>p(p(r)).text,c=()=>p(p(r)).platform,f=()=>p(p(r)).alt;var u=cs();u.__click=()=>n(p(s));var b=k(u),d=k(b),v=m(m(b,!0)),h=k(v),y=m(m(v,!0));G(y,()=>p(s)===j.selectedIndex,T=>{var Q=ls(),_=k(Q);D(()=>B(_,w("autocomplete.preview.select"))),g(T,Q)}),D(()=>{_e(u,`${`preview-item ${c()}-previews`??""} svelte-2x4f0c`),lt(u,"selected",p(s)===j.selectedIndex),P(d,"src",l()),P(d,"alt",f()),P(d,"title",f()),B(h,a())}),g(i,u)}),D(()=>lt(o,"ac-show",j.emojiList.length>0)),Ae(o,(i,r)=>Qe(i,r),()=>({to:".pusher-chat-widget-input",position:"prepend"})),g(e,o),F()}re(["click"]);var ms=(e,t,n)=>t(p(n).username),ps=O('<li><div class="dubinfo-image svelte-ujv5bp"><img alt="User Avatar" class="svelte-ujv5bp"></div> <button type="button" class="dubinfo-text svelte-ujv5bp"> </button></li>'),hs=O("<li><!></li>"),vs=O('<div role="none"><ul id="dubinfo-preview"><!></ul></div>');function Gt(e,t){z(t,!0);let n=ot(()=>Mr(t.dubType)),o=K(0),i=K(0),r=K("none"),s;function l(){const d=s.getBoundingClientRect();U(o,window.innerWidth-d.right),U(i,d.height-2),U(r,"block")}function a(d){d.relatedTarget&&d.relatedTarget.closest(".dubplus-dubs-container")||U(r,"none")}fe(()=>{s=document.querySelector(`.dubplus-${t.dubType}s-hover`),s?(s.addEventListener("mouseenter",l),s.addEventListener("mouseleave",a)):$(`Could not find hover target for ${t.dubType} in onMount`)}),Ft(()=>{s?(s.removeEventListener("mouseenter",l),s.removeEventListener("mouseleave",a)):$(`Could not find hover target for ${t.dubType} in onDestroy`)});function c(d){const v=document.querySelector("#chat-txt-message");v.value=`${v.value}@${d} `.trimStart(),v.focus()}var f=vs(),u=k(f),b=k(u);G(b,()=>S(n).length>0,d=>{var v=J(),h=I(v);Ne(h,65,()=>S(n),Ke,(y,T,Q)=>{var _=ps(),C=k(_),Ee=k(C);D(()=>P(Ee,"src",Nr(p(T).userid)));var ke=m(m(C,!0));ke.__click=[ms,c,T];var Pe=k(ke);D(()=>{_e(_,`${`preview-dubinfo-item users-previews dubplus-${t.dubType}-hover`??""} svelte-ujv5bp`),B(Pe,`@${p(T).username??""}`)}),g(y,_)}),g(d,v)},d=>{var v=hs(),h=k(v);G(h,()=>t.dubType==="updub"||t.dubType==="downdub",y=>{var T=Rn();D(()=>B(T,w("dubs-hover.no-votes",{dubType:t.dubType}))),g(y,T)},y=>{var T=Rn();D(()=>B(T,w("dubs-hover.no-grabs",{dubType:t.dubType}))),g(y,T)}),g(d,v)}),D(()=>{P(f,"id",`dubplus-${t.dubType}s-container`),_e(f,`${`dubplus-dubs-container dubplus-${t.dubType}s-container`??""} svelte-ujv5bp`),P(f,"style",`bottom: ${S(i)}px; right: ${S(o)}px; display: ${S(r)};`),_e(u,`${`dubinfo-show dubplus-${t.dubType}-hover`??""} svelte-ujv5bp`),lt(u,"dubplus-no-dubs",S(n).length===0)}),Ae(f,(d,v)=>Qe(d,v),()=>({to:"body"})),zn("mouseleave",f,()=>U(r,"none"),!1),g(e,f),F()}re(["click"]);let bt=200,gs="";const wt=100;function To(){return document.getElementById("snow-container")}function bs(){var t;const e=To();bt=Number(((t=e==null?void 0:e.dataset)==null?void 0:t.count)||bt)}function ws(e=200){e-=1;const t=To();t.innerHTML="";for(let n=0;n<e;n++){let o=document.createElement("div");o.className="snowflake",t.appendChild(o)}}function _s(){let e=document.getElementById("psjs-css");return e||(e=document.createElement("style"),e.id="psjs-css",document.head.appendChild(e),e)}function ys(e=""){const t=_s();t.innerHTML=e,document.head.appendChild(t)}function Es(e=100){return Math.floor(Math.random()*e)+1}function ks(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function Ss(e,t){return Math.random()*(t-e)+e}function xs(e=200){let t="snowflake",n=gs;for(let o=1;o<e;o++){let i=Math.random()*100,r=Math.random()*10,s=i+r,l=i+r/2,a=Ss(.3,.8),c=a*wt,f=Math.random(),u=ks(10,wt/10*3),b=Es(wt/10*3)*-1,d=Math.random();n+=`
      .${t}:nth-child(${o}) {
        opacity: ${d};
        transform: translate(${i}vw, -10px) scale(${f});
        animation: fall-${o} ${u}s ${b}s linear infinite;
      }
      @keyframes fall-${o} {
        ${a*100}% {
          transform: translate(${s}vw, ${c}vh) scale(${f});
        }
        to {
          transform: translate(${l}vw, ${wt}vh) scale(${f});
        }
      }
    `}ys(n)}function Xt(){bs(),xs(bt),ws(bt)}var Cs=O('<div id="snow-container" class="svelte-t6y8au"></div>');function Os(e,t){z(t,!1),fe(()=>{Xt(),window.addEventListener("resize",Xt)}),Ft(()=>{window.removeEventListener("resize",Xt)}),oe();var n=Cs();Ae(n,(o,i)=>Qe(o,i),()=>({to:"body"})),g(e,n),F()}var Ts=O('<li class="svelte-1j4s6el"><button type="button" class="svelte-1j4s6el"><span></span> <span class="dubplus-menu-label svelte-1j4s6el"> </span></button></li>');function Us(e,t){z(t,!0),fe(()=>{t.init&&t.init()});var n=Ts();D(()=>P(n,"title",w(t.description)));var o=k(n);o.__click=function(...l){const a=t.onClick;return a==null?void 0:a.apply(this,l)};var i=k(o),r=m(m(i,!0)),s=k(r);D(()=>B(s,w(t.label))),D(()=>{P(n,"id",t.id),_e(i,`${`fa fa-${t.icon}`??""} svelte-1j4s6el`)}),g(e,n),F()}re(["click"]);var Ds=O("<!> <!>",1);function Ms(e,t){z(t,!1),oe();var n=Ds(),o=I(n),i=De(()=>w("user-interface.title"));We(o,{settingsId:"user-interface",get name(){return S(i)}});var r=m(m(o,!0));Ve(r,{settingsId:"user-interface",children:(s,l)=>{var a=J(),c=I(a);Ne(c,1,()=>ts,Ke,(f,u,b)=>{var d=J(),v=I(d);G(v,()=>p(u).altIcon,h=>{var y=J(),T=I(y);Us(T,{get id(){return p(u).id},get label(){return p(u).label},get description(){return p(u).description},get icon(){return p(u).altIcon},get onClick(){return p(u).onClick},get init(){return p(u).init}}),g(h,y)},h=>{var y=J(),T=I(y);ft(T,{get id(){return p(u).id},get label(){return p(u).label},get description(){return p(u).description},get init(){return p(u).init},get customize(){return p(u).custom},onToggle:(Q,_)=>{Q?p(u).turnOn():p(u).turnOff(),_||ze("option",p(u).id,Q)}}),g(h,y)}),g(f,d)}),g(s,a)},$$slots:{default:!0}}),g(e,n),F()}var Is=O("<!> <!>",1);function Ls(e,t){z(t,!1),Oo.forEach(s=>{E.options[s.id]||(E.options[s.id]=!1)}),oe();var n=Is(),o=I(n),i=De(()=>w("settings.title"));We(o,{settingsId:"settings",get name(){return S(i)}});var r=m(m(o,!0));Ve(r,{settingsId:"settings",children:(s,l)=>{var a=J(),c=I(a);Ne(c,1,()=>Oo,Ke,(f,u,b)=>{var d=J(),v=I(d);ft(v,{get id(){return p(u).id},get label(){return p(u).label},get description(){return p(u).description},get init(){return p(u).init},get customize(){return p(u).custom},onToggle:(h,y)=>{h?p(u).turnOn():p(u).turnOff(),y||ze("option",p(u).id,h)}}),g(f,d)}),g(s,a)},$$slots:{default:!0}}),g(e,n),F()}var Ns=O("<!> <!>",1);function As(e,t){z(t,!1),oe();var n=Ns(),o=I(n),i=De(()=>w("customize.title"));We(o,{settingsId:"customize",get name(){return S(i)}});var r=m(m(o,!0));Ve(r,{settingsId:"customize",children:(s,l)=>{var a=J(),c=I(a);Ne(c,1,()=>ns,Ke,(f,u,b)=>{var d=J(),v=I(d);ft(v,{get id(){return p(u).id},get label(){return p(u).label},get description(){return p(u).description},get init(){return p(u).init},get customize(){return p(u).custom},onToggle:(h,y)=>{h?p(u).turnOn():p(u).turnOff(),y||ze("option",p(u).id,h)}}),g(f,d)}),g(s,a)},$$slots:{default:!0}}),g(e,n),F()}var Qs=O("<!> <!> <!>",1),zs=O('<!> <!> <!> <!> <!> <!> <section class="dubplus-menu svelte-1rqspoo"><p class="dubplus-menu-header svelte-1rqspoo"> </p> <!> <!> <!> <!> <!></section> <!>',1);function Fs(e,t){z(t,!1),fe(()=>{ct("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","dp-font-awesome"),document.querySelector("html").classList.add("dubplus")}),oe();var n=zs(),o=I(n);Ki(o,{});var i=m(m(o,!0));us(i,{});var r=m(m(i,!0));ss(r,{});var s=m(m(r,!0));G(s,()=>E.options.autocomplete,Q=>{var _=J(),C=I(_);fs(C,{}),g(Q,_)});var l=m(m(s,!0));G(l,()=>E.options["dubs-hover"],Q=>{var _=Qs(),C=I(_);Gt(C,{dubType:"updub"});var Ee=m(m(C,!0));Gt(Ee,{dubType:"downdub"});var ke=m(m(Ee,!0));Gt(ke,{dubType:"grab"}),g(Q,_)});var a=m(m(l,!0));G(a,()=>E.options.snow,Q=>{var _=J(),C=I(_);Os(C,{}),g(Q,_)});var c=m(m(a,!0)),f=k(c),u=k(f);D(()=>B(u,w("Menu.title")));var b=m(m(f,!0));is(b,{});var d=m(m(b,!0));Ms(d,{});var v=m(m(d,!0));Ls(v,{});var h=m(m(v,!0));As(h,{});var y=m(m(h,!0));ir(y,{});var T=m(m(c,!0));Gn(T,{}),g(e,n),F()}function Ps(e,t){z(t,!0);let n=K("loading");function o(){Hn.current=Qi(navigator.language||"en")}Wi("/dist/dubplus.min.css","dubplus-css"),fe(()=>{o(),window.addEventListener("languagechange",o)}),Ft(()=>{window.removeEventListener("languagechange",o)}),Li(["QueUp.session.id","QueUp.room.chat","QueUp.Events","QueUp.room.player","QueUp.helpers.cookie","QueUp.room.model","QueUp.room.users"]).then(()=>{U(n,"ready")}).catch(()=>{var a,c;(c=(a=window.QueUp)==null?void 0:a.session)!=null&&c.id?U(n,"error"):U(n,"loggedout")});function r(a){x.title=w("Error.modal.title"),x.content=a,x.onCancel=()=>{x.open=!1},x.open=!0}be(()=>{S(n)==="loggedout"?r(w("Error.modal.loggedout")):S(n)==="error"&&r(w("Error.unknown"))});var s=J(),l=I(s);G(l,()=>S(n)==="loading",a=>{var c=J(),f=I(c);Fi(f,{}),g(a,c)},a=>{var c=J(),f=I(c);G(f,()=>S(n)==="ready",u=>{var b=J(),d=I(b);Fs(d,{}),g(u,b)},u=>{var b=J(),d=I(b);Gn(d,{}),g(u,b)},!0),g(a,c)}),g(e,s),F()}let He=document.getElementById("dubplus-container");return He||(He=document.createElement("div"),He.id="dubplus-container",document.body.appendChild(He)),gi(Ps,{target:He})}();
